; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\snmp_data_file.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\snmp_data_file.d --feedback=.\EXE\UKU_VD_WG12232L3.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_VD -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DWG12232L3 --omf_browse=.\EXE\snmp_data_file.crf snmp_data_file.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  snmp_data PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4dff              LDR      r5,|L1.1028|
000006  8828              LDRH     r0,[r5,#0]  ; net_U
000008  4cff              LDR      r4,|L1.1032|
00000a  82a0              STRH     r0,[r4,#0x14]
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  48ff              LDR      r0,|L1.1036|
00000e  8800              LDRH     r0,[r0,#0]  ; net_F3
000010  82e0              STRH     r0,[r4,#0x16]
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
000012  48ff              LDR      r0,|L1.1040|
000014  8800              LDRH     r0,[r0,#0]  ; net_Ua
000016  8320              STRH     r0,[r4,#0x18]
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
000018  48fe              LDR      r0,|L1.1044|
00001a  8800              LDRH     r0,[r0,#0]  ; net_Ub
00001c  8360              STRH     r0,[r4,#0x1a]
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
00001e  48fe              LDR      r0,|L1.1048|
000020  8800              LDRH     r0,[r0,#0]  ; net_Uc
000022  83a0              STRH     r0,[r4,#0x1c]
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
000024  48fd              LDR      r0,|L1.1052|
000026  8800              LDRH     r0,[r0,#0]  ; load_U
000028  83e0              STRH     r0,[r4,#0x1e]
;;;304    snmp_load_current=load_I;
00002a  48fd              LDR      r0,|L1.1056|
00002c  8800              LDRH     r0,[r0,#0]  ; load_I
00002e  8420              STRH     r0,[r4,#0x20]
;;;305    snmp_numofbat=NUMBAT;
000030  48fc              LDR      r0,|L1.1060|
000032  8800              LDRH     r0,[r0,#0]  ; NUMBAT
000034  80e0              STRH     r0,[r4,#6]
;;;306    snmp_numofbps=NUMIST;
000036  48fc              LDR      r0,|L1.1064|
000038  8800              LDRH     r0,[r0,#0]  ; NUMIST
00003a  8120              STRH     r0,[r4,#8]
;;;307    snmp_numofinv=NUMINV;
00003c  48fb              LDR      r0,|L1.1068|
00003e  8800              LDRH     r0,[r0,#0]  ; NUMINV
000040  8160              STRH     r0,[r4,#0xa]
;;;308    snmp_numofavt=NUMAVT;
000042  48fb              LDR      r0,|L1.1072|
000044  8800              LDRH     r0,[r0,#0]  ; NUMAVT
000046  81a0              STRH     r0,[r4,#0xc]
;;;309    snmp_numofdt=NUMDT;
000048  48fa              LDR      r0,|L1.1076|
00004a  8800              LDRH     r0,[r0,#0]  ; NUMDT
00004c  81e0              STRH     r0,[r4,#0xe]
;;;310    snmp_numofsk=NUMSK;
00004e  48fa              LDR      r0,|L1.1080|
000050  8800              LDRH     r0,[r0,#0]  ; NUMSK
000052  8220              STRH     r0,[r4,#0x10]
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
000054  f6406002          MOV      r0,#0xe02
000058  f7fffffe          BL       lc640_read_int
00005c  8260              STRH     r0,[r4,#0x12]
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
00005e  48f7              LDR      r0,|L1.1084|
000060  8801              LDRH     r1,[r0,#0]  ; Uvv_eb2
000062  8521              STRH     r1,[r4,#0x28]
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
000064  8841              LDRH     r1,[r0,#2]  ; Uvv_eb2
000066  8561              STRH     r1,[r4,#0x2a]
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
000068  8880              LDRH     r0,[r0,#4]  ; Uvv_eb2
00006a  85a0              STRH     r0,[r4,#0x2c]
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
00006c  48f4              LDR      r0,|L1.1088|
00006e  8801              LDRH     r1,[r0,#0]  ; Upes_eb2
000070  85e1              STRH     r1,[r4,#0x2e]
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
000072  8841              LDRH     r1,[r0,#2]  ; Upes_eb2
000074  8621              STRH     r1,[r4,#0x30]
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
000076  8880              LDRH     r0,[r0,#4]  ; Upes_eb2
000078  8660              STRH     r0,[r4,#0x32]
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
00007a  48f2              LDR      r0,|L1.1092|
00007c  f1040180          ADD      r1,r4,#0x80
000080  6800              LDR      r0,[r0,#0]  ; power_summary
000082  6288              STR      r0,[r1,#0x28]  ; snmp_energy_total_energy
;;;326    snmp_energy_current_energy=power_current;
000084  48f0              LDR      r0,|L1.1096|
000086  8800              LDRH     r0,[r0,#0]  ; power_current
000088  86e0              STRH     r0,[r4,#0x36]
;;;327    snmp_energy_input_voltage=net_U;
00008a  8828              LDRH     r0,[r5,#0]  ; net_U
00008c  86a0              STRH     r0,[r4,#0x34]
;;;328    
;;;329    snmp_bat_number[0]=1;
00008e  f1010608          ADD      r6,r1,#8
000092  f04f0001          MOV      r0,#1
000096  8030              STRH     r0,[r6,#0]
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
000098  4aec              LDR      r2,|L1.1100|
00009a  f104088c          ADD      r8,r4,#0x8c
00009e  8851              LDRH     r1,[r2,#2]  ; bat
0000a0  f8a81000          STRH     r1,[r8,#0]
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
0000a4  f10409a4          ADD      r9,r4,#0xa4
0000a8  8891              LDRH     r1,[r2,#4]  ; bat
0000aa  f8a91000          STRH     r1,[r9,#0]
;;;332    snmp_bat_current[0]=bat[0]._Ib;
0000ae  f1040590          ADD      r5,r4,#0x90
0000b2  8911              LDRH     r1,[r2,#8]  ; bat
0000b4  8029              STRH     r1,[r5,#0]
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
0000b6  49e6              LDR      r1,|L1.1104|
0000b8  8809              LDRH     r1,[r1,#0]  ; AUSW_MAIN
0000ba  f5a143ac          SUB      r3,r1,#0x5600
0000be  3b2f              SUBS     r3,r3,#0x2f
0000c0  d001              BEQ      |L1.198|
0000c2  3328              ADDS     r3,r3,#0x28
0000c4  d107              BNE      |L1.214|
                  |L1.198|
0000c6  49e3              LDR      r1,|L1.1108|
0000c8  f89113c0          LDRB     r1,[r1,#0x3c0]  ; bps
0000cc  2909              CMP      r1,#9
0000ce  d102              BNE      |L1.214|
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
0000d0  49e1              LDR      r1,|L1.1112|
0000d2  8809              LDRH     r1,[r1,#0]  ; Ib_ips_termokompensat
0000d4  8029              STRH     r1,[r5,#0]
                  |L1.214|
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
0000d6  49cc              LDR      r1,|L1.1032|
0000d8  8953              LDRH     r3,[r2,#0xa]  ; bat
0000da  3194              ADDS     r1,r1,#0x94
0000dc  800b              STRH     r3,[r1,#0]
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
0000de  f8dfc37c          LDR      r12,|L1.1116|
0000e2  4bc9              LDR      r3,|L1.1032|
0000e4  f2455e55          MOV      lr,#0x5555
0000e8  f9bc1000          LDRSH    r1,[r12,#0]  ; BAT_C_REAL
0000ec  3398              ADDS     r3,r3,#0x98
0000ee  4571              CMP      r1,lr
0000f0  d103              BNE      |L1.250|
0000f2  49db              LDR      r1,|L1.1120|
0000f4  8809              LDRH     r1,[r1,#0]  ; BAT_C_NOM
0000f6  8019              STRH     r1,[r3,#0]
0000f8  e000              B        |L1.252|
                  |L1.250|
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
0000fa  8019              STRH     r1,[r3,#0]
                  |L1.252|
;;;344    snmp_bat_charge[0]=bat[0]._zar;
0000fc  f8dfa308          LDR      r10,|L1.1032|
000100  8a11              LDRH     r1,[r2,#0x10]  ; bat
000102  f10a0a9c          ADD      r10,r10,#0x9c
000106  f8aa1000          STRH     r1,[r10,#0]
;;;345    snmp_bat_status[0]=bat[0]._av;
00010a  f10a0404          ADD      r4,r10,#4
00010e  f892103d          LDRB     r1,[r2,#0x3d]  ; bat
000112  8021              STRH     r1,[r4,#0]
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
000114  f8dfb34c          LDR      r11,|L1.1124|
000118  21ff              MOVS     r1,#0xff
00011a  f89b7000          LDRB     r7,[r11,#0]  ; BAT_IS_ON
00011e  2f55              CMP      r7,#0x55
000120  d000              BEQ      |L1.292|
000122  8021              STRH     r1,[r4,#0]
                  |L1.292|
;;;347    
;;;348    snmp_bat_number[1]=2;
000124  f04f0702          MOV      r7,#2
000128  8077              STRH     r7,[r6,#2]
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
00012a  f8326f4e          LDRH     r6,[r2,#0x4e]!  ; bat
00012e  f8a86002          STRH     r6,[r8,#2]
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
000132  8856              LDRH     r6,[r2,#2]  ; bat
000134  f8a96002          STRH     r6,[r9,#2]
;;;351    snmp_bat_current[1]=bat[1]._Ib;
000138  88d6              LDRH     r6,[r2,#6]  ; bat
00013a  806e              STRH     r6,[r5,#2]
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
00013c  4db2              LDR      r5,|L1.1032|
00013e  8916              LDRH     r6,[r2,#8]  ; bat
000140  f1050594          ADD      r5,r5,#0x94
000144  f1a2024e          SUB      r2,r2,#0x4e
000148  806e              STRH     r6,[r5,#2]
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
00014a  f9bc5002          LDRSH    r5,[r12,#2]  ; BAT_C_REAL
00014e  4575              CMP      r5,lr
000150  d103              BNE      |L1.346|
000152  4dc3              LDR      r5,|L1.1120|
000154  886d              LDRH     r5,[r5,#2]  ; BAT_C_NOM
000156  805d              STRH     r5,[r3,#2]
000158  e000              B        |L1.348|
                  |L1.346|
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
00015a  805d              STRH     r5,[r3,#2]
                  |L1.348|
;;;355    snmp_bat_charge[1]=bat[1]._zar;
00015c  f8b2305c          LDRH     r3,[r2,#0x5c]  ; bat
000160  f8aa3002          STRH     r3,[r10,#2]
;;;356    snmp_bat_status[1]=bat[1]._av;
000164  f8922089          LDRB     r2,[r2,#0x89]  ; bat
000168  8062              STRH     r2,[r4,#2]
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
00016a  f89b2001          LDRB     r2,[r11,#1]  ; BAT_IS_ON
00016e  2a55              CMP      r2,#0x55
000170  d000              BEQ      |L1.372|
000172  8061              STRH     r1,[r4,#2]
                  |L1.372|
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
000174  f8df92f0          LDR      r9,|L1.1128|
000178  f8a90000          STRH     r0,[r9,#0]
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
00017c  4bb5              LDR      r3,|L1.1108|
00017e  f1090510          ADD      r5,r9,#0x10
000182  69da              LDR      r2,[r3,#0x1c]  ; bps
000184  802a              STRH     r2,[r5,#0]
;;;363    snmp_bps_current[0]=bps[0]._Ii;
000186  f1050610          ADD      r6,r5,#0x10
00018a  6a5a              LDR      r2,[r3,#0x24]  ; bps
00018c  8032              STRH     r2,[r6,#0]
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
00018e  f1050c20          ADD      r12,r5,#0x20
000192  6a9a              LDR      r2,[r3,#0x28]  ; bps
000194  f8ac2000          STRH     r2,[r12,#0]
;;;365    snmp_bps_stat[0]=bps[0]._av;
000198  f1050430          ADD      r4,r5,#0x30
00019c  785a              LDRB     r2,[r3,#1]  ; bps
00019e  8022              STRH     r2,[r4,#0]
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
0001a0  4aa1              LDR      r2,|L1.1064|
0001a2  f9b22000          LDRSH    r2,[r2,#0]  ; NUMIST
0001a6  2a00              CMP      r2,#0
0001a8  dc00              BGT      |L1.428|
0001aa  8021              STRH     r1,[r4,#0]
                  |L1.428|
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
0001ac  f8a97002          STRH     r7,[r9,#2]
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
0001b0  f8d38094          LDR      r8,[r3,#0x94]  ; bps
0001b4  f8a58002          STRH     r8,[r5,#2]
;;;377    snmp_bps_current[1]=bps[1]._Ii;
0001b8  f8d3809c          LDR      r8,[r3,#0x9c]  ; bps
0001bc  f8a68002          STRH     r8,[r6,#2]
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
0001c0  f8d380a0          LDR      r8,[r3,#0xa0]  ; bps
0001c4  f8ac8002          STRH     r8,[r12,#2]
;;;379    snmp_bps_stat[1]=bps[1]._av;
0001c8  f8938079          LDRB     r8,[r3,#0x79]  ; bps
0001cc  f8a48002          STRH     r8,[r4,#2]
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
0001d0  2a01              CMP      r2,#1
0001d2  dc00              BGT      |L1.470|
0001d4  8061              STRH     r1,[r4,#2]
                  |L1.470|
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
0001d6  f04f0803          MOV      r8,#3
0001da  f8a98004          STRH     r8,[r9,#4]
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
0001de  f8d3a10c          LDR      r10,[r3,#0x10c]  ; bps
0001e2  f8a5a004          STRH     r10,[r5,#4]
;;;390    snmp_bps_current[2]=bps[2]._Ii;
0001e6  f8d3a114          LDR      r10,[r3,#0x114]  ; bps
0001ea  f8a6a004          STRH     r10,[r6,#4]
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
0001ee  f8d3a118          LDR      r10,[r3,#0x118]  ; bps
0001f2  f8aca004          STRH     r10,[r12,#4]
;;;392    snmp_bps_stat[2]=bps[2]._av;
0001f6  f893a0f1          LDRB     r10,[r3,#0xf1]  ; bps
0001fa  f8a4a004          STRH     r10,[r4,#4]
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
0001fe  2a02              CMP      r2,#2
000200  dc00              BGT      |L1.516|
000202  80a1              STRH     r1,[r4,#4]
                  |L1.516|
;;;394    
;;;395    snmp_bps_number[3]=4;
000204  f04f0a04          MOV      r10,#4
000208  f8a9a006          STRH     r10,[r9,#6]
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
00020c  f8d3a184          LDR      r10,[r3,#0x184]  ; bps
000210  f8a5a006          STRH     r10,[r5,#6]
;;;397    snmp_bps_current[3]=bps[3]._Ii;
000214  f8d3a18c          LDR      r10,[r3,#0x18c]  ; bps
000218  f8a6a006          STRH     r10,[r6,#6]
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
00021c  f8d3a190          LDR      r10,[r3,#0x190]  ; bps
000220  f8aca006          STRH     r10,[r12,#6]
;;;399    snmp_bps_stat[3]=bps[3]._av;
000224  f893a169          LDRB     r10,[r3,#0x169]  ; bps
000228  f8a4a006          STRH     r10,[r4,#6]
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
00022c  2a03              CMP      r2,#3
00022e  dc00              BGT      |L1.562|
000230  80e1              STRH     r1,[r4,#6]
                  |L1.562|
;;;401    
;;;402    snmp_bps_number[4]=5;
000232  f04f0a05          MOV      r10,#5
000236  f8a9a008          STRH     r10,[r9,#8]
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
00023a  f8d3a1fc          LDR      r10,[r3,#0x1fc]  ; bps
00023e  f8a5a008          STRH     r10,[r5,#8]
;;;404    snmp_bps_current[4]=bps[4]._Ii;
000242  f8d3a204          LDR      r10,[r3,#0x204]  ; bps
000246  f8a6a008          STRH     r10,[r6,#8]
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
00024a  f8d3a208          LDR      r10,[r3,#0x208]  ; bps
00024e  f8aca008          STRH     r10,[r12,#8]
;;;406    snmp_bps_stat[4]=bps[4]._av;
000252  f893a1e1          LDRB     r10,[r3,#0x1e1]  ; bps
000256  f8a4a008          STRH     r10,[r4,#8]
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
00025a  2a04              CMP      r2,#4
00025c  dc00              BGT      |L1.608|
00025e  8121              STRH     r1,[r4,#8]
                  |L1.608|
;;;408    
;;;409    snmp_bps_number[5]=6;
000260  f04f0a06          MOV      r10,#6
000264  f8a9a00a          STRH     r10,[r9,#0xa]
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
000268  f8d3a274          LDR      r10,[r3,#0x274]  ; bps
00026c  f8a5a00a          STRH     r10,[r5,#0xa]
;;;411    snmp_bps_current[5]=bps[5]._Ii;
000270  f8d3a27c          LDR      r10,[r3,#0x27c]  ; bps
000274  f8a6a00a          STRH     r10,[r6,#0xa]
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
000278  f8d3a280          LDR      r10,[r3,#0x280]  ; bps
00027c  f8aca00a          STRH     r10,[r12,#0xa]
;;;413    snmp_bps_stat[5]=bps[5]._av;
000280  f893a259          LDRB     r10,[r3,#0x259]  ; bps
000284  f8a4a00a          STRH     r10,[r4,#0xa]
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
000288  2a05              CMP      r2,#5
00028a  dc00              BGT      |L1.654|
00028c  8161              STRH     r1,[r4,#0xa]
                  |L1.654|
;;;415    
;;;416    snmp_bps_number[6]=7;
00028e  f04f0a07          MOV      r10,#7
000292  f8a9a00c          STRH     r10,[r9,#0xc]
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
000296  f8d3a2ec          LDR      r10,[r3,#0x2ec]  ; bps
00029a  f8a5a00c          STRH     r10,[r5,#0xc]
;;;418    snmp_bps_current[6]=bps[6]._Ii;
00029e  f8d3a2f4          LDR      r10,[r3,#0x2f4]  ; bps
0002a2  f8a6a00c          STRH     r10,[r6,#0xc]
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
0002a6  f8d3a2f8          LDR      r10,[r3,#0x2f8]  ; bps
0002aa  f8aca00c          STRH     r10,[r12,#0xc]
;;;420    snmp_bps_stat[6]=bps[6]._av;
0002ae  f893a2d1          LDRB     r10,[r3,#0x2d1]  ; bps
0002b2  f8a4a00c          STRH     r10,[r4,#0xc]
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
0002b6  2a06              CMP      r2,#6
0002b8  dc00              BGT      |L1.700|
0002ba  81a1              STRH     r1,[r4,#0xc]
                  |L1.700|
;;;422    
;;;423    snmp_bps_number[7]=8;
0002bc  f04f0a08          MOV      r10,#8
0002c0  f8a9a00e          STRH     r10,[r9,#0xe]
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
0002c4  f5037352          ADD      r3,r3,#0x348
0002c8  f8d3901c          LDR      r9,[r3,#0x1c]  ; bps
0002cc  f8a5900e          STRH     r9,[r5,#0xe]
;;;425    snmp_bps_current[7]=bps[7]._Ii;
0002d0  6a5d              LDR      r5,[r3,#0x24]  ; bps
0002d2  81f5              STRH     r5,[r6,#0xe]
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
0002d4  6a9d              LDR      r5,[r3,#0x28]  ; bps
0002d6  f8ac500e          STRH     r5,[r12,#0xe]
;;;427    snmp_bps_stat[7]=bps[7]._av;
0002da  785b              LDRB     r3,[r3,#1]  ; bps
0002dc  81e3              STRH     r3,[r4,#0xe]
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
0002de  2a07              CMP      r2,#7
0002e0  dc00              BGT      |L1.740|
0002e2  81e1              STRH     r1,[r4,#0xe]
                  |L1.740|
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
0002e4  4a48              LDR      r2,|L1.1032|
0002e6  32c0              ADDS     r2,r2,#0xc0
0002e8  8010              STRH     r0,[r2,#0]
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
0002ea  4960              LDR      r1,|L1.1132|
0002ec  1d93              ADDS     r3,r2,#6
0002ee  698c              LDR      r4,[r1,#0x18]  ; inv
0002f0  801c              STRH     r4,[r3,#0]
;;;434    snmp_inv_current[0]=inv[0]._Ii;
0002f2  1d9c              ADDS     r4,r3,#6
0002f4  69cd              LDR      r5,[r1,#0x1c]  ; inv
0002f6  8025              STRH     r5,[r4,#0]
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
0002f8  1da5              ADDS     r5,r4,#6
0002fa  6a0e              LDR      r6,[r1,#0x20]  ; inv
0002fc  802e              STRH     r6,[r5,#0]
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
0002fe  1dae              ADDS     r6,r5,#6
000300  f891c046          LDRB     r12,[r1,#0x46]  ; inv
000304  f8a6c000          STRH     r12,[r6,#0]
;;;437    
;;;438    snmp_inv_number[1]=2;
000308  8057              STRH     r7,[r2,#2]
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
00030a  f8d1c078          LDR      r12,[r1,#0x78]  ; inv
00030e  f8a3c002          STRH     r12,[r3,#2]
;;;440    snmp_inv_current[1]=inv[1]._Ii;
000312  f8d1c07c          LDR      r12,[r1,#0x7c]  ; inv
000316  f8a4c002          STRH     r12,[r4,#2]
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
00031a  f8d1c080          LDR      r12,[r1,#0x80]  ; inv
00031e  f8a5c002          STRH     r12,[r5,#2]
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
000322  f891c0a6          LDRB     r12,[r1,#0xa6]  ; inv
000326  f8a6c002          STRH     r12,[r6,#2]
;;;443    
;;;444    snmp_inv_number[2]=3;
00032a  f8a28004          STRH     r8,[r2,#4]
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
00032e  f8d120d8          LDR      r2,[r1,#0xd8]  ; inv
000332  809a              STRH     r2,[r3,#4]
;;;446    snmp_inv_current[2]=inv[2]._Ii;
000334  f8d120dc          LDR      r2,[r1,#0xdc]  ; inv
000338  80a2              STRH     r2,[r4,#4]
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
00033a  f8d120e0          LDR      r2,[r1,#0xe0]  ; inv
00033e  80aa              STRH     r2,[r5,#4]
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
000340  f8911106          LDRB     r1,[r1,#0x106]  ; inv
000344  80b1              STRH     r1,[r6,#4]
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
000346  f1a30b1a          SUB      r11,r3,#0x1a
00034a  f88b0000          STRB     r0,[r11,#0]
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
00034e  4d46              LDR      r5,|L1.1128|
000350  a147              ADR      r1,|L1.1136|
000352  3588              ADDS     r5,r5,#0x88
000354  680a              LDR      r2,[r1,#0]
000356  646a              STR      r2,[r5,#0x44]  ; snmp_sk_name
000358  684a              LDR      r2,[r1,#4]
00035a  64aa              STR      r2,[r5,#0x48]  ; snmp_sk_name
00035c  8909              LDRH     r1,[r1,#8]
00035e  f8a5104c          STRH     r1,[r5,#0x4c]
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
000362  f8df9114          LDR      r9,|L1.1144|
;;;457    else snmp_sk_aktiv[0]=0;
000366  2100              MOVS     r1,#0
000368  f1a4021c          SUB      r2,r4,#0x1c           ;456
00036c  f8993000          LDRB     r3,[r9,#0]            ;456  ; sk_stat
000370  2b01              CMP      r3,#1                 ;456
000372  d045              BEQ      |L1.1024|
000374  7011              STRB     r1,[r2,#0]
                  |L1.886|
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
000376  f8dfa104          LDR      r10,|L1.1148|
00037a  4b23              LDR      r3,|L1.1032|
00037c  f8ba4000          LDRH     r4,[r10,#0]  ; SK_SIGN
000380  33b4              ADDS     r3,r3,#0xb4
000382  2c00              CMP      r4,#0
000384  d03d              BEQ      |L1.1026|
;;;459    else snmp_sk_alarm_aktiv[0]=0;
000386  7019              STRB     r1,[r3,#0]
                  |L1.904|
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
000388  f8dfe0f4          LDR      lr,|L1.1152|
00038c  4c1e              LDR      r4,|L1.1032|
00038e  f89e6000          LDRB     r6,[lr,#0]  ; sk_av_stat
000392  34b8              ADDS     r4,r4,#0xb8
000394  2e01              CMP      r6,#1
000396  d07d              BEQ      |L1.1172|
;;;461    else                     snmp_sk_alarm[0]=0;
000398  7021              STRB     r1,[r4,#0]
                  |L1.922|
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
00039a  f88b7001          STRB     r7,[r11,#1]
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
00039e  a639              ADR      r6,|L1.1156|
0003a0  f8d6c000          LDR      r12,[r6,#0]
0003a4  f8c5c058          STR      r12,[r5,#0x58]  ; snmp_sk_name
0003a8  f8d6c004          LDR      r12,[r6,#4]
0003ac  f8c5c05c          STR      r12,[r5,#0x5c]  ; snmp_sk_name
0003b0  8936              LDRH     r6,[r6,#8]
0003b2  f8a56060          STRH     r6,[r5,#0x60]
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
0003b6  f8996001          LDRB     r6,[r9,#1]  ; sk_stat
0003ba  2e01              CMP      r6,#1
0003bc  d06b              BEQ      |L1.1174|
;;;467    else snmp_sk_aktiv[1]=0;
0003be  7051              STRB     r1,[r2,#1]
                  |L1.960|
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
0003c0  f8ba6002          LDRH     r6,[r10,#2]  ; SK_SIGN
0003c4  2e00              CMP      r6,#0
0003c6  d067              BEQ      |L1.1176|
;;;469    else snmp_sk_alarm_aktiv[1]=0;
0003c8  7059              STRB     r1,[r3,#1]
                  |L1.970|
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
0003ca  f89e6001          LDRB     r6,[lr,#1]  ; sk_av_stat
0003ce  2e01              CMP      r6,#1
0003d0  d07d              BEQ      |L1.1230|
;;;471    else                     snmp_sk_alarm[1]=0;
0003d2  7061              STRB     r1,[r4,#1]
                  |L1.980|
;;;472    
;;;473    snmp_sk_number[2]=3;
0003d4  f88b8002          STRB     r8,[r11,#2]
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
0003d8  a62c              ADR      r6,|L1.1164|
0003da  f8d6c000          LDR      r12,[r6,#0]
0003de  f8c5c06c          STR      r12,[r5,#0x6c]  ; snmp_sk_name
0003e2  f8d6c004          LDR      r12,[r6,#4]
0003e6  f8c5c070          STR      r12,[r5,#0x70]  ; snmp_sk_name
0003ea  8936              LDRH     r6,[r6,#8]
0003ec  f8a56074          STRH     r6,[r5,#0x74]
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
0003f0  f8995002          LDRB     r5,[r9,#2]  ; sk_stat
0003f4  2d01              CMP      r5,#1
0003f6  d06b              BEQ      |L1.1232|
;;;476    else snmp_sk_aktiv[2]=0;
0003f8  7091              STRB     r1,[r2,#2]
                  |L1.1018|
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
0003fa  f8ba5004          LDRH     r5,[r10,#4]  ; SK_SIGN
0003fe  e04c              B        |L1.1178|
                  |L1.1024|
000400  e11c              B        |L1.1596|
                  |L1.1026|
000402  e11d              B        |L1.1600|
                  |L1.1028|
                          DCD      net_U
                  |L1.1032|
                          DCD      ||.data||
                  |L1.1036|
                          DCD      net_F3
                  |L1.1040|
                          DCD      net_Ua
                  |L1.1044|
                          DCD      net_Ub
                  |L1.1048|
                          DCD      net_Uc
                  |L1.1052|
                          DCD      load_U
                  |L1.1056|
                          DCD      load_I
                  |L1.1060|
                          DCD      NUMBAT
                  |L1.1064|
                          DCD      NUMIST
                  |L1.1068|
                          DCD      NUMINV
                  |L1.1072|
                          DCD      NUMAVT
                  |L1.1076|
                          DCD      NUMDT
                  |L1.1080|
                          DCD      NUMSK
                  |L1.1084|
                          DCD      Uvv_eb2
                  |L1.1088|
                          DCD      Upes_eb2
                  |L1.1092|
                          DCD      power_summary
                  |L1.1096|
                          DCD      power_current
                  |L1.1100|
                          DCD      bat
                  |L1.1104|
                          DCD      AUSW_MAIN
                  |L1.1108|
                          DCD      bps
                  |L1.1112|
                          DCD      Ib_ips_termokompensat
                  |L1.1116|
                          DCD      BAT_C_REAL
                  |L1.1120|
                          DCD      BAT_C_NOM
                  |L1.1124|
                          DCD      BAT_IS_ON
                  |L1.1128|
                          DCD      ||.bss||+0x78
                  |L1.1132|
                          DCD      inv
                  |L1.1136|
000470  446f6f72          DCB      "Door",0
000474  00      
000475  00                DCB      0
000476  00                DCB      0
000477  00                DCB      0
                  |L1.1144|
                          DCD      sk_stat
                  |L1.1148|
                          DCD      SK_SIGN
                  |L1.1152|
                          DCD      sk_av_stat
                  |L1.1156|
000484  536d6f6b          DCB      "Smoke",0
000488  6500    
00048a  00                DCB      0
00048b  00                DCB      0
                  |L1.1164|
00048c  53686f63          DCB      "Shock",0
000490  6b00    
000492  00                DCB      0
000493  00                DCB      0
                  |L1.1172|
000494  e0d6              B        |L1.1604|
                  |L1.1174|
000496  e0d7              B        |L1.1608|
                  |L1.1176|
000498  e0d8              B        |L1.1612|
                  |L1.1178|
00049a  2d00              CMP      r5,#0
00049c  d07e              BEQ      |L1.1436|
;;;478    else snmp_sk_alarm_aktiv[2]=0;
00049e  7099              STRB     r1,[r3,#2]
                  |L1.1184|
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
0004a0  f89e5002          LDRB     r5,[lr,#2]  ; sk_av_stat
0004a4  46f4              MOV      r12,lr
0004a6  2d01              CMP      r5,#1
0004a8  d079              BEQ      |L1.1438|
;;;480    else                     snmp_sk_alarm[2]=0;
0004aa  70a1              STRB     r1,[r4,#2]
                  |L1.1196|
;;;481    
;;;482    snmp_sk_number[3]=4;
0004ac  f04f0504          MOV      r5,#4
0004b0  f88b5003          STRB     r5,[r11,#3]
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
0004b4  4dfa              LDR      r5,|L1.2208|
0004b6  a6fb              ADR      r6,|L1.2212|
0004b8  f8d6b000          LDR      r11,[r6,#0]
0004bc  f8c5b000          STR      r11,[r5,#0]  ; snmp_sk_name
0004c0  f8d6b004          LDR      r11,[r6,#4]
0004c4  f8c5b004          STR      r11,[r5,#4]  ; snmp_sk_name
0004c8  8936              LDRH     r6,[r6,#8]
0004ca  812e              STRH     r6,[r5,#8]
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
0004cc  e001              B        |L1.1234|
                  |L1.1230|
0004ce  e0bf              B        |L1.1616|
                  |L1.1232|
0004d0  e0c0              B        |L1.1620|
                  |L1.1234|
0004d2  f8995003          LDRB     r5,[r9,#3]  ; sk_stat
0004d6  2d01              CMP      r5,#1
0004d8  d07d              BEQ      |L1.1494|
;;;485    else snmp_sk_aktiv[3]=0;
0004da  70d1              STRB     r1,[r2,#3]
                  |L1.1244|
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
0004dc  f8ba2006          LDRH     r2,[r10,#6]  ; SK_SIGN
0004e0  2a00              CMP      r2,#0
0004e2  d079              BEQ      |L1.1496|
;;;487    else snmp_sk_alarm_aktiv[3]=0;
0004e4  70d9              STRB     r1,[r3,#3]
                  |L1.1254|
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
0004e6  f89c2003          LDRB     r2,[r12,#3]  ; sk_av_stat
0004ea  2a01              CMP      r2,#1
0004ec  d075              BEQ      |L1.1498|
;;;489    else                     snmp_sk_alarm[3]=0;
0004ee  70e1              STRB     r1,[r4,#3]
                  |L1.1264|
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
0004f0  4aee              LDR      r2,|L1.2220|
0004f2  8813              LDRH     r3,[r2,#0]  ; t_box
0004f4  4aee              LDR      r2,|L1.2224|
0004f6  84d3              STRH     r3,[r2,#0x26]
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
0004f8  4bee              LDR      r3,|L1.2228|
0004fa  881b              LDRH     r3,[r3,#0]  ; TBOXMAX
0004fc  8513              STRH     r3,[r2,#0x28]
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
0004fe  4bee              LDR      r3,|L1.2232|
000500  881b              LDRH     r3,[r3,#0]  ; TBOXVENTON
000502  8553              STRH     r3,[r2,#0x2a]
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
000504  4bed              LDR      r3,|L1.2236|
000506  881b              LDRH     r3,[r3,#0]  ; TBOXVENTOFF
000508  8593              STRH     r3,[r2,#0x2c]
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
00050a  4bed              LDR      r3,|L1.2240|
00050c  881b              LDRH     r3,[r3,#0]  ; TBOXWARMON
00050e  85d3              STRH     r3,[r2,#0x2e]
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
000510  4bec              LDR      r3,|L1.2244|
000512  881b              LDRH     r3,[r3,#0]  ; TBOXWARMOFF
000514  8613              STRH     r3,[r2,#0x30]
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
000516  4bec              LDR      r3,|L1.2248|
000518  881b              LDRH     r3,[r3,#0]  ; TLOADENABLE
00051a  8653              STRH     r3,[r2,#0x32]
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
00051c  4beb              LDR      r3,|L1.2252|
00051e  881b              LDRH     r3,[r3,#0]  ; TLOADDISABLE
000520  8693              STRH     r3,[r2,#0x34]
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
000522  4beb              LDR      r3,|L1.2256|
000524  881b              LDRH     r3,[r3,#0]  ; TBATENABLE
000526  86d3              STRH     r3,[r2,#0x36]
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
000528  4bea              LDR      r3,|L1.2260|
00052a  881b              LDRH     r3,[r3,#0]  ; TBATDISABLE
00052c  8713              STRH     r3,[r2,#0x38]
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
00052e  4bea              LDR      r3,|L1.2264|
000530  f9b35000          LDRSH    r5,[r3,#0]  ; t_ext
000534  8755              STRH     r5,[r2,#0x3a]
;;;506    snmp_dt_msan=t_ext[1];
000536  f9b36002          LDRSH    r6,[r3,#2]  ; t_ext
00053a  8796              STRH     r6,[r2,#0x3c]
;;;507    snmp_dt_epu=t_ext[2];
00053c  f9b3c004          LDRSH    r12,[r3,#4]  ; t_ext
000540  f8a2c03e          STRH     r12,[r2,#0x3e]
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
000544  4be5              LDR      r3,|L1.2268|
000546  881b              LDRH     r3,[r3,#0]  ; ZV_ON
000548  8013              STRH     r3,[r2,#0]
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
00054a  4be5              LDR      r3,|L1.2272|
00054c  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
00054e  8053              STRH     r3,[r2,#2]
;;;536    snmp_bat_test_time=TBAT;
000550  4be4              LDR      r3,|L1.2276|
000552  881b              LDRH     r3,[r3,#0]  ; TBAT
000554  8093              STRH     r3,[r2,#4]
;;;537    snmp_u_max=UMAX;
000556  4be4              LDR      r3,|L1.2280|
000558  881b              LDRH     r3,[r3,#0]  ; UMAX
00055a  80d3              STRH     r3,[r2,#6]
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
00055c  4be3              LDR      r3,|L1.2284|
00055e  881b              LDRH     r3,[r3,#0]  ; USIGN
000560  8113              STRH     r3,[r2,#8]
;;;542    snmp_u_min_power=UMN;
000562  4be3              LDR      r3,|L1.2288|
000564  881b              LDRH     r3,[r3,#0]  ; UMN
000566  8153              STRH     r3,[r2,#0xa]
;;;543    snmp_u_withouth_bat=U0B;
000568  4be2              LDR      r3,|L1.2292|
00056a  881b              LDRH     r3,[r3,#0]  ; U0B
00056c  8193              STRH     r3,[r2,#0xc]
;;;544    snmp_control_current=IKB;
00056e  4be2              LDR      r3,|L1.2296|
000570  881b              LDRH     r3,[r3,#0]  ; IKB
000572  81d3              STRH     r3,[r2,#0xe]
;;;545    snmp_max_charge_current=IZMAX;
000574  4be1              LDR      r3,|L1.2300|
000576  881b              LDRH     r3,[r3,#0]  ; IZMAX
000578  8213              STRH     r3,[r2,#0x10]
;;;546    snmp_max_current=IMAX;
00057a  4be1              LDR      r3,|L1.2304|
00057c  881b              LDRH     r3,[r3,#0]  ; IMAX
00057e  8253              STRH     r3,[r2,#0x12]
;;;547    snmp_min_current=IMIN;
000580  4be0              LDR      r3,|L1.2308|
000582  881b              LDRH     r3,[r3,#0]  ; IMIN
000584  8293              STRH     r3,[r2,#0x14]
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
000586  4be0              LDR      r3,|L1.2312|
000588  881b              LDRH     r3,[r3,#0]  ; TZAS
00058a  82d3              STRH     r3,[r2,#0x16]
;;;551    snmp_max_temperature=TMAX;
00058c  4bdf              LDR      r3,|L1.2316|
00058e  881b              LDRH     r3,[r3,#0]  ; TMAX
000590  8313              STRH     r3,[r2,#0x18]
;;;552    snmp_tsign_bat=TBATSIGN; 
000592  4cdf              LDR      r4,|L1.2320|
000594  8824              LDRH     r4,[r4,#0]  ; TBATSIGN
000596  8354              STRH     r4,[r2,#0x1a]
;;;553    snmp_tmax_bat=TBATMAX;
000598  4cde              LDR      r4,|L1.2324|
00059a  e001              B        |L1.1440|
                  |L1.1436|
00059c  e05c              B        |L1.1624|
                  |L1.1438|
00059e  e05d              B        |L1.1628|
                  |L1.1440|
0005a0  8824              LDRH     r4,[r4,#0]  ; TBATMAX
0005a2  8394              STRH     r4,[r2,#0x1c]
;;;554    snmp_tsign_bps=TSIGN;
0005a4  4cdc              LDR      r4,|L1.2328|
0005a6  8824              LDRH     r4,[r4,#0]  ; TSIGN
0005a8  83d4              STRH     r4,[r2,#0x1e]
;;;555    snmp_tmax_bps=TMAX;
0005aa  8413              STRH     r3,[r2,#0x20]
;;;556    snmp_bat_part_alarm=UBM_AV; 
0005ac  4bdb              LDR      r3,|L1.2332|
0005ae  881b              LDRH     r3,[r3,#0]  ; UBM_AV
0005b0  8453              STRH     r3,[r2,#0x22]
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
0005b2  4bdb              LDR      r3,|L1.2336|
0005b4  881b              LDRH     r3,[r3,#0]  ; POWER_CNT_ADRESS
0005b6  8493              STRH     r3,[r2,#0x24]
;;;558    
;;;559    for(i=0;i<12;i++)
0005b8  f04f0200          MOV      r2,#0
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
0005bc  f8df92e0          LDR      r9,|L1.2208|
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
0005c0  f8dfa360          LDR      r10,|L1.2340|
0005c4  f1a90954          SUB      r9,r9,#0x54           ;561
0005c8  f109040c          ADD      r4,r9,#0xc
                  |L1.1484|
0005cc  f1020301          ADD      r3,r2,#1              ;561
0005d0  f8093002          STRB     r3,[r9,r2]            ;561
0005d4  e002              B        |L1.1500|
                  |L1.1494|
0005d6  e043              B        |L1.1632|
                  |L1.1496|
0005d8  e044              B        |L1.1636|
                  |L1.1498|
0005da  e045              B        |L1.1640|
                  |L1.1500|
0005dc  f81ab002          LDRB     r11,[r10,r2]
0005e0  f1bb0f00          CMP      r11,#0
0005e4  d042              BEQ      |L1.1644|
;;;563    	else snmp_avt_stat[i]=1;
0005e6  54a0              STRB     r0,[r4,r2]
                  |L1.1512|
0005e8  b2da              UXTB     r2,r3                 ;559
0005ea  2a0c              CMP      r2,#0xc               ;559
0005ec  d3ee              BCC      |L1.1484|
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
0005ee  49b0              LDR      r1,|L1.2224|
0005f0  3140              ADDS     r1,r1,#0x40
0005f2  7008              STRB     r0,[r1,#0]
;;;567    snmp_dt_number[1]=2;
0005f4  704f              STRB     r7,[r1,#1]
;;;568    snmp_dt_number[2]=3;
0005f6  f8818002          STRB     r8,[r1,#2]
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
0005fa  f1010062          ADD      r0,r1,#0x62
0005fe  8005              STRH     r5,[r0,#0]
;;;571    snmp_dt_temper[1]=t_ext[1];
000600  8046              STRH     r6,[r0,#2]
;;;572    snmp_dt_temper[2]=t_ext[2];
000602  f8a0c004          STRH     r12,[r0,#4]
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
000606  4bc8              LDR      r3,|L1.2344|
000608  1cca              ADDS     r2,r1,#3
00060a  7818              LDRB     r0,[r3,#0]  ; ND_EXT
00060c  7010              STRB     r0,[r2,#0]
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
00060e  48c7              LDR      r0,|L1.2348|
000610  f04f31ff          MOV      r1,#0xffffffff
000614  f9b00000          LDRSH    r0,[r0,#0]  ; NUMDT
000618  2801              CMP      r0,#1
00061a  da00              BGE      |L1.1566|
00061c  7011              STRB     r1,[r2,#0]
                  |L1.1566|
;;;576    snmp_dt_error[1]=ND_EXT[1];
00061e  785c              LDRB     r4,[r3,#1]  ; ND_EXT
000620  7054              STRB     r4,[r2,#1]
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
000622  2802              CMP      r0,#2
000624  da00              BGE      |L1.1576|
000626  7011              STRB     r1,[r2,#0]
                  |L1.1576|
;;;578    snmp_dt_error[2]=ND_EXT[2];
000628  789b              LDRB     r3,[r3,#2]  ; ND_EXT
00062a  7093              STRB     r3,[r2,#2]
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
00062c  2803              CMP      r0,#3
00062e  da00              BGE      |L1.1586|
000630  7011              STRB     r1,[r2,#0]
                  |L1.1586|
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
000632  2804              CMP      r0,#4
000634  da00              BGE      |L1.1592|
000636  7011              STRB     r1,[r2,#0]
                  |L1.1592|
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
000638  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.1596|
00063c  7010              STRB     r0,[r2,#0]            ;456
00063e  e69a              B        |L1.886|
                  |L1.1600|
000640  7018              STRB     r0,[r3,#0]            ;458
000642  e6a1              B        |L1.904|
                  |L1.1604|
000644  7020              STRB     r0,[r4,#0]            ;460
000646  e6a8              B        |L1.922|
                  |L1.1608|
000648  7050              STRB     r0,[r2,#1]            ;466
00064a  e6b9              B        |L1.960|
                  |L1.1612|
00064c  7058              STRB     r0,[r3,#1]            ;468
00064e  e6bc              B        |L1.970|
                  |L1.1616|
000650  7060              STRB     r0,[r4,#1]            ;470
000652  e6bf              B        |L1.980|
                  |L1.1620|
000654  7090              STRB     r0,[r2,#2]            ;475
000656  e6d0              B        |L1.1018|
                  |L1.1624|
000658  7098              STRB     r0,[r3,#2]            ;477
00065a  e721              B        |L1.1184|
                  |L1.1628|
00065c  70a0              STRB     r0,[r4,#2]            ;479
00065e  e725              B        |L1.1196|
                  |L1.1632|
000660  70d0              STRB     r0,[r2,#3]            ;484
000662  e73b              B        |L1.1244|
                  |L1.1636|
000664  70d8              STRB     r0,[r3,#3]            ;486
000666  e73e              B        |L1.1254|
                  |L1.1640|
000668  70e0              STRB     r0,[r4,#3]            ;488
00066a  e741              B        |L1.1264|
                  |L1.1644|
00066c  54a1              STRB     r1,[r4,r2]            ;562
00066e  e7bb              B        |L1.1512|
;;;607    //-----------------------------------------------
                          ENDP

                  snmp_location_write PROC
;;;617    //-----------------------------------------------
;;;618    void snmp_location_write (int mode) 
000670  b570              PUSH     {r4-r6,lr}
;;;619    {
;;;620    char i;
;;;621    if(mode==MIB_WRITE)
000672  2801              CMP      r0,#1
000674  d10c              BNE      |L1.1680|
;;;622    	{
;;;623    	for(i=0;i<64;i++)
000676  f04f0400          MOV      r4,#0
;;;624    		{
;;;625    		lc640_write(EE_LOCATION+i,snmp_location[i]);
00067a  4dad              LDR      r5,|L1.2352|
                  |L1.1660|
00067c  f5047065          ADD      r0,r4,#0x394
000680  5d29              LDRB     r1,[r5,r4]
000682  f7fffffe          BL       lc640_write
000686  f1040401          ADD      r4,r4,#1              ;623
00068a  b2e4              UXTB     r4,r4                 ;623
00068c  2c40              CMP      r4,#0x40              ;623
00068e  d3f5              BCC      |L1.1660|
                  |L1.1680|
;;;626    		}
;;;627    	}
;;;628    }
000690  bd70              POP      {r4-r6,pc}
;;;629    
                          ENDP

                  snmp_alarm_aktiv_write1 PROC
;;;630    //-----------------------------------------------
;;;631    void snmp_alarm_aktiv_write1(int mode)
000692  2801              CMP      r0,#1
;;;632    {
;;;633    if(mode==MIB_WRITE)
000694  d10f              BNE      |L1.1718|
;;;634    	{
;;;635    	if(!snmp_sk_alarm_aktiv[0])   lc640_write_int(ADR_SK_SIGN[0],0xffff);
000696  4886              LDR      r0,|L1.2224|
000698  3078              ADDS     r0,r0,#0x78
00069a  7801              LDRB     r1,[r0,#0]  ; snmp_sk_alarm_aktiv
00069c  48a5              LDR      r0,|L1.2356|
00069e  b121              CBZ      r1,|L1.1706|
;;;636    	else lc640_write_int(ADR_SK_SIGN[0],0);
0006a0  f9b00000          LDRSH    r0,[r0,#0]  ; ADR_SK_SIGN
0006a4  2100              MOVS     r1,#0
0006a6  f7ffbffe          B.W      lc640_write_int
                  |L1.1706|
0006aa  f9b00000          LDRSH    r0,[r0,#0]            ;635  ; ADR_SK_SIGN
0006ae  f04f31ff          MOV      r1,#0xffffffff        ;635
0006b2  f7ffbffe          B.W      lc640_write_int
                  |L1.1718|
;;;637    	}
;;;638    }
0006b6  4770              BX       lr
;;;639    
                          ENDP

                  snmp_alarm_aktiv_write2 PROC
;;;640    //-----------------------------------------------
;;;641    void snmp_alarm_aktiv_write2(int mode)
0006b8  2801              CMP      r0,#1
;;;642    {
;;;643    if(mode==MIB_WRITE)
0006ba  d10f              BNE      |L1.1756|
;;;644    	{
;;;645    	if(!snmp_sk_alarm_aktiv[1])   lc640_write_int(ADR_SK_SIGN[1],0xffff);
0006bc  487c              LDR      r0,|L1.2224|
0006be  3078              ADDS     r0,r0,#0x78
0006c0  7841              LDRB     r1,[r0,#1]  ; snmp_sk_alarm_aktiv
0006c2  489c              LDR      r0,|L1.2356|
0006c4  b121              CBZ      r1,|L1.1744|
;;;646    	else lc640_write_int(ADR_SK_SIGN[1],0);
0006c6  f9b00002          LDRSH    r0,[r0,#2]  ; ADR_SK_SIGN
0006ca  2100              MOVS     r1,#0
0006cc  f7ffbffe          B.W      lc640_write_int
                  |L1.1744|
0006d0  f9b00002          LDRSH    r0,[r0,#2]            ;645  ; ADR_SK_SIGN
0006d4  f04f31ff          MOV      r1,#0xffffffff        ;645
0006d8  f7ffbffe          B.W      lc640_write_int
                  |L1.1756|
;;;647    	}
;;;648    }
0006dc  4770              BX       lr
;;;649    
                          ENDP

                  snmp_alarm_aktiv_write3 PROC
;;;650    //-----------------------------------------------
;;;651    void snmp_alarm_aktiv_write3(int mode)
0006de  2801              CMP      r0,#1
;;;652    {
;;;653    if(mode==MIB_WRITE)
0006e0  d10f              BNE      |L1.1794|
;;;654    	{
;;;655    	if(!snmp_sk_alarm_aktiv[2])   lc640_write_int(ADR_SK_SIGN[2],0xffff);
0006e2  4873              LDR      r0,|L1.2224|
0006e4  3078              ADDS     r0,r0,#0x78
0006e6  7881              LDRB     r1,[r0,#2]  ; snmp_sk_alarm_aktiv
0006e8  4892              LDR      r0,|L1.2356|
0006ea  b121              CBZ      r1,|L1.1782|
;;;656    	else lc640_write_int(ADR_SK_SIGN[2],0);
0006ec  f9b00004          LDRSH    r0,[r0,#4]  ; ADR_SK_SIGN
0006f0  2100              MOVS     r1,#0
0006f2  f7ffbffe          B.W      lc640_write_int
                  |L1.1782|
0006f6  f9b00004          LDRSH    r0,[r0,#4]            ;655  ; ADR_SK_SIGN
0006fa  f04f31ff          MOV      r1,#0xffffffff        ;655
0006fe  f7ffbffe          B.W      lc640_write_int
                  |L1.1794|
;;;657    	}
;;;658    }
000702  4770              BX       lr
;;;659    
                          ENDP

                  snmp_alarm_aktiv_write4 PROC
;;;660    //-----------------------------------------------
;;;661    void snmp_alarm_aktiv_write4(int mode)
000704  2801              CMP      r0,#1
;;;662    {
;;;663    if(mode==MIB_WRITE)
000706  d10f              BNE      |L1.1832|
;;;664    	{
;;;665    	if(!snmp_sk_alarm_aktiv[3])   lc640_write_int(ADR_SK_SIGN[3],0xffff);
000708  4869              LDR      r0,|L1.2224|
00070a  3078              ADDS     r0,r0,#0x78
00070c  78c1              LDRB     r1,[r0,#3]  ; snmp_sk_alarm_aktiv
00070e  4889              LDR      r0,|L1.2356|
000710  b121              CBZ      r1,|L1.1820|
;;;666    	else lc640_write_int(ADR_SK_SIGN[3],0);
000712  f9b00006          LDRSH    r0,[r0,#6]  ; ADR_SK_SIGN
000716  2100              MOVS     r1,#0
000718  f7ffbffe          B.W      lc640_write_int
                  |L1.1820|
00071c  f9b00006          LDRSH    r0,[r0,#6]            ;665  ; ADR_SK_SIGN
000720  f04f31ff          MOV      r1,#0xffffffff        ;665
000724  f7ffbffe          B.W      lc640_write_int
                  |L1.1832|
;;;667    	}
;;;668    }
000728  4770              BX       lr
;;;669    
                          ENDP

                  snmp_zv_on_write PROC
;;;679    //-----------------------------------------------
;;;680    void snmp_zv_on_write (int mode)
00072a  2801              CMP      r0,#1
;;;681    {
;;;682    if(mode==MIB_WRITE)
00072c  d106              BNE      |L1.1852|
;;;683    	{
;;;684    	lc640_write_int(EE_ZV_ON,snmp_zv_en);
00072e  4860              LDR      r0,|L1.2224|
000730  383c              SUBS     r0,r0,#0x3c
000732  f9b0103c          LDRSH    r1,[r0,#0x3c]  ; snmp_zv_en
000736  2086              MOVS     r0,#0x86
000738  f7ffbffe          B.W      lc640_write_int
                  |L1.1852|
;;;685    	}
;;;686    }
00073c  4770              BX       lr
;;;687    
                          ENDP

                  snmp_alarm_auto_disable_write PROC
;;;688    //-----------------------------------------------
;;;689    void snmp_alarm_auto_disable_write (int mode)
00073e  2801              CMP      r0,#1
;;;690    {
;;;691    if(mode==MIB_WRITE)
000740  d106              BNE      |L1.1872|
;;;692    	{
;;;693         lc640_write_int(EE_AV_OFF_AVT,snmp_alarm_auto_disable);
000742  485b              LDR      r0,|L1.2224|
000744  383c              SUBS     r0,r0,#0x3c
000746  f9b0103e          LDRSH    r1,[r0,#0x3e]  ; snmp_alarm_auto_disable
00074a  2080              MOVS     r0,#0x80
00074c  f7ffbffe          B.W      lc640_write_int
                  |L1.1872|
;;;694    	}
;;;695    }
000750  4770              BX       lr
;;;696    
                          ENDP

                  snmp_bat_test_time_write PROC
;;;697    //-----------------------------------------------
;;;698    void snmp_bat_test_time_write (int mode)
000752  2801              CMP      r0,#1
;;;699    {
;;;700    if(mode==MIB_WRITE)
000754  d106              BNE      |L1.1892|
;;;701    	{
;;;702    	lc640_write_int(EE_TBAT,snmp_bat_test_time);
000756  4856              LDR      r0,|L1.2224|
000758  383c              SUBS     r0,r0,#0x3c
00075a  f9b01040          LDRSH    r1,[r0,#0x40]  ; snmp_bat_test_time
00075e  20c2              MOVS     r0,#0xc2
000760  f7ffbffe          B.W      lc640_write_int
                  |L1.1892|
;;;703    	}
;;;704    }
000764  4770              BX       lr
;;;705    
                          ENDP

                  snmp_u_max_write PROC
;;;706    //-----------------------------------------------
;;;707    void snmp_u_max_write (int mode)
000766  2801              CMP      r0,#1
;;;708    {
;;;709    if(mode==MIB_WRITE)
000768  d106              BNE      |L1.1912|
;;;710    	{
;;;711         lc640_write_int(EE_UMAX,snmp_u_max);
00076a  4851              LDR      r0,|L1.2224|
00076c  383c              SUBS     r0,r0,#0x3c
00076e  f9b01042          LDRSH    r1,[r0,#0x42]  ; snmp_u_max
000772  2078              MOVS     r0,#0x78
000774  f7ffbffe          B.W      lc640_write_int
                  |L1.1912|
;;;712    	}
;;;713    }
000778  4770              BX       lr
;;;714    
                          ENDP

                  snmp_u_min_write PROC
;;;716    //-----------------------------------------------
;;;717    void snmp_u_min_write (int mode)
00077a  4770              BX       lr
;;;718    {
;;;719    if(mode==MIB_WRITE)
;;;720    	{
;;;721    //     lc640_write_int(EE_DU,UB20-snmp_u_min);
;;;722    	}
;;;723    }
;;;724    
                          ENDP

                  snmp_u_0_grad_write PROC
;;;726    //-----------------------------------------------
;;;727    void snmp_u_0_grad_write (int mode)
00077c  4770              BX       lr
;;;728    {
;;;729    if(mode==MIB_WRITE)
;;;730    	{
;;;731    //	lc640_write_int(EE_UB0,snmp_u_0_grad);
;;;732    	}
;;;733    }
;;;734    //-----------------------------------------------
                          ENDP

                  snmp_u_20_grad_write PROC
;;;735    void snmp_u_20_grad_write (int mode)
00077e  4770              BX       lr
;;;736    {
;;;737    if(mode==MIB_WRITE)
;;;738    	{
;;;739    //	lc640_write_int(EE_UB20,snmp_u_20_grad);
;;;740    	}
;;;741    }
;;;742    
                          ENDP

                  snmp_u_sign_write PROC
;;;743    //-----------------------------------------------
;;;744    void snmp_u_sign_write (int mode)
000780  2801              CMP      r0,#1
;;;745    {
;;;746    if(mode==MIB_WRITE)
000782  d106              BNE      |L1.1938|
;;;747    	{
;;;748        lc640_write_int(EE_USIGN,snmp_u_sign);
000784  484a              LDR      r0,|L1.2224|
000786  383c              SUBS     r0,r0,#0x3c
000788  f9b01044          LDRSH    r1,[r0,#0x44]  ; snmp_u_sign
00078c  2082              MOVS     r0,#0x82
00078e  f7ffbffe          B.W      lc640_write_int
                  |L1.1938|
;;;749    	}
;;;750    }
000792  4770              BX       lr
;;;751    //-----------------------------------------------
                          ENDP

                  snmp_u_min_power_write PROC
;;;752    void snmp_u_min_power_write (int mode)
000794  2801              CMP      r0,#1
;;;753    {
;;;754    if(mode==MIB_WRITE)
000796  d106              BNE      |L1.1958|
;;;755    	{
;;;756    	lc640_write_int(EE_UMN,snmp_u_min_power);
000798  4845              LDR      r0,|L1.2224|
00079a  383c              SUBS     r0,r0,#0x3c
00079c  f9b01046          LDRSH    r1,[r0,#0x46]  ; snmp_u_min_power
0007a0  2084              MOVS     r0,#0x84
0007a2  f7ffbffe          B.W      lc640_write_int
                  |L1.1958|
;;;757    	}
;;;758    }
0007a6  4770              BX       lr
;;;759    //-----------------------------------------------
                          ENDP

                  snmp_u_withouth_bat_write PROC
;;;760    void snmp_u_withouth_bat_write (int mode)
0007a8  2801              CMP      r0,#1
;;;761    {
;;;762    if(mode==MIB_WRITE)
0007aa  d106              BNE      |L1.1978|
;;;763    	{
;;;764    	lc640_write_int(EE_U0B,snmp_u_withouth_bat);
0007ac  4840              LDR      r0,|L1.2224|
0007ae  383c              SUBS     r0,r0,#0x3c
0007b0  f9b01048          LDRSH    r1,[r0,#0x48]  ; snmp_u_withouth_bat
0007b4  2094              MOVS     r0,#0x94
0007b6  f7ffbffe          B.W      lc640_write_int
                  |L1.1978|
;;;765    	}
;;;766    }
0007ba  4770              BX       lr
;;;767    
                          ENDP

                  snmp_control_current_write PROC
;;;768    //-----------------------------------------------
;;;769    void snmp_control_current_write (int mode)
0007bc  2801              CMP      r0,#1
;;;770    {
;;;771    if(mode==MIB_WRITE)
0007be  d106              BNE      |L1.1998|
;;;772    	{
;;;773    	lc640_write_int(EE_IKB,snmp_control_current);
0007c0  483b              LDR      r0,|L1.2224|
0007c2  383c              SUBS     r0,r0,#0x3c
0007c4  f9b0104a          LDRSH    r1,[r0,#0x4a]  ; snmp_control_current
0007c8  2088              MOVS     r0,#0x88
0007ca  f7ffbffe          B.W      lc640_write_int
                  |L1.1998|
;;;774    	}
;;;775    }
0007ce  4770              BX       lr
;;;776    
                          ENDP

                  snmp_max_charge_current_write PROC
;;;777    //-----------------------------------------------
;;;778    void snmp_max_charge_current_write (int mode)
0007d0  2801              CMP      r0,#1
;;;779    {
;;;780    if(mode==MIB_WRITE)
0007d2  d106              BNE      |L1.2018|
;;;781    	{
;;;782    	lc640_write_int(EE_IZMAX,snmp_max_charge_current);
0007d4  4836              LDR      r0,|L1.2224|
0007d6  383c              SUBS     r0,r0,#0x3c
0007d8  f9b0104c          LDRSH    r1,[r0,#0x4c]  ; snmp_max_charge_current
0007dc  2092              MOVS     r0,#0x92
0007de  f7ffbffe          B.W      lc640_write_int
                  |L1.2018|
;;;783    	}
;;;784    }
0007e2  4770              BX       lr
;;;785    
                          ENDP

                  snmp_max_current_write PROC
;;;786    //-----------------------------------------------
;;;787    void snmp_max_current_write (int mode)
0007e4  2801              CMP      r0,#1
;;;788    {
;;;789    if(mode==MIB_WRITE)
0007e6  d106              BNE      |L1.2038|
;;;790    	{
;;;791         lc640_write_int(EE_IMAX,snmp_max_current);
0007e8  4831              LDR      r0,|L1.2224|
0007ea  383c              SUBS     r0,r0,#0x3c
0007ec  f9b0104e          LDRSH    r1,[r0,#0x4e]  ; snmp_max_current
0007f0  208c              MOVS     r0,#0x8c
0007f2  f7ffbffe          B.W      lc640_write_int
                  |L1.2038|
;;;792    	}
;;;793    }
0007f6  4770              BX       lr
;;;794    
                          ENDP

                  snmp_min_current_write PROC
;;;795    //-----------------------------------------------
;;;796    void snmp_min_current_write (int mode)
0007f8  2801              CMP      r0,#1
;;;797    {
;;;798    if(mode==MIB_WRITE)
0007fa  d106              BNE      |L1.2058|
;;;799    	{
;;;800         lc640_write_int(EE_IMIN,snmp_min_current);
0007fc  482c              LDR      r0,|L1.2224|
0007fe  383c              SUBS     r0,r0,#0x3c
000800  f9b01050          LDRSH    r1,[r0,#0x50]  ; snmp_min_current
000804  208e              MOVS     r0,#0x8e
000806  f7ffbffe          B.W      lc640_write_int
                  |L1.2058|
;;;801    	}
;;;802    }
00080a  4770              BX       lr
;;;803    
                          ENDP

                  snmp_powerup_psu_timeout_write PROC
;;;822    //-----------------------------------------------
;;;823    void snmp_powerup_psu_timeout_write (int mode)
00080c  2801              CMP      r0,#1
;;;824    {
;;;825    if(mode==MIB_WRITE)
00080e  d106              BNE      |L1.2078|
;;;826    	{
;;;827         lc640_write_int(EE_TZAS,snmp_powerup_psu_timeout);
000810  4827              LDR      r0,|L1.2224|
000812  383c              SUBS     r0,r0,#0x3c
000814  f9b01052          LDRSH    r1,[r0,#0x52]  ; snmp_powerup_psu_timeout
000818  2096              MOVS     r0,#0x96
00081a  f7ffbffe          B.W      lc640_write_int
                  |L1.2078|
;;;828    	}
;;;829    }
00081e  4770              BX       lr
;;;830    
                          ENDP

                  snmp_tsign_bat_write PROC
;;;840    //-----------------------------------------------
;;;841    void snmp_tsign_bat_write(int mode)
000820  2801              CMP      r0,#1
;;;842    {
;;;843    if(mode==MIB_WRITE)
000822  d106              BNE      |L1.2098|
;;;844    	{
;;;845     	lc640_write_int(EE_TBATSIGN,snmp_tsign_bat);
000824  4822              LDR      r0,|L1.2224|
000826  383c              SUBS     r0,r0,#0x3c
000828  f9b01056          LDRSH    r1,[r0,#0x56]  ; snmp_tsign_bat
00082c  20ce              MOVS     r0,#0xce
00082e  f7ffbffe          B.W      lc640_write_int
                  |L1.2098|
;;;846    	}
;;;847    }
000832  4770              BX       lr
;;;848    //-----------------------------------------------
                          ENDP

                  snmp_tmax_bat_write PROC
;;;849    void snmp_tmax_bat_write(int mode)
000834  2801              CMP      r0,#1
;;;850    {
;;;851    if(mode==MIB_WRITE)
000836  d106              BNE      |L1.2118|
;;;852    	{
;;;853     	lc640_write_int(EE_TBATMAX,snmp_tmax_bat);
000838  481d              LDR      r0,|L1.2224|
00083a  383c              SUBS     r0,r0,#0x3c
00083c  f9b01058          LDRSH    r1,[r0,#0x58]  ; snmp_tmax_bat
000840  20cc              MOVS     r0,#0xcc
000842  f7ffbffe          B.W      lc640_write_int
                  |L1.2118|
;;;854    	}
;;;855    }
000846  4770              BX       lr
;;;856    //-----------------------------------------------
                          ENDP

                  snmp_tsign_bps_write PROC
;;;857    void snmp_tsign_bps_write(int mode)
000848  2801              CMP      r0,#1
;;;858    {
;;;859    if(mode==MIB_WRITE)
00084a  d106              BNE      |L1.2138|
;;;860    	{
;;;861    	lc640_write_int(EE_TSIGN,snmp_tsign_bps);
00084c  4818              LDR      r0,|L1.2224|
00084e  383c              SUBS     r0,r0,#0x3c
000850  f9b0105a          LDRSH    r1,[r0,#0x5a]  ; snmp_tsign_bps
000854  20c6              MOVS     r0,#0xc6
000856  f7ffbffe          B.W      lc640_write_int
                  |L1.2138|
;;;862    	}
;;;863    }
00085a  4770              BX       lr
;;;864    //-----------------------------------------------
                          ENDP

                  snmp_tmax_bps_write PROC
;;;865    void snmp_tmax_bps_write(int mode)
00085c  2801              CMP      r0,#1
;;;866    {
;;;867    if(mode==MIB_WRITE)
00085e  d106              BNE      |L1.2158|
;;;868    	{
;;;869    	lc640_write_int(EE_TMAX,snmp_tmax_bps);
000860  4813              LDR      r0,|L1.2224|
000862  383c              SUBS     r0,r0,#0x3c
000864  f9b0105c          LDRSH    r1,[r0,#0x5c]  ; snmp_tmax_bps
000868  207e              MOVS     r0,#0x7e
00086a  f7ffbffe          B.W      lc640_write_int
                  |L1.2158|
;;;870    	}
;;;871    }
00086e  4770              BX       lr
;;;872    
                          ENDP

                  snmp_uvz_write PROC
;;;873    //-----------------------------------------------
;;;874    void snmp_uvz_write(int mode)
000870  4770              BX       lr
;;;875    {
;;;876    if(mode==MIB_WRITE)
;;;877    	{
;;;878    	//lc640_write_int(EE_UVZ,snmp_uvz);
;;;879    	}
;;;880    }
;;;881    //-----------------------------------------------
                          ENDP

                  snmp_bat_part_alarm_write PROC
;;;882    void snmp_bat_part_alarm_write(int mode)
000872  2801              CMP      r0,#1
;;;883    {
;;;884    if(mode==MIB_WRITE)
000874  d107              BNE      |L1.2182|
;;;885    	{
;;;886    	lc640_write_int(EE_UBM_AV,snmp_bat_part_alarm);
000876  480e              LDR      r0,|L1.2224|
000878  383c              SUBS     r0,r0,#0x3c
00087a  f9b0105e          LDRSH    r1,[r0,#0x5e]  ; snmp_bat_part_alarm
00087e  f44f7019          MOV      r0,#0x264
000882  f7ffbffe          B.W      lc640_write_int
                  |L1.2182|
;;;887    	}
;;;888    }
000886  4770              BX       lr
;;;889    //-----------------------------------------------
                          ENDP

                  snmp_power_cnt_adress_write PROC
;;;890    void snmp_power_cnt_adress_write(int mode)
000888  2801              CMP      r0,#1
;;;891    {
;;;892    if(mode==MIB_WRITE)
00088a  d107              BNE      |L1.2204|
;;;893    	{
;;;894    	lc640_write_int(EE_POWER_CNT_ADRESS,snmp_power_cnt_adress);
00088c  4808              LDR      r0,|L1.2224|
00088e  383c              SUBS     r0,r0,#0x3c
000890  f9b01060          LDRSH    r1,[r0,#0x60]  ; snmp_power_cnt_adress
000894  f2402062          MOV      r0,#0x262
000898  f7ffbffe          B.W      lc640_write_int
                  |L1.2204|
;;;895    	}
;;;896    }
00089c  4770              BX       lr
00089e  0000              DCW      0x0000
                  |L1.2208|
                          DCD      ||.bss||+0x180
                  |L1.2212|
0008a4  20202020          DCB      "     ",0
0008a8  2000    
0008aa  00                DCB      0
0008ab  00                DCB      0
                  |L1.2220|
                          DCD      t_box
                  |L1.2224|
                          DCD      ||.data||+0x3c
                  |L1.2228|
                          DCD      TBOXMAX
                  |L1.2232|
                          DCD      TBOXVENTON
                  |L1.2236|
                          DCD      TBOXVENTOFF
                  |L1.2240|
                          DCD      TBOXWARMON
                  |L1.2244|
                          DCD      TBOXWARMOFF
                  |L1.2248|
                          DCD      TLOADENABLE
                  |L1.2252|
                          DCD      TLOADDISABLE
                  |L1.2256|
                          DCD      TBATENABLE
                  |L1.2260|
                          DCD      TBATDISABLE
                  |L1.2264|
                          DCD      t_ext
                  |L1.2268|
                          DCD      ZV_ON
                  |L1.2272|
                          DCD      AV_OFF_AVT
                  |L1.2276|
                          DCD      TBAT
                  |L1.2280|
                          DCD      UMAX
                  |L1.2284|
                          DCD      USIGN
                  |L1.2288|
                          DCD      UMN
                  |L1.2292|
                          DCD      U0B
                  |L1.2296|
                          DCD      IKB
                  |L1.2300|
                          DCD      IZMAX
                  |L1.2304|
                          DCD      IMAX
                  |L1.2308|
                          DCD      IMIN
                  |L1.2312|
                          DCD      TZAS
                  |L1.2316|
                          DCD      TMAX
                  |L1.2320|
                          DCD      TBATSIGN
                  |L1.2324|
                          DCD      TBATMAX
                  |L1.2328|
                          DCD      TSIGN
                  |L1.2332|
                          DCD      UBM_AV
                  |L1.2336|
                          DCD      POWER_CNT_ADRESS
                  |L1.2340|
                          DCD      avt_stat
                  |L1.2344|
                          DCD      ND_EXT
                  |L1.2348|
                          DCD      NUMDT
                  |L1.2352|
                          DCD      ||.bss||+0x14
                  |L1.2356|
                          DCD      ADR_SK_SIGN
                          ENDP

                  snmp_command_execute PROC
;;;898    //-----------------------------------------------
;;;899    void snmp_command_execute (int mode)
000938  b510              PUSH     {r4,lr}
;;;900    {
;;;901    if(mode==MIB_WRITE)
00093a  2801              CMP      r0,#1
00093c  d112              BNE      |L1.2404|
;;;902    	{
;;;903    	
;;;904    	//snmp_command=0x5555;
;;;905    
;;;906    	switch (snmp_command)
00093e  48b2              LDR      r0,|L1.3080|
;;;907    		{
;;;908    		case SNMP_BPS_DISABLE:
;;;909    			{
;;;910    			snmp_command=COMMAND_OK;
000940  f2455255          MOV      r2,#0x5555
000944  4601              MOV      r1,r0                 ;906
000946  f9b04038          LDRSH    r4,[r0,#0x38]         ;906  ; snmp_command
;;;911    
;;;912    		/*	switch (snmp_command_parametr)
;;;913    				{
;;;914    			
;;;915    				case 1: 
;;;916    				{
;;;917    				St_[0]|=0x20;
;;;918    				St_[1]&=0xdf;
;;;919    				St&=0xfb;
;;;920    				cnt_src[1]=10;
;;;921    				snmp_plazma++;
;;;922    				snmp_plazma++;
;;;923    				break;
;;;924    				}
;;;925    			
;;;926    				case 2:
;;;927    				{
;;;928    				St_[1]|=0x20;
;;;929    				St_[0]&=0xdf;
;;;930    				St&=0xfb;
;;;931    				cnt_src[0]=10;	
;;;932    				snmp_plazma++;
;;;933    				break;
;;;934    				}*/	
;;;935    			
;;;936    				//break;
;;;937    			//	}
;;;938    			if(snmp_command_parametr==1) 
;;;939    				{
;;;940    			//	St_[0]|=0x20;
;;;941    			//	St_[1]&=0xdf;
;;;942    			//	St&=0xfb;
;;;943    		//		cnt_src[1]=10;
;;;944    		//		snmp_plazma++;
;;;945    		//		snmp_plazma++;
;;;946    				}
;;;947    			
;;;948    			else if(snmp_command_parametr==2)
;;;949    				{
;;;950    			//	St_[1]|=0x20;
;;;951    			//	St_[0]&=0xdf;
;;;952    			//	St&=0xfb;
;;;953    		//		cnt_src[0]=10;	
;;;954    		//		snmp_plazma++;
;;;955    				}	
;;;956    			
;;;957    			break;
;;;958    			}
;;;959    
;;;960    		case SNMP_BPS_UNDISABLE:
;;;961    			{
;;;962    			snmp_command=COMMAND_OK;
;;;963    		//	St_[0]&=0xdf;
;;;964    		//	St_[1]&=0xdf;
;;;965    			break;
;;;966    			}
;;;967    
;;;968    		case SNMP_SPEC_VZ:
;;;969    			{
;;;970    			if((snmp_command_parametr>=1)&&(snmp_command_parametr<=24))
;;;971    				{
;;;972    			//	if(!(St&0x03)&&(NUMBAT))
;;;973    					{
;;;974    					snmp_command=COMMAND_OK;
;;;975    		//			spc_stat=spc_VZ;
;;;976    		//			cnt_vz_sec_=3600UL*snmp_command_parametr;
;;;977    					}
;;;978    			//	else
;;;979     					{
;;;980    					snmp_command=COMAND_FAIL;	
00094a  43d3              MVNS     r3,r2
00094c  1ee4              SUBS     r4,r4,#3              ;906
00094e  f9b1103a          LDRSH    r1,[r1,#0x3a]         ;938
000952  2c06              CMP      r4,#6                 ;906
000954  d216              BCS      |L1.2436|
000956  e8dff004          TBB      [pc,r4]               ;906
00095a  0811              DCB      0x08,0x11
00095c  03151306          DCB      0x03,0x15,0x13,0x06
000960  8702              STRH     r2,[r0,#0x38]         ;910
000962  2901              CMP      r1,#1                 ;938
                  |L1.2404|
;;;981     					}
;;;982    				}
;;;983    			else 
;;;984    				{
;;;985    				snmp_command=WRONG_PARAMETER;
;;;986    				}
;;;987    			break;
;;;988    			}
;;;989    
;;;990    		case SNMP_SPEC_KE:
;;;991    			{
;;;992    	  	//	if(!(St&0x02)&&(NUMBAT))
;;;993    				{
;;;994    				//spc_stat=spc_KE;
;;;995    			//zar_cnt_ee_ke=0;
;;;996    			//	zar_cnt=0L;
;;;997    				snmp_command=COMMAND_OK;
;;;998    				}
;;;999    		//	else
;;;1000   				{
;;;1001   				snmp_command=COMAND_FAIL;	
;;;1002   				}
;;;1003   			break;
;;;1004   			}
;;;1005   
;;;1006   		case SNMP_SPEC_DISABLE:
;;;1007   			{
;;;1008   		//	spc_stat=spc_OFF;
;;;1009   			snmp_command=COMMAND_OK;
;;;1010   			break;
;;;1011   			}
;;;1012   
;;;1013   
;;;1014   		default:
;;;1015   			{
;;;1016   			snmp_command=COMMAND_INVALID;
;;;1017   			break;
;;;1018   			}
;;;1019   		}
;;;1020   /*		else if((UIB2[1]==0x52)&&(UIB2[4]==5)&&(UIB2[5]==5)&&(UIB2[6])&&(UIB2[6]<=NUMIST)&&(UIB2[6]==UIB2[7])) 	//Выключение источника 
;;;1021   		{
;;;1022   	
;;;1023   		if((UIB2[6]==1)&&(UIB2[7]==1)) 
;;;1024   			{
;;;1025   			St_[0]|=0x20;
;;;1026   			St_[1]&=0xdf;
;;;1027   			St&=0xfb;
;;;1028   			cnt_src[1]=10;
;;;1029   			}
;;;1030   			
;;;1031   		else if((UIB2[6]==2)&&(UIB2[7]==2))
;;;1032   			{
;;;1033   			St_[1]|=0x20;
;;;1034   			St_[0]&=0xdf;
;;;1035   			St&=0xfb;
;;;1036   			cnt_src[0]=10;
;;;1037   			}	
;;;1038   		
;;;1039        	memo_out2[0]=0x33;
;;;1040        	memo_out2[1]=0x62;
;;;1041        	memo_out2[2]=4;
;;;1042        	memo_out2[3]=0x03;
;;;1043        	
;;;1044        	memo_out2[4]=5;
;;;1045        	memo_out2[5]=5;
;;;1046        	memo_out2[6]=UIB2[6];
;;;1047        	memo_out2[7]=UIB2[6];
;;;1048            	memo_out2[8]=crc_87(memo_out2,8);
;;;1049   		memo_out2[9]=crc_95(memo_out2,8);
;;;1050        	uart_out_adr2(memo_out2,10); 		
;;;1051   		} */
;;;1052   
;;;1053   
;;;1054   
;;;1055   	}
;;;1056   }
000964  bd10              POP      {r4,pc}
000966  8702              STRH     r2,[r0,#0x38]         ;962
000968  bd10              POP      {r4,pc}
00096a  1e49              SUBS     r1,r1,#1              ;970
00096c  2917              CMP      r1,#0x17              ;970
00096e  d801              BHI      |L1.2420|
000970  8703              STRH     r3,[r0,#0x38]         ;980
000972  bd10              POP      {r4,pc}
                  |L1.2420|
000974  f64e61ef          MOV      r1,#0xeeef            ;985
000978  8701              STRH     r1,[r0,#0x38]         ;985
00097a  bd10              POP      {r4,pc}
00097c  8703              STRH     r3,[r0,#0x38]         ;1001
00097e  bd10              POP      {r4,pc}
000980  8702              STRH     r2,[r0,#0x38]         ;1009
000982  bd10              POP      {r4,pc}
                  |L1.2436|
000984  f64e61ee          MOV      r1,#0xeeee            ;1016
000988  8701              STRH     r1,[r0,#0x38]         ;1016
00098a  bd10              POP      {r4,pc}
;;;1057   
                          ENDP

                  snmp_trap_send PROC
;;;1616   //-----------------------------------------------
;;;1617   void snmp_trap_send(char* str, signed short in0, signed short in1, signed short in2)
00098c  e92d41f0          PUSH     {r4-r8,lr}
;;;1618   {
;;;1619   for(snmp_trap_send_i=0;snmp_trap_send_i<100;snmp_trap_send_i++)
000990  4f9d              LDR      r7,|L1.3080|
000992  f04f0500          MOV      r5,#0
000996  713d              STRB     r5,[r7,#4]
;;;1620   	{
;;;1621   	snmp_spc_trap_message[snmp_trap_send_i]=0;
000998  4e9c              LDR      r6,|L1.3084|
                  |L1.2458|
00099a  793c              LDRB     r4,[r7,#4]  ; snmp_trap_send_i
00099c  5535              STRB     r5,[r6,r4]
00099e  f1040401          ADD      r4,r4,#1              ;1619
0009a2  b2e4              UXTB     r4,r4                 ;1619
0009a4  713c              STRB     r4,[r7,#4]            ;1619
0009a6  2c64              CMP      r4,#0x64              ;1619
0009a8  d3f7              BCC      |L1.2458|
;;;1622   	}
;;;1623   
;;;1624   
;;;1625   obj[0] = 0;
0009aa  f8dfc260          LDR      r12,|L1.3084|
0009ae  f10c0ccc          ADD      r12,r12,#0xcc
0009b2  f8ac5000          STRH     r5,[r12,#0]
;;;1626   snmp_trap_send_ii=1;
0009b6  f04f0801          MOV      r8,#1
0009ba  f8878005          STRB     r8,[r7,#5]
;;;1627   if(str!=0)
0009be  b1a8              CBZ      r0,|L1.2540|
;;;1628   	{
;;;1629   	obj[0]++;
0009c0  f8ac8000          STRH     r8,[r12,#0]
;;;1630   	for(snmp_trap_send_i=0;snmp_trap_send_i<100&&(str[snmp_trap_send_i]);snmp_trap_send_i++)
0009c4  713d              STRB     r5,[r7,#4]
0009c6  e003              B        |L1.2512|
                  |L1.2504|
;;;1631   		{
;;;1632   		snmp_spc_trap_message[snmp_trap_send_i]=str[snmp_trap_send_i];
0009c8  5535              STRB     r5,[r6,r4]
0009ca  f1040401          ADD      r4,r4,#1              ;1630
0009ce  713c              STRB     r4,[r7,#4]            ;1630
                  |L1.2512|
0009d0  793c              LDRB     r4,[r7,#4]            ;1630  ; snmp_trap_send_i
0009d2  2c64              CMP      r4,#0x64              ;1630
0009d4  d202              BCS      |L1.2524|
0009d6  5d05              LDRB     r5,[r0,r4]            ;1630
0009d8  2d00              CMP      r5,#0                 ;1630
0009da  d1f5              BNE      |L1.2504|
                  |L1.2524|
;;;1633   		}
;;;1634   	obj[snmp_trap_send_ii] = 7;
0009dc  f04f0007          MOV      r0,#7
0009e0  f82c0018          STRH     r0,[r12,r8,LSL #1]
;;;1635   	snmp_trap_send_ii++;
0009e4  f1080801          ADD      r8,r8,#1
0009e8  f8878005          STRB     r8,[r7,#5]
                  |L1.2540|
;;;1636   	}
;;;1637   if(in0!=0xffff)
0009ec  f64f74ff          MOV      r4,#0xffff
0009f0  42a1              CMP      r1,r4
0009f2  d00e              BEQ      |L1.2578|
;;;1638   	{
;;;1639   	obj[0]++;
0009f4  f8bc0000          LDRH     r0,[r12,#0]  ; obj
0009f8  f1000001          ADD      r0,r0,#1
0009fc  f8ac0000          STRH     r0,[r12,#0]
;;;1640   	snmp_spc_trap_value_0=in0;
000a00  8479              STRH     r1,[r7,#0x22]
;;;1641   	obj[snmp_trap_send_ii] = 8;
000a02  7978              LDRB     r0,[r7,#5]  ; snmp_trap_send_ii
000a04  f04f0108          MOV      r1,#8
000a08  f82c1010          STRH     r1,[r12,r0,LSL #1]
;;;1642   	snmp_trap_send_ii++;
000a0c  f1000001          ADD      r0,r0,#1
000a10  7178              STRB     r0,[r7,#5]
                  |L1.2578|
;;;1643   	}
;;;1644   if(in1!=0xffff)
000a12  42a2              CMP      r2,r4
000a14  d00e              BEQ      |L1.2612|
;;;1645   	{
;;;1646   	obj[0]++;
000a16  f8bc0000          LDRH     r0,[r12,#0]  ; obj
000a1a  f1000001          ADD      r0,r0,#1
000a1e  f8ac0000          STRH     r0,[r12,#0]
;;;1647   	snmp_spc_trap_value_1=in1;
000a22  84ba              STRH     r2,[r7,#0x24]
;;;1648   	obj[snmp_trap_send_ii] = 9;
000a24  7978              LDRB     r0,[r7,#5]  ; snmp_trap_send_ii
000a26  f04f0109          MOV      r1,#9
000a2a  f82c1010          STRH     r1,[r12,r0,LSL #1]
;;;1649   	snmp_trap_send_ii++;
000a2e  f1000001          ADD      r0,r0,#1
000a32  7178              STRB     r0,[r7,#5]
                  |L1.2612|
;;;1650   	}
;;;1651   if(in2!=0xffff)
000a34  42a3              CMP      r3,r4
000a36  d00e              BEQ      |L1.2646|
;;;1652   	{
;;;1653   	obj[0]++;
000a38  f8bc0000          LDRH     r0,[r12,#0]  ; obj
000a3c  f1000001          ADD      r0,r0,#1
000a40  f8ac0000          STRH     r0,[r12,#0]
;;;1654   	snmp_spc_trap_value_2=in2;
000a44  84fb              STRH     r3,[r7,#0x26]
;;;1655   	obj[snmp_trap_send_ii] = 10;
000a46  7978              LDRB     r0,[r7,#5]  ; snmp_trap_send_ii
000a48  f04f010a          MOV      r1,#0xa
000a4c  f82c1010          STRH     r1,[r12,r0,LSL #1]
;;;1656   	snmp_trap_send_ii++;
000a50  f1000001          ADD      r0,r0,#1
000a54  7178              STRB     r0,[r7,#5]
                  |L1.2646|
;;;1657   	}
;;;1658   
;;;1659   
;;;1660   if((ETH_TRAP1_IP_1!=255)&&(ETH_TRAP1_IP_2!=255)&&(ETH_TRAP1_IP_3!=255)&&(ETH_TRAP1_IP_4!=255))
000a56  486e              LDR      r0,|L1.3088|
;;;1661   	{
;;;1662   	temp_ip[0]= ETH_TRAP1_IP_1;
000a58  4c6b              LDR      r4,|L1.3080|
000a5a  f9b00000          LDRSH    r0,[r0,#0]            ;1660  ; ETH_TRAP1_IP_1
000a5e  34bc              ADDS     r4,r4,#0xbc
000a60  28ff              CMP      r0,#0xff              ;1660
000a62  d019              BEQ      |L1.2712|
000a64  496b              LDR      r1,|L1.3092|
000a66  f9b11000          LDRSH    r1,[r1,#0]            ;1660  ; ETH_TRAP1_IP_2
000a6a  29ff              CMP      r1,#0xff              ;1660
000a6c  d014              BEQ      |L1.2712|
000a6e  4a6a              LDR      r2,|L1.3096|
000a70  f9b22000          LDRSH    r2,[r2,#0]            ;1660  ; ETH_TRAP1_IP_3
000a74  2aff              CMP      r2,#0xff              ;1660
000a76  d00f              BEQ      |L1.2712|
000a78  4b68              LDR      r3,|L1.3100|
000a7a  f9b33000          LDRSH    r3,[r3,#0]            ;1660  ; ETH_TRAP1_IP_4
000a7e  2bff              CMP      r3,#0xff              ;1660
000a80  d00a              BEQ      |L1.2712|
000a82  7020              STRB     r0,[r4,#0]
;;;1663   	temp_ip[1]= ETH_TRAP1_IP_2;
000a84  7061              STRB     r1,[r4,#1]
;;;1664   	temp_ip[2]= ETH_TRAP1_IP_3;
000a86  70a2              STRB     r2,[r4,#2]
;;;1665   	temp_ip[3]= ETH_TRAP1_IP_4;
000a88  70e3              STRB     r3,[r4,#3]
;;;1666   	snmp_trap (temp_ip, 6, 3, obj);
000a8a  4b60              LDR      r3,|L1.3084|
000a8c  2203              MOVS     r2,#3
000a8e  33cc              ADDS     r3,r3,#0xcc
000a90  2106              MOVS     r1,#6
000a92  4620              MOV      r0,r4
000a94  f7fffffe          BL       snmp_trap
                  |L1.2712|
;;;1667   	}
;;;1668   if((ETH_TRAP2_IP_1!=255)&&(ETH_TRAP2_IP_2!=255)&&(ETH_TRAP2_IP_3!=255)&&(ETH_TRAP2_IP_4!=255))
000a98  4861              LDR      r0,|L1.3104|
000a9a  f9b01000          LDRSH    r1,[r0,#0]  ; ETH_TRAP2_IP_1
000a9e  29ff              CMP      r1,#0xff
000aa0  d01a              BEQ      |L1.2776|
000aa2  4860              LDR      r0,|L1.3108|
000aa4  f9b02000          LDRSH    r2,[r0,#0]  ; ETH_TRAP2_IP_2
000aa8  2aff              CMP      r2,#0xff
000aaa  d015              BEQ      |L1.2776|
000aac  485e              LDR      r0,|L1.3112|
000aae  f9b00000          LDRSH    r0,[r0,#0]  ; ETH_TRAP2_IP_3
000ab2  28ff              CMP      r0,#0xff
000ab4  d010              BEQ      |L1.2776|
000ab6  4b5d              LDR      r3,|L1.3116|
000ab8  f9b33000          LDRSH    r3,[r3,#0]  ; ETH_TRAP2_IP_4
000abc  2bff              CMP      r3,#0xff
000abe  d00b              BEQ      |L1.2776|
;;;1669   	{
;;;1670   	temp_ip[0]= ETH_TRAP2_IP_1;
000ac0  7021              STRB     r1,[r4,#0]
;;;1671   	temp_ip[1]= ETH_TRAP2_IP_2;
000ac2  7062              STRB     r2,[r4,#1]
;;;1672   	temp_ip[2]= ETH_TRAP2_IP_3;
000ac4  70a0              STRB     r0,[r4,#2]
;;;1673   	temp_ip[3]= ETH_TRAP2_IP_4;
000ac6  70e3              STRB     r3,[r4,#3]
;;;1674   	snmp_trap (temp_ip, 6, 3, obj);
000ac8  4b50              LDR      r3,|L1.3084|
000aca  484f              LDR      r0,|L1.3080|
000acc  33cc              ADDS     r3,r3,#0xcc
000ace  2203              MOVS     r2,#3
000ad0  2106              MOVS     r1,#6
000ad2  30bc              ADDS     r0,r0,#0xbc
000ad4  f7fffffe          BL       snmp_trap
                  |L1.2776|
;;;1675   	}
;;;1676   
;;;1677   if((ETH_TRAP3_IP_1!=255)&&(ETH_TRAP3_IP_2!=255)&&(ETH_TRAP3_IP_3!=255)&&(ETH_TRAP3_IP_4!=255))
000ad8  4855              LDR      r0,|L1.3120|
000ada  f9b01000          LDRSH    r1,[r0,#0]  ; ETH_TRAP3_IP_1
000ade  29ff              CMP      r1,#0xff
000ae0  d01a              BEQ      |L1.2840|
000ae2  4854              LDR      r0,|L1.3124|
000ae4  f9b02000          LDRSH    r2,[r0,#0]  ; ETH_TRAP3_IP_2
000ae8  2aff              CMP      r2,#0xff
000aea  d015              BEQ      |L1.2840|
000aec  4852              LDR      r0,|L1.3128|
000aee  f9b03000          LDRSH    r3,[r0,#0]  ; ETH_TRAP3_IP_3
000af2  2bff              CMP      r3,#0xff
000af4  d010              BEQ      |L1.2840|
000af6  4851              LDR      r0,|L1.3132|
000af8  f9b00000          LDRSH    r0,[r0,#0]  ; ETH_TRAP3_IP_4
000afc  28ff              CMP      r0,#0xff
000afe  d00b              BEQ      |L1.2840|
;;;1678   	{
;;;1679   	temp_ip[0]= ETH_TRAP3_IP_1;
000b00  7021              STRB     r1,[r4,#0]
;;;1680   	temp_ip[1]= ETH_TRAP3_IP_2;
000b02  7062              STRB     r2,[r4,#1]
;;;1681   	temp_ip[2]= ETH_TRAP3_IP_3;
000b04  70a3              STRB     r3,[r4,#2]
;;;1682   	temp_ip[3]= ETH_TRAP3_IP_4;
000b06  70e0              STRB     r0,[r4,#3]
;;;1683   	snmp_trap (temp_ip, 6, 3, obj);
000b08  4b40              LDR      r3,|L1.3084|
000b0a  483f              LDR      r0,|L1.3080|
000b0c  33cc              ADDS     r3,r3,#0xcc
000b0e  2203              MOVS     r2,#3
000b10  2106              MOVS     r1,#6
000b12  30bc              ADDS     r0,r0,#0xbc
000b14  f7fffffe          BL       snmp_trap
                  |L1.2840|
;;;1684   	}
;;;1685   
;;;1686   if((ETH_TRAP4_IP_1!=255)&&(ETH_TRAP4_IP_2!=255)&&(ETH_TRAP4_IP_3!=255)&&(ETH_TRAP4_IP_4!=255))
000b18  4849              LDR      r0,|L1.3136|
000b1a  f9b03000          LDRSH    r3,[r0,#0]  ; ETH_TRAP4_IP_1
000b1e  2bff              CMP      r3,#0xff
000b20  d01a              BEQ      |L1.2904|
000b22  4848              LDR      r0,|L1.3140|
000b24  f9b00000          LDRSH    r0,[r0,#0]  ; ETH_TRAP4_IP_2
000b28  28ff              CMP      r0,#0xff
000b2a  d015              BEQ      |L1.2904|
000b2c  4946              LDR      r1,|L1.3144|
000b2e  f9b11000          LDRSH    r1,[r1,#0]  ; ETH_TRAP4_IP_3
000b32  29ff              CMP      r1,#0xff
000b34  d010              BEQ      |L1.2904|
000b36  4a45              LDR      r2,|L1.3148|
000b38  f9b22000          LDRSH    r2,[r2,#0]  ; ETH_TRAP4_IP_4
000b3c  2aff              CMP      r2,#0xff
000b3e  d00b              BEQ      |L1.2904|
;;;1687   	{
;;;1688   	temp_ip[0]= ETH_TRAP4_IP_1;
000b40  7023              STRB     r3,[r4,#0]
;;;1689   	temp_ip[1]= ETH_TRAP4_IP_2;
000b42  7060              STRB     r0,[r4,#1]
;;;1690   	temp_ip[2]= ETH_TRAP4_IP_3;
000b44  70a1              STRB     r1,[r4,#2]
;;;1691   	temp_ip[3]= ETH_TRAP4_IP_4;
000b46  70e2              STRB     r2,[r4,#3]
;;;1692   	snmp_trap (temp_ip, 6, 3, obj);
000b48  4b30              LDR      r3,|L1.3084|
000b4a  482f              LDR      r0,|L1.3080|
000b4c  33cc              ADDS     r3,r3,#0xcc
000b4e  2203              MOVS     r2,#3
000b50  2106              MOVS     r1,#6
000b52  30bc              ADDS     r0,r0,#0xbc
000b54  f7fffffe          BL       snmp_trap
                  |L1.2904|
;;;1693   	}
;;;1694   
;;;1695   if((ETH_TRAP5_IP_1!=255)&&(ETH_TRAP5_IP_2!=255)&&(ETH_TRAP5_IP_3!=255)&&(ETH_TRAP5_IP_4!=255))
000b58  483d              LDR      r0,|L1.3152|
000b5a  f9b02000          LDRSH    r2,[r0,#0]  ; ETH_TRAP5_IP_1
000b5e  2aff              CMP      r2,#0xff
000b60  d01c              BEQ      |L1.2972|
000b62  483c              LDR      r0,|L1.3156|
000b64  f9b01000          LDRSH    r1,[r0,#0]  ; ETH_TRAP5_IP_2
000b68  29ff              CMP      r1,#0xff
000b6a  d017              BEQ      |L1.2972|
000b6c  483a              LDR      r0,|L1.3160|
000b6e  f9b00000          LDRSH    r0,[r0,#0]  ; ETH_TRAP5_IP_3
000b72  28ff              CMP      r0,#0xff
000b74  d012              BEQ      |L1.2972|
000b76  4b39              LDR      r3,|L1.3164|
000b78  f9b33000          LDRSH    r3,[r3,#0]  ; ETH_TRAP5_IP_4
000b7c  2bff              CMP      r3,#0xff
000b7e  d00d              BEQ      |L1.2972|
;;;1696   	{
;;;1697   	temp_ip[0]= ETH_TRAP5_IP_1;
000b80  7022              STRB     r2,[r4,#0]
;;;1698   	temp_ip[1]= ETH_TRAP5_IP_2;
000b82  7061              STRB     r1,[r4,#1]
;;;1699   	temp_ip[2]= ETH_TRAP5_IP_3;
000b84  70a0              STRB     r0,[r4,#2]
;;;1700   	temp_ip[3]= ETH_TRAP5_IP_4;
000b86  70e3              STRB     r3,[r4,#3]
;;;1701   	snmp_trap (temp_ip, 6, 3, obj);
000b88  e8bd41f0          POP      {r4-r8,lr}
000b8c  4b1f              LDR      r3,|L1.3084|
000b8e  481e              LDR      r0,|L1.3080|
000b90  33cc              ADDS     r3,r3,#0xcc
000b92  2203              MOVS     r2,#3
000b94  2106              MOVS     r1,#6
000b96  30bc              ADDS     r0,r0,#0xbc
000b98  f7ffbffe          B.W      snmp_trap
                  |L1.2972|
;;;1702   	}			
;;;1703   }
000b9c  e8bd81f0          POP      {r4-r8,pc}
;;;1704   
                          ENDP

                  snmp_warm_sign_write PROC
;;;1779   //-----------------------------------------------
;;;1780   void snmp_warm_sign_write(int mode)
000ba0  e67c              B        |L1.2204|
;;;1781   {
;;;1782   if(mode==MIB_WRITE)
;;;1783   	{
;;;1784    //    if(snmp_warm_sign==1)lc640_write_int(EE_TELECORE2017_KLIMAT_WARM_SIGNAL,1);
;;;1785   //	 else lc640_write_int(EE_TELECORE2017_KLIMAT_WARM_SIGNAL,0);
;;;1786   	}
;;;1787   }
;;;1788   
                          ENDP

                  snmp_cool_sign_write PROC
;;;1789   //-----------------------------------------------
;;;1790   void snmp_cool_sign_write(int mode)
000ba2  e67b              B        |L1.2204|
;;;1791   {
;;;1792   if(mode==MIB_WRITE)
;;;1793   	{
;;;1794   //    if(snmp_cool_sign==1)lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_SIGNAL,1);
;;;1795   //	else lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_SIGNAL,0);
;;;1796   	}
;;;1797   }
;;;1798   
                          ENDP

                  snmp_warm_on_temper_write PROC
;;;1799   //-----------------------------------------------
;;;1800   void snmp_warm_on_temper_write(int mode)
000ba4  e67a              B        |L1.2204|
;;;1801   {
;;;1802   if(mode==MIB_WRITE)
;;;1803   	{
;;;1804   //     lc640_write_int(EE_TELECORE2017_KLIMAT_WARM_ON,snmp_warm_on_temper);
;;;1805   	}
;;;1806   }
;;;1807   
                          ENDP

                  snmp_warm_off_temper_write PROC
;;;1808   //-----------------------------------------------
;;;1809   void snmp_warm_off_temper_write(int mode)
000ba6  e679              B        |L1.2204|
;;;1810   {
;;;1811   if(mode==MIB_WRITE)
;;;1812   	{
;;;1813   //     lc640_write_int(EE_TELECORE2017_KLIMAT_WARM_OFF,snmp_warm_off_temper);
;;;1814   	}
;;;1815   }
;;;1816   
                          ENDP

                  snmp_warm_q_write PROC
;;;1817   //-----------------------------------------------
;;;1818   void snmp_warm_q_write(int mode)
000ba8  e678              B        |L1.2204|
;;;1819   {
;;;1820   if(mode==MIB_WRITE)
;;;1821   	{
;;;1822    //    lc640_write_int(EE_TELECORE2017_KLIMAT_CAP,snmp_warm_q);
;;;1823   	}
;;;1824   }
;;;1825   
                          ENDP

                  snmp_cool_100_temper_write PROC
;;;1826   //-----------------------------------------------
;;;1827   void snmp_cool_100_temper_write(int mode)
000baa  e677              B        |L1.2204|
;;;1828   {
;;;1829   if(mode==MIB_WRITE)
;;;1830   	{
;;;1831    //    lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_ON100,snmp_cool_100_temper);
;;;1832   	}
;;;1833   }
;;;1834   
                          ENDP

                  snmp_cool_80_temper_write PROC
;;;1835   //-----------------------------------------------
;;;1836   void snmp_cool_80_temper_write(int mode)
000bac  e676              B        |L1.2204|
;;;1837   {
;;;1838   if(mode==MIB_WRITE)
;;;1839   	{
;;;1840    //    lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_ON80,snmp_cool_80_temper);
;;;1841   	}
;;;1842   }
;;;1843   
                          ENDP

                  snmp_cool_60_temper_write PROC
;;;1844   //-----------------------------------------------
;;;1845   void snmp_cool_60_temper_write(int mode)
000bae  2801              CMP      r0,#1
;;;1846   {
;;;1847   if(mode==MIB_WRITE)
000bb0  d106              BNE      |L1.3008|
;;;1848   	{
;;;1849        lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_ON60,snmp_cool_60_temper);
000bb2  4815              LDR      r0,|L1.3080|
000bb4  f9901000          LDRSB    r1,[r0,#0]  ; snmp_cool_60_temper
000bb8  f44f70a1          MOV      r0,#0x142
000bbc  f7ffbffe          B.W      lc640_write_int
                  |L1.3008|
;;;1850   	}
;;;1851   }
000bc0  e66c              B        |L1.2204|
;;;1852   
                          ENDP

                  snmp_cool_40_temper_write PROC
;;;1853   //-----------------------------------------------
;;;1854   void snmp_cool_40_temper_write(int mode)
000bc2  2801              CMP      r0,#1
;;;1855   {
;;;1856   if(mode==MIB_WRITE)
000bc4  d106              BNE      |L1.3028|
;;;1857   	{
;;;1858        lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_ON40,snmp_cool_40_temper);
000bc6  4810              LDR      r0,|L1.3080|
000bc8  f9901001          LDRSB    r1,[r0,#1]  ; snmp_cool_40_temper
000bcc  f44f70a0          MOV      r0,#0x140
000bd0  f7ffbffe          B.W      lc640_write_int
                  |L1.3028|
;;;1859   	}
;;;1860   }
000bd4  e662              B        |L1.2204|
;;;1861   
                          ENDP

                  snmp_cool_20_temper_write PROC
;;;1862   //-----------------------------------------------
;;;1863   void snmp_cool_20_temper_write(int mode)
000bd6  2801              CMP      r0,#1
;;;1864   {
;;;1865   if(mode==MIB_WRITE)
000bd8  d106              BNE      |L1.3048|
;;;1866   	{
;;;1867        lc640_write_int(EE_TELECORE2017_KLIMAT_VENT_ON20,snmp_cool_20_temper);
000bda  480b              LDR      r0,|L1.3080|
000bdc  f9901002          LDRSB    r1,[r0,#2]  ; snmp_cool_20_temper
000be0  f44f709f          MOV      r0,#0x13e
000be4  f7ffbffe          B.W      lc640_write_int
                  |L1.3048|
;;;1868   	}
;;;1869   }
000be8  e658              B        |L1.2204|
;;;1870   
                          ENDP

                  snmp_cool_100_dtemper_write PROC
;;;1871   //-----------------------------------------------
;;;1872   void snmp_cool_100_dtemper_write(int mode)
000bea  e657              B        |L1.2204|
;;;1873   {
;;;1874   if(mode==MIB_WRITE)
;;;1875   	{
;;;1876   //     lc640_write_int(EE_TELECORE2017_KLIMAT_DVENT_ON100,snmp_cool_100_dtemper);
;;;1877   	}
;;;1878   }
;;;1879   
                          ENDP

                  snmp_cool_80_dtemper_write PROC
;;;1880   //-----------------------------------------------
;;;1881   void snmp_cool_80_dtemper_write(int mode)
000bec  e656              B        |L1.2204|
;;;1882   {
;;;1883   if(mode==MIB_WRITE)
;;;1884   	{
;;;1885   //     lc640_write_int(EE_TELECORE2017_KLIMAT_DVENT_ON80,snmp_cool_80_dtemper);
;;;1886   	}
;;;1887   }
;;;1888   
                          ENDP

                  snmp_cool_60_dtemper_write PROC
;;;1889   //-----------------------------------------------
;;;1890   void snmp_cool_60_dtemper_write(int mode)
000bee  e655              B        |L1.2204|
;;;1891   {
;;;1892   if(mode==MIB_WRITE)
;;;1893   	{
;;;1894   //     lc640_write_int(EE_TELECORE2017_KLIMAT_DVENT_ON60,snmp_cool_60_dtemper);
;;;1895   	}
;;;1896   }
;;;1897   
                          ENDP

                  snmp_cool_40_dtemper_write PROC
;;;1898   //-----------------------------------------------
;;;1899   void snmp_cool_40_dtemper_write(int mode)
000bf0  e654              B        |L1.2204|
;;;1900   {
;;;1901   if(mode==MIB_WRITE)
;;;1902   	{
;;;1903   //     lc640_write_int(EE_TELECORE2017_KLIMAT_DVENT_ON40,snmp_cool_40_dtemper);
;;;1904   	}
;;;1905   }
;;;1906   
                          ENDP

                  snmp_cool_20_dtemper_write PROC
;;;1907   //-----------------------------------------------
;;;1908   void snmp_cool_20_dtemper_write(int mode)
000bf2  2801              CMP      r0,#1
;;;1909   {
;;;1910   if(mode==MIB_WRITE)
000bf4  d106              BNE      |L1.3076|
;;;1911   	{
;;;1912        lc640_write_int(EE_TELECORE2017_KLIMAT_DVENT_ON20,snmp_cool_20_dtemper);
000bf6  4804              LDR      r0,|L1.3080|
000bf8  f9901003          LDRSB    r1,[r0,#3]  ; snmp_cool_20_dtemper
000bfc  f44f70a5          MOV      r0,#0x14a
000c00  f7ffbffe          B.W      lc640_write_int
                  |L1.3076|
;;;1913   	}
;;;1914   }
000c04  e64a              B        |L1.2204|
;;;1915   
                          ENDP

000c06  0000              DCW      0x0000
                  |L1.3080|
                          DCD      ||.data||
                  |L1.3084|
                          DCD      ||.bss||+0xc8
                  |L1.3088|
                          DCD      ETH_TRAP1_IP_1
                  |L1.3092|
                          DCD      ETH_TRAP1_IP_2
                  |L1.3096|
                          DCD      ETH_TRAP1_IP_3
                  |L1.3100|
                          DCD      ETH_TRAP1_IP_4
                  |L1.3104|
                          DCD      ETH_TRAP2_IP_1
                  |L1.3108|
                          DCD      ETH_TRAP2_IP_2
                  |L1.3112|
                          DCD      ETH_TRAP2_IP_3
                  |L1.3116|
                          DCD      ETH_TRAP2_IP_4
                  |L1.3120|
                          DCD      ETH_TRAP3_IP_1
                  |L1.3124|
                          DCD      ETH_TRAP3_IP_2
                  |L1.3128|
                          DCD      ETH_TRAP3_IP_3
                  |L1.3132|
                          DCD      ETH_TRAP3_IP_4
                  |L1.3136|
                          DCD      ETH_TRAP4_IP_1
                  |L1.3140|
                          DCD      ETH_TRAP4_IP_2
                  |L1.3144|
                          DCD      ETH_TRAP4_IP_3
                  |L1.3148|
                          DCD      ETH_TRAP4_IP_4
                  |L1.3152|
                          DCD      ETH_TRAP5_IP_1
                  |L1.3156|
                          DCD      ETH_TRAP5_IP_2
                  |L1.3160|
                          DCD      ETH_TRAP5_IP_3
                  |L1.3164|
                          DCD      ETH_TRAP5_IP_4

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  snmp_sernum_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  b510              PUSH     {r4,lr}
;;;261    {
000002  2801              CMP      r0,#1
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  d10c              BNE      |L2.32|
000006  4c07              LDR      r4,|L2.36|
000008  f44f70ab          MOV      r0,#0x156
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  6861              LDR      r1,[r4,#4]  ; snmp_sernum
00000e  f7fffffe          BL       lc640_write_long
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
000012  6861              LDR      r1,[r4,#4]  ; snmp_sernum
000014  e8bd4010          POP      {r4,lr}
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
000018  f44f70ac          MOV      r0,#0x158
00001c  f7ffbffe          B.W      lc640_write_long
                  |L2.32|
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
000020  bd10              POP      {r4,pc}
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000022  0000              DCW      0x0000
                  |L2.36|
                          DCD      ||.data||+0x80

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=1

                          EXPORTAS ||area_number.3||, ||.text||
                  snmp_main_bps_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  4770              BX       lr
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP


                          AREA ||area_number.4||, CODE, READONLY, ALIGN=1

                          EXPORTAS ||area_number.4||, ||.text||
                  snmp_max_current_koef_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  4770              BX       lr
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP


                          AREA ||area_number.5||, CODE, READONLY, ALIGN=1

                          EXPORTAS ||area_number.5||, ||.text||
                  snmp_up_charge_koef_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  4770              BX       lr
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP


                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  snmp_max_temperature_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L6.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L6.20|
000006  f9b01054          LDRSH    r1,[r0,#0x54]  ; snmp_max_temperature
00000a  207e              MOVS     r0,#0x7e
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L6.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L6.20|
                          DCD      ||.data||

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  datatime2str PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4683              MOV      r11,r0
000006  e9dd760a          LDRD     r7,r6,[sp,#0x28]
00000a  468a              MOV      r10,r1
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  4691              MOV      r9,r2
00000e  4698              MOV      r8,r3
000010  f04f0214          MOV      r2,#0x14
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
000014  a121              ADR      r1,|L7.156|
000016  4828              LDR      r0,|L7.184|
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
000018  f7fffffe          BL       __aeabi_memcpy
00001c  f04f040a          MOV      r4,#0xa
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
000020  fbbbf5f4          UDIV     r5,r11,r4
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
000024  fb04b115          MLS      r1,r4,r5,r11
000028  4823              LDR      r0,|L7.184|
;;;304    snmp_load_current=load_I;
00002a  f1010130          ADD      r1,r1,#0x30
00002e  7041              STRB     r1,[r0,#1]
;;;305    snmp_numofbat=NUMBAT;
000030  f1050530          ADD      r5,r5,#0x30
000034  7005              STRB     r5,[r0,#0]
;;;306    snmp_numofbps=NUMIST;
000036  4921              LDR      r1,|L7.188|
000038  eb01018a          ADD      r1,r1,r10,LSL #2
;;;307    snmp_numofinv=NUMINV;
00003c  880a              LDRH     r2,[r1,#0]
00003e  f8a02003          STRH     r2,[r0,#3]
;;;308    snmp_numofavt=NUMAVT;
000042  7889              LDRB     r1,[r1,#2]
000044  7141              STRB     r1,[r0,#5]
000046  fbb9f1f4          UDIV     r1,r9,r4
;;;309    snmp_numofdt=NUMDT;
00004a  fb049211          MLS      r2,r4,r1,r9
;;;310    snmp_numofsk=NUMSK;
00004e  f1020230          ADD      r2,r2,#0x30
000052  7202              STRB     r2,[r0,#8]
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
000054  f1010130          ADD      r1,r1,#0x30
000058  71c1              STRB     r1,[r0,#7]
00005a  fbb8f1f4          UDIV     r1,r8,r4
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
00005e  fb048211          MLS      r2,r4,r1,r8
000062  f1020230          ADD      r2,r2,#0x30
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
000066  7302              STRB     r2,[r0,#0xc]
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
000068  f1010130          ADD      r1,r1,#0x30
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
00006c  72c1              STRB     r1,[r0,#0xb]
00006e  fbb7f1f4          UDIV     r1,r7,r4
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
000072  fb047211          MLS      r2,r4,r1,r7
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
000076  f1020230          ADD      r2,r2,#0x30
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
00007a  73c2              STRB     r2,[r0,#0xf]
00007c  f1010130          ADD      r1,r1,#0x30
000080  7381              STRB     r1,[r0,#0xe]
000082  fbb6f1f4          UDIV     r1,r6,r4
;;;326    snmp_energy_current_energy=power_current;
000086  fb046211          MLS      r2,r4,r1,r6
;;;327    snmp_energy_input_voltage=net_U;
00008a  f1020230          ADD      r2,r2,#0x30
;;;328    
;;;329    snmp_bat_number[0]=1;
00008e  7482              STRB     r2,[r0,#0x12]
000090  f1010130          ADD      r1,r1,#0x30
000094  7441              STRB     r1,[r0,#0x11]
000096  e8bd9ff0          POP      {r4-r12,pc}
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

00009a  0000              DCW      0x0000
                  |L7.156|
00009c  30302fff          DCB      "00/",255,237,226,"/00  00:00:00       ",0
0000a0  ede22f30
0000a4  30202030
0000a8  303a3030
0000ac  3a303020
0000b0  20202020
0000b4  202000  
0000b7  00                DCB      0
                  |L7.184|
                          DCD      ||.bss||
                  |L7.188|
                          DCD      sm_mont

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  event2snmp PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;261    {
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  b088              SUB      sp,sp,#0x20
000006  4606              MOV      r6,r0
000008  48ff              LDR      r0,|L8.1032|
00000a  f04f024e          MOV      r2,#0x4e
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000e  eb0014c6          ADD      r4,r0,r6,LSL #7
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
000012  49fe              LDR      r1,|L8.1036|
000014  4620              MOV      r0,r4
000016  f7fffffe          BL       __aeabi_memcpy
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
00001a  f44f6060          MOV      r0,#0xe00
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
00001e  f7fffffe          BL       lc640_read_int
000022  4272              RSBS     r2,r6,#0
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
000024  2140              MOVS     r1,#0x40
000026  f7fffffe          BL       ptr_carry
;;;304    snmp_load_current=load_I;
00002a  ea4f1040          LSL      r0,r0,#5
00002e  f5006080          ADD      r0,r0,#0x400
;;;305    snmp_numofbat=NUMBAT;
000032  4605              MOV      r5,r0
000034  a907              ADD      r1,sp,#0x1c
;;;306    snmp_numofbps=NUMIST;
000036  4628              MOV      r0,r5
000038  f7fffffe          BL       lc640_read_long_ptr
;;;307    snmp_numofinv=NUMINV;
00003c  a902              ADD      r1,sp,#8
00003e  1d28              ADDS     r0,r5,#4
000040  f7fffffe          BL       lc640_read_long_ptr
;;;308    snmp_numofavt=NUMAVT;
000044  a906              ADD      r1,sp,#0x18
000046  f1050008          ADD      r0,r5,#8
;;;309    snmp_numofdt=NUMDT;
00004a  f7fffffe          BL       lc640_read_long_ptr
;;;310    snmp_numofsk=NUMSK;
00004e  a905              ADD      r1,sp,#0x14
000050  f105000c          ADD      r0,r5,#0xc
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
000054  f7fffffe          BL       lc640_read_long_ptr
000058  a904              ADD      r1,sp,#0x10
00005a  f1050010          ADD      r0,r5,#0x10
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
00005e  f7fffffe          BL       lc640_read_long_ptr
000062  a903              ADD      r1,sp,#0xc
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
000064  f1050014          ADD      r0,r5,#0x14
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
000068  f7fffffe          BL       lc640_read_long_ptr
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
00006c  f89d001c          LDRB     r0,[sp,#0x1c]
000070  f1040528          ADD      r5,r4,#0x28
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
000074  2855              CMP      r0,#0x55
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
000076  d052              BEQ      |L8.286|
000078  2720              MOVS     r7,#0x20
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
00007a  f04f0840          MOV      r8,#0x40
00007e  2850              CMP      r0,#0x50
000080  d076              BEQ      |L8.368|
000082  49e1              LDR      r1,|L8.1032|
;;;326    snmp_energy_current_energy=power_current;
000084  2842              CMP      r0,#0x42
000086  eb0119c6          ADD      r9,r1,r6,LSL #7
;;;327    snmp_energy_input_voltage=net_U;
00008a  46ca              MOV      r10,r9
00008c  f1090929          ADD      r9,r9,#0x29
;;;328    
;;;329    snmp_bat_number[0]=1;
000090  f10a0a15          ADD      r10,r10,#0x15
000094  d06b              BEQ      |L8.366|
000096  2853              CMP      r0,#0x53
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
000098  d165              BNE      |L8.358|
00009a  a0dd              ADR      r0,|L8.1040|
00009c  6801              LDR      r1,[r0,#0]
00009e  6021              STR      r1,[r4,#0]
0000a0  8880              LDRH     r0,[r0,#4]
0000a2  80a0              STRH     r0,[r4,#4]
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
0000a4  f89d001d          LDRB     r0,[sp,#0x1d]
0000a8  f1000031          ADD      r0,r0,#0x31
0000ac  7160              STRB     r0,[r4,#5]
;;;332    snmp_bat_current[0]=bat[0]._Ib;
0000ae  f1040007          ADD      r0,r4,#7
0000b2  f04f020e          MOV      r2,#0xe
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
0000b6  a1d9              ADR      r1,|L8.1052|
0000b8  f7fffffe          BL       __aeabi_memcpy
0000bc  f89d0016          LDRB     r0,[sp,#0x16]
0000c0  f89d1015          LDRB     r1,[sp,#0x15]
0000c4  e9cd1000          STRD     r1,r0,[sp,#0]
0000c8  f89d3014          LDRB     r3,[sp,#0x14]
0000cc  f89d2018          LDRB     r2,[sp,#0x18]
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
0000d0  f89d1019          LDRB     r1,[sp,#0x19]
0000d4  f89d001a          LDRB     r0,[sp,#0x1a]
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
0000d8  f7fffffe          BL       datatime2str
0000dc  4601              MOV      r1,r0
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
0000de  2213              MOVS     r2,#0x13
0000e0  4650              MOV      r0,r10
0000e2  f7fffffe          BL       __aeabi_memcpy
0000e6  f89d001e          LDRB     r0,[sp,#0x1e]
0000ea  284c              CMP      r0,#0x4c
0000ec  d07e              BEQ      |L8.492|
0000ee  2854              CMP      r0,#0x54
0000f0  d07d              BEQ      |L8.494|
0000f2  2855              CMP      r0,#0x55
0000f4  d07c              BEQ      |L8.496|
0000f6  2875              CMP      r0,#0x75
0000f8  d07b              BEQ      |L8.498|
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
0000fa  a0cc              ADR      r0,|L8.1068|
;;;344    snmp_bat_charge[0]=bat[0]._zar;
0000fc  6801              LDR      r1,[r0,#0]
0000fe  f8c41029          STR      r1,[r4,#0x29]
000102  8880              LDRH     r0,[r0,#4]
000104  f8a4002d          STRH     r0,[r4,#0x2d]
000108  f04f00ff          MOV      r0,#0xff
;;;345    snmp_bat_status[0]=bat[0]._av;
00010c  f884002f          STRB     r0,[r4,#0x2f]
000110  f04f0530          MOV      r5,#0x30
                  |L8.276|
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
000114  f89d0010          LDRB     r0,[sp,#0x10]
000118  2841              CMP      r0,#0x41
00011a  d06b              BEQ      |L8.500|
00011c  e2d2              B        |L8.1732|
                  |L8.286|
00011e  f89d001e          LDRB     r0,[sp,#0x1e]
000122  2852              CMP      r0,#0x52
;;;347    
;;;348    snmp_bat_number[1]=2;
000124  d11f              BNE      |L8.358|
000126  2232              MOVS     r2,#0x32
000128  a1c3              ADR      r1,|L8.1080|
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
00012a  4620              MOV      r0,r4
00012c  f7fffffe          BL       __aeabi_memcpy
000130  f89d0016          LDRB     r0,[sp,#0x16]
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
000134  f89d1015          LDRB     r1,[sp,#0x15]
;;;351    snmp_bat_current[1]=bat[1]._Ib;
000138  e9cd1000          STRD     r1,r0,[sp,#0]
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
00013c  f89d3014          LDRB     r3,[sp,#0x14]
000140  f89d2018          LDRB     r2,[sp,#0x18]
000144  f89d1019          LDRB     r1,[sp,#0x19]
000148  f89d001a          LDRB     r0,[sp,#0x1a]
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
00014c  f7fffffe          BL       datatime2str
000150  4601              MOV      r1,r0
000152  f1040011          ADD      r0,r4,#0x11
000156  2214              MOVS     r2,#0x14
000158  f7fffffe          BL       __aeabi_memcpy
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
00015c  2214              MOVS     r2,#0x14
00015e  a1c4              ADR      r1,|L8.1136|
000160  4628              MOV      r0,r5
000162  f7fffffe          BL       __aeabi_memcpy
                  |L8.358|
;;;356    snmp_bat_status[1]=bat[1]._av;
000166  b008              ADD      sp,sp,#0x20
000168  e8bd87f0          POP      {r4-r10,pc}
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
00016c  e000              B        |L8.368|
                  |L8.366|
00016e  e054              B        |L8.538|
                  |L8.368|
000170  2217              MOVS     r2,#0x17
000172  a1c5              ADR      r1,|L8.1160|
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
000174  4620              MOV      r0,r4
000176  f7fffffe          BL       __aeabi_memcpy
00017a  f89d0016          LDRB     r0,[sp,#0x16]
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
00017e  f89d1015          LDRB     r1,[sp,#0x15]
000182  e9cd1000          STRD     r1,r0,[sp,#0]
;;;363    snmp_bps_current[0]=bps[0]._Ii;
000186  f89d3014          LDRB     r3,[sp,#0x14]
00018a  f89d2018          LDRB     r2,[sp,#0x18]
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
00018e  f89d1019          LDRB     r1,[sp,#0x19]
000192  f89d001a          LDRB     r0,[sp,#0x1a]
000196  f7fffffe          BL       datatime2str
;;;365    snmp_bps_stat[0]=bps[0]._av;
00019a  4601              MOV      r1,r0
00019c  f1040017          ADD      r0,r4,#0x17
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
0001a0  2213              MOVS     r2,#0x13
0001a2  f7fffffe          BL       __aeabi_memcpy
0001a6  f884802a          STRB     r8,[r4,#0x2a]
0001aa  4897              LDR      r0,|L8.1032|
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
0001ac  f89d2010          LDRB     r2,[sp,#0x10]
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
0001b0  eb0010c6          ADD      r0,r0,r6,LSL #7
0001b4  302b              ADDS     r0,r0,#0x2b
0001b6  2a41              CMP      r2,#0x41
;;;377    snmp_bps_current[1]=bps[1]._Ii;
0001b8  d103              BNE      |L8.450|
0001ba  f89d1011          LDRB     r1,[sp,#0x11]
0001be  2941              CMP      r1,#0x41
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
0001c0  d026              BEQ      |L8.528|
                  |L8.450|
0001c2  a0b8              ADR      r0,|L8.1188|
0001c4  6801              LDR      r1,[r0,#0]
0001c6  f8c4102b          STR      r1,[r4,#0x2b]
;;;379    snmp_bps_stat[1]=bps[1]._av;
0001ca  6841              LDR      r1,[r0,#4]
0001cc  f8c4102f          STR      r1,[r4,#0x2f]
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
0001d0  8900              LDRH     r0,[r0,#8]
0001d2  f8a40033          STRH     r0,[r4,#0x33]
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
0001d6  f8847035          STRB     r7,[r4,#0x35]
0001da  f89d000e          LDRB     r0,[sp,#0xe]
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
0001de  f89d100d          LDRB     r1,[sp,#0xd]
0001e2  e9cd1000          STRD     r1,r0,[sp,#0]
;;;390    snmp_bps_current[2]=bps[2]._Ii;
0001e6  f89d300c          LDRB     r3,[sp,#0xc]
0001ea  e004              B        |L8.502|
                  |L8.492|
0001ec  e241              B        |L8.1650|
                  |L8.494|
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
0001ee  e248              B        |L8.1666|
                  |L8.496|
0001f0  e254              B        |L8.1692|
                  |L8.498|
0001f2  e25b              B        |L8.1708|
                  |L8.500|
0001f4  e262              B        |L8.1724|
                  |L8.502|
;;;392    snmp_bps_stat[2]=bps[2]._av;
0001f6  f89d1011          LDRB     r1,[sp,#0x11]
0001fa  f89d0012          LDRB     r0,[sp,#0x12]
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
0001fe  f7fffffe          BL       datatime2str
000202  4601              MOV      r1,r0
;;;394    
;;;395    snmp_bps_number[3]=4;
000204  f1040036          ADD      r0,r4,#0x36
000208  2213              MOVS     r2,#0x13
00020a  f7fffffe          BL       __aeabi_memcpy
                  |L8.526|
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
00020e  e7aa              B        |L8.358|
                  |L8.528|
000210  220d              MOVS     r2,#0xd
000212  a1a8              ADR      r1,|L8.1204|
;;;397    snmp_bps_current[3]=bps[3]._Ii;
000214  f7fffffe          BL       __aeabi_memcpy
000218  e7a5              B        |L8.358|
                  |L8.538|
00021a  f04f0500          MOV      r5,#0
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
00021e  f89d001e          LDRB     r0,[sp,#0x1e]
000222  2843              CMP      r0,#0x43
;;;399    snmp_bps_stat[3]=bps[3]._av;
000224  d14e              BNE      |L8.708|
000226  2215              MOVS     r2,#0x15
000228  a1a6              ADR      r1,|L8.1220|
00022a  4620              MOV      r0,r4
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
00022c  f7fffffe          BL       __aeabi_memcpy
000230  f89d0016          LDRB     r0,[sp,#0x16]
;;;401    
;;;402    snmp_bps_number[4]=5;
000234  f89d1015          LDRB     r1,[sp,#0x15]
000238  e9cd1000          STRD     r1,r0,[sp,#0]
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
00023c  f89d3014          LDRB     r3,[sp,#0x14]
000240  f89d2018          LDRB     r2,[sp,#0x18]
;;;404    snmp_bps_current[4]=bps[4]._Ii;
000244  f89d1019          LDRB     r1,[sp,#0x19]
000248  f89d001a          LDRB     r0,[sp,#0x1a]
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
00024c  f7fffffe          BL       datatime2str
000250  4601              MOV      r1,r0
;;;406    snmp_bps_stat[4]=bps[4]._av;
000252  2213              MOVS     r2,#0x13
000254  4650              MOV      r0,r10
000256  f7fffffe          BL       __aeabi_memcpy
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
00025a  f8848028          STRB     r8,[r4,#0x28]
00025e  2216              MOVS     r2,#0x16
;;;408    
;;;409    snmp_bps_number[5]=6;
000260  a19e              ADR      r1,|L8.1244|
000262  4648              MOV      r0,r9
000264  f7fffffe          BL       __aeabi_memcpy
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
000268  4867              LDR      r0,|L8.1032|
00026a  f89d2010          LDRB     r2,[sp,#0x10]
00026e  eb0010c6          ADD      r0,r0,r6,LSL #7
;;;411    snmp_bps_current[5]=bps[5]._Ii;
000272  303f              ADDS     r0,r0,#0x3f
000274  2a41              CMP      r2,#0x41
000276  d103              BNE      |L8.640|
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
000278  f89d1011          LDRB     r1,[sp,#0x11]
00027c  2941              CMP      r1,#0x41
00027e  d026              BEQ      |L8.718|
                  |L8.640|
;;;413    snmp_bps_stat[5]=bps[5]._av;
000280  a088              ADR      r0,|L8.1188|
000282  6801              LDR      r1,[r0,#0]
000284  f8c4103f          STR      r1,[r4,#0x3f]
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
000288  6841              LDR      r1,[r0,#4]
00028a  f8c41043          STR      r1,[r4,#0x43]
;;;415    
;;;416    snmp_bps_number[6]=7;
00028e  8900              LDRH     r0,[r0,#8]
000290  f8a40047          STRH     r0,[r4,#0x47]
000294  f8847049          STRB     r7,[r4,#0x49]
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
000298  f04f054a          MOV      r5,#0x4a
00029c  f89d000e          LDRB     r0,[sp,#0xe]
;;;418    snmp_bps_current[6]=bps[6]._Ii;
0002a0  f89d100d          LDRB     r1,[sp,#0xd]
0002a4  e9cd1000          STRD     r1,r0,[sp,#0]
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
0002a8  f89d300c          LDRB     r3,[sp,#0xc]
0002ac  f89d1011          LDRB     r1,[sp,#0x11]
;;;420    snmp_bps_stat[6]=bps[6]._av;
0002b0  f89d0012          LDRB     r0,[sp,#0x12]
0002b4  f7fffffe          BL       datatime2str
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
0002b8  4601              MOV      r1,r0
0002ba  f104004a          ADD      r0,r4,#0x4a
;;;422    
;;;423    snmp_bps_number[7]=8;
0002be  2213              MOVS     r2,#0x13
0002c0  f7fffffe          BL       __aeabi_memcpy
                  |L8.708|
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
0002c4  f89d001e          LDRB     r0,[sp,#0x1e]
0002c8  285a              CMP      r0,#0x5a
0002ca  d007              BEQ      |L8.732|
0002cc  e053              B        |L8.886|
                  |L8.718|
0002ce  220d              MOVS     r2,#0xd
;;;425    snmp_bps_current[7]=bps[7]._Ii;
0002d0  a178              ADR      r1,|L8.1204|
0002d2  f7fffffe          BL       __aeabi_memcpy
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
0002d6  f04f054c          MOV      r5,#0x4c
;;;427    snmp_bps_stat[7]=bps[7]._av;
0002da  e7f3              B        |L8.708|
                  |L8.732|
0002dc  1960              ADDS     r0,r4,r5
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
0002de  2220              MOVS     r2,#0x20
0002e0  a184              ADR      r1,|L8.1268|
0002e2  f7fffffe          BL       __aeabi_memcpy
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
0002e6  f1050520          ADD      r5,r5,#0x20
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
0002ea  b2ed              UXTB     r5,r5
0002ec  f89d0016          LDRB     r0,[sp,#0x16]
0002f0  f89d1015          LDRB     r1,[sp,#0x15]
;;;434    snmp_inv_current[0]=inv[0]._Ii;
0002f4  e9cd1000          STRD     r1,r0,[sp,#0]
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
0002f8  f89d3014          LDRB     r3,[sp,#0x14]
0002fc  f89d2018          LDRB     r2,[sp,#0x18]
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
000300  f89d1019          LDRB     r1,[sp,#0x19]
000304  f89d001a          LDRB     r0,[sp,#0x1a]
;;;437    
;;;438    snmp_inv_number[1]=2;
000308  f7fffffe          BL       datatime2str
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
00030c  4601              MOV      r1,r0
00030e  1960              ADDS     r0,r4,r5
000310  2213              MOVS     r2,#0x13
;;;440    snmp_inv_current[1]=inv[1]._Ii;
000312  f7fffffe          BL       __aeabi_memcpy
000316  f1050513          ADD      r5,r5,#0x13
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
00031a  b2e8              UXTB     r0,r5
00031c  f8048000          STRB     r8,[r4,r0]
000320  f1000001          ADD      r0,r0,#1
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
000324  b2c5              UXTB     r5,r0
000326  f89d2010          LDRB     r2,[sp,#0x10]
;;;443    
;;;444    snmp_inv_number[2]=3;
00032a  2a41              CMP      r2,#0x41
00032c  d103              BNE      |L8.822|
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
00032e  f89d0011          LDRB     r0,[sp,#0x11]
000332  2841              CMP      r0,#0x41
;;;446    snmp_inv_current[2]=inv[2]._Ii;
000334  d04e              BEQ      |L8.980|
                  |L8.822|
000336  a178              ADR      r1,|L8.1304|
000338  eb040005          ADD      r0,r4,r5
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
00033c  680b              LDR      r3,[r1,#0]
00033e  6003              STR      r3,[r0,#0]
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
000340  684b              LDR      r3,[r1,#4]
000342  6043              STR      r3,[r0,#4]
000344  8909              LDRH     r1,[r1,#8]
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
000346  8101              STRH     r1,[r0,#8]
000348  7287              STRB     r7,[r0,#0xa]
00034a  f105050b          ADD      r5,r5,#0xb
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
00034e  b2ed              UXTB     r5,r5
000350  f89d000e          LDRB     r0,[sp,#0xe]
000354  f89d100d          LDRB     r1,[sp,#0xd]
000358  e9cd1000          STRD     r1,r0,[sp,#0]
00035c  f89d300c          LDRB     r3,[sp,#0xc]
000360  f89d1011          LDRB     r1,[sp,#0x11]
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
000364  f89d0012          LDRB     r0,[sp,#0x12]
000368  f7fffffe          BL       datatime2str
00036c  4601              MOV      r1,r0
00036e  1960              ADDS     r0,r4,r5
000370  2213              MOVS     r2,#0x13
000372  f7fffffe          BL       __aeabi_memcpy
                  |L8.886|
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
000376  f89d001e          LDRB     r0,[sp,#0x1e]
00037a  284b              CMP      r0,#0x4b
00037c  f47faf47          BNE      |L8.526|
000380  1960              ADDS     r0,r4,r5
000382  221d              MOVS     r2,#0x1d
000384  a168              ADR      r1,|L8.1320|
;;;459    else snmp_sk_alarm_aktiv[0]=0;
000386  f7fffffe          BL       __aeabi_memcpy
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
00038a  f105051d          ADD      r5,r5,#0x1d
00038e  b2ed              UXTB     r5,r5
000390  f89d0016          LDRB     r0,[sp,#0x16]
000394  f89d1015          LDRB     r1,[sp,#0x15]
;;;461    else                     snmp_sk_alarm[0]=0;
000398  e9cd1000          STRD     r1,r0,[sp,#0]
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
00039c  f89d3014          LDRB     r3,[sp,#0x14]
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
0003a0  f89d2018          LDRB     r2,[sp,#0x18]
0003a4  f89d1019          LDRB     r1,[sp,#0x19]
0003a8  f89d001a          LDRB     r0,[sp,#0x1a]
0003ac  f7fffffe          BL       datatime2str
0003b0  4601              MOV      r1,r0
0003b2  1960              ADDS     r0,r4,r5
0003b4  2213              MOVS     r2,#0x13
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
0003b6  f7fffffe          BL       __aeabi_memcpy
0003ba  f1050513          ADD      r5,r5,#0x13
;;;467    else snmp_sk_aktiv[1]=0;
0003be  b2e8              UXTB     r0,r5
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
0003c0  f8048000          STRB     r8,[r4,r0]
0003c4  f1000001          ADD      r0,r0,#1
;;;469    else snmp_sk_alarm_aktiv[1]=0;
0003c8  b2c1              UXTB     r1,r0
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
0003ca  f89d2010          LDRB     r2,[sp,#0x10]
0003ce  2a41              CMP      r2,#0x41
0003d0  d009              BEQ      |L8.998|
;;;471    else                     snmp_sk_alarm[1]=0;
0003d2  e00c              B        |L8.1006|
                  |L8.980|
;;;472    
;;;473    snmp_sk_number[2]=3;
0003d4  1960              ADDS     r0,r4,r5
0003d6  220d              MOVS     r2,#0xd
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
0003d8  a15b              ADR      r1,|L8.1352|
0003da  f7fffffe          BL       __aeabi_memcpy
0003de  f105050d          ADD      r5,r5,#0xd
0003e2  b2ed              UXTB     r5,r5
0003e4  e7c7              B        |L8.886|
                  |L8.998|
0003e6  f89d0011          LDRB     r0,[sp,#0x11]
0003ea  2841              CMP      r0,#0x41
0003ec  d00a              BEQ      |L8.1028|
                  |L8.1006|
0003ee  a34a              ADR      r3,|L8.1304|
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
0003f0  eb040001          ADD      r0,r4,r1
0003f4  681d              LDR      r5,[r3,#0]
0003f6  6005              STR      r5,[r0,#0]
;;;476    else snmp_sk_aktiv[2]=0;
0003f8  685d              LDR      r5,[r3,#4]
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
0003fa  6045              STR      r5,[r0,#4]
0003fc  891b              LDRH     r3,[r3,#8]
0003fe  8103              STRH     r3,[r0,#8]
000400  7287              STRB     r7,[r0,#0xa]
000402  e0a9              B        |L8.1368|
                  |L8.1028|
000404  e0e6              B        |L8.1492|
000406  0000              DCW      0x0000
                  |L8.1032|
                          DCD      ||.data||+0xe4
                  |L8.1036|
                          DCD      ||.constdata||
                  |L8.1040|
000410  c1cfd120          DCB      193,207,209," ",185,"      ",0
000414  b9202020
000418  20202000
                  |L8.1052|
00041c  202020c0          DCB      "   ",192,226,224,240,232,255,"!!!@  ",0
000420  e2e0f0e8
000424  ff212121
000428  40202000
                  |L8.1068|
00042c  4020f4e8          DCB      "@ ",244,232,227,237,255,"  ",0
000430  e3edff20
000434  2000    
000436  00                DCB      0
000437  00                DCB      0
                  |L8.1080|
000438  c2eaebfe          DCB      194,234,235,254,247,229,237,232,229," ",200,193,221,207,224
00043c  f7e5ede8
000440  e520c8c1
000444  ddcfe0  
000447  40202020          DCB      "@                                      ",0
00044b  20202020
00044f  20202020
000453  20202020
000457  20202020
00045b  20202020
00045f  20202020
000463  20202020
000467  20202020
00046b  20202000
00046f  00                DCB      0
                  |L8.1136|
000470  40202020          DCB      "@                   ",0
000474  20202020
000478  20202020
00047c  20202020
000480  20202020
000484  00      
000485  00                DCB      0
000486  00                DCB      0
000487  00                DCB      0
                  |L8.1160|
000488  c0e2e0f0          DCB      192,226,224,240,232,255," ",239,232,242,224,254,249,229,233
00048c  e8ff20ef
000490  e8f2e0fe
000494  f9e5e9  
000497  20f1e5f2          DCB      " ",241,229,242,232," @  ",0
00049b  e8204020
00049f  2000    
0004a1  00                DCB      0
0004a2  00                DCB      0
0004a3  00                DCB      0
                  |L8.1188|
0004a4  20f3f1f2          DCB      " ",243,241,242,240,224,237,229,237,224,"   ",0
0004a8  f0e0ede5
0004ac  ede02020
0004b0  2000    
0004b2  00                DCB      0
0004b3  00                DCB      0
                  |L8.1204|
0004b4  20ede520          DCB      " ",237,229," ",243,241,242,240,224,237,229,237,224,"  ",0
0004b8  f3f1f2f0
0004bc  e0ede5ed
0004c0  e0202000
                  |L8.1220|
0004c4  c1e0f2e0          DCB      193,224,242,224,240,229,255,".  ",192,226,224,240,232,255
0004c8  f0e5ff2e
0004cc  2020c0e2
0004d0  e0f0e8ff
0004d4  21212120          DCB      "!!! @  ",0
0004d8  40202000
                  |L8.1244|
0004dc  c1e0f2e0          DCB      193,224,242,224,240,229,255," ",237,229," ",238,225,237,224
0004e0  f0e5ff20
0004e4  ede520ee
0004e8  e1ede0  
0004eb  f0f3e6e5          DCB      240,243,230,229,237,224,", ",0
0004ef  ede02c20
0004f3  00      
                  |L8.1268|
0004f4  c1e0f2e0          DCB      193,224,242,224,240,229,255,".  ",194,251,240,224,226,237
0004f8  f0e5ff2e
0004fc  2020c2fb
000500  f0e0e2ed
000504  e8e2e0fe          DCB      232,226,224,254,249,232,233," ",231,224,240,255,228," @ "
000508  f9e8e920
00050c  e7e0f0ff
000510  e4204020
000514  2000              DCB      " ",0
000516  00                DCB      0
000517  00                DCB      0
                  |L8.1304|
000518  20e7e0e2          DCB      " ",231,224,226,229,240,248,229,237,"   ",0
00051c  e5f0f8e5
000520  ed202020
000524  00      
000525  00                DCB      0
000526  00                DCB      0
000527  00                DCB      0
                  |L8.1320|
000528  c1e0f2e0          DCB      193,224,242,224,240,229,255,".  ",202,238,237,242,240,238
00052c  f0e5ff2e
000530  2020caee
000534  edf2f0ee
000538  ebfc20e5          DCB      235,252," ",229,236,234,238,241,242,232," @  ",0
00053c  eceaeef1
000540  f2e82040
000544  202000  
000547  00                DCB      0
                  |L8.1352|
000548  20ede520          DCB      " ",237,229," ",231,224,226,229,240,248,229,237,"  ",0
00054c  e7e0e2e5
000550  f0f8e5ed
000554  202000  
000557  00                DCB      0
                  |L8.1368|
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
000558  f101010b          ADD      r1,r1,#0xb
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
00055c  b2cd              UXTB     r5,r1
00055e  f89d000e          LDRB     r0,[sp,#0xe]
;;;542    snmp_u_min_power=UMN;
000562  f89d100d          LDRB     r1,[sp,#0xd]
000566  e9cd1000          STRD     r1,r0,[sp,#0]
;;;543    snmp_u_withouth_bat=U0B;
00056a  f89d300c          LDRB     r3,[sp,#0xc]
;;;544    snmp_control_current=IKB;
00056e  f89d1011          LDRB     r1,[sp,#0x11]
000572  f89d0012          LDRB     r0,[sp,#0x12]
;;;545    snmp_max_charge_current=IZMAX;
000576  f7fffffe          BL       datatime2str
;;;546    snmp_max_current=IMAX;
00057a  4601              MOV      r1,r0
00057c  442c              ADD      r4,r4,r5
00057e  2213              MOVS     r2,#0x13
;;;547    snmp_min_current=IMIN;
000580  4620              MOV      r0,r4
000582  f7fffffe          BL       __aeabi_memcpy
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
000586  2227              MOVS     r2,#0x27
000588  a160              ADR      r1,|L8.1804|
00058a  4620              MOV      r0,r4
;;;551    snmp_max_temperature=TMAX;
00058c  f7fffffe          BL       __aeabi_memcpy
000590  f89d001b          LDRB     r0,[sp,#0x1b]
;;;552    snmp_tsign_bat=TBATSIGN; 
000594  f89d1017          LDRB     r1,[sp,#0x17]
;;;553    snmp_tmax_bat=TBATMAX;
000598  eb002001          ADD      r0,r0,r1,LSL #8
00059c  b202              SXTH     r2,r0
00059e  f04f010a          MOV      r1,#0xa
0005a2  fb92f0f1          SDIV     r0,r2,r1
;;;554    snmp_tsign_bps=TSIGN;
0005a6  fb012210          MLS      r2,r1,r0,r2
;;;555    snmp_tmax_bps=TMAX;
0005aa  f1020230          ADD      r2,r2,#0x30
;;;556    snmp_bat_part_alarm=UBM_AV; 
0005ae  72a2              STRB     r2,[r4,#0xa]
0005b0  b200              SXTH     r0,r0
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
0005b2  fb90f2f1          SDIV     r2,r0,r1
0005b6  fb010012          MLS      r0,r1,r2,r0
;;;558    
;;;559    for(i=0;i<12;i++)
0005ba  f1000030          ADD      r0,r0,#0x30
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
0005be  7220              STRB     r0,[r4,#8]
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
0005c0  b210              SXTH     r0,r2
0005c2  b170              CBZ      r0,|L8.1506|
0005c4  fb90f2f1          SDIV     r2,r0,r1              ;561
0005c8  fb010012          MLS      r0,r1,r2,r0
0005cc  f1000030          ADD      r0,r0,#0x30           ;561
0005d0  71e0              STRB     r0,[r4,#7]            ;561
0005d2  e007              B        |L8.1508|
                  |L8.1492|
0005d4  1860              ADDS     r0,r4,r1
0005d6  220d              MOVS     r2,#0xd
0005d8  f2af0194          ADR      r1,|L8.1352|
0005dc  f7fffffe          BL       __aeabi_memcpy
0005e0  e5c1              B        |L8.358|
                  |L8.1506|
0005e2  71e7              STRB     r7,[r4,#7]
                  |L8.1508|
0005e4  f89d000a          LDRB     r0,[sp,#0xa]
0005e8  f89d200b          LDRB     r2,[sp,#0xb]          ;559
0005ec  eb002002          ADD      r0,r0,r2,LSL #8       ;559
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
0005f0  b200              SXTH     r0,r0
0005f2  fb90f2f1          SDIV     r2,r0,r1
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
0005f6  fb010012          MLS      r0,r1,r2,r0
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
0005fa  f1000030          ADD      r0,r0,#0x30
0005fe  75a0              STRB     r0,[r4,#0x16]
;;;571    snmp_dt_temper[1]=t_ext[1];
000600  b210              SXTH     r0,r2
;;;572    snmp_dt_temper[2]=t_ext[2];
000602  fb90f2f1          SDIV     r2,r0,r1
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
000606  fb010012          MLS      r0,r1,r2,r0
00060a  f1000030          ADD      r0,r0,#0x30
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
00060e  7520              STRB     r0,[r4,#0x14]
000610  b210              SXTH     r0,r2
000612  b138              CBZ      r0,|L8.1572|
000614  fb90f2f1          SDIV     r2,r0,r1
000618  fb010012          MLS      r0,r1,r2,r0
00061c  f1000030          ADD      r0,r0,#0x30
;;;576    snmp_dt_error[1]=ND_EXT[1];
000620  74e0              STRB     r0,[r4,#0x13]
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
000622  e000              B        |L8.1574|
                  |L8.1572|
000624  74e7              STRB     r7,[r4,#0x13]
                  |L8.1574|
000626  f89d0008          LDRB     r0,[sp,#8]
;;;578    snmp_dt_error[2]=ND_EXT[2];
00062a  f89d2009          LDRB     r2,[sp,#9]
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
00062e  eb002002          ADD      r0,r0,r2,LSL #8
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
000632  b202              SXTH     r2,r0
000634  fb92f0f1          SDIV     r0,r2,r1
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
000638  fb012210          MLS      r2,r1,r0,r2
00063c  f1020230          ADD      r2,r2,#0x30           ;456
000640  f8842023          STRB     r2,[r4,#0x23]         ;458
000644  b200              SXTH     r0,r0                 ;460
000646  fb90f2f1          SDIV     r2,r0,r1              ;460
00064a  fb010012          MLS      r0,r1,r2,r0           ;466
00064e  f1000030          ADD      r0,r0,#0x30           ;468
000652  f8840021          STRB     r0,[r4,#0x21]         ;470
000656  b210              SXTH     r0,r2                 ;475
000658  b140              CBZ      r0,|L8.1644|
00065a  fb90f2f1          SDIV     r2,r0,r1              ;477
00065e  fb010012          MLS      r0,r1,r2,r0           ;479
000662  f1000030          ADD      r0,r0,#0x30           ;484
000666  f8840020          STRB     r0,[r4,#0x20]         ;486
00066a  e57c              B        |L8.358|
                  |L8.1644|
00066c  f8847020          STRB     r7,[r4,#0x20]         ;562
000670  e579              B        |L8.358|
                  |L8.1650|
000672  2214              MOVS     r2,#0x14              ;562
000674  a130              ADR      r1,|L8.1848|
000676  4628              MOV      r0,r5                 ;562
000678  f7fffffe          BL       __aeabi_memcpy
00067c  f04f0541          MOV      r5,#0x41              ;562
000680  e548              B        |L8.276|
                  |L8.1666|
000682  a034              ADR      r0,|L8.1876|
000684  6801              LDR      r1,[r0,#0]            ;562
000686  f8c41029          STR      r1,[r4,#0x29]         ;562
00068a  6841              LDR      r1,[r0,#4]            ;562
00068c  f8c4102d          STR      r1,[r4,#0x2d]         ;562
000690  8900              LDRH     r0,[r0,#8]            ;562
000692  f8a40031          STRH     r0,[r4,#0x31]         ;562
000696  f04f0533          MOV      r5,#0x33              ;562
00069a  e53b              B        |L8.276|
                  |L8.1692|
00069c  2210              MOVS     r2,#0x10              ;562
00069e  a131              ADR      r1,|L8.1892|
0006a0  4648              MOV      r0,r9                 ;562
0006a2  f7fffffe          BL       __aeabi_memcpy
0006a6  f04f0539          MOV      r5,#0x39              ;562
0006aa  e533              B        |L8.276|
                  |L8.1708|
0006ac  2210              MOVS     r2,#0x10              ;562
0006ae  a132              ADR      r1,|L8.1912|
0006b0  4648              MOV      r0,r9                 ;562
0006b2  f7fffffe          BL       __aeabi_memcpy
0006b6  f04f0539          MOV      r5,#0x39              ;562
0006ba  e52b              B        |L8.276|
                  |L8.1724|
0006bc  f89d0011          LDRB     r0,[sp,#0x11]         ;562
0006c0  2841              CMP      r0,#0x41              ;562
0006c2  d01d              BEQ      |L8.1792|
                  |L8.1732|
0006c4  1960              ADDS     r0,r4,r5              ;562
0006c6  220d              MOVS     r2,#0xd               ;562
0006c8  a130              ADR      r1,|L8.1932|
0006ca  f7fffffe          BL       __aeabi_memcpy
0006ce  f105050d          ADD      r5,r5,#0xd            ;562
0006d2  b2ed              UXTB     r5,r5                 ;562
0006d4  f89d000e          LDRB     r0,[sp,#0xe]          ;562
0006d8  f89d100d          LDRB     r1,[sp,#0xd]          ;562
0006dc  e9cd1000          STRD     r1,r0,[sp,#0]         ;562
0006e0  f89d300c          LDRB     r3,[sp,#0xc]          ;562
0006e4  f89d2010          LDRB     r2,[sp,#0x10]         ;562
0006e8  f89d1011          LDRB     r1,[sp,#0x11]         ;562
0006ec  f89d0012          LDRB     r0,[sp,#0x12]         ;562
0006f0  f7fffffe          BL       datatime2str
0006f4  4601              MOV      r1,r0                 ;562
0006f6  1960              ADDS     r0,r4,r5              ;562
0006f8  2213              MOVS     r2,#0x13              ;562
0006fa  f7fffffe          BL       __aeabi_memcpy
0006fe  e532              B        |L8.358|
                  |L8.1792|
000700  1960              ADDS     r0,r4,r5              ;562
000702  220f              MOVS     r2,#0xf               ;562
000704  a125              ADR      r1,|L8.1948|
000706  f7fffffe          BL       __aeabi_memcpy
00070a  e52c              B        |L8.358|
;;;607    //-----------------------------------------------
                          ENDP

                  |L8.1804|
00070c  2c2055ed          DCB      ", U",237,224,247,"   , ",194,", U",234,238,237,"   , ",194
000710  e0f72020
000714  202c20c2
000718  2c2055ea
00071c  eeed2020
000720  202c20c2
000724  2c2043e1          DCB      ", C",225,224,242,"    , ",192,"*",247," ",0
000728  e0f22020
00072c  20202c20
000730  c02af720
000734  00      
000735  00                DCB      0
000736  00                DCB      0
000737  00                DCB      0
                  |L8.1848|
000738  40eef2ea          DCB      "@",238,242,234,235,254,247,232,235,241,255,"           "
00073c  ebfef7e8
000740  ebf1ff20
000744  20202020
000748  20202020
00074c  2020    
00074e  202000            DCB      "  ",0
000751  00                DCB      0
000752  00                DCB      0
000753  00                DCB      0
                  |L8.1876|
000754  4020efe5          DCB      "@ ",239,229,240,229,227,240,229,226,"   ",0
000758  f0e5e3f0
00075c  e5e22020
000760  2000    
000762  00                DCB      0
000763  00                DCB      0
                  |L8.1892|
000764  4020e7e0          DCB      "@ ",231,224,226,251,248,229,237,238," U",226,251,245,"."
000768  e2fbf8e5
00076c  edee2055
000770  e2fbf52e
000774  202000            DCB      "  ",0
000777  00                DCB      0
                  |L8.1912|
000778  4020e7e0          DCB      "@ ",231,224,237,232,230,229,237,238," U",226,251,245,"."
00077c  ede8e6e5
000780  edee2055
000784  e2fbf52e
000788  202000            DCB      "  ",0
00078b  00                DCB      0
                  |L8.1932|
00078c  2c2020f3          DCB      ",  ",243,241,242,240,224,237,229,237,224,"   ",0
000790  f1f2f0e0
000794  ede5ede0
000798  20202000
                  |L8.1948|
00079c  2c20ede5          DCB      ", ",237,229," ",243,241,242,240,224,237,229,237,224,"  "
0007a0  20f3f1f2
0007a4  f0e0ede5
0007a8  ede02020
0007ac  00                DCB      0
0007ad  00                DCB      0
0007ae  00                DCB      0
0007af  00                DCB      0

                          AREA ||area_number.9||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.9||, ||.text||
                  snmp_klimat_settings_box_alarm_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L9.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L9.20|
000006  f9b01064          LDRSH    r1,[r0,#0x64]  ; snmp_klimat_settings_box_alarm
00000a  20d0              MOVS     r0,#0xd0
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L9.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L9.20|
                          DCD      ||.data||

                          AREA ||area_number.10||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.10||, ||.text||
                  snmp_klimat_settings_vent_on_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L10.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L10.20|
000006  f9b01066          LDRSH    r1,[r0,#0x66]  ; snmp_klimat_settings_vent_on
00000a  20f4              MOVS     r0,#0xf4
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L10.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L10.20|
                          DCD      ||.data||

                          AREA ||area_number.11||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.11||, ||.text||
                  snmp_klimat_settings_vent_off_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L11.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L11.20|
000006  f9b01068          LDRSH    r1,[r0,#0x68]  ; snmp_klimat_settings_vent_off
00000a  20f6              MOVS     r0,#0xf6
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L11.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L11.20|
                          DCD      ||.data||

                          AREA ||area_number.12||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.12||, ||.text||
                  snmp_klimat_settings_warm_on_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L12.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L12.20|
000006  f9b0106a          LDRSH    r1,[r0,#0x6a]  ; snmp_klimat_settings_warm_on
00000a  20f8              MOVS     r0,#0xf8
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L12.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L12.20|
                          DCD      ||.data||

                          AREA ||area_number.13||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.13||, ||.text||
                  snmp_klimat_settings_warm_off_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L13.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L13.20|
000006  f9b0106c          LDRSH    r1,[r0,#0x6c]  ; snmp_klimat_settings_warm_off
00000a  20fa              MOVS     r0,#0xfa
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L13.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L13.20|
                          DCD      ||.data||

                          AREA ||area_number.14||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.14||, ||.text||
                  snmp_klimat_settings_load_on_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L14.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L14.20|
000006  f9b0106e          LDRSH    r1,[r0,#0x6e]  ; snmp_klimat_settings_load_on
00000a  20d8              MOVS     r0,#0xd8
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L14.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L14.20|
                          DCD      ||.data||

                          AREA ||area_number.15||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.15||, ||.text||
                  snmp_klimat_settings_load_off_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L15.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L15.20|
000006  f9b01070          LDRSH    r1,[r0,#0x70]  ; snmp_klimat_settings_load_off
00000a  20d6              MOVS     r0,#0xd6
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L15.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L15.20|
                          DCD      ||.data||

                          AREA ||area_number.16||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.16||, ||.text||
                  snmp_klimat_settings_batt_on_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L16.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L16.20|
000006  f9b01072          LDRSH    r1,[r0,#0x72]  ; snmp_klimat_settings_batt_on
00000a  20dc              MOVS     r0,#0xdc
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L16.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L16.20|
                          DCD      ||.data||

                          AREA ||area_number.17||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.17||, ||.text||
                  snmp_klimat_settings_batt_off_write PROC
;;;259    //-----------------------------------------------
;;;260    void snmp_data (void) 
000000  2801              CMP      r0,#1
;;;261    {
000002  d105              BNE      |L17.16|
;;;262    char i;
;;;263    
;;;264    snmp_mains_power_voltage=net_U;
000004  4803              LDR      r0,|L17.20|
000006  f9b01074          LDRSH    r1,[r0,#0x74]  ; snmp_klimat_settings_batt_off
00000a  20da              MOVS     r0,#0xda
;;;265    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;266    snmp_mains_power_frequency=net_F3;
00000c  f7ffbffe          B.W      lc640_write_int
                  |L17.16|
000010  4770              BX       lr
;;;267    #else
;;;268    snmp_mains_power_frequency=net_F;
;;;269    #endif
;;;270    snmp_mains_power_voltage_phaseA=net_Ua;
;;;271    snmp_mains_power_voltage_phaseB=net_Ub;
;;;272    snmp_mains_power_voltage_phaseC=net_Uc;
;;;273    
;;;274    /*
;;;275    snmp_mains_power_status=0; 
;;;276    #if(UKU_VERSION==900)
;;;277    snmp_mains_power_status=2;
;;;278    #endif
;;;279    if(St&0x01)snmp_mains_power_status|=0x01;
;;;280    if(St&0x01)snmp_mains_power_alarm=1;
;;;281    
;;;282    
;;;283    
;;;284    
;;;285    
;;;286    
;;;287    for(i=0;i<snmp_numofevents;i++)event2snmp(i);
;;;288    //snmp_bpsnumber[0]=1;
;;;289    //snmp_bpsnumber[1]=2;
;;;290    
;;;291    snmp_sernum=AUSW_MAIN_NUMBER;
;;;292    snmp_sernum_lsb=0x1122;
;;;293    snmp_sernum_msb=0x3344;
;;;294    snmp_device_code=AUSW_MAIN;
;;;295    
;;;296    //memcpy(snmp_location,"lkhg;la",);
;;;297    
;;;298    
;;;299    snmp_numofbat=1;
;;;300    
;;;301    */
;;;302    
;;;303    snmp_load_voltage=load_U;
;;;304    snmp_load_current=load_I;
;;;305    snmp_numofbat=NUMBAT;
;;;306    snmp_numofbps=NUMIST;
;;;307    snmp_numofinv=NUMINV;
;;;308    snmp_numofavt=NUMAVT;
;;;309    snmp_numofdt=NUMDT;
;;;310    snmp_numofsk=NUMSK;
;;;311    snmp_numofevents=lc640_read_int(CNT_EVENT_LOG);
;;;312    
;;;313    snmp_energy_vvod_phase_a=Uvv_eb2[0];
;;;314    snmp_energy_vvod_phase_b=Uvv_eb2[1];
;;;315    snmp_energy_vvod_phase_c=Uvv_eb2[2];
;;;316    snmp_energy_pes_phase_a=Upes_eb2[0];
;;;317    snmp_energy_pes_phase_b=Upes_eb2[1];
;;;318    snmp_energy_pes_phase_c=Upes_eb2[2];
;;;319    
;;;320    #ifdef UKU_KONTUR
;;;321    snmp_energy_vvod_phase_a=Uvv0;
;;;322    snmp_energy_pes_phase_a=Uvv[1];
;;;323    #endif
;;;324    
;;;325    snmp_energy_total_energy=power_summary;
;;;326    snmp_energy_current_energy=power_current;
;;;327    snmp_energy_input_voltage=net_U;
;;;328    
;;;329    snmp_bat_number[0]=1;
;;;330    snmp_bat_voltage[0]=bat[0]._Ub;
;;;331    snmp_bat_part_voltage[0]=bat[0]._Ubm;
;;;332    snmp_bat_current[0]=bat[0]._Ib;
;;;333    
;;;334    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;335    if(((AUSW_MAIN==22063)||(AUSW_MAIN==22023))&&(bps[8]._device==dIBAT_METR))
;;;336    	{
;;;337    	snmp_bat_current[0]=Ib_ips_termokompensat;
;;;338    	}
;;;339    #endif
;;;340    
;;;341    snmp_bat_temperature[0]=bat[0]._Tb;
;;;342    if(BAT_C_REAL[0]==0x5555)snmp_bat_capacity[0]=BAT_C_NOM[0];
;;;343    else snmp_bat_capacity[0]=BAT_C_REAL[0];
;;;344    snmp_bat_charge[0]=bat[0]._zar;
;;;345    snmp_bat_status[0]=bat[0]._av;
;;;346    if(BAT_IS_ON[0]!=bisON)snmp_bat_status[0]=0xff;
;;;347    
;;;348    snmp_bat_number[1]=2;
;;;349    snmp_bat_voltage[1]=bat[1]._Ub;
;;;350    snmp_bat_part_voltage[1]=bat[1]._Ubm;
;;;351    snmp_bat_current[1]=bat[1]._Ib;
;;;352    snmp_bat_temperature[1]=bat[1]._Tb;
;;;353    if(BAT_C_REAL[1]==0x5555)snmp_bat_capacity[1]=BAT_C_NOM[1];
;;;354    else snmp_bat_capacity[1]=BAT_C_REAL[1];
;;;355    snmp_bat_charge[1]=bat[1]._zar;
;;;356    snmp_bat_status[1]=bat[1]._av;
;;;357    if(BAT_IS_ON[1]!=bisON)snmp_bat_status[1]=0xff;
;;;358    
;;;359    
;;;360    
;;;361    snmp_bps_number[0]=1;
;;;362    snmp_bps_voltage[0]=bps[0]._Uii;
;;;363    snmp_bps_current[0]=bps[0]._Ii;
;;;364    snmp_bps_temperature[0]=bps[0]._Ti;
;;;365    snmp_bps_stat[0]=bps[0]._av;
;;;366    if(!(NUMIST>0))snmp_bps_stat[0]=0xff;												//Байт состояния БПСа.
;;;367    
;;;368    /*if(St_[0]&(1<<2))snmp_bps_stat[0]=(1<<3); 							//авария по Umin
;;;369    else if(St_[0]&(1<<3))snmp_bps_stat[0]=(1<<2); 						//авария по Umax
;;;370    else if(bps[0]._av&(1<<0))snmp_bps_stat[0]=(1<<1); 						//авария по Tmax
;;;371    else if(St_[0]&(1<<5))snmp_bps_stat[0]=(1<<5); 						//заблокирован
;;;372    else if((!(St_[0]&0x3c))&&(!St&0x01)&&(!OFFBP1))snmp_bps_stat[0]=1; 		//Работает
;;;373    */
;;;374    
;;;375    snmp_bps_number[1]=2;
;;;376    snmp_bps_voltage[1]=bps[1]._Uii;
;;;377    snmp_bps_current[1]=bps[1]._Ii;
;;;378    snmp_bps_temperature[1]=bps[1]._Ti;
;;;379    snmp_bps_stat[1]=bps[1]._av;
;;;380    if(!(NUMIST>1))snmp_bps_stat[1]=0xff;												//Байт состояния БПСа.
;;;381    /*if(St_[1]&(1<<2))snmp_bps_stat[1]=(1<<3); 							//авария по Umin
;;;382    else if(St_[1]&(1<<3))snmp_bps_stat[1]=(1<<2); 						//авария по Umax
;;;383    else if(St_[1]&(1<<4))snmp_bps_stat[1]=(1<<1); 						//авария по Tmax
;;;384    else if(St_[1]&(1<<5))snmp_bps_stat[1]=(1<<5); 						//заблокирован
;;;385    else if((!(St_[1]&0x3c))&&(!St&0x01)&&(!OFFBP2))snmp_bps_stat[1]=1; 		//Работает
;;;386    */
;;;387    
;;;388    snmp_bps_number[2]=3;
;;;389    snmp_bps_voltage[2]=bps[2]._Uii;
;;;390    snmp_bps_current[2]=bps[2]._Ii;
;;;391    snmp_bps_temperature[2]=bps[2]._Ti;
;;;392    snmp_bps_stat[2]=bps[2]._av;
;;;393    if(!(NUMIST>2))snmp_bps_stat[2]=0xff;
;;;394    
;;;395    snmp_bps_number[3]=4;
;;;396    snmp_bps_voltage[3]=bps[3]._Uii;
;;;397    snmp_bps_current[3]=bps[3]._Ii;
;;;398    snmp_bps_temperature[3]=bps[3]._Ti;
;;;399    snmp_bps_stat[3]=bps[3]._av;
;;;400    if(!(NUMIST>3))snmp_bps_stat[3]=0xff;
;;;401    
;;;402    snmp_bps_number[4]=5;
;;;403    snmp_bps_voltage[4]=bps[4]._Uii;
;;;404    snmp_bps_current[4]=bps[4]._Ii;
;;;405    snmp_bps_temperature[4]=bps[4]._Ti;
;;;406    snmp_bps_stat[4]=bps[4]._av;
;;;407    if(!(NUMIST>4))snmp_bps_stat[4]=0xff;
;;;408    
;;;409    snmp_bps_number[5]=6;
;;;410    snmp_bps_voltage[5]=bps[5]._Uii;
;;;411    snmp_bps_current[5]=bps[5]._Ii;
;;;412    snmp_bps_temperature[5]=bps[5]._Ti;
;;;413    snmp_bps_stat[5]=bps[5]._av;
;;;414    if(!(NUMIST>5))snmp_bps_stat[5]=0xff;
;;;415    
;;;416    snmp_bps_number[6]=7;
;;;417    snmp_bps_voltage[6]=bps[6]._Uii;
;;;418    snmp_bps_current[6]=bps[6]._Ii;
;;;419    snmp_bps_temperature[6]=bps[6]._Ti;
;;;420    snmp_bps_stat[6]=bps[6]._av;
;;;421    if(!(NUMIST>6))snmp_bps_stat[6]=0xff;
;;;422    
;;;423    snmp_bps_number[7]=8;
;;;424    snmp_bps_voltage[7]=bps[7]._Uii;
;;;425    snmp_bps_current[7]=bps[7]._Ii;
;;;426    snmp_bps_temperature[7]=bps[7]._Ti;
;;;427    snmp_bps_stat[7]=bps[7]._av;
;;;428    if(!(NUMIST>7))snmp_bps_stat[7]=0xff;
;;;429    
;;;430    
;;;431    
;;;432    snmp_inv_number[0]=1;
;;;433    snmp_inv_voltage[0]=inv[0]._Uio;
;;;434    snmp_inv_current[0]=inv[0]._Ii;
;;;435    snmp_inv_temperature[0]=inv[0]._Ti;
;;;436    snmp_inv_stat[0]=inv[0]._flags_tm;
;;;437    
;;;438    snmp_inv_number[1]=2;
;;;439    snmp_inv_voltage[1]=inv[1]._Uio;
;;;440    snmp_inv_current[1]=inv[1]._Ii;
;;;441    snmp_inv_temperature[1]=inv[1]._Ti;
;;;442    snmp_inv_stat[1]=inv[1]._flags_tm;
;;;443    
;;;444    snmp_inv_number[2]=3;
;;;445    snmp_inv_voltage[2]=inv[2]._Uio;
;;;446    snmp_inv_current[2]=inv[2]._Ii;
;;;447    snmp_inv_temperature[2]=inv[2]._Ti;
;;;448    snmp_inv_stat[2]=inv[2]._flags_tm;
;;;449    
;;;450    
;;;451    
;;;452    
;;;453    					  
;;;454    snmp_sk_number[0]=1;
;;;455    memcpy(&snmp_sk_name[0][0],"Door",10);
;;;456    if(sk_stat[0]==ssON) snmp_sk_aktiv[0]=1;
;;;457    else snmp_sk_aktiv[0]=0;
;;;458    if(!SK_SIGN[0])snmp_sk_alarm_aktiv[0]=1;
;;;459    else snmp_sk_alarm_aktiv[0]=0;
;;;460    if(sk_av_stat[0]==sasON)	snmp_sk_alarm[0]=1;
;;;461    else                     snmp_sk_alarm[0]=0;
;;;462    
;;;463    
;;;464    snmp_sk_number[1]=2;
;;;465    memcpy(&snmp_sk_name[1][0],"Smoke",10);
;;;466    if(sk_stat[1]==ssON) snmp_sk_aktiv[1]=1;
;;;467    else snmp_sk_aktiv[1]=0;
;;;468    if(!SK_SIGN[1])snmp_sk_alarm_aktiv[1]=1;
;;;469    else snmp_sk_alarm_aktiv[1]=0;
;;;470    if(sk_av_stat[1]==sasON)	snmp_sk_alarm[1]=1;
;;;471    else                     snmp_sk_alarm[1]=0;
;;;472    
;;;473    snmp_sk_number[2]=3;
;;;474    memcpy(&snmp_sk_name[2][0],"Shock",10);
;;;475    if(sk_stat[2]==ssON) snmp_sk_aktiv[2]=1;
;;;476    else snmp_sk_aktiv[2]=0;
;;;477    if(!SK_SIGN[2])snmp_sk_alarm_aktiv[2]=1;
;;;478    else snmp_sk_alarm_aktiv[2]=0;
;;;479    if(sk_av_stat[2]==sasON)	snmp_sk_alarm[2]=1;
;;;480    else                     snmp_sk_alarm[2]=0;
;;;481    
;;;482    snmp_sk_number[3]=4;
;;;483    memcpy(&snmp_sk_name[3][0],"     ",10);
;;;484    if(sk_stat[3]==ssON) snmp_sk_aktiv[3]=1;
;;;485    else snmp_sk_aktiv[3]=0;
;;;486    if(!SK_SIGN[3])snmp_sk_alarm_aktiv[3]=1;
;;;487    else snmp_sk_alarm_aktiv[3]=0;
;;;488    if(sk_av_stat[3]==sasON)	snmp_sk_alarm[3]=1;
;;;489    else                     snmp_sk_alarm[3]=0;
;;;490    
;;;491    
;;;492    
;;;493    
;;;494    snmp_klimat_box_temper=t_box;
;;;495    snmp_klimat_settings_box_alarm=TBOXMAX;
;;;496    snmp_klimat_settings_vent_on=TBOXVENTON;
;;;497    snmp_klimat_settings_vent_off=TBOXVENTOFF;
;;;498    snmp_klimat_settings_warm_on=TBOXWARMON;
;;;499    snmp_klimat_settings_warm_off=TBOXWARMOFF;
;;;500    snmp_klimat_settings_load_on=TLOADENABLE;
;;;501    snmp_klimat_settings_load_off=TLOADDISABLE;
;;;502    snmp_klimat_settings_batt_on=TBATENABLE;
;;;503    snmp_klimat_settings_batt_off=TBATDISABLE;
;;;504    
;;;505    snmp_dt_ext=t_ext[0];
;;;506    snmp_dt_msan=t_ext[1];
;;;507    snmp_dt_epu=t_ext[2];
;;;508    
;;;509    /*
;;;510    snmp_bat_voltage=Ubat;
;;;511    snmp_bat_current=Ibat;
;;;512    snmp_bat_temperature=t_b;
;;;513    if(BAT_C_REAL==0x5555)
;;;514    	{
;;;515    	snmp_bat_capacity=BAT_C_NOM*10;												    11
;;;516    	}
;;;517    else
;;;518    	{
;;;519    	snmp_bat_capacity=BAT_C_REAL;
;;;520    	}
;;;521    snmp_bat_charge=zar_percent;
;;;522    snmp_bat_status=0;
;;;523    if(St&0x02)snmp_bat_status|=0x01;
;;;524    if(Ibat>0)snmp_bat_status|=0x02;
;;;525    
;;;526    
;;;527    if(spc_stat==spc_OFF) snmp_spc_stat=0;
;;;528    else if(spc_stat==spc_KE) snmp_spc_stat=1;
;;;529    else if(spc_stat==spc_VZ) snmp_spc_stat=10;
;;;530    
;;;531    
;;;532    snmp_main_bps=MAIN_IST+1;
;;;533    */
;;;534    snmp_zv_en=ZV_ON;
;;;535    snmp_alarm_auto_disable=AV_OFF_AVT;
;;;536    snmp_bat_test_time=TBAT;
;;;537    snmp_u_max=UMAX;
;;;538    //snmp_u_min=UB20-DU;
;;;539    //snmp_u_0_grad=UB0;
;;;540    //snmp_u_20_grad=UB20;
;;;541    snmp_u_sign=USIGN;
;;;542    snmp_u_min_power=UMN;
;;;543    snmp_u_withouth_bat=U0B;
;;;544    snmp_control_current=IKB;
;;;545    snmp_max_charge_current=IZMAX;
;;;546    snmp_max_current=IMAX;
;;;547    snmp_min_current=IMIN;
;;;548    //snmp_max_current_koef=KIMAX;
;;;549    //snmp_uvz=UVZ;
;;;550    snmp_powerup_psu_timeout=TZAS;
;;;551    snmp_max_temperature=TMAX;
;;;552    snmp_tsign_bat=TBATSIGN; 
;;;553    snmp_tmax_bat=TBATMAX;
;;;554    snmp_tsign_bps=TSIGN;
;;;555    snmp_tmax_bps=TMAX;
;;;556    snmp_bat_part_alarm=UBM_AV; 
;;;557    snmp_power_cnt_adress=POWER_CNT_ADRESS;
;;;558    
;;;559    for(i=0;i<12;i++)
;;;560    	{
;;;561    	snmp_avt_number[i]=i+1;
;;;562    	if(avt_stat[i]==avtOFF)snmp_avt_stat[i]=0;
;;;563    	else snmp_avt_stat[i]=1;
;;;564    	}
;;;565    
;;;566    snmp_dt_number[0]=1;
;;;567    snmp_dt_number[1]=2;
;;;568    snmp_dt_number[2]=3;
;;;569    //snmp_dt_number[3]=4;
;;;570    snmp_dt_temper[0]=t_ext[0];
;;;571    snmp_dt_temper[1]=t_ext[1];
;;;572    snmp_dt_temper[2]=t_ext[2];
;;;573    //snmp_dt_temper[3]=t_ext[3];
;;;574    snmp_dt_error[0]=ND_EXT[0];
;;;575    if(NUMDT<1)snmp_dt_error[0]=0xff;
;;;576    snmp_dt_error[1]=ND_EXT[1];
;;;577    if(NUMDT<2)snmp_dt_error[0]=0xff;
;;;578    snmp_dt_error[2]=ND_EXT[2];
;;;579    if(NUMDT<3)snmp_dt_error[0]=0xff;
;;;580    //snmp_dt_error[3]=ND_EXT[3];
;;;581    if(NUMDT<4)snmp_dt_error[0]=0xff;
;;;582    
;;;583    #ifdef UKU_TELECORE2017
;;;584    snmp_warm_sign=0;
;;;585    if(TELECORE2017_KLIMAT_WARM_SIGNAL==0) snmp_warm_sign=2;
;;;586    else if(TELECORE2017_KLIMAT_WARM_SIGNAL==1) snmp_warm_sign=1;
;;;587    snmp_cool_sign=0;
;;;588    if(TELECORE2017_KLIMAT_VENT_SIGNAL==0) snmp_cool_sign=2;
;;;589    else if(TELECORE2017_KLIMAT_VENT_SIGNAL==1) snmp_cool_sign=1;
;;;590    snmp_warm_on_temper=(signed char)TELECORE2017_KLIMAT_WARM_ON; 
;;;591    snmp_warm_off_temper=(signed char)TELECORE2017_KLIMAT_WARM_OFF;
;;;592    snmp_warm_q=(signed char)TELECORE2017_KLIMAT_CAP;	
;;;593    snmp_cool_20_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON20;
;;;594    snmp_cool_40_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON40;
;;;595    snmp_cool_60_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON60;
;;;596    snmp_cool_80_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON80;
;;;597    snmp_cool_100_temper=(signed char)TELECORE2017_KLIMAT_VENT_ON100;
;;;598    snmp_cool_20_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON20;
;;;599    snmp_cool_40_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON40;
;;;600    snmp_cool_60_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON60;
;;;601    snmp_cool_80_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON80;
;;;602    snmp_cool_100_dtemper=(signed char)TELECORE2017_KLIMAT_DVENT_ON100;
;;;603    snmp_warm_stat=0;
;;;604    if(warm_stat_k==wsON) snmp_warm_stat=1;
;;;605    #endif
;;;606    }
;;;607    //-----------------------------------------------
                          ENDP

000012  0000              DCW      0x0000
                  |L17.20|
                          DCD      ||.data||

                          AREA ||.bss||, DATA, NOINIT, ALIGN=1

                  temp_str
                          %        20
                  snmp_location
                          %        100
                  snmp_bps_number
                          %        16
                  snmp_bps_voltage
                          %        16
                  snmp_bps_current
                          %        16
                  snmp_bps_temperature
                          %        16
                  snmp_bps_stat
                          %        16
                  snmp_spc_trap_message
                          %        100
                  snmp_avt_number
                          %        12
                  snmp_avt_stat
                          %        12
                  snmp_sk_name
                          %        80
                  obj
                          %        20

                          AREA ||area_number.20||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.bss||
                  snmp_community
                          %        10

                          AREA ||area_number.21||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.21||, ||.bss||
                  snmp_lakb_number
                          %        14

                          AREA ||area_number.22||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.bss||
                  snmp_lakb_voltage
                          %        14

                          AREA ||area_number.23||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.bss||
                  snmp_lakb_max_cell_voltage
                          %        14

                          AREA ||area_number.24||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.bss||
                  snmp_lakb_min_cell_voltage
                          %        14

                          AREA ||area_number.25||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.bss||
                  snmp_lakb_max_cell_temperature
                          %        14

                          AREA ||area_number.26||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.bss||
                  snmp_lakb_min_cell_temperature
                          %        14

                          AREA ||area_number.27||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.bss||
                  snmp_lakb_ch_curr
                          %        14

                          AREA ||area_number.28||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.bss||
                  snmp_lakb_dsch_curr
                          %        14

                          AREA ||area_number.29||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.bss||
                  snmp_lakb_rat_cap
                          %        14

                          AREA ||area_number.30||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.bss||
                  snmp_lakb_soh
                          %        14

                          AREA ||area_number.31||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.bss||
                  snmp_lakb_soc
                          %        14

                          AREA ||area_number.32||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.bss||
                  snmp_lakb_cclv
                          %        14

                          AREA ||area_number.33||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.bss||
                  snmp_lakb_rbt
                          %        14

                          AREA ||area_number.34||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.bss||
                  snmp_lakb_flags1
                          %        14

                          AREA ||area_number.35||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.bss||
                  snmp_lakb_flags2
                          %        14

                          AREA ||area_number.36||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.bss||
                  snmp_lakb_damp1
                          %        450

                          AREA ||area_number.37||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.bss||
                  snmp_lakb_damp2
                          %        100

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  20202020          DCB      0x20,0x20,0x20,0x20
000004  20202020          DCB      0x20,0x20,0x20,0x20
000008  20202020          DCB      0x20,0x20,0x20,0x20
00000c  20202020          DCB      0x20,0x20,0x20,0x20
000010  20202020          DCB      0x20,0x20,0x20,0x20
000014  20202020          DCB      0x20,0x20,0x20,0x20
000018  20202020          DCB      0x20,0x20,0x20,0x20
00001c  20202020          DCB      0x20,0x20,0x20,0x20
000020  20202020          DCB      0x20,0x20,0x20,0x20
000024  20202020          DCB      0x20,0x20,0x20,0x20
000028  20202020          DCB      0x20,0x20,0x20,0x20
00002c  20202020          DCB      0x20,0x20,0x20,0x20
000030  20202020          DCB      0x20,0x20,0x20,0x20
000034  20202020          DCB      0x20,0x20,0x20,0x20
000038  20202020          DCB      0x20,0x20,0x20,0x20
00003c  20202020          DCB      0x20,0x20,0x20,0x20
000040  20202020          DCB      0x20,0x20,0x20,0x20
000044  20202020          DCB      0x20,0x20,0x20,0x20
000048  20202020          DCB      0x20,0x20,0x20,0x20
00004c  20202020          DCB      0x20,0x20,0x20,0x20
000050  00                DCB      0x00

                          AREA ||.data||, DATA, ALIGN=2

                  snmp_cool_60_temper
000000  00                DCB      0x00
                  snmp_cool_40_temper
000001  00                DCB      0x00
                  snmp_cool_20_temper
000002  00                DCB      0x00
                  snmp_cool_20_dtemper
000003  00                DCB      0x00
                  snmp_trap_send_i
000004  00                DCB      0x00
                  snmp_trap_send_ii
000005  00                DCB      0x00
                  snmp_numofbat
000006  0000              DCB      0x00,0x00
                  snmp_numofbps
000008  0000              DCB      0x00,0x00
                  snmp_numofinv
00000a  0000              DCB      0x00,0x00
                  snmp_numofavt
00000c  0000              DCB      0x00,0x00
                  snmp_numofdt
00000e  0000              DCB      0x00,0x00
                  snmp_numofsk
000010  0000              DCB      0x00,0x00
                  snmp_numofevents
000012  0000              DCB      0x00,0x00
                  snmp_mains_power_voltage
000014  0000              DCB      0x00,0x00
                  snmp_mains_power_frequency
000016  0000              DCB      0x00,0x00
                  snmp_mains_power_voltage_phaseA
000018  0000              DCB      0x00,0x00
                  snmp_mains_power_voltage_phaseB
00001a  0000              DCB      0x00,0x00
                  snmp_mains_power_voltage_phaseC
00001c  0000              DCB      0x00,0x00
                  snmp_load_voltage
00001e  0000              DCB      0x00,0x00
                  snmp_load_current
000020  0000              DCB      0x00,0x00
                  snmp_spc_trap_value_0
000022  0000              DCB      0x00,0x00
                  snmp_spc_trap_value_1
000024  0000              DCB      0x00,0x00
                  snmp_spc_trap_value_2
000026  0000              DCB      0x00,0x00
                  snmp_energy_vvod_phase_a
000028  0000              DCB      0x00,0x00
                  snmp_energy_vvod_phase_b
00002a  0000              DCB      0x00,0x00
                  snmp_energy_vvod_phase_c
00002c  0000              DCB      0x00,0x00
                  snmp_energy_pes_phase_a
00002e  0000              DCB      0x00,0x00
                  snmp_energy_pes_phase_b
000030  0000              DCB      0x00,0x00
                  snmp_energy_pes_phase_c
000032  0000              DCB      0x00,0x00
                  snmp_energy_input_voltage
000034  0000              DCB      0x00,0x00
                  snmp_energy_current_energy
000036  0000              DCB      0x00,0x00
                  snmp_command
000038  0000              DCB      0x00,0x00
                  snmp_command_parametr
00003a  0000              DCB      0x00,0x00
                  snmp_zv_en
00003c  0000              DCB      0x00,0x00
                  snmp_alarm_auto_disable
00003e  0000              DCB      0x00,0x00
                  snmp_bat_test_time
000040  0000              DCB      0x00,0x00
                  snmp_u_max
000042  0000              DCB      0x00,0x00
                  snmp_u_sign
000044  0000              DCB      0x00,0x00
                  snmp_u_min_power
000046  0000              DCB      0x00,0x00
                  snmp_u_withouth_bat
000048  0000              DCB      0x00,0x00
                  snmp_control_current
00004a  0000              DCB      0x00,0x00
                  snmp_max_charge_current
00004c  0000              DCB      0x00,0x00
                  snmp_max_current
00004e  0000              DCB      0x00,0x00
                  snmp_min_current
000050  0000              DCB      0x00,0x00
                  snmp_powerup_psu_timeout
000052  0000              DCB      0x00,0x00
                  snmp_max_temperature
000054  0000              DCB      0x00,0x00
                  snmp_tsign_bat
000056  0000              DCB      0x00,0x00
                  snmp_tmax_bat
000058  0000              DCB      0x00,0x00
                  snmp_tsign_bps
00005a  0000              DCB      0x00,0x00
                  snmp_tmax_bps
00005c  0000              DCB      0x00,0x00
                  snmp_bat_part_alarm
00005e  0000              DCB      0x00,0x00
                  snmp_power_cnt_adress
000060  0000              DCB      0x00,0x00
                  snmp_klimat_box_temper
000062  0000              DCB      0x00,0x00
                  snmp_klimat_settings_box_alarm
000064  0000              DCB      0x00,0x00
                  snmp_klimat_settings_vent_on
000066  0000              DCB      0x00,0x00
                  snmp_klimat_settings_vent_off
000068  0000              DCB      0x00,0x00
                  snmp_klimat_settings_warm_on
00006a  0000              DCB      0x00,0x00
                  snmp_klimat_settings_warm_off
00006c  0000              DCB      0x00,0x00
                  snmp_klimat_settings_load_on
00006e  0000              DCB      0x00,0x00
                  snmp_klimat_settings_load_off
000070  0000              DCB      0x00,0x00
                  snmp_klimat_settings_batt_on
000072  0000              DCB      0x00,0x00
                  snmp_klimat_settings_batt_off
000074  0000              DCB      0x00,0x00
                  snmp_dt_ext
000076  0000              DCB      0x00,0x00
                  snmp_dt_msan
000078  0000              DCB      0x00,0x00
                  snmp_dt_epu
00007a  0000              DCB      0x00,0x00
                  snmp_dt_number
00007c  000000            DCB      0x00,0x00,0x00
                  snmp_dt_error
00007f  00                DCB      0x00
000080  00000000          DCB      0x00,0x00,0x00,0x00
                  snmp_sernum
                          DCD      0x00000000
                  snmp_bat_number
                          DCD      0x00000000
                  snmp_bat_voltage
                          DCD      0x00000000
                  snmp_bat_current
                          DCD      0x00000000
                  snmp_bat_temperature
                          DCD      0x00000000
                  snmp_bat_capacity
                          DCD      0x00000000
                  snmp_bat_charge
                          DCD      0x00000000
                  snmp_bat_status
                          DCD      0x00000000
                  snmp_bat_part_voltage
                          DCD      0x00000000
                  snmp_energy_total_energy
                          DCD      0x00000000
                  snmp_sk_number
                          DCD      0x00000000
                  snmp_sk_aktiv
                          DCD      0x00000000
                  snmp_sk_alarm_aktiv
                          DCD      0x00000000
                  snmp_sk_alarm
                          DCD      0x00000000
                  temp_ip
                          DCD      0x00000000
                  snmp_inv_number
                          DCD      0x00000000
0000c4  0000              DCB      0x00,0x00
                  snmp_inv_voltage
0000c6  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  snmp_inv_current
                          DCD      0x00000000
0000d0  0000              DCB      0x00,0x00
                  snmp_inv_temperature
0000d2  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  snmp_inv_stat
                          DCD      0x00000000
0000dc  0000              DCB      0x00,0x00
                  snmp_dt_temper
0000de  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  snmp_log
0000e4  30314061          DCB      0x30,0x31,0x40,0x61
0000e8  62636440          DCB      0x62,0x63,0x64,0x40
0000ec  65666768          DCB      0x65,0x66,0x67,0x68
0000f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0000f4  6c403031          DCB      0x6c,0x40,0x30,0x31
0000f8  40202020          DCB      0x40,0x20,0x20,0x20
0000fc  20202020          DCB      0x20,0x20,0x20,0x20
000100  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000164  30324061          DCB      0x30,0x32,0x40,0x61
000168  62636440          DCB      0x62,0x63,0x64,0x40
00016c  65666768          DCB      0x65,0x66,0x67,0x68
000170  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000174  6c403032          DCB      0x6c,0x40,0x30,0x32
000178  40202020          DCB      0x40,0x20,0x20,0x20
00017c  20202020          DCB      0x20,0x20,0x20,0x20
000180  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0001e4  30334061          DCB      0x30,0x33,0x40,0x61
0001e8  62636440          DCB      0x62,0x63,0x64,0x40
0001ec  65666768          DCB      0x65,0x66,0x67,0x68
0001f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0001f4  6c403033          DCB      0x6c,0x40,0x30,0x33
0001f8  40202020          DCB      0x40,0x20,0x20,0x20
0001fc  20202020          DCB      0x20,0x20,0x20,0x20
000200  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000264  30344061          DCB      0x30,0x34,0x40,0x61
000268  62636440          DCB      0x62,0x63,0x64,0x40
00026c  65666768          DCB      0x65,0x66,0x67,0x68
000270  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000274  6c403034          DCB      0x6c,0x40,0x30,0x34
000278  40202020          DCB      0x40,0x20,0x20,0x20
00027c  20202020          DCB      0x20,0x20,0x20,0x20
000280  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0002e4  30354061          DCB      0x30,0x35,0x40,0x61
0002e8  62636440          DCB      0x62,0x63,0x64,0x40
0002ec  65666768          DCB      0x65,0x66,0x67,0x68
0002f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0002f4  6c403035          DCB      0x6c,0x40,0x30,0x35
0002f8  40202020          DCB      0x40,0x20,0x20,0x20
0002fc  20202020          DCB      0x20,0x20,0x20,0x20
000300  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000364  30364061          DCB      0x30,0x36,0x40,0x61
000368  62636440          DCB      0x62,0x63,0x64,0x40
00036c  65666768          DCB      0x65,0x66,0x67,0x68
000370  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000374  6c403036          DCB      0x6c,0x40,0x30,0x36
000378  40202020          DCB      0x40,0x20,0x20,0x20
00037c  20202020          DCB      0x20,0x20,0x20,0x20
000380  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0003e4  30374061          DCB      0x30,0x37,0x40,0x61
0003e8  62636440          DCB      0x62,0x63,0x64,0x40
0003ec  65666768          DCB      0x65,0x66,0x67,0x68
0003f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0003f4  6c403037          DCB      0x6c,0x40,0x30,0x37
0003f8  40202020          DCB      0x40,0x20,0x20,0x20
0003fc  20202020          DCB      0x20,0x20,0x20,0x20
000400  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000464  30384061          DCB      0x30,0x38,0x40,0x61
000468  62636440          DCB      0x62,0x63,0x64,0x40
00046c  65666768          DCB      0x65,0x66,0x67,0x68
000470  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000474  6c403038          DCB      0x6c,0x40,0x30,0x38
000478  40202020          DCB      0x40,0x20,0x20,0x20
00047c  20202020          DCB      0x20,0x20,0x20,0x20
000480  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0004e4  30394061          DCB      0x30,0x39,0x40,0x61
0004e8  62636440          DCB      0x62,0x63,0x64,0x40
0004ec  65666768          DCB      0x65,0x66,0x67,0x68
0004f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0004f4  6c403039          DCB      0x6c,0x40,0x30,0x39
0004f8  40202020          DCB      0x40,0x20,0x20,0x20
0004fc  20202020          DCB      0x20,0x20,0x20,0x20
000500  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000564  31304061          DCB      0x31,0x30,0x40,0x61
000568  62636440          DCB      0x62,0x63,0x64,0x40
00056c  65666768          DCB      0x65,0x66,0x67,0x68
000570  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000574  6c403130          DCB      0x6c,0x40,0x31,0x30
000578  40202020          DCB      0x40,0x20,0x20,0x20
00057c  20202020          DCB      0x20,0x20,0x20,0x20
000580  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0005e4  31314061          DCB      0x31,0x31,0x40,0x61
0005e8  62636440          DCB      0x62,0x63,0x64,0x40
0005ec  65666768          DCB      0x65,0x66,0x67,0x68
0005f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0005f4  6c403131          DCB      0x6c,0x40,0x31,0x31
0005f8  40202020          DCB      0x40,0x20,0x20,0x20
0005fc  20202020          DCB      0x20,0x20,0x20,0x20
000600  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000664  31324061          DCB      0x31,0x32,0x40,0x61
000668  62636440          DCB      0x62,0x63,0x64,0x40
00066c  65666768          DCB      0x65,0x66,0x67,0x68
000670  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000674  6c403132          DCB      0x6c,0x40,0x31,0x32
000678  40202020          DCB      0x40,0x20,0x20,0x20
00067c  20202020          DCB      0x20,0x20,0x20,0x20
000680  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0006e4  31334061          DCB      0x31,0x33,0x40,0x61
0006e8  62636440          DCB      0x62,0x63,0x64,0x40
0006ec  65666768          DCB      0x65,0x66,0x67,0x68
0006f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0006f4  6c403133          DCB      0x6c,0x40,0x31,0x33
0006f8  40202020          DCB      0x40,0x20,0x20,0x20
0006fc  20202020          DCB      0x20,0x20,0x20,0x20
000700  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000764  31344061          DCB      0x31,0x34,0x40,0x61
000768  62636440          DCB      0x62,0x63,0x64,0x40
00076c  65666768          DCB      0x65,0x66,0x67,0x68
000770  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000774  6c403134          DCB      0x6c,0x40,0x31,0x34
000778  40202020          DCB      0x40,0x20,0x20,0x20
00077c  20202020          DCB      0x20,0x20,0x20,0x20
000780  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0007e4  31354061          DCB      0x31,0x35,0x40,0x61
0007e8  62636440          DCB      0x62,0x63,0x64,0x40
0007ec  65666768          DCB      0x65,0x66,0x67,0x68
0007f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0007f4  6c403135          DCB      0x6c,0x40,0x31,0x35
0007f8  40202020          DCB      0x40,0x20,0x20,0x20
0007fc  20202020          DCB      0x20,0x20,0x20,0x20
000800  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000864  31364061          DCB      0x31,0x36,0x40,0x61
000868  62636440          DCB      0x62,0x63,0x64,0x40
00086c  65666768          DCB      0x65,0x66,0x67,0x68
000870  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000874  6c403136          DCB      0x6c,0x40,0x31,0x36
000878  40202020          DCB      0x40,0x20,0x20,0x20
00087c  20202020          DCB      0x20,0x20,0x20,0x20
000880  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0008e4  31374061          DCB      0x31,0x37,0x40,0x61
0008e8  62636440          DCB      0x62,0x63,0x64,0x40
0008ec  65666768          DCB      0x65,0x66,0x67,0x68
0008f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0008f4  6c403137          DCB      0x6c,0x40,0x31,0x37
0008f8  40202020          DCB      0x40,0x20,0x20,0x20
0008fc  20202020          DCB      0x20,0x20,0x20,0x20
000900  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000964  31384061          DCB      0x31,0x38,0x40,0x61
000968  62636440          DCB      0x62,0x63,0x64,0x40
00096c  65666768          DCB      0x65,0x66,0x67,0x68
000970  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000974  6c403138          DCB      0x6c,0x40,0x31,0x38
000978  40202020          DCB      0x40,0x20,0x20,0x20
00097c  20202020          DCB      0x20,0x20,0x20,0x20
000980  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
0009e4  31394061          DCB      0x31,0x39,0x40,0x61
0009e8  62636440          DCB      0x62,0x63,0x64,0x40
0009ec  65666768          DCB      0x65,0x66,0x67,0x68
0009f0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
0009f4  6c403139          DCB      0x6c,0x40,0x31,0x39
0009f8  40202020          DCB      0x40,0x20,0x20,0x20
0009fc  20202020          DCB      0x20,0x20,0x20,0x20
000a00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000a64  32304061          DCB      0x32,0x30,0x40,0x61
000a68  62636440          DCB      0x62,0x63,0x64,0x40
000a6c  65666768          DCB      0x65,0x66,0x67,0x68
000a70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000a74  6c403230          DCB      0x6c,0x40,0x32,0x30
000a78  40202020          DCB      0x40,0x20,0x20,0x20
000a7c  20202020          DCB      0x20,0x20,0x20,0x20
000a80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000ae4  32314061          DCB      0x32,0x31,0x40,0x61
000ae8  62636440          DCB      0x62,0x63,0x64,0x40
000aec  65666768          DCB      0x65,0x66,0x67,0x68
000af0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000af4  6c403231          DCB      0x6c,0x40,0x32,0x31
000af8  40202020          DCB      0x40,0x20,0x20,0x20
000afc  20202020          DCB      0x20,0x20,0x20,0x20
000b00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000b64  32324061          DCB      0x32,0x32,0x40,0x61
000b68  62636440          DCB      0x62,0x63,0x64,0x40
000b6c  65666768          DCB      0x65,0x66,0x67,0x68
000b70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000b74  6c403232          DCB      0x6c,0x40,0x32,0x32
000b78  40202020          DCB      0x40,0x20,0x20,0x20
000b7c  20202020          DCB      0x20,0x20,0x20,0x20
000b80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000be4  32334061          DCB      0x32,0x33,0x40,0x61
000be8  62636440          DCB      0x62,0x63,0x64,0x40
000bec  65666768          DCB      0x65,0x66,0x67,0x68
000bf0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000bf4  6c403233          DCB      0x6c,0x40,0x32,0x33
000bf8  40202020          DCB      0x40,0x20,0x20,0x20
000bfc  20202020          DCB      0x20,0x20,0x20,0x20
000c00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000c64  32344061          DCB      0x32,0x34,0x40,0x61
000c68  62636440          DCB      0x62,0x63,0x64,0x40
000c6c  65666768          DCB      0x65,0x66,0x67,0x68
000c70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000c74  6c403234          DCB      0x6c,0x40,0x32,0x34
000c78  40202020          DCB      0x40,0x20,0x20,0x20
000c7c  20202020          DCB      0x20,0x20,0x20,0x20
000c80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000ce4  32354061          DCB      0x32,0x35,0x40,0x61
000ce8  62636440          DCB      0x62,0x63,0x64,0x40
000cec  65666768          DCB      0x65,0x66,0x67,0x68
000cf0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000cf4  6c403235          DCB      0x6c,0x40,0x32,0x35
000cf8  40202020          DCB      0x40,0x20,0x20,0x20
000cfc  20202020          DCB      0x20,0x20,0x20,0x20
000d00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000d64  32364061          DCB      0x32,0x36,0x40,0x61
000d68  62636440          DCB      0x62,0x63,0x64,0x40
000d6c  65666768          DCB      0x65,0x66,0x67,0x68
000d70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000d74  6c403236          DCB      0x6c,0x40,0x32,0x36
000d78  40202020          DCB      0x40,0x20,0x20,0x20
000d7c  20202020          DCB      0x20,0x20,0x20,0x20
000d80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000de4  32374061          DCB      0x32,0x37,0x40,0x61
000de8  62636440          DCB      0x62,0x63,0x64,0x40
000dec  65666768          DCB      0x65,0x66,0x67,0x68
000df0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000df4  6c403237          DCB      0x6c,0x40,0x32,0x37
000df8  40202020          DCB      0x40,0x20,0x20,0x20
000dfc  20202020          DCB      0x20,0x20,0x20,0x20
000e00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000e64  32384061          DCB      0x32,0x38,0x40,0x61
000e68  62636440          DCB      0x62,0x63,0x64,0x40
000e6c  65666768          DCB      0x65,0x66,0x67,0x68
000e70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000e74  6c403238          DCB      0x6c,0x40,0x32,0x38
000e78  40202020          DCB      0x40,0x20,0x20,0x20
000e7c  20202020          DCB      0x20,0x20,0x20,0x20
000e80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000ee4  32394061          DCB      0x32,0x39,0x40,0x61
000ee8  62636440          DCB      0x62,0x63,0x64,0x40
000eec  65666768          DCB      0x65,0x66,0x67,0x68
000ef0  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000ef4  6c403239          DCB      0x6c,0x40,0x32,0x39
000ef8  40202020          DCB      0x40,0x20,0x20,0x20
000efc  20202020          DCB      0x20,0x20,0x20,0x20
000f00  20000000          DCB      0x20,0x00,0x00,0x00
                          %        96
000f64  33304061          DCB      0x33,0x30,0x40,0x61
000f68  62636440          DCB      0x62,0x63,0x64,0x40
000f6c  65666768          DCB      0x65,0x66,0x67,0x68
000f70  40696a6b          DCB      0x40,0x69,0x6a,0x6b
000f74  6c403330          DCB      0x6c,0x40,0x33,0x30
000f78  40202020          DCB      0x40,0x20,0x20,0x20
000f7c  20202020          DCB      0x20,0x20,0x20,0x20
000f80  20000000          DCB      0x20,0x00,0x00,0x00
                          %        4448

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  snmp_device_code
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  snmp_sernum_lsb
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=1

                          EXPORTAS ||area_number.43||, ||.data||
                  snmp_sernum_msb
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.44||, DATA, ALIGN=1

                          EXPORTAS ||area_number.44||, ||.data||
                  snmp_mains_power_status
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.45||, DATA, ALIGN=1

                          EXPORTAS ||area_number.45||, ||.data||
                  snmp_mains_power_alarm
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.46||, DATA, ALIGN=1

                          EXPORTAS ||area_number.46||, ||.data||
                  snmp_makb_number
                          %        8

                          AREA ||area_number.47||, DATA, ALIGN=1

                          EXPORTAS ||area_number.47||, ||.data||
                  snmp_makb_connect_status
                          %        8

                          AREA ||area_number.48||, DATA, ALIGN=1

                          EXPORTAS ||area_number.48||, ||.data||
                  snmp_makb_voltage0
                          %        8

                          AREA ||area_number.49||, DATA, ALIGN=1

                          EXPORTAS ||area_number.49||, ||.data||
                  snmp_makb_voltage1
                          %        8

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  snmp_makb_voltage2
                          %        8

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  snmp_makb_voltage3
                          %        8

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  snmp_makb_voltage4
                          %        8

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  snmp_makb_temper0
                          %        8

                          AREA ||area_number.54||, DATA, ALIGN=1

                          EXPORTAS ||area_number.54||, ||.data||
                  snmp_makb_temper1
                          %        8

                          AREA ||area_number.55||, DATA, ALIGN=1

                          EXPORTAS ||area_number.55||, ||.data||
                  snmp_makb_temper2
                          %        8

                          AREA ||area_number.56||, DATA, ALIGN=1

                          EXPORTAS ||area_number.56||, ||.data||
                  snmp_makb_temper3
                          %        8

                          AREA ||area_number.57||, DATA, ALIGN=1

                          EXPORTAS ||area_number.57||, ||.data||
                  snmp_makb_temper4
                          %        8

                          AREA ||area_number.58||, DATA, ALIGN=1

                          EXPORTAS ||area_number.58||, ||.data||
                  snmp_makb_temper0_stat
                          %        8

                          AREA ||area_number.59||, DATA, ALIGN=1

                          EXPORTAS ||area_number.59||, ||.data||
                  snmp_makb_temper1_stat
                          %        8

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  snmp_makb_temper2_stat
                          %        8

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  snmp_makb_temper3_stat
                          %        8

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  snmp_makb_temper4_stat
                          %        8

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  snmp_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  snmp_main_bps
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=1

                          EXPORTAS ||area_number.65||, ||.data||
                  snmp_u_min
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  snmp_u_0_grad
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  snmp_u_20_grad
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  snmp_uvz
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  snmp_max_current_koef
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  snmp_up_charge_koef
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  snmp_lakb_cell_temperature_1
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  snmp_lakb_cell_temperature_2
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.73||, DATA, ALIGN=0

                          EXPORTAS ||area_number.73||, ||.data||
                  snmp_lakb_cell_temperature_3
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.74||, DATA, ALIGN=0

                          EXPORTAS ||area_number.74||, ||.data||
                  snmp_lakb_cell_temperature_4
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.75||, DATA, ALIGN=0

                          EXPORTAS ||area_number.75||, ||.data||
                  snmp_lakb_cell_temperature_ambient
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.76||, DATA, ALIGN=0

                          EXPORTAS ||area_number.76||, ||.data||
                  snmp_lakb_cell_temperature_power
000000  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.77||, DATA, ALIGN=0

                          EXPORTAS ||area_number.77||, ||.data||
                  snmp_warm_sign
000000  00                DCB      0x00

                          AREA ||area_number.78||, DATA, ALIGN=0

                          EXPORTAS ||area_number.78||, ||.data||
                  snmp_cool_sign
000000  00                DCB      0x00

                          AREA ||area_number.79||, DATA, ALIGN=0

                          EXPORTAS ||area_number.79||, ||.data||
                  snmp_warm_on_temper
000000  00                DCB      0x00

                          AREA ||area_number.80||, DATA, ALIGN=0

                          EXPORTAS ||area_number.80||, ||.data||
                  snmp_warm_off_temper
000000  00                DCB      0x00

                          AREA ||area_number.81||, DATA, ALIGN=0

                          EXPORTAS ||area_number.81||, ||.data||
                  snmp_warm_q
000000  00                DCB      0x00

                          AREA ||area_number.82||, DATA, ALIGN=0

                          EXPORTAS ||area_number.82||, ||.data||
                  snmp_cool_100_temper
000000  00                DCB      0x00

                          AREA ||area_number.83||, DATA, ALIGN=0

                          EXPORTAS ||area_number.83||, ||.data||
                  snmp_cool_80_temper
000000  00                DCB      0x00

                          AREA ||area_number.84||, DATA, ALIGN=0

                          EXPORTAS ||area_number.84||, ||.data||
                  snmp_cool_100_dtemper
000000  00                DCB      0x00

                          AREA ||area_number.85||, DATA, ALIGN=0

                          EXPORTAS ||area_number.85||, ||.data||
                  snmp_cool_80_dtemper
000000  00                DCB      0x00

                          AREA ||area_number.86||, DATA, ALIGN=0

                          EXPORTAS ||area_number.86||, ||.data||
                  snmp_cool_60_dtemper
000000  00                DCB      0x00

                          AREA ||area_number.87||, DATA, ALIGN=0

                          EXPORTAS ||area_number.87||, ||.data||
                  snmp_cool_40_dtemper
000000  00                DCB      0x00

                          AREA ||area_number.88||, DATA, ALIGN=0

                          EXPORTAS ||area_number.88||, ||.data||
                  snmp_warm_stat
000000  00                DCB      0x00
