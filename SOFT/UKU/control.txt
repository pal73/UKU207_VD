; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_VD_WG12232L3.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_VD -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DWG12232L3 --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;246    {          
000004  4606              MOV      r6,r0
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f04f0700          MOV      r7,#0
00000a  4dff              LDR      r5,|L1.1032|
00000c  766f              STRB     r7,[r5,#0x19]
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7da8              LDRB     r0,[r5,#0x16]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49fa              LDR      r1,|L1.1036|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7668              STRB     r0,[r5,#0x19]
                  |L1.52|
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  766b              STRB     r3,[r5,#0x19]         ;249
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;254
000040  0792              LSLS     r2,r2,#30             ;254
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;254
000048  7668              STRB     r0,[r5,#0x19]         ;254
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;255
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;255
000054  7668              STRB     r0,[r5,#0x19]         ;255
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4aed              LDR      r2,|L1.1040|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;256
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;256  ; IKB
000062  4291              CMP      r1,r2                 ;256
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;256
00006a  7668              STRB     r0,[r5,#0x19]         ;256
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;257
000070  4291              CMP      r1,r2                 ;257
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;257
000078  7668              STRB     r0,[r5,#0x19]         ;257
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49e2              LDR      r1,|L1.1032|
00007e  2801              CMP      r0,#1                 ;258
000080  7dc9              LDRB     r1,[r1,#0x17]         ;258
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;259
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;258
000090  7668              STRB     r0,[r5,#0x19]         ;258
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;259
000096  d07d              BEQ      |L1.404|
                  |L1.152|
000098  f1050516          ADD      r5,r5,#0x16           ;263
00009c  f04f0064          MOV      r0,#0x64              ;263
0000a0  70e8              STRB     r0,[r5,#3]            ;263
0000a2  702b              STRB     r3,[r5,#0]            ;265
0000a4  862b              STRH     r3,[r5,#0x30]         ;266
0000a6  4619              MOV      r1,r3                 ;267
0000a8  f44f70f8          MOV      r0,#0x1f0             ;267
0000ac  f7fffffe          BL       lc640_write_int
0000b0  706e              STRB     r6,[r5,#1]            ;269
0000b2  866e              STRH     r6,[r5,#0x32]         ;270
0000b4  4631              MOV      r1,r6                 ;271
0000b6  f44f70fa          MOV      r0,#0x1f4             ;271
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;273
0000c0  48d4              LDR      r0,|L1.1044|
0000c2  2100              MOVS     r1,#0                 ;274
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;274
0000c8  f7fffffe          BL       lc640_write_int
0000cc  70af              STRB     r7,[r5,#2]            ;276
0000ce  86af              STRH     r7,[r5,#0x34]         ;277
0000d0  4639              MOV      r1,r7                 ;278
0000d2  f44f70fb          MOV      r0,#0x1f6             ;278
0000d6  f7fffffe          BL       lc640_write_int
0000da  48cf              LDR      r0,|L1.1048|
0000dc  8800              LDRH     r0,[r0,#0]            ;285  ; bat_u_old_cnt
0000de  f1000001          ADD      r0,r0,#1              ;285
0000e2  f0000007          AND      r0,r0,#7              ;285
0000e6  eb040040          ADD      r0,r4,r0,LSL #1       ;285
0000ea  8c00              LDRH     r0,[r0,#0x20]         ;285
0000ec  9001              STR      r0,[sp,#4]            ;285
0000ee  4dcb              LDR      r5,|L1.1052|
0000f0  8ba8              LDRH     r0,[r5,#0x1c]         ;287
0000f2  9000              STR      r0,[sp,#0]            ;287
0000f4  f04f0263          MOV      r2,#0x63              ;288
0000f8  f04f0101          MOV      r1,#1                 ;288
0000fc  4668              MOV      r0,sp                 ;288
0000fe  f7fffffe          BL       gran_char
000102  4cc1              LDR      r4,|L1.1032|
000104  f89d0000          LDRB     r0,[sp,#0]            ;289
000108  3480              ADDS     r4,r4,#0x80           ;289
00010a  7020              STRB     r0,[r4,#0]            ;289
00010c  7e28              LDRB     r0,[r5,#0x18]         ;291
00010e  9000              STR      r0,[sp,#0]            ;291
000110  220c              MOVS     r2,#0xc               ;292
000112  2101              MOVS     r1,#1                 ;292
000114  4668              MOV      r0,sp                 ;292
000116  f7fffffe          BL       gran_char
00011a  f89d0000          LDRB     r0,[sp,#0]            ;293
00011e  7060              STRB     r0,[r4,#1]            ;293
000120  7b28              LDRB     r0,[r5,#0xc]          ;295
000122  9000              STR      r0,[sp,#0]            ;295
000124  221f              MOVS     r2,#0x1f              ;296
000126  2101              MOVS     r1,#1                 ;296
000128  4668              MOV      r0,sp                 ;296
00012a  f7fffffe          BL       gran_char
00012e  f89d0000          LDRB     r0,[sp,#0]            ;297
000132  70a0              STRB     r0,[r4,#2]            ;297
000134  f89d0004          LDRB     r0,[sp,#4]            ;299
000138  70e0              STRB     r0,[r4,#3]            ;299
00013a  f44f70fc          MOV      r0,#0x1f8             ;300
00013e  6821              LDR      r1,[r4,#0]            ;300  ; ke_date
000140  f7fffffe          BL       lc640_write_long
000144  7a28              LDRB     r0,[r5,#8]            ;302
000146  9000              STR      r0,[sp,#0]            ;302
000148  2217              MOVS     r2,#0x17              ;303
00014a  2100              MOVS     r1,#0                 ;303
00014c  4668              MOV      r0,sp                 ;303
00014e  f7fffffe          BL       gran_char
000152  f89d0000          LDRB     r0,[sp,#0]            ;304
000156  7120              STRB     r0,[r4,#4]            ;304
000158  7928              LDRB     r0,[r5,#4]            ;306
00015a  9000              STR      r0,[sp,#0]            ;306
00015c  223b              MOVS     r2,#0x3b              ;307
00015e  2100              MOVS     r1,#0                 ;307
000160  4668              MOV      r0,sp                 ;307
000162  f7fffffe          BL       gran_char
000166  f89d0000          LDRB     r0,[sp,#0]            ;308
00016a  7160              STRB     r0,[r4,#5]            ;308
00016c  7828              LDRB     r0,[r5,#0]            ;310
00016e  9000              STR      r0,[sp,#0]            ;310
000170  223b              MOVS     r2,#0x3b              ;311
000172  2100              MOVS     r1,#0                 ;311
000174  4668              MOV      r0,sp                 ;311
000176  f7fffffe          BL       gran_char
00017a  f89d0000          LDRB     r0,[sp,#0]            ;312
00017e  71a0              STRB     r0,[r4,#6]            ;312
000180  f89d0005          LDRB     r0,[sp,#5]            ;314
000184  71e0              STRB     r0,[r4,#7]            ;314
000186  f44f70fe          MOV      r0,#0x1fc             ;315
00018a  6861              LDR      r1,[r4,#4]            ;315  ; ke_date
00018c  f7fffffe          BL       lc640_write_long
000190  e750              B        |L1.52|
000192  e7ff              B        |L1.404|
                  |L1.404|
000194  f04f006c          MOV      r0,#0x6c              ;259
000198  7668              STRB     r0,[r5,#0x19]         ;259
00019a  e74b              B        |L1.52|
;;;320    
                          ENDP

                  samokalibr_hndl PROC
;;;327    //-----------------------------------------------
;;;328    void samokalibr_hndl(void)
00019c  e92d47f0          PUSH     {r4-r10,lr}
;;;329    {
;;;330    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
0001a0  4c99              LDR      r4,|L1.1032|
0001a2  f8b40042          LDRH     r0,[r4,#0x42]  ; samokalibr_cnt
0001a6  1c40              ADDS     r0,r0,#1
0001a8  b200              SXTH     r0,r0
0001aa  f8a40042          STRH     r0,[r4,#0x42]
0001ae  f5b06fe1          CMP      r0,#0x708
0001b2  db03              BLT      |L1.444|
0001b4  f04f0000          MOV      r0,#0
0001b8  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.444|
;;;331    
;;;332    if(samokalibr_cnt>=1785U)
0001bc  f9b40042          LDRSH    r0,[r4,#0x42]  ; samokalibr_cnt
0001c0  f5b06fdf          CMP      r0,#0x6f8
0001c4  d911              BLS      |L1.490|
;;;333    	{
;;;334    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
0001c6  230f              MOVS     r3,#0xf
0001c8  2201              MOVS     r2,#1
0001ca  2164              MOVS     r1,#0x64
0001cc  20d2              MOVS     r0,#0xd2
0001ce  f7fffffe          BL       mess_send
;;;335    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
0001d2  230f              MOVS     r3,#0xf
0001d4  2200              MOVS     r2,#0
0001d6  21d8              MOVS     r1,#0xd8
0001d8  20d7              MOVS     r0,#0xd7
0001da  f7fffffe          BL       mess_send
;;;336    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
0001de  230f              MOVS     r3,#0xf
0001e0  2200              MOVS     r2,#0
0001e2  21d8              MOVS     r1,#0xd8
0001e4  20dc              MOVS     r0,#0xdc
0001e6  f7fffffe          BL       mess_send
                  |L1.490|
;;;337    	} 
;;;338    
;;;339    if(samokalibr_cnt==1799U)
0001ea  f9b40042          LDRSH    r0,[r4,#0x42]  ; samokalibr_cnt
0001ee  f5a061e0          SUB      r1,r0,#0x700
0001f2  3907              SUBS     r1,#7
0001f4  d133              BNE      |L1.606|
;;;340    	{
;;;341    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
0001f6  4d8a              LDR      r5,|L1.1056|
0001f8  4c8a              LDR      r4,|L1.1060|
0001fa  4e84              LDR      r6,|L1.1036|
0001fc  8828              LDRH     r0,[r5,#0]  ; Kibat0
0001fe  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000200  270a              MOVS     r7,#0xa
000202  f8df8224          LDR      r8,|L1.1064|
000206  f8df9224          LDR      r9,|L1.1068|
00020a  4288              CMP      r0,r1
00020c  d010              BEQ      |L1.560|
00020e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000212  fb90f0f7          SDIV     r0,r0,r7
000216  b200              SXTH     r0,r0
000218  f7fffffe          BL       abs
00021c  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000220  4288              CMP      r0,r1
000222  da05              BGE      |L1.560|
000224  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000228  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
00022c  f7fffffe          BL       lc640_write_int
                  |L1.560|
;;;342    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000230  8868              LDRH     r0,[r5,#2]  ; Kibat0
000232  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000234  4288              CMP      r0,r1
000236  d012              BEQ      |L1.606|
000238  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00023c  fb90f0f7          SDIV     r0,r0,r7
000240  b200              SXTH     r0,r0
000242  f7fffffe          BL       abs
000246  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
00024a  4288              CMP      r0,r1
00024c  da07              BGE      |L1.606|
00024e  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000252  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000256  e8bd47f0          POP      {r4-r10,lr}
00025a  f7ffbffe          B.W      lc640_write_int
                  |L1.606|
;;;343    	
;;;344    	}	 	
;;;345    }
00025e  e8bd87f0          POP      {r4-r10,pc}
;;;346    
                          ENDP

                  ubat_old_drv PROC
;;;349    //-----------------------------------------------
;;;350    void ubat_old_drv(void)
000262  b510              PUSH     {r4,lr}
;;;351    {        
;;;352    bat_u_old_cnt++;
000264  4c6c              LDR      r4,|L1.1048|
000266  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000268  f1000001          ADD      r0,r0,#1
00026c  8020              STRH     r0,[r4,#0]
;;;353    gran_ring(&bat_u_old_cnt,0,8);
00026e  f04f0208          MOV      r2,#8
000272  f04f0100          MOV      r1,#0
000276  4620              MOV      r0,r4
000278  f7fffffe          BL       gran_ring
;;;354    
;;;355    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
00027c  4963              LDR      r1,|L1.1036|
00027e  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000282  eb010040          ADD      r0,r1,r0,LSL #1
000286  884a              LDRH     r2,[r1,#2]  ; bat
000288  8402              STRH     r2,[r0,#0x20]
;;;356    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
00028a  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
00028e  f8a0106c          STRH     r1,[r0,#0x6c]
;;;357    }
000292  bd10              POP      {r4,pc}
;;;358    /*
                          ENDP

                  matemat PROC
;;;395    //-----------------------------------------------
;;;396    void matemat(void)
000294  e92d5ff0          PUSH     {r4-r12,lr}
;;;397    {
;;;398    //signed short temp_SS;
;;;399    signed long temp_SL/*,temp_SL_*/;
;;;400    char /*temp,*/i;
;;;401    //signed short temp_SS;
;;;402    /*
;;;403    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;404    //напряжение сети
;;;405    
;;;406    
;;;407    	if(bps[11]._device==dNET_METR)
;;;408    		{
;;;409    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;410    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;411    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;412    
;;;413    		temp_SL=(signed long)net_metr_buff_[2];
;;;414    		temp_SL*=KunetA;
;;;415    		temp_SL/=6000L;
;;;416    		net_Ua=(signed short)temp_SL;
;;;417    	
;;;418    		temp_SL=(signed long)net_metr_buff_[1];
;;;419    		temp_SL*=KunetB;
;;;420    		temp_SL/=6000L;
;;;421    		net_Ub=(signed short)temp_SL;
;;;422    	
;;;423    		temp_SL=(signed long)net_metr_buff_[0];
;;;424    		temp_SL*=KunetC;
;;;425    		temp_SL/=6000L;
;;;426    		net_Uc=(signed short)temp_SL;
;;;427    
;;;428    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;429    
;;;430    		net_U=net_Ua;
;;;431    		if(net_Ub<net_U)net_U=net_Ub;
;;;432    		if(net_Uc<net_U)net_U=net_Uc;
;;;433    		}
;;;434    	  else if(AUSW_MAIN==22033)
;;;435    	{
;;;436    	temp_SL=(signed long)net_buff_;
;;;437    	temp_SL*=KunetA;
;;;438    	temp_SL/=4000L;
;;;439    	net_Ua=(signed short)temp_SL;
;;;440    
;;;441    	temp_SL=(signed long)adc_buff_[3];
;;;442    	temp_SL*=KunetB;
;;;443    	temp_SL/=6000L;
;;;444    	net_Ub=(signed short)temp_SL;
;;;445    
;;;446    	temp_SL=(signed long)adc_buff_[10];
;;;447    	temp_SL*=KunetC;
;;;448    	temp_SL/=6000L;
;;;449    	net_Uc=(signed short)temp_SL;
;;;450    
;;;451    	net_U=net_Ua;
;;;452    	if(net_Ub<net_U)net_U=net_Ub;
;;;453    	if(net_Uc<net_U)net_U=net_Uc;
;;;454    	}
;;;455    else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;456    	{
;;;457    	temp_SL=(signed long)net_buff_;
;;;458    	temp_SL*=KunetA;
;;;459    	temp_SL/=40000L;
;;;460    	net_Ua=(signed short)temp_SL;
;;;461    
;;;462    	temp_SL=(signed long)adc_buff_[3];
;;;463    	temp_SL*=KunetB;
;;;464    	temp_SL/=6000L;
;;;465    	net_Ub=(signed short)temp_SL;
;;;466    
;;;467    	temp_SL=(signed long)adc_buff_[10];
;;;468    	temp_SL*=KunetC;
;;;469    	temp_SL/=6000L;
;;;470    	net_Uc=(signed short)temp_SL;
;;;471    
;;;472    	net_U=net_Ua;
;;;473    	if(net_Ub<net_U)net_U=net_Ub;
;;;474    	if(net_Uc<net_U)net_U=net_Uc;
;;;475    	}
;;;476    else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;477    	{
;;;478    	temp_SL=(signed long)net_buff_;
;;;479    	temp_SL*=Kunet;
;;;480    	temp_SL/=35000L;
;;;481    	net_U=(signed short)temp_SL;
;;;482    	
;;;483    	}
;;;484    else
;;;485    	{
;;;486    	temp_SL=(signed long)net_buff_;
;;;487    	temp_SL*=Kunet;
;;;488    	#ifdef _ACDC_
;;;489    	temp_SL/=500L;
;;;490    	#else
;;;491    	temp_SL/=5000L;
;;;492    	#endif
;;;493    	net_U=(signed short)temp_SL;
;;;494    	
;;;495    	}
;;;496    if(bps[11]._device!=dNET_METR) net_F3=net_F;
;;;497    #endif */
;;;498    
;;;499    
;;;500    //Напряжения батарей
;;;501    temp_SL=(signed long)adc_buff_[0];
000298  4e65              LDR      r6,|L1.1072|
00029a  f9b61000          LDRSH    r1,[r6,#0]  ; adc_buff_
;;;502    temp_SL*=Kubat[0];
00029e  4f65              LDR      r7,|L1.1076|
0002a0  f9b70000          LDRSH    r0,[r7,#0]  ; Kubat
0002a4  4348              MULS     r0,r1,r0
;;;503    temp_SL/=2000L;
0002a6  f44f64fa          MOV      r4,#0x7d0
0002aa  fb90f0f4          SDIV     r0,r0,r4
;;;504    bat[0]._Ub=(signed short)temp_SL;
0002ae  4d57              LDR      r5,|L1.1036|
0002b0  8068              STRH     r0,[r5,#2]
;;;505    /*
;;;506    #ifdef UKU_220
;;;507    //Напряжения батарей
;;;508    temp_SL=(signed long)adc_buff_[0];
;;;509    temp_SL*=Kubat[0];
;;;510    temp_SL/=400L;
;;;511    bat[0]._Ub=(signed short)temp_SL;
;;;512    #endif
;;;513    
;;;514    #ifdef UKU_220_V2
;;;515    //Напряжения батарей
;;;516    temp_SL=(signed long)adc_buff_[0];
;;;517    temp_SL*=Kubat[0];
;;;518    temp_SL/=400L;
;;;519    bat[0]._Ub=(signed short)temp_SL;
;;;520    #endif */
;;;521    
;;;522    temp_SL=(signed long)adc_buff_[4];
0002b2  f9b60008          LDRSH    r0,[r6,#8]  ; adc_buff_
;;;523    temp_SL*=Kubatm[0];
0002b6  4a60              LDR      r2,|L1.1080|
0002b8  f9b21000          LDRSH    r1,[r2,#0]  ; Kubatm
0002bc  fb01f100          MUL      r1,r1,r0
;;;524    temp_SL/=700L;
0002c0  f44f732f          MOV      r3,#0x2bc
0002c4  fb91f0f3          SDIV     r0,r1,r3
;;;525    bat[0]._Ubm=(signed short)temp_SL;
0002c8  80a8              STRH     r0,[r5,#4]
;;;526    /*
;;;527    #ifdef UKU_KONTUR
;;;528    temp_SL=(signed long)adc_buff_[4];
;;;529    temp_SL*=Kubatm[0];
;;;530    temp_SL/=2000L;
;;;531    bat[0]._Ubm=(signed short)temp_SL;
;;;532    #endif */
;;;533    
;;;534    temp_SL=(signed long)adc_buff_[12];
0002ca  f9b60018          LDRSH    r0,[r6,#0x18]  ; adc_buff_
;;;535    temp_SL*=Kubat[1];
0002ce  f9b71002          LDRSH    r1,[r7,#2]  ; Kubat
0002d2  fb01f100          MUL      r1,r1,r0
;;;536    temp_SL/=2000L;
0002d6  fb91f0f4          SDIV     r0,r1,r4
;;;537    bat[1]._Ub=(signed short)temp_SL;
0002da  f8a5004e          STRH     r0,[r5,#0x4e]
;;;538    /*
;;;539    #ifdef UKU_220
;;;540    temp_SL=(signed long)adc_buff_[12];
;;;541    temp_SL*=Kubat[1];
;;;542    temp_SL/=400L;
;;;543    bat[1]._Ub=(signed short)temp_SL;
;;;544    #endif
;;;545    
;;;546    #ifdef UKU_220_V2
;;;547    temp_SL=(signed long)adc_buff_[12];
;;;548    temp_SL*=Kubat[1];
;;;549    temp_SL/=400L;
;;;550    bat[1]._Ub=(signed short)temp_SL;
;;;551    #endif
;;;552    */
;;;553    temp_SL=(signed long)adc_buff_[1];
0002de  f9b61002          LDRSH    r1,[r6,#2]  ; adc_buff_
;;;554    temp_SL*=Kubatm[1];
0002e2  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
0002e6  fb00f001          MUL      r0,r0,r1
;;;555    temp_SL/=700L;
0002ea  fb90f0f3          SDIV     r0,r0,r3
;;;556    bat[1]._Ubm=(signed short)temp_SL;
0002ee  f8a50050          STRH     r0,[r5,#0x50]
;;;557    #ifdef UKU_KONTUR
;;;558    temp_SL=(signed long)adc_buff_[1];
;;;559    temp_SL*=Kubatm[1];
;;;560    temp_SL/=2000L;
;;;561    bat[1]._Ubm=(signed short)temp_SL;
;;;562    #endif
;;;563    
;;;564    #ifdef UKU_TELECORE2015
;;;565    temp_SL=(signed long)adc_buff_[2];
;;;566    temp_SL*=Kubat[0];
;;;567    temp_SL/=2000L;
;;;568    bat[0]._Ub=(signed short)temp_SL;
;;;569    #endif
;;;570    
;;;571    /*
;;;572    //Токи батарей
;;;573    if(!mess_find_unvol(MESS2MATEMAT))
;;;574    	{
;;;575    	temp_SL=(signed long)ad7705_buff_[0];
;;;576    	temp_SL-=(signed long)Kibat0[0];
;;;577    	temp_SL*=(signed long)Kibat1[0];
;;;578    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;579    	else temp_SL/=1000L;
;;;580    	bat[0]._Ib=(signed short)temp_SL;
;;;581    
;;;582    	temp_SL=(signed long)ad7705_buff_[1];
;;;583    	temp_SL-=(signed long)Kibat0[1];
;;;584    	temp_SL*=(signed long)Kibat1[1];
;;;585    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;586    	else temp_SL/=1000L;
;;;587    	bat[1]._Ib=(signed short)temp_SL;
;;;588    	}
;;;589    */
;;;590    
;;;591    
;;;592    //Токи батарей
;;;593    if(!mess_find_unvol(MESS2MATEMAT))
0002f2  f04f00dc          MOV      r0,#0xdc
0002f6  f7fffffe          BL       mess_find_unvol
;;;594    	{
;;;595    	temp_SL=(signed long)ad7705_buff_[0];
;;;596    	temp_SL-=(signed long)Kibat0[0];
;;;597    	temp_SL*=(signed long)Kibat1[0];
0002fa  4f50              LDR      r7,|L1.1084|
;;;598    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
0002fc  f8dfc140          LDR      r12,|L1.1088|
;;;599    	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000300  f24552fa          MOV      r2,#0x55fa
000304  bbf0              CBNZ     r0,|L1.900|
000306  f8df811c          LDR      r8,|L1.1060|
00030a  f8b80000          LDRH     r0,[r8,#0]            ;595  ; ad7705_buff_
00030e  f8df9110          LDR      r9,|L1.1056|
000312  f8b91000          LDRH     r1,[r9,#0]            ;596  ; Kibat0
000316  eba00001          SUB      r0,r0,r1              ;596
00031a  f9b71000          LDRSH    r1,[r7,#0]            ;597  ; Kibat1
00031e  fb01f100          MUL      r1,r1,r0              ;597
000322  f8bc0000          LDRH     r0,[r12,#0]           ;598  ; AUSW_MAIN
000326  f6456338          MOV      r3,#0x5e38            ;598
00032a  f6456a92          MOV      r10,#0x5e92           ;598
00032e  f2456b11          MOV      r11,#0x5611
000332  4298              CMP      r0,r3                 ;598
000334  d001              BEQ      |L1.826|
000336  4550              CMP      r0,r10                ;598
000338  d104              BNE      |L1.836|
                  |L1.826|
00033a  f44f7e96          MOV      lr,#0x12c             ;598
00033e  fb91f1fe          SDIV     r1,r1,lr              ;598
000342  e00f              B        |L1.868|
                  |L1.836|
000344  4290              CMP      r0,r2
000346  d006              BEQ      |L1.854|
000348  f5a04eac          SUB      lr,r0,#0x5600
00034c  f1be0e13          SUBS     lr,lr,#0x13
000350  d001              BEQ      |L1.854|
000352  4558              CMP      r0,r11
000354  d102              BNE      |L1.860|
                  |L1.854|
000356  fb91f1f4          SDIV     r1,r1,r4
00035a  e003              B        |L1.868|
                  |L1.860|
;;;600    	else temp_SL/=1000L;
00035c  f44f7e7a          MOV      lr,#0x3e8
000360  fb91f1fe          SDIV     r1,r1,lr
                  |L1.868|
;;;601    	#ifdef UKU_TELECORE2015
;;;602    	temp_SL/=2L;
;;;603    	//temp_SL=-temp_SL;
;;;604    	#endif
;;;605    	//#ifdef UKU_TELECORE2017
;;;606    	//temp_SL/=-2L;
;;;607    	//temp_SL=-temp_SL;
;;;608    	//#endif
;;;609    	bat[0]._Ib=(signed short)temp_SL;
000364  8129              STRH     r1,[r5,#8]
;;;610    
;;;611    	temp_SL=(signed long)ad7705_buff_[1];
000366  f8b81002          LDRH     r1,[r8,#2]  ; ad7705_buff_
;;;612    	temp_SL-=(signed long)Kibat0[1];
00036a  f8b98002          LDRH     r8,[r9,#2]  ; Kibat0
00036e  eba10808          SUB      r8,r1,r8
;;;613    	temp_SL*=(signed long)Kibat1[1];
000372  f9b71002          LDRSH    r1,[r7,#2]  ; Kibat1
000376  fb01f108          MUL      r1,r1,r8
;;;614    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
00037a  4298              CMP      r0,r3
00037c  d001              BEQ      |L1.898|
00037e  4550              CMP      r0,r10
000380  d106              BNE      |L1.912|
                  |L1.898|
000382  e000              B        |L1.902|
                  |L1.900|
000384  e015              B        |L1.946|
                  |L1.902|
000386  f44f7096          MOV      r0,#0x12c
00038a  fb91f0f0          SDIV     r0,r1,r0
00038e  e00e              B        |L1.942|
                  |L1.912|
;;;615    	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000390  4290              CMP      r0,r2
000392  d005              BEQ      |L1.928|
000394  f5a043ac          SUB      r3,r0,#0x5600
000398  3b13              SUBS     r3,r3,#0x13
00039a  d001              BEQ      |L1.928|
00039c  4558              CMP      r0,r11
00039e  d102              BNE      |L1.934|
                  |L1.928|
0003a0  fb91f0f4          SDIV     r0,r1,r4
0003a4  e003              B        |L1.942|
                  |L1.934|
;;;616    	else temp_SL/=1000L;
0003a6  f44f707a          MOV      r0,#0x3e8
0003aa  fb91f0f0          SDIV     r0,r1,r0
                  |L1.942|
;;;617    	bat[1]._Ib=(signed short)temp_SL;
0003ae  f8a50054          STRH     r0,[r5,#0x54]
                  |L1.946|
;;;618    	}
;;;619    
;;;620    
;;;621    
;;;622    
;;;623    
;;;624    //Температуры батарей
;;;625    /*
;;;626    #ifdef UKU_KONTUR
;;;627    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;628    else bat[0]._nd=1;
;;;629    temp_SL=(signed long)adc_buff_[6];
;;;630    temp_SL*=Ktbat[0];
;;;631    temp_SL/=20000L;
;;;632    temp_SL-=273L;
;;;633    bat[0]._Tb=(signed short)temp_SL;
;;;634    #else
;;;635    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;636    else bat[0]._nd=1;
;;;637    temp_SL=(signed long)adc_buff_[6];
;;;638    temp_SL*=Ktbat[0];
;;;639    temp_SL/=20000L;
;;;640    temp_SL-=273L;
;;;641    bat[0]._Tb=(signed short)temp_SL;
;;;642    #endif	*/
;;;643    /*
;;;644    #ifdef UKU_KONTUR
;;;645    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;646    else bat[1]._nd=1;
;;;647    temp_SL=(signed long)adc_buff_[7];
;;;648    temp_SL*=Ktbat[1];
;;;649    temp_SL/=20000L;
;;;650    temp_SL-=273L;
;;;651    bat[1]._Tb=(signed short)temp_SL;
;;;652    #else
;;;653    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;654    else bat[1]._nd=1;
;;;655    temp_SL=(signed long)adc_buff_[7];
;;;656    temp_SL*=Ktbat[1];
;;;657    temp_SL/=20000L;
;;;658    temp_SL-=273L;
;;;659    bat[1]._Tb=(signed short)temp_SL;
;;;660    #endif */
;;;661    /*
;;;662    #ifdef UKU_6U
;;;663    
;;;664    if(NUMMAKB==2)
;;;665    	{
;;;666    	if(makb[0]._cnt<5)
;;;667    		{
;;;668    		if(makb[0]._T_nd[0]==0)
;;;669    			{
;;;670    			bat[0]._Tb=makb[0]._T[0];
;;;671    			bat[0]._nd=0;
;;;672    			}
;;;673    		}
;;;674    
;;;675    	if(makb[1]._cnt<5)
;;;676    		{
;;;677    		if(makb[1]._T_nd[0]==0)
;;;678    			{
;;;679    			bat[1]._Tb=makb[1]._T[0];
;;;680    			bat[1]._nd=0;
;;;681    			}
;;;682    		}
;;;683    
;;;684    	}
;;;685    else if(NUMMAKB==4)
;;;686    	{
;;;687    	signed short temp_t;
;;;688    	temp_t=-20;
;;;689    	if(makb[0]._cnt<5)
;;;690    		{
;;;691    		if(makb[0]._T_nd[0]==0)
;;;692    			{
;;;693    			temp_t=makb[0]._T[0];
;;;694    			bat[0]._nd=0;
;;;695    			}
;;;696    		}
;;;697    	if(makb[1]._cnt<5)
;;;698    		{
;;;699    		if(makb[1]._T_nd[0]==0)
;;;700    			{
;;;701    			if(temp_t<makb[1]._T[0])
;;;702    				{
;;;703    				bat[0]._nd=0;
;;;704    				temp_t=makb[1]._T[0];
;;;705    				}
;;;706    			}
;;;707    		}
;;;708    	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;709    
;;;710     	temp_t=-20;
;;;711    	if(makb[2]._cnt<5)
;;;712    		{
;;;713    		if(makb[2]._T_nd[0]==0)
;;;714    			{
;;;715    			temp_t=makb[2]._T[0];
;;;716    			bat[1]._nd=0;
;;;717    			}
;;;718    		}
;;;719    	if(makb[3]._cnt<5)
;;;720    		{
;;;721    		if(makb[3]._T_nd[0]==0)
;;;722    			{
;;;723    			if(temp_t<makb[3]._T[0])
;;;724    				{
;;;725    				bat[1]._nd=0;
;;;726    				temp_t=makb[3]._T[0];
;;;727    				}
;;;728    			}
;;;729    		}
;;;730    	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;731    	}
;;;732    
;;;733    #endif	*/
;;;734    
;;;735    
;;;736    //Напряжение нагрузки
;;;737    temp_SL=(signed long)adc_buff_[2];
0003b2  f9b60004          LDRSH    r0,[r6,#4]  ; adc_buff_
;;;738    temp_SL*=Kuload;
0003b6  4923              LDR      r1,|L1.1092|
0003b8  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
0003bc  4341              MULS     r1,r0,r1
;;;739    temp_SL/=2000L;
0003be  f44f63fa          MOV      r3,#0x7d0
0003c2  fb91f1f3          SDIV     r1,r1,r3
;;;740    load_U=(signed short)temp_SL;
0003c6  fa0ff881          SXTH     r8,r1
0003ca  491f              LDR      r1,|L1.1096|
0003cc  f8a18000          STRH     r8,[r1,#0]
;;;741    /*
;;;742    #ifdef UKU_220 
;;;743    //Напряжение нагрузки
;;;744    temp_SL=(signed long)adc_buff_[2];
;;;745    temp_SL*=Kuload;
;;;746    temp_SL/=350L;
;;;747    load_U=(signed short)temp_SL;
;;;748    #endif
;;;749    
;;;750    #ifdef UKU_220_V2 
;;;751    //Напряжение нагрузки
;;;752    temp_SL=(signed long)adc_buff_[2];
;;;753    temp_SL*=Kuload;
;;;754    temp_SL/=350L;
;;;755    load_U=(signed short)temp_SL;
;;;756    #endif
;;;757    */
;;;758    #ifdef UKU_VD
;;;759    //Напряжение выхода
;;;760    temp_SL=(signed long)adc_buff_[1];
0003d0  f9b61002          LDRSH    r1,[r6,#2]  ; adc_buff_
;;;761    temp_SL*=Kuout;
0003d4  4b1d              LDR      r3,|L1.1100|
0003d6  f9b33000          LDRSH    r3,[r3,#0]  ; Kuout
0003da  fb01f103          MUL      r1,r1,r3
;;;762    temp_SL/=500L;
0003de  f44f73fa          MOV      r3,#0x1f4
0003e2  fb91f1f3          SDIV     r1,r1,r3
;;;763    out_U=(signed short)temp_SL;
0003e6  4c1a              LDR      r4,|L1.1104|
0003e8  8021              STRH     r1,[r4,#0]
;;;764    
;;;765    
;;;766    //Напряжение вольтдобавки
;;;767    temp_SL=(signed long)adc_buff_[2];
;;;768    temp_SL*=Kuvd;
0003ea  4c1a              LDR      r4,|L1.1108|
0003ec  f9b44000          LDRSH    r4,[r4,#0]  ; Kuvd
0003f0  fb00f404          MUL      r4,r0,r4
;;;769    temp_SL/=500L;
0003f4  fb94f4f3          SDIV     r4,r4,r3
;;;770    vd_U=(signed short)temp_SL;
0003f8  fa0ff984          SXTH     r9,r4
0003fc  4c16              LDR      r4,|L1.1112|
0003fe  f8a49000          STRH     r9,[r4,#0]
;;;771    
;;;772    //Напряжение входа
;;;773    in_U=out_U-vd_U;
000402  eba10109          SUB      r1,r1,r9
000406  e029              B        |L1.1116|
                  |L1.1032|
                          DCD      ||area_number.26||
                  |L1.1036|
                          DCD      bat
                  |L1.1040|
                          DCD      IKB
                  |L1.1044|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1048|
                          DCD      bat_u_old_cnt
                  |L1.1052|
                          DCD      0x40024020
                  |L1.1056|
                          DCD      Kibat0
                  |L1.1060|
                          DCD      ad7705_buff_
                  |L1.1064|
                          DCD      IZMAX
                  |L1.1068|
                          DCD      ADR_KI0BAT
                  |L1.1072|
                          DCD      ||.bss||+0x400
                  |L1.1076|
                          DCD      Kubat
                  |L1.1080|
                          DCD      Kubatm
                  |L1.1084|
                          DCD      Kibat1
                  |L1.1088|
                          DCD      AUSW_MAIN
                  |L1.1092|
                          DCD      Kuload
                  |L1.1096|
                          DCD      load_U
                  |L1.1100|
                          DCD      Kuout
                  |L1.1104|
                          DCD      out_U
                  |L1.1108|
                          DCD      Kuvd
                  |L1.1112|
                          DCD      vd_U
                  |L1.1116|
00045c  4cff              LDR      r4,|L1.2140|
00045e  8021              STRH     r1,[r4,#0]
;;;774    
;;;775    //Напряжение выпрямителей
;;;776    temp_SL=(signed long)adc_buff_[2];
;;;777    temp_SL*=Kubps;
000460  49ff              LDR      r1,|L1.2144|
000462  f9b11000          LDRSH    r1,[r1,#0]  ; Kubps
000466  fb00f001          MUL      r0,r0,r1
;;;778    if(AUSW_MAIN==22010)temp_SL/=400L;
00046a  f8bc1000          LDRH     r1,[r12,#0]  ; AUSW_MAIN
00046e  4291              CMP      r1,r2
000470  d104              BNE      |L1.1148|
000472  f44f71c8          MOV      r1,#0x190
000476  fb90f0f1          SDIV     r0,r0,r1
00047a  e001              B        |L1.1152|
                  |L1.1148|
;;;779    else temp_SL/=500L;
00047c  fb90f0f3          SDIV     r0,r0,r3
                  |L1.1152|
;;;780    bps_U=(signed short)temp_SL;
000480  f8dfa3e0          LDR      r10,|L1.2148|
000484  b200              SXTH     r0,r0
000486  f8aa0000          STRH     r0,[r10,#0]
;;;781    
;;;782    if(bps_U<100)
;;;783    	{
;;;784    	char i;
;;;785    	for(i=0;i<NUMIST;i++)
00048a  4cf7              LDR      r4,|L1.2152|
;;;786    		{
;;;787    		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
00048c  4af7              LDR      r2,|L1.2156|
00048e  2864              CMP      r0,#0x64              ;782
000490  da14              BGE      |L1.1212|
000492  f04f0000          MOV      r0,#0                 ;785
000496  f9b4c000          LDRSH    r12,[r4,#0]           ;785
00049a  e00d              B        |L1.1208|
                  |L1.1180|
00049c  ebc01100          RSB      r1,r0,r0,LSL #4
0004a0  eb0201c1          ADD      r1,r2,r1,LSL #3
0004a4  f9ba3000          LDRSH    r3,[r10,#0]  ; bps_U
0004a8  6a09              LDR      r1,[r1,#0x20]
0004aa  4299              CMP      r1,r3
0004ac  dd01              BLE      |L1.1202|
0004ae  f8aa1000          STRH     r1,[r10,#0]
                  |L1.1202|
0004b2  f1000001          ADD      r0,r0,#1              ;785
0004b6  b2c0              UXTB     r0,r0                 ;785
                  |L1.1208|
0004b8  4560              CMP      r0,r12                ;785
0004ba  dbef              BLT      |L1.1180|
                  |L1.1212|
;;;788    		}
;;;789    	}
;;;790    
;;;791    //Суммарный ток выпрямителей
;;;792    temp_SL=0;
0004bc  f04f0300          MOV      r3,#0
;;;793    for (i=0;i<NUMIST;i++)
0004c0  4619              MOV      r1,r3
0004c2  f9b40000          LDRSH    r0,[r4,#0]            ;785
0004c6  e008              B        |L1.1242|
                  |L1.1224|
;;;794    	{
;;;795    	temp_SL+=((signed long)bps[i]._Ii);
0004c8  ebc11401          RSB      r4,r1,r1,LSL #4
0004cc  eb0204c4          ADD      r4,r2,r4,LSL #3
0004d0  6a64              LDR      r4,[r4,#0x24]
0004d2  4423              ADD      r3,r3,r4
0004d4  f1010101          ADD      r1,r1,#1              ;793
0004d8  b2c9              UXTB     r1,r1                 ;793
                  |L1.1242|
0004da  4281              CMP      r1,r0                 ;793
0004dc  dbf4              BLT      |L1.1224|
;;;796    	}
;;;797    bps_I=(signed short)temp_SL;
0004de  49e4              LDR      r1,|L1.2160|
0004e0  800b              STRH     r3,[r1,#0]
;;;798    
;;;799    
;;;800    #endif
;;;801    
;;;802    /*
;;;803    #ifdef UKU_KONTUR
;;;804    //Внешний датчик температуры №1(температура внешнего воздуха)
;;;805    if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;806    else ND_EXT[0]=1;
;;;807    temp_SL=(signed long)adc_buff_[5];
;;;808    temp_SL*=Ktext[0];
;;;809    temp_SL/=20000L;
;;;810    temp_SL-=273L;
;;;811    t_ext[0]=(signed short)temp_SL;
;;;812    #else 
;;;813    //Внешний датчик температуры №1(температура внешнего воздуха)
;;;814    if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;815    else ND_EXT[0]=1;
;;;816    temp_SL=(signed long)adc_buff_[5];
;;;817    temp_SL*=Ktext[0];
;;;818    temp_SL/=20000L;
;;;819    temp_SL-=273L;
;;;820    t_ext[0]=(signed short)temp_SL;	
;;;821    
;;;822    #endif	  */
;;;823    /*
;;;824    #ifdef UKU_220
;;;825    
;;;826    //Внешний датчик температуры №2(температура отсека ЭПУ)
;;;827    if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;828    else ND_EXT[1]=1;
;;;829    temp_SL=(signed long)adc_buff_[3];
;;;830    temp_SL*=Ktext[1];
;;;831    temp_SL/=20000L;
;;;832    temp_SL-=273L;
;;;833    t_ext[1]=(signed short)temp_SL;
;;;834    
;;;835    //Внешний датчик температуры №3(температура отсека MSAN)
;;;836    if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;837    else ND_EXT[2]=1;
;;;838    temp_SL=(signed long)adc_buff_[10];
;;;839    temp_SL*=Ktext[2];
;;;840    temp_SL/=20000L;
;;;841    temp_SL-=273L;
;;;842    t_ext[2]=(signed short)temp_SL;
;;;843    
;;;844    #else
;;;845    */
;;;846    
;;;847    #ifdef UKU_VD
;;;848    
;;;849    //Внешний датчик температуры 
;;;850    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0004e2  f9b6300c          LDRSH    r3,[r6,#0xc]  ; adc_buff_
0004e6  f64036b7          MOV      r6,#0xbb7
0004ea  f2a33421          SUB      r4,r3,#0x321
0004ee  f8dfa384          LDR      r10,|L1.2164|
0004f2  2100              MOVS     r1,#0                 ;785
0004f4  42b4              CMP      r4,r6
0004f6  d202              BCS      |L1.1278|
0004f8  f88a1000          STRB     r1,[r10,#0]
0004fc  e003              B        |L1.1286|
                  |L1.1278|
;;;851    else ND_EXT[0]=1;
0004fe  f04f0401          MOV      r4,#1
000502  f88a4000          STRB     r4,[r10,#0]
                  |L1.1286|
;;;852    temp_SL=(signed long)adc_buff_[6];
;;;853    temp_SL*=Ktext[0];
000506  4cdc              LDR      r4,|L1.2168|
000508  f9b44000          LDRSH    r4,[r4,#0]  ; Ktext
00050c  435c              MULS     r4,r3,r4
;;;854    temp_SL/=20000L;
00050e  f6446320          MOV      r3,#0x4e20
000512  fb94f3f3          SDIV     r3,r4,r3
;;;855    temp_SL-=273L;
000516  f2a31311          SUB      r3,r3,#0x111
;;;856    t_ext[0]=(signed short)temp_SL;
00051a  f8dfc360          LDR      r12,|L1.2172|
00051e  b21c              SXTH     r4,r3
000520  f8ac4000          STRH     r4,[r12,#0]
;;;857    if(rele_on_cnt<0)rele_on_cnt=0;
000524  4bd6              LDR      r3,|L1.2176|
000526  f9b36034          LDRSH    r6,[r3,#0x34]  ; rele_on_cnt
00052a  2e00              CMP      r6,#0
00052c  da00              BGE      |L1.1328|
00052e  8699              STRH     r1,[r3,#0x34]
                  |L1.1328|
;;;858    if(rele_on_cnt>3)rele_on_cnt=3;
000530  f9b36034          LDRSH    r6,[r3,#0x34]  ; rele_on_cnt
000534  2e03              CMP      r6,#3
000536  dd02              BLE      |L1.1342|
000538  f04f0603          MOV      r6,#3
00053c  869e              STRH     r6,[r3,#0x34]
                  |L1.1342|
;;;859    t_ext[0]+=3*rele_on_cnt;
00053e  8e9e              LDRH     r6,[r3,#0x34]  ; rele_on_cnt
000540  eb060646          ADD      r6,r6,r6,LSL #1
000544  4434              ADD      r4,r4,r6
000546  b224              SXTH     r4,r4
000548  f8ac4000          STRH     r4,[r12,#0]
;;;860    if(ND_EXT[0]==0)sys_T=t_ext[0];
00054c  4ec9              LDR      r6,|L1.2164|
00054e  f896a000          LDRB     r10,[r6,#0]  ; ND_EXT
000552  4ecc              LDR      r6,|L1.2180|
000554  f1ba0f00          CMP      r10,#0
000558  d012              BEQ      |L1.1408|
;;;861    else sys_T=20;
00055a  f04f0414          MOV      r4,#0x14
00055e  8034              STRH     r4,[r6,#0]
                  |L1.1376|
;;;862    
;;;863    #endif
;;;864    
;;;865    /*
;;;866    //Внешний датчик температуры №2(температура отсека ЭПУ)
;;;867    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;868    else ND_EXT[1]=1;
;;;869    temp_SL=(signed long)adc_buff_[6];
;;;870    temp_SL*=Ktext[1];
;;;871    temp_SL/=20000L;
;;;872    temp_SL-=273L;
;;;873    t_ext[1]=(signed short)temp_SL;
;;;874    
;;;875    //Внешний датчик температуры №3(температура отсека MSAN)
;;;876    if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;877    else ND_EXT[2]=1;
;;;878    temp_SL=(signed long)adc_buff_[3];
;;;879    temp_SL*=Ktext[2];
;;;880    temp_SL/=20000L;
;;;881    temp_SL-=273L;
;;;882    t_ext[2]=(signed short)temp_SL;
;;;883    
;;;884    #endif */
;;;885    
;;;886    
;;;887    if(!bIBAT_SMKLBR)
000560  4cc9              LDR      r4,|L1.2184|
;;;888    	{
;;;889    	signed long temp_SL;
;;;890    	temp_SL=(signed long)ibat_metr_buff_[0];
;;;891    	temp_SL-=(signed long)ibat_metr_buff_[1];
;;;892    	temp_SL*=(signed long)Kibat1[0];
;;;893    	temp_SL/=2000L;
;;;894    	
;;;895    	if(bIBAT_SMKLBR_CNT) bIBAT_SMKLBR_CNT--;
000562  f8dfa328          LDR      r10,|L1.2188|
;;;896    
;;;897    	if(ibat_metr_cnt>30)temp_SL=0;
;;;898    	
;;;899    	if(!bIBAT_SMKLBR_CNT)
;;;900    		{
;;;901    		Ib_ips_termokompensat =(signed short)temp_SL;
;;;902    		out_I=Ib_ips_termokompensat;
000566  f8dfb328          LDR      r11,|L1.2192|
00056a  8826              LDRH     r6,[r4,#0]            ;887  ; bIBAT_SMKLBR
00056c  4cc9              LDR      r4,|L1.2196|
00056e  b14e              CBZ      r6,|L1.1412|
;;;903    		}
;;;904    	}
;;;905    else
;;;906    	{
;;;907    	bIBAT_SMKLBR_CNT=50;
000570  f04f0632          MOV      r6,#0x32
000574  f8aa6000          STRH     r6,[r10,#0]
                  |L1.1400|
;;;908    	}
;;;909    
;;;910    if(I_LOAD_MODE==0)
000578  4ec7              LDR      r6,|L1.2200|
00057a  8836              LDRH     r6,[r6,#0]  ; I_LOAD_MODE
00057c  b33e              CBZ      r6,|L1.1486|
00057e  e043              B        |L1.1544|
                  |L1.1408|
000580  8034              STRH     r4,[r6,#0]            ;860
000582  e7ed              B        |L1.1376|
                  |L1.1412|
000584  f8dfe314          LDR      lr,|L1.2204|
000588  f8de6000          LDR      r6,[lr,#0]            ;890  ; ibat_metr_buff_
00058c  f8dee004          LDR      lr,[lr,#4]            ;891  ; ibat_metr_buff_
000590  eba60e0e          SUB      lr,r6,lr              ;891
000594  f9b76000          LDRSH    r6,[r7,#0]            ;892  ; Kibat1
000598  fb06f60e          MUL      r6,r6,lr              ;892
00059c  f44f67fa          MOV      r7,#0x7d0             ;893
0005a0  fb96f6f7          SDIV     r6,r6,r7              ;893
0005a4  f9ba7000          LDRSH    r7,[r10,#0]           ;895  ; bIBAT_SMKLBR_CNT
0005a8  b11f              CBZ      r7,|L1.1458|
0005aa  f1a70701          SUB      r7,r7,#1              ;895
0005ae  f8aa7000          STRH     r7,[r10,#0]           ;895
                  |L1.1458|
0005b2  4fbb              LDR      r7,|L1.2208|
0005b4  783f              LDRB     r7,[r7,#0]            ;897  ; ibat_metr_cnt
0005b6  2f1e              CMP      r7,#0x1e              ;897
0005b8  d901              BLS      |L1.1470|
0005ba  f04f0600          MOV      r6,#0                 ;897
                  |L1.1470|
0005be  f8ba7000          LDRH     r7,[r10,#0]           ;899  ; bIBAT_SMKLBR_CNT
0005c2  2f00              CMP      r7,#0                 ;899
0005c4  d1d8              BNE      |L1.1400|
0005c6  8026              STRH     r6,[r4,#0]            ;901
0005c8  f8ab6000          STRH     r6,[r11,#0]           ;902
0005cc  e7d4              B        |L1.1400|
                  |L1.1486|
;;;911    	{
;;;912    	temp_SL=0;
0005ce  f04f0700          MOV      r7,#0
;;;913    	for(i=0;i<NUMIST;i++)
0005d2  463e              MOV      r6,r7
0005d4  e009              B        |L1.1514|
                  |L1.1494|
;;;914    		{
;;;915    		temp_SL+=(signed long)bps[i]._Ii;
0005d6  ebc61a06          RSB      r10,r6,r6,LSL #4
0005da  eb020aca          ADD      r10,r2,r10,LSL #3
0005de  f8daa024          LDR      r10,[r10,#0x24]
0005e2  4457              ADD      r7,r7,r10
0005e4  f1060601          ADD      r6,r6,#1              ;913
0005e8  b2f6              UXTB     r6,r6                 ;913
                  |L1.1514|
0005ea  4286              CMP      r6,r0                 ;913
0005ec  dbf3              BLT      |L1.1494|
;;;916    		}
;;;917    	Ib_ips_termokompensat=(signed short)temp_SL/10;
0005ee  b23f              SXTH     r7,r7
0005f0  f04f060a          MOV      r6,#0xa
0005f4  fb97f6f6          SDIV     r6,r7,r6
0005f8  8026              STRH     r6,[r4,#0]
;;;918    	
;;;919    	if(vd_U==0) Ib_ips_termokompensat=0;	// по указанию В.Герасимова от 04.04.23
0005fa  f1b90f00          CMP      r9,#0
0005fe  d100              BNE      |L1.1538|
000600  8021              STRH     r1,[r4,#0]
                  |L1.1538|
;;;920    	out_I=Ib_ips_termokompensat;
000602  8826              LDRH     r6,[r4,#0]  ; Ib_ips_termokompensat
000604  f8ab6000          STRH     r6,[r11,#0]
                  |L1.1544|
;;;921    
;;;922    	
;;;923    	}
;;;924    
;;;925    
;;;926    bat[0]._Ub=load_U;
000608  f8a58002          STRH     r8,[r5,#2]
;;;927    
;;;928    
;;;929    
;;;930    /*
;;;931    #ifdef UKU_TELECORE2015
;;;932    
;;;933    //Внешний датчик температуры №1
;;;934    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;935    else ND_EXT[0]=1;
;;;936    temp_SL=(signed long)adc_buff_[7];
;;;937    temp_SL*=Ktext[0];
;;;938    temp_SL/=20000L;
;;;939    temp_SL-=273L;
;;;940    t_ext[0]=(signed short)temp_SL;
;;;941    
;;;942    
;;;943    //Внешний датчик температуры №2
;;;944    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;945    else ND_EXT[1]=1;
;;;946    temp_SL=(signed long)adc_buff_[6];
;;;947    temp_SL*=Ktext[1];
;;;948    temp_SL/=20000L;
;;;949    temp_SL-=273L;
;;;950    t_ext[1]=(signed short)temp_SL;
;;;951    
;;;952    #endif
;;;953    */
;;;954    /*
;;;955    #ifdef UKU_TELECORE2017
;;;956    
;;;957    //Внешний датчик температуры №1
;;;958    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;959    else ND_EXT[0]=1;
;;;960    temp_SL=(signed long)adc_buff_[7];
;;;961    temp_SL*=Ktext[0];
;;;962    temp_SL/=20000L;
;;;963    temp_SL-=273L;
;;;964    t_ext[0]=(signed short)temp_SL;
;;;965    
;;;966    
;;;967    //Внешний датчик температуры №2
;;;968    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;969    else ND_EXT[1]=1;
;;;970    temp_SL=(signed long)adc_buff_[6];
;;;971    temp_SL*=Ktext[1];
;;;972    temp_SL/=20000L;
;;;973    temp_SL-=273L;
;;;974    t_ext[1]=(signed short)temp_SL;
;;;975    
;;;976    #endif
;;;977    */
;;;978    //напряжение ввода
;;;979    temp_SL=(signed long)adc_buff_ext_[0];
00060c  f8dfa294          LDR      r10,|L1.2212|
000610  f8ba7000          LDRH     r7,[r10,#0]  ; adc_buff_ext_
;;;980    temp_SL*=Kunet_ext[0];
000614  f8dfb290          LDR      r11,|L1.2216|
000618  f9bb6000          LDRSH    r6,[r11,#0]  ; Kunet_ext
00061c  437e              MULS     r6,r7,r6
;;;981    temp_SL/=4000L;
00061e  f44f697a          MOV      r9,#0xfa0
000622  fb96f6f9          SDIV     r6,r6,r9
;;;982    Uvv[0]=(signed short)temp_SL;
000626  4fa1              LDR      r7,|L1.2220|
000628  b2b6              UXTH     r6,r6
00062a  803e              STRH     r6,[r7,#0]
;;;983    if(Uvv[0]<100) Uvv0=Uvv[0];
00062c  f8dfe280          LDR      lr,|L1.2224|
000630  2e64              CMP      r6,#0x64
000632  d202              BCS      |L1.1594|
000634  f8ae6000          STRH     r6,[lr,#0]
000638  e003              B        |L1.1602|
                  |L1.1594|
;;;984    else Uvv0=net_U;
00063a  4e9e              LDR      r6,|L1.2228|
00063c  8836              LDRH     r6,[r6,#0]  ; net_U
00063e  f8ae6000          STRH     r6,[lr,#0]
                  |L1.1602|
;;;985    
;;;986    //напряжение пэс
;;;987    temp_SL=(signed long)adc_buff_ext_[1];
000642  f8baa002          LDRH     r10,[r10,#2]  ; adc_buff_ext_
;;;988    temp_SL*=Kunet_ext[1];
000646  f9bb6002          LDRSH    r6,[r11,#2]  ; Kunet_ext
00064a  fb06f60a          MUL      r6,r6,r10
;;;989    temp_SL/=4000L;
00064e  fb96f6f9          SDIV     r6,r6,r9
;;;990    Uvv[1]=(signed short)temp_SL;
000652  807e              STRH     r6,[r7,#2]
;;;991    
;;;992    
;;;993    //напряжение ввода трехфазное
;;;994    temp_SL=(signed long)eb2_data_short[0];
000654  4e98              LDR      r6,|L1.2232|
000656  f9b67000          LDRSH    r7,[r6,#0]  ; eb2_data_short
;;;995    temp_SL*=Kvv_eb2[0];
00065a  f8df9260          LDR      r9,|L1.2236|
00065e  f9b9a000          LDRSH    r10,[r9,#0]  ; Kvv_eb2
000662  fb0afa07          MUL      r10,r10,r7
;;;996    temp_SL/=6000L;
000666  f2417770          MOV      r7,#0x1770
00066a  fb9afbf7          SDIV     r11,r10,r7
;;;997    Uvv_eb2[0]=(signed short)temp_SL;
00066e  f8dfa250          LDR      r10,|L1.2240|
000672  f8aab000          STRH     r11,[r10,#0]
;;;998    
;;;999    temp_SL=(signed long)eb2_data_short[1];
000676  f9b6e002          LDRSH    lr,[r6,#2]  ; eb2_data_short
;;;1000   temp_SL*=Kvv_eb2[1];
00067a  f9b9b002          LDRSH    r11,[r9,#2]  ; Kvv_eb2
00067e  fb0bfb0e          MUL      r11,r11,lr
;;;1001   temp_SL/=6000L;
000682  fb9bfbf7          SDIV     r11,r11,r7
;;;1002   Uvv_eb2[1]=(signed short)temp_SL;
000686  f8aab002          STRH     r11,[r10,#2]
;;;1003   
;;;1004   temp_SL=(signed long)eb2_data_short[2];
00068a  f9b6b004          LDRSH    r11,[r6,#4]  ; eb2_data_short
;;;1005   temp_SL*=Kvv_eb2[2];
00068e  f9b99004          LDRSH    r9,[r9,#4]  ; Kvv_eb2
000692  fb09f90b          MUL      r9,r9,r11
;;;1006   temp_SL/=6000L;
000696  fb99f9f7          SDIV     r9,r9,r7
;;;1007   Uvv_eb2[2]=(signed short)temp_SL;
00069a  f8aa9004          STRH     r9,[r10,#4]
;;;1008   
;;;1009   //напряжение пэс трехфазное
;;;1010   temp_SL=(signed long)eb2_data_short[3];
00069e  f9b6b006          LDRSH    r11,[r6,#6]  ; eb2_data_short
;;;1011   temp_SL*=Kpes_eb2[0];
0006a2  f8df9220          LDR      r9,|L1.2244|
0006a6  f9b9a000          LDRSH    r10,[r9,#0]  ; Kpes_eb2
0006aa  fb0afa0b          MUL      r10,r10,r11
;;;1012   temp_SL/=6000L;
0006ae  fb9afbf7          SDIV     r11,r10,r7
;;;1013   Upes_eb2[0]=(signed short)temp_SL;
0006b2  f8dfa214          LDR      r10,|L1.2248|
0006b6  f8aab000          STRH     r11,[r10,#0]
;;;1014   
;;;1015   temp_SL=(signed long)eb2_data_short[4];
0006ba  f9b6e008          LDRSH    lr,[r6,#8]  ; eb2_data_short
;;;1016   temp_SL*=Kpes_eb2[1];
0006be  f9b9b002          LDRSH    r11,[r9,#2]  ; Kpes_eb2
0006c2  fb0bfb0e          MUL      r11,r11,lr
;;;1017   temp_SL/=6000L;
0006c6  fb9bfbf7          SDIV     r11,r11,r7
;;;1018   Upes_eb2[1]=(signed short)temp_SL;
0006ca  f8aab002          STRH     r11,[r10,#2]
;;;1019   
;;;1020   temp_SL=(signed long)eb2_data_short[5];
0006ce  f9b6b00a          LDRSH    r11,[r6,#0xa]  ; eb2_data_short
;;;1021   temp_SL*=Kpes_eb2[2];
0006d2  f9b96004          LDRSH    r6,[r9,#4]  ; Kpes_eb2
0006d6  fb06f60b          MUL      r6,r6,r11
;;;1022   temp_SL/=6000L;
0006da  fb96f6f7          SDIV     r6,r6,r7
;;;1023   Upes_eb2[2]=(signed short)temp_SL;
0006de  f8aa6004          STRH     r6,[r10,#4]
;;;1024   
;;;1025   //Вычисление температуры шкафа
;;;1026   
;;;1027   ibt._T[0]=t_ext[1]+273;
0006e2  f8bc6002          LDRH     r6,[r12,#2]  ; t_ext
0006e6  f8dfb1e4          LDR      r11,|L1.2252|
0006ea  f2061611          ADD      r6,r6,#0x111
0006ee  fa0ff986          SXTH     r9,r6
0006f2  f8ab9000          STRH     r9,[r11,#0]
;;;1028   ibt._T[1]=t_ext[2]+273;
0006f6  f8bc6004          LDRH     r6,[r12,#4]  ; t_ext
0006fa  f2061611          ADD      r6,r6,#0x111
0006fe  fa0ffa86          SXTH     r10,r6
000702  f8aba002          STRH     r10,[r11,#2]
;;;1029   
;;;1030   ibt._nd[0]=ND_EXT[1];
000706  4e5b              LDR      r6,|L1.2164|
000708  7877              LDRB     r7,[r6,#1]  ; ND_EXT
00070a  f88b7008          STRB     r7,[r11,#8]
;;;1031   ibt._nd[1]=ND_EXT[2];
00070e  78b6              LDRB     r6,[r6,#2]  ; ND_EXT
000710  f88b6009          STRB     r6,[r11,#9]
;;;1032   
;;;1033   #ifndef UKU_TELECORE2015
;;;1034   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1035   	{
;;;1036   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
000714  f8dfc1b8          LDR      r12,|L1.2256|
000718  b907              CBNZ     r7,|L1.1820|
00071a  b116              CBZ      r6,|L1.1826|
                  |L1.1820|
;;;1037   	}
;;;1038   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00071c  2f01              CMP      r7,#1
00071e  d00b              BEQ      |L1.1848|
000720  e00b              B        |L1.1850|
                  |L1.1826|
000722  eb09060a          ADD      r6,r9,r10             ;1036
000726  eb0676d6          ADD      r6,r6,r6,LSR #31      ;1036
00072a  f46f7788          MVN      r7,#0x110             ;1036
00072e  eb070666          ADD      r6,r7,r6,ASR #1       ;1036
000732  f8ac6000          STRH     r6,[r12,#0]           ;1036
000736  e020              B        |L1.1914|
                  |L1.1848|
000738  b10e              CBZ      r6,|L1.1854|
                  |L1.1850|
;;;1039   	{
;;;1040   	t_box=ibt._T[1]-273;
;;;1041   	}
;;;1042   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
00073a  b12f              CBZ      r7,|L1.1864|
00073c  e006              B        |L1.1868|
                  |L1.1854|
00073e  f2aa1a11          SUB      r10,r10,#0x111        ;1040
000742  f8aca000          STRH     r10,[r12,#0]          ;1040
000746  e018              B        |L1.1914|
                  |L1.1864|
000748  2e01              CMP      r6,#1
00074a  d002              BEQ      |L1.1874|
                  |L1.1868|
;;;1043   	{
;;;1044   	t_box=ibt._T[0]-273;
;;;1045   	}
;;;1046   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
00074c  2f01              CMP      r7,#1
00074e  d005              BEQ      |L1.1884|
000750  e013              B        |L1.1914|
                  |L1.1874|
000752  f2a91911          SUB      r9,r9,#0x111          ;1044
000756  f8ac9000          STRH     r9,[r12,#0]           ;1044
00075a  e00e              B        |L1.1914|
                  |L1.1884|
00075c  2e01              CMP      r6,#1
00075e  d10c              BNE      |L1.1914|
;;;1047   	{
;;;1048   	if(t_ext_can_nd<5)t_box= t_ext_can;
000760  4e5c              LDR      r6,|L1.2260|
000762  7836              LDRB     r6,[r6,#0]  ; t_ext_can_nd
000764  2e05              CMP      r6,#5
000766  d204              BCS      |L1.1906|
000768  4e5b              LDR      r6,|L1.2264|
00076a  8836              LDRH     r6,[r6,#0]  ; t_ext_can
00076c  f8ac6000          STRH     r6,[r12,#0]
000770  e003              B        |L1.1914|
                  |L1.1906|
;;;1049   	else t_box=20;
000772  f04f0614          MOV      r6,#0x14
000776  f8ac6000          STRH     r6,[r12,#0]
                  |L1.1914|
;;;1050   	}
;;;1051   #endif
;;;1052   
;;;1053   
;;;1054   #ifndef TELECORE
;;;1055   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
00077a  4e58              LDR      r6,|L1.2268|
00077c  7837              LDRB     r7,[r6,#0]  ; BAT_IS_ON
00077e  2f55              CMP      r7,#0x55
000780  d104              BNE      |L1.1932|
000782  f1b80fc8          CMP      r8,#0xc8
000786  dd01              BLE      |L1.1932|
000788  892f              LDRH     r7,[r5,#8]  ; bat
00078a  875f              STRH     r7,[r3,#0x3a]
                  |L1.1932|
;;;1056   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
00078c  7876              LDRB     r6,[r6,#1]  ; BAT_IS_ON
00078e  2e55              CMP      r6,#0x55
000790  d10a              BNE      |L1.1960|
000792  f9b5604e          LDRSH    r6,[r5,#0x4e]  ; bat
000796  2ec8              CMP      r6,#0xc8
000798  dd06              BLE      |L1.1960|
00079a  f9b56054          LDRSH    r6,[r5,#0x54]  ; bat
00079e  f9b57008          LDRSH    r7,[r5,#8]  ; bat
0007a2  42be              CMP      r6,r7
0007a4  dd00              BLE      |L1.1960|
0007a6  875e              STRH     r6,[r3,#0x3a]
                  |L1.1960|
;;;1057   #endif
;;;1058   
;;;1059   #ifdef TELECORE
;;;1060   Ibmax=0;
;;;1061   /*
;;;1062   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1063   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1064   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1065   */
;;;1066   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1067   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1068   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1069   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1070   #endif
;;;1071   //Ibmax=bat[0]._Ib;
;;;1072   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1073   
;;;1074   #ifdef UKU_TELECORE2017
;;;1075   Ibmax=0;
;;;1076   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1077   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1078   #endif
;;;1079   
;;;1080   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1081   Ibmax=Ib_ips_termokompensat;
0007a8  8824              LDRH     r4,[r4,#0]  ; Ib_ips_termokompensat
0007aa  875c              STRH     r4,[r3,#0x3a]
;;;1082   #endif
;;;1083   for(i=0;i<NUMIST;i++)
0007ac  f04f0400          MOV      r4,#0
0007b0  e045              B        |L1.2110|
                  |L1.1970|
;;;1084   	{
;;;1085   	if(bps[i]._cnt<25)
0007b2  ebc41304          RSB      r3,r4,r4,LSL #4
0007b6  eb0203c3          ADD      r3,r2,r3,LSL #3
0007ba  78de              LDRB     r6,[r3,#3]
0007bc  2e19              CMP      r6,#0x19
0007be  d22e              BCS      |L1.2078|
;;;1086        	{
;;;1087        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0007c0  799e              LDRB     r6,[r3,#6]
0007c2  79df              LDRB     r7,[r3,#7]
0007c4  eb062607          ADD      r6,r6,r7,LSL #8
0007c8  625e              STR      r6,[r3,#0x24]
;;;1088        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0007ca  7a1e              LDRB     r6,[r3,#8]
0007cc  7a5f              LDRB     r7,[r3,#9]
0007ce  eb062607          ADD      r6,r6,r7,LSL #8
0007d2  621e              STR      r6,[r3,#0x20]
;;;1089        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0007d4  7a9e              LDRB     r6,[r3,#0xa]
0007d6  7adf              LDRB     r7,[r3,#0xb]
0007d8  eb062607          ADD      r6,r6,r7,LSL #8
0007dc  61de              STR      r6,[r3,#0x1c]
;;;1090        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0007de  7b1e              LDRB     r6,[r3,#0xc]
0007e0  629e              STR      r6,[r3,#0x28]
;;;1091        	bps[i]._adr_ee=bps[i]._buff[7];
0007e2  7b5e              LDRB     r6,[r3,#0xd]
0007e4  f8836058          STRB     r6,[r3,#0x58]
;;;1092        	bps[i]._flags_tm=bps[i]._buff[8];
0007e8  7b9e              LDRB     r6,[r3,#0xe]
0007ea  f8836046          STRB     r6,[r3,#0x46]
;;;1093   	    //bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256); 
;;;1094   		bps[i]._Uisum=bps[i]._buff[10]+(bps[i]._buff[11]*256); 
0007ee  7c1e              LDRB     r6,[r3,#0x10]
0007f0  7c5f              LDRB     r7,[r3,#0x11]
0007f2  eb062607          ADD      r6,r6,r7,LSL #8
0007f6  631e              STR      r6,[r3,#0x30]
;;;1095   		bps[i].debug_info_to_uku0=bps[i]._buff[12]+(bps[i]._buff[13]*256); 
0007f8  7c9e              LDRB     r6,[r3,#0x12]
0007fa  7cdf              LDRB     r7,[r3,#0x13]
0007fc  eb062607          ADD      r6,r6,r7,LSL #8
000800  f8a36060          STRH     r6,[r3,#0x60]
;;;1096   		bps[i].debug_info_to_uku1=bps[i]._buff[14]+(bps[i]._buff[15]*256); 
000804  7d1e              LDRB     r6,[r3,#0x14]
000806  7d5f              LDRB     r7,[r3,#0x15]
000808  eb062607          ADD      r6,r6,r7,LSL #8
00080c  f8a36062          STRH     r6,[r3,#0x62]
;;;1097   		bps[i].debug_info_to_uku2=bps[i]._buff[16]+(bps[i]._buff[17]*256);   
000810  7d9e              LDRB     r6,[r3,#0x16]
000812  7ddf              LDRB     r7,[r3,#0x17]
000814  eb062607          ADD      r6,r6,r7,LSL #8
000818  f8a36064          STRH     r6,[r3,#0x64]
00081c  e00c              B        |L1.2104|
                  |L1.2078|
;;;1098        	} 
;;;1099   	else 
;;;1100        	{
;;;1101        	bps[i]._Uii=0; 
00081e  61d9              STR      r1,[r3,#0x1c]
;;;1102        	bps[i]._Ii=0;
000820  6259              STR      r1,[r3,#0x24]
;;;1103        	bps[i]._Uin=0;
000822  6219              STR      r1,[r3,#0x20]
;;;1104        	bps[i]._Ti=0;
000824  6299              STR      r1,[r3,#0x28]
;;;1105        	bps[i]._flags_tm=0; 
000826  f8831046          STRB     r1,[r3,#0x46]
;;;1106   	     //bps[i]._rotor=0;
;;;1107   		bps[i]._Uisum=0; 
00082a  6319              STR      r1,[r3,#0x30]
;;;1108   		bps[i].debug_info_to_uku0=0; 
00082c  f8a31060          STRH     r1,[r3,#0x60]
;;;1109   		bps[i].debug_info_to_uku1=0; 
000830  f8a31062          STRH     r1,[r3,#0x62]
;;;1110   		bps[i].debug_info_to_uku2=0;   
000834  f8a31064          STRH     r1,[r3,#0x64]
                  |L1.2104|
000838  f1040401          ADD      r4,r4,#1              ;1083
00083c  b2e4              UXTB     r4,r4                 ;1083
                  |L1.2110|
00083e  4284              CMP      r4,r0                 ;1083
000840  dbb7              BLT      |L1.1970|
;;;1111        	}
;;;1112        
;;;1113        }
;;;1114   
;;;1115   load_I=0;
000842  4e27              LDR      r6,|L1.2272|
;;;1116   #ifdef TELECORE
;;;1117   
;;;1118   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1119   	{
;;;1120   	load_I-=lakb[i]._ch_curr/10;
;;;1121   	}*/
;;;1122   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1123   #elif UKU_TELECORE2017
;;;1124   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1125   #else
;;;1126   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
000844  f9b54008          LDRSH    r4,[r5,#8]  ; bat
000848  f04f030a          MOV      r3,#0xa
00084c  fb94f4f3          SDIV     r4,r4,r3
000850  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
000854  fb95f3f3          SDIV     r3,r5,r3
000858  4423              ADD      r3,r3,r4
00085a  e043              B        |L1.2276|
                  |L1.2140|
                          DCD      in_U
                  |L1.2144|
                          DCD      Kubps
                  |L1.2148|
                          DCD      bps_U
                  |L1.2152|
                          DCD      NUMIST
                  |L1.2156|
                          DCD      bps
                  |L1.2160|
                          DCD      bps_I
                  |L1.2164|
                          DCD      ND_EXT
                  |L1.2168|
                          DCD      Ktext
                  |L1.2172|
                          DCD      t_ext
                  |L1.2176|
                          DCD      ||area_number.26||
                  |L1.2180|
                          DCD      sys_T
                  |L1.2184|
                          DCD      bIBAT_SMKLBR
                  |L1.2188|
                          DCD      bIBAT_SMKLBR_CNT
                  |L1.2192|
                          DCD      out_I
                  |L1.2196|
                          DCD      Ib_ips_termokompensat
                  |L1.2200|
                          DCD      I_LOAD_MODE
                  |L1.2204|
                          DCD      ibat_metr_buff_
                  |L1.2208|
                          DCD      ibat_metr_cnt
                  |L1.2212|
                          DCD      adc_buff_ext_
                  |L1.2216|
                          DCD      Kunet_ext
                  |L1.2220|
                          DCD      Uvv
                  |L1.2224|
                          DCD      Uvv0
                  |L1.2228|
                          DCD      net_U
                  |L1.2232|
                          DCD      eb2_data_short
                  |L1.2236|
                          DCD      Kvv_eb2
                  |L1.2240|
                          DCD      Uvv_eb2
                  |L1.2244|
                          DCD      Kpes_eb2
                  |L1.2248|
                          DCD      Upes_eb2
                  |L1.2252|
                          DCD      ibt
                  |L1.2256|
                          DCD      t_box
                  |L1.2260|
                          DCD      t_ext_can_nd
                  |L1.2264|
                          DCD      t_ext_can
                  |L1.2268|
                          DCD      BAT_IS_ON
                  |L1.2272|
                          DCD      load_I
                  |L1.2276|
0008e4  f1c30300          RSB      r3,r3,#0
0008e8  b21f              SXTH     r7,r3
0008ea  8037              STRH     r7,[r6,#0]
;;;1127   #endif
;;;1128   Isumm=0;
0008ec  4dff              LDR      r5,|L1.3308|
0008ee  8029              STRH     r1,[r5,#0]
;;;1129   
;;;1130   for(i=0;i<NUMIST;i++)
0008f0  f04f0300          MOV      r3,#0
0008f4  e010              B        |L1.2328|
                  |L1.2294|
;;;1131        {
;;;1132        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
0008f6  ebc31403          RSB      r4,r3,r3,LSL #4
0008fa  eb0204c4          ADD      r4,r2,r4,LSL #3
0008fe  f894c003          LDRB     r12,[r4,#3]
000902  f1bc0f05          CMP      r12,#5
000906  d204              BCS      |L1.2322|
000908  6a64              LDR      r4,[r4,#0x24]
00090a  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
00090e  4464              ADD      r4,r4,r12
000910  802c              STRH     r4,[r5,#0]
                  |L1.2322|
000912  f1030301          ADD      r3,r3,#1              ;1130
000916  b2db              UXTB     r3,r3                 ;1130
                  |L1.2328|
000918  4283              CMP      r3,r0                 ;1130
00091a  dbec              BLT      |L1.2294|
;;;1133        }  
;;;1134        
;;;1135   load_I=load_I+Isumm;
00091c  882b              LDRH     r3,[r5,#0]  ; Isumm
00091e  443b              ADD      r3,r3,r7
000920  b21b              SXTH     r3,r3
000922  8033              STRH     r3,[r6,#0]
;;;1136   if(load_I<0)load_I=0;
000924  2b00              CMP      r3,#0
000926  da00              BGE      |L1.2346|
000928  8031              STRH     r1,[r6,#0]
                  |L1.2346|
;;;1137   
;;;1138   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1139   load_I=0;
00092a  8031              STRH     r1,[r6,#0]
;;;1140   
;;;1141   Isumm=0;
00092c  8029              STRH     r1,[r5,#0]
;;;1142   
;;;1143   for(i=0;i<NUMIST;i++)
00092e  f04f0300          MOV      r3,#0
000932  e00d              B        |L1.2384|
                  |L1.2356|
;;;1144        {
;;;1145        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
000934  ebc31403          RSB      r4,r3,r3,LSL #4
000938  eb0204c4          ADD      r4,r2,r4,LSL #3
00093c  78e7              LDRB     r7,[r4,#3]
00093e  2f05              CMP      r7,#5
000940  d203              BCS      |L1.2378|
000942  6a64              LDR      r4,[r4,#0x24]
000944  882f              LDRH     r7,[r5,#0]  ; Isumm
000946  443c              ADD      r4,r4,r7
000948  802c              STRH     r4,[r5,#0]
                  |L1.2378|
00094a  f1030301          ADD      r3,r3,#1              ;1143
00094e  b2db              UXTB     r3,r3                 ;1143
                  |L1.2384|
000950  4283              CMP      r3,r0                 ;1143
000952  dbef              BLT      |L1.2356|
;;;1146        }  
;;;1147        
;;;1148   load_I=load_I+Isumm;
000954  882b              LDRH     r3,[r5,#0]  ; Isumm
000956  eb010003          ADD      r0,r1,r3
00095a  b200              SXTH     r0,r0
00095c  8030              STRH     r0,[r6,#0]
;;;1149   if(load_I<0)load_I=0;
00095e  2800              CMP      r0,#0
000960  da00              BGE      |L1.2404|
000962  8031              STRH     r1,[r6,#0]
                  |L1.2404|
;;;1150   
;;;1151   #endif
;;;1152   
;;;1153   
;;;1154   
;;;1155   #ifdef UKU_GLONASS
;;;1156   inv[0]._Uio=6;
;;;1157   if (NUMINV)
;;;1158   	{
;;;1159   	for(i=0;i<NUMINV;i++)
;;;1160   		{
;;;1161   		if(bps[i+first_inv_slot]._cnt<25)
;;;1162        		{
;;;1163        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1164        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1165        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1166        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1167        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1168   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1169   			inv[i]._cnt=0;    
;;;1170        		} 
;;;1171   		else 
;;;1172        		{
;;;1173        		inv[i]._Uio=0; 
;;;1174        		inv[i]._Ii=0;
;;;1175        		inv[i]._Uin=0;
;;;1176        		inv[i]._Ti=0;
;;;1177        		inv[i]._flags_tm=0; 
;;;1178   //	     	inv[i]._rotor0;
;;;1179   			inv[i]._cnt=25;    
;;;1180        		}
;;;1181        	}
;;;1182      	}
;;;1183   #endif
;;;1184   
;;;1185   #ifndef UKU_GLONASS
;;;1186   if (NUMINV)
000964  48e2              LDR      r0,|L1.3312|
000966  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
00096a  2d00              CMP      r5,#0
00096c  d064              BEQ      |L1.2616|
;;;1187   	{
;;;1188   	for(i=0;i<NUMINV;i++)
00096e  f04f0400          MOV      r4,#0
;;;1189   		{
;;;1190   		if(bps[i+20]._cnt<25)
;;;1191        		{
;;;1192        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
000972  4ee0              LDR      r6,|L1.3316|
000974  e05e              B        |L1.2612|
                  |L1.2422|
000976  f1040014          ADD      r0,r4,#0x14           ;1190
00097a  ebc01000          RSB      r0,r0,r0,LSL #4       ;1190
00097e  eb0200c0          ADD      r0,r2,r0,LSL #3       ;1190
000982  78c3              LDRB     r3,[r0,#3]            ;1190
000984  2b19              CMP      r3,#0x19              ;1190
000986  d239              BCS      |L1.2556|
000988  7983              LDRB     r3,[r0,#6]
00098a  79c7              LDRB     r7,[r0,#7]
00098c  eb032707          ADD      r7,r3,r7,LSL #8
000990  eb040344          ADD      r3,r4,r4,LSL #1
000994  eb061343          ADD      r3,r6,r3,LSL #5
000998  61df              STR      r7,[r3,#0x1c]
;;;1193        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
00099a  7a07              LDRB     r7,[r0,#8]
00099c  f890c009          LDRB     r12,[r0,#9]
0009a0  eb07270c          ADD      r7,r7,r12,LSL #8
0009a4  62df              STR      r7,[r3,#0x2c]
;;;1194        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0009a6  7a87              LDRB     r7,[r0,#0xa]
0009a8  f890c00b          LDRB     r12,[r0,#0xb]
0009ac  eb07270c          ADD      r7,r7,r12,LSL #8
0009b0  619f              STR      r7,[r3,#0x18]
;;;1195        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0009b2  7b07              LDRB     r7,[r0,#0xc]
0009b4  621f              STR      r7,[r3,#0x20]
;;;1196        		inv[i]._flags_tm=bps[i+20]._buff[7];
0009b6  7b47              LDRB     r7,[r0,#0xd]
0009b8  f8837046          STRB     r7,[r3,#0x46]
;;;1197        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
0009bc  7b87              LDRB     r7,[r0,#0xe]
0009be  f890c00f          LDRB     r12,[r0,#0xf]
0009c2  eb07270c          ADD      r7,r7,r12,LSL #8
0009c6  629f              STR      r7,[r3,#0x28]
;;;1198        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
0009c8  7c07              LDRB     r7,[r0,#0x10]
0009ca  f890c011          LDRB     r12,[r0,#0x11]
0009ce  eb07270c          ADD      r7,r7,r12,LSL #8
0009d2  625f              STR      r7,[r3,#0x24]
;;;1199   			inv[i]._cnt=0;
0009d4  7099              STRB     r1,[r3,#2]
;;;1200   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
0009d6  7c87              LDRB     r7,[r0,#0x12]
0009d8  f8837059          STRB     r7,[r3,#0x59]
;;;1201   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
0009dc  7cc7              LDRB     r7,[r0,#0x13]
0009de  f883705a          STRB     r7,[r3,#0x5a]
;;;1202   			inv[i]._Pnom=bps[i+20]._buff[14]; 
0009e2  7d07              LDRB     r7,[r0,#0x14]
0009e4  f8837058          STRB     r7,[r3,#0x58]
;;;1203   			inv[i]._net_contr_en=bps[i+20]._buff[15];
0009e8  7d47              LDRB     r7,[r0,#0x15]
0009ea  f883705b          STRB     r7,[r3,#0x5b]
;;;1204   			inv[i]._pwm_en=bps[i+20]._buff[16];  
0009ee  7d87              LDRB     r7,[r0,#0x16]
0009f0  f883705c          STRB     r7,[r3,#0x5c]
;;;1205   			inv[i]._phase_mode=bps[i+20]._buff[17];  
0009f4  7dc0              LDRB     r0,[r0,#0x17]
0009f6  f883005d          STRB     r0,[r3,#0x5d]
0009fa  e018              B        |L1.2606|
                  |L1.2556|
;;;1206        		} 
;;;1207   		else 
;;;1208        		{
;;;1209         		inv[i]._Ii=0;
0009fc  eb040044          ADD      r0,r4,r4,LSL #1
000a00  eb061040          ADD      r0,r6,r0,LSL #5
000a04  61c1              STR      r1,[r0,#0x1c]
;;;1210   			inv[i]._Pio=0;
000a06  62c1              STR      r1,[r0,#0x2c]
;;;1211   			inv[i]._Uio=0;
000a08  6181              STR      r1,[r0,#0x18]
;;;1212        		inv[i]._Ti=0;
000a0a  6201              STR      r1,[r0,#0x20]
;;;1213        		inv[i]._flags_tm=0; 
000a0c  f8801046          STRB     r1,[r0,#0x46]
;;;1214        		inv[i]._Uil=0;
000a10  6241              STR      r1,[r0,#0x24]
;;;1215        		inv[i]._Uin=0;
000a12  6281              STR      r1,[r0,#0x28]
;;;1216   			inv[i]._cnt=25; 
000a14  f04f0319          MOV      r3,#0x19
000a18  7083              STRB     r3,[r0,#2]
;;;1217   			inv[i]._Uoutmin=0; 
000a1a  f8801059          STRB     r1,[r0,#0x59]
;;;1218   			inv[i]._Uoutmax=0; 
000a1e  f880105a          STRB     r1,[r0,#0x5a]
;;;1219   			inv[i]._Pnom=0; 
000a22  f8801058          STRB     r1,[r0,#0x58]
;;;1220   			inv[i]._net_contr_en=0;
000a26  f880105b          STRB     r1,[r0,#0x5b]
;;;1221   			inv[i]._pwm_en=0;   
000a2a  f880105c          STRB     r1,[r0,#0x5c]
                  |L1.2606|
000a2e  f1040401          ADD      r4,r4,#1              ;1188
000a32  b2e4              UXTB     r4,r4                 ;1188
                  |L1.2612|
000a34  42ac              CMP      r4,r5                 ;1188
000a36  db9e              BLT      |L1.2422|
                  |L1.2616|
;;;1222   			   
;;;1223        		}
;;;1224        	}
;;;1225      	}
;;;1226   #endif
;;;1227   
;;;1228   #ifdef GLADKOV
;;;1229   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1230   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1231   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1232   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1233   inv[0]._flags_tm=bps[4]._buff[7];
;;;1234   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1235   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1236   inv[0]._cnt=0;    
;;;1237   
;;;1238   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1239   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1240   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1241   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1242   inv[1]._flags_tm=bps[21]._buff[7];
;;;1243   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1244   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1245   inv[1]._cnt=0;    
;;;1246   #endif
;;;1247   
;;;1248   /*
;;;1249   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1250   	{
;;;1251   	lakb[0]._battCommState=0;
;;;1252   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1253   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1254   	
;;;1255   	if(lakb[0]._battCommState==0)
;;;1256   		{	
;;;1257   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1258   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1259   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1260   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1261   		}
;;;1262   	}
;;;1263   */
;;;1264   
;;;1265   #ifdef UKU_TELECORE2015
;;;1266   
;;;1267   	if(BAT_TYPE==2)
;;;1268   		{
;;;1269   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1270   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1271   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1272   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1273   		
;;;1274   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1275   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1276   	
;;;1277   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1278   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1279   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1280   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1281   	
;;;1282   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1283   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1284   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1285   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1286   	
;;;1287   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1288   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1289   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1290   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1291   	
;;;1292   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1293   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1294   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1295   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1296   	
;;;1297   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1298   	
;;;1299   	
;;;1300   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1301   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1302   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1303   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1304   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1305   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1306   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1307   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1308   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1309   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1310   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1311   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1312   	
;;;1313   		if(lakb[i]._rat_cap==0)
;;;1314   			{
;;;1315   			if(lakb[i]._isOnCnt)
;;;1316   				{
;;;1317   				lakb[i]._isOnCnt--;
;;;1318   				if(lakb[i]._isOnCnt==0)
;;;1319   					{
;;;1320   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1321   					}
;;;1322   				}
;;;1323   			}
;;;1324   		else 
;;;1325   			{
;;;1326   			if(lakb[i]._isOnCnt<50)
;;;1327   				{
;;;1328   				lakb[i]._isOnCnt++;
;;;1329   				if(lakb[i]._isOnCnt==50)
;;;1330   					{
;;;1331   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1332   					}
;;;1333   				}
;;;1334   			}
;;;1335   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;1336   		}
;;;1337   	else if(BAT_TYPE==3)
;;;1338   		{
;;;1339   		//short numOfPacks;
;;;1340   		//short numOfCells, numOfTemperCells, baseOfData;
;;;1341   		
;;;1342   		#ifndef UKU_TELECORE2016
;;;1343   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;1344   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;1345   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;1346   		if(numOfPacks)numOfPacks-=1;
;;;1347   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;1348   		plazma_numOfCells=numOfCells;
;;;1349   		plazma_numOfTemperCells=numOfTemperCells;
;;;1350   		plazma_numOfPacks=numOfPacks;
;;;1351   
;;;1352   
;;;1353   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;1354   
;;;1355   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;1356   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;1357   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;1358   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;1359   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;1360   							);	  
;;;1361   
;;;1362   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;1363   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;1364   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;1365   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;1366   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;1367   							)/10;
;;;1368   
;;;1369   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;1370   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;1371   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;1372   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;1373   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;1374   							)-2730;
;;;1375   
;;;1376   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;1377   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;1378   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;1379   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;1380   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;1381   							)/10;
;;;1382   
;;;1383   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;1384   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;1385   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;1386   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;1387   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;1388   							)/10;
;;;1389   		#endif
;;;1390   		
;;;1391   		#ifdef UKU_TELECORE2016
;;;1392   		{
;;;1393   		char i;
;;;1394   		
;;;1395   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;1396   			{
;;;1397   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;1398   			}
;;;1399   		}
;;;1400   		#endif
;;;1401   		
;;;1402   										  
;;;1403   		}
;;;1404   	
;;;1405   if(sacredSunSilentCnt<3) 
;;;1406   	{
;;;1407       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;1408       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;1409      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;1410   	}
;;;1411   else 
;;;1412   	{
;;;1413       	//bat[0]._Ub=0;
;;;1414       	//bat[0]._Tb=0;
;;;1415      	//bat[0]._Ib=0;
;;;1416   	}
;;;1417   
;;;1418   if(BAT_TYPE==1)
;;;1419   	{
;;;1420   	char i;
;;;1421   	for(i=0;i<1;i++)
;;;1422   		{
;;;1423   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1424   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1425   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1426   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;1427   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;1428   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1429   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;1430   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1431   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;1432   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;1433   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1434   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;1435   		lakb[i]._flags1= lakb_damp[i][34];
;;;1436   		lakb[i]._flags2= lakb_damp[i][35];
;;;1437   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;1438   
;;;1439   /*		if(lakb[i]._rat_cap==0)
;;;1440   			{
;;;1441   			if(lakb[i]._isOnCnt)
;;;1442   				{
;;;1443   				lakb[i]._isOnCnt--;
;;;1444   				if(lakb[i]._isOnCnt==0)
;;;1445   					{
;;;1446   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1447   					}
;;;1448   				}
;;;1449   			}
;;;1450   		else 
;;;1451   			{
;;;1452   			if(lakb[i]._isOnCnt<50)
;;;1453   				{
;;;1454   				lakb[i]._isOnCnt++;
;;;1455   				if(lakb[i]._isOnCnt==50)
;;;1456   					{
;;;1457   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1458   					}
;;;1459   				}
;;;1460   			} */
;;;1461   		gran(&lakb[i]._isOnCnt,0,50);
;;;1462   	 	}
;;;1463   
;;;1464   	if(lakb_damp[0][41]==100)
;;;1465   		{
;;;1466   		li_bat._485Error=1;
;;;1467   		}
;;;1468   	if(lakb_damp[0][41]==0)
;;;1469   		{
;;;1470   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;1471   		li_bat._485Error=0;
;;;1472   		}
;;;1473   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;1474   
;;;1475   
;;;1476   	}
;;;1477   
;;;1478   
;;;1479   #endif
;;;1480   
;;;1481   		#ifdef UKU_TELECORE2017
;;;1482   		{
;;;1483   		char i;
;;;1484   		
;;;1485   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;1486   			{
;;;1487   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;1488   			}
;;;1489   		}
;;;1490   		#endif
;;;1491   #ifdef UKU_TELECORE2015
;;;1492   //вычисление параметров работы батареи
;;;1493   //TODO дописать для всех батарей все параметры и при отцепке батарей
;;;1494   li_bat._batStat=bsOK;
;;;1495   if(BAT_TYPE==1) //COSLIGHT
;;;1496   	{
;;;1497   	if(li_bat._batStat==bsOK)
;;;1498   		{
;;;1499   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;1500   
;;;1501   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;1502   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;1503   	
;;;1504   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;1505   		li_bat._soc=lakb[0]._s_o_c;
;;;1506   		li_bat._soh=lakb[0]._s_o_h;
;;;1507   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;1508   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;1509   		li_bat._rbt=lakb[0]._r_b_t;
;;;1510   		}
;;;1511   	else 
;;;1512   		{
;;;1513   		li_bat._Ub=bat[0]._Ub;
;;;1514   		li_bat._Ib=bat[0]._Ib/10;
;;;1515   		li_bat._Tb=bat[0]._Tb;
;;;1516   		}
;;;1517   
;;;1518   	if((li_bat._485Error)||(li_bat._canError))
;;;1519   		{
;;;1520   		li_bat._batStat=bsOFF;
;;;1521   		}
;;;1522   	else li_bat._batStat=bsOK;
;;;1523   	}
;;;1524   else if(BAT_TYPE==2) //SACRED SUN
;;;1525   	{
;;;1526   	}
;;;1527   else if(BAT_TYPE==3) //ZTT
;;;1528   	{
;;;1529   	if(li_bat._batStat==bsOK)
;;;1530   		{
;;;1531   
;;;1532   		}
;;;1533   	}
;;;1534   #endif
;;;1535   
;;;1536   
;;;1537   /*
;;;1538   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;1539   	{
;;;1540   
;;;1541   
;;;1542   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;1543   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;1544   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;1545   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;1546   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;1547   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;1548   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;1549   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;1550   
;;;1551   	tempSS=0;
;;;1552   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;1553   
;;;1554   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;1555   
;;;1556   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;1557   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;1558   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;1559   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;1560   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;1561   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;1562   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;1563   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;1564   
;;;1565   	tempSS=0;
;;;1566   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;1567   
;;;1568   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;1569   
;;;1570   
;;;1571   	}*/
;;;1572   
;;;1573   
;;;1574   
;;;1575   }
000a38  e8bd9ff0          POP      {r4-r12,pc}
;;;1576   
                          ENDP

                  adc_init PROC
;;;1579   //-----------------------------------------------
;;;1580   void adc_init(void)
000a3c  48ae              LDR      r0,|L1.3320|
;;;1581   {
;;;1582   
;;;1583   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
000a3e  6841              LDR      r1,[r0,#4]
000a40  f4212140          BIC      r1,r1,#0xc0000
000a44  f4412180          ORR      r1,r1,#0x40000
000a48  6041              STR      r1,[r0,#4]
;;;1584   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
000a4a  6841              LDR      r1,[r0,#4]
000a4c  f4213140          BIC      r1,r1,#0x30000
000a50  f4413180          ORR      r1,r1,#0x10000
000a54  6041              STR      r1,[r0,#4]
;;;1585   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
000a56  6841              LDR      r1,[r0,#4]
000a58  f4214140          BIC      r1,r1,#0xc000
000a5c  f4414180          ORR      r1,r1,#0x4000
000a60  6041              STR      r1,[r0,#4]
;;;1586   
;;;1587   
;;;1588   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000a62  6c41              LDR      r1,[r0,#0x44]
000a64  f4212140          BIC      r1,r1,#0xc0000
000a68  f4412100          ORR      r1,r1,#0x80000
000a6c  6441              STR      r1,[r0,#0x44]
;;;1589   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000a6e  6c41              LDR      r1,[r0,#0x44]
000a70  f4213140          BIC      r1,r1,#0x30000
000a74  f4413100          ORR      r1,r1,#0x20000
000a78  6441              STR      r1,[r0,#0x44]
;;;1590   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
000a7a  6c41              LDR      r1,[r0,#0x44]
000a7c  f4214140          BIC      r1,r1,#0xc000
000a80  f4414100          ORR      r1,r1,#0x8000
000a84  6441              STR      r1,[r0,#0x44]
;;;1591   
;;;1592   SET_REG(LPC_ADC->ADCR,0,24,3);
000a86  489d              LDR      r0,|L1.3324|
000a88  6801              LDR      r1,[r0,#0]
000a8a  f02161e0          BIC      r1,r1,#0x7000000
000a8e  6001              STR      r1,[r0,#0]
;;;1593   
;;;1594   SET_REG(LPC_ADC->ADCR,1,21,1);
000a90  6801              LDR      r1,[r0,#0]
000a92  f4411100          ORR      r1,r1,#0x200000
000a96  6001              STR      r1,[r0,#0]
;;;1595   SET_REG(LPC_ADC->ADCR,0,16,1);
000a98  6801              LDR      r1,[r0,#0]
000a9a  f4213180          BIC      r1,r1,#0x10000
000a9e  6001              STR      r1,[r0,#0]
;;;1596   SET_REG(LPC_ADC->ADCR,1,8,8);
000aa0  6801              LDR      r1,[r0,#0]
000aa2  f421417f          BIC      r1,r1,#0xff00
000aa6  f4417180          ORR      r1,r1,#0x100
000aaa  6001              STR      r1,[r0,#0]
;;;1597   
;;;1598   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;1599   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;1600   	
;;;1601   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;1602        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;1603        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;1604   
;;;1605   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
000aac  f44f7180          MOV      r1,#0x100
000ab0  60c1              STR      r1,[r0,#0xc]
000ab2  4893              LDR      r0,|L1.3328|
000ab4  f44f0180          MOV      r1,#0x400000
000ab8  6001              STR      r1,[r0,#0]
;;;1606   
;;;1607   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;1608   
;;;1609   
;;;1610   }
000aba  4770              BX       lr
;;;1611   
                          ENDP

                  adc_drv7 PROC
;;;1612   //-----------------------------------------------
;;;1613   void adc_drv7(void) //(Uсети - постоянка)
000abc  e92d41f0          PUSH     {r4-r8,lr}
;;;1614   {
;;;1615   //int temp_S;
;;;1616   //char i;
;;;1617   //signed short temp_SS;
;;;1618   
;;;1619   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
000ac0  4c90              LDR      r4,|L1.3332|
000ac2  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000ac4  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000ac6  1a40              SUBS     r0,r0,r1
000ac8  b200              SXTH     r0,r0
000aca  f7fffffe          BL       abs_pal
000ace  1da6              ADDS     r6,r4,#6
000ad0  8030              STRH     r0,[r6,#0]
;;;1620   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
000ad2  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000ad4  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000ad6  1a40              SUBS     r0,r0,r1
000ad8  b200              SXTH     r0,r0
000ada  f7fffffe          BL       abs_pal
000ade  8070              STRH     r0,[r6,#2]
;;;1621   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
000ae0  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000ae2  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000ae4  1a40              SUBS     r0,r0,r1
000ae6  b200              SXTH     r0,r0
000ae8  f7fffffe          BL       abs_pal
000aec  80b0              STRH     r0,[r6,#4]
;;;1622   
;;;1623   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;1624   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;1625   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;1626   
;;;1627   
;;;1628   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000aee  f44f7196          MOV      r1,#0x12c
;;;1629   	{
;;;1630   	adc_result=adc_self_ch_buff[2];
000af2  f1a40574          SUB      r5,r4,#0x74
000af6  4288              CMP      r0,r1                 ;1628
000af8  da02              BGE      |L1.2816|
000afa  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000afc  8568              STRH     r0,[r5,#0x2a]
000afe  e00c              B        |L1.2842|
                  |L1.2816|
;;;1631   	} 
;;;1632   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000b00  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
000b04  4288              CMP      r0,r1
000b06  da02              BGE      |L1.2830|
;;;1633   	{
;;;1634   	adc_result=adc_self_ch_buff[1];
000b08  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000b0a  8568              STRH     r0,[r5,#0x2a]
000b0c  e005              B        |L1.2842|
                  |L1.2830|
;;;1635   	}
;;;1636   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000b0e  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
000b12  4288              CMP      r0,r1
000b14  da01              BGE      |L1.2842|
;;;1637   	{
;;;1638   	adc_result=adc_self_ch_buff[0];
000b16  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
000b18  8568              STRH     r0,[r5,#0x2a]
                  |L1.2842|
;;;1639   	}
;;;1640       //adc_result=92;
;;;1641   
;;;1642   if(adc_ch_net)
000b1a  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
000b1c  2600              MOVS     r6,#0
000b1e  b32f              CBZ      r7,|L1.2924|
;;;1643   	{
;;;1644   
;;;1645   	main_power_buffer[0]+=(long)(adc_result);
000b20  4879              LDR      r0,|L1.3336|
000b22  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
000b26  6802              LDR      r2,[r0,#0]  ; main_power_buffer
000b28  440a              ADD      r2,r2,r1
000b2a  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;1646   	main_power_buffer[1]+=(long)(adc_result);
000b2c  6842              LDR      r2,[r0,#4]  ; main_power_buffer
000b2e  440a              ADD      r2,r2,r1
000b30  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;1647   	main_power_buffer[2]+=(long)(adc_result);
000b32  6882              LDR      r2,[r0,#8]  ; main_power_buffer
000b34  440a              ADD      r2,r2,r1
000b36  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;1648   	main_power_buffer[3]+=(long)(adc_result);
000b38  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
000b3a  4411              ADD      r1,r1,r2
000b3c  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;1649   
;;;1650   	adc_net_buff_cnt++;
000b3e  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
000b40  f1010101          ADD      r1,r1,#1
000b44  b209              SXTH     r1,r1
000b46  8669              STRH     r1,[r5,#0x32]
;;;1651   	if(adc_net_buff_cnt>=0x1000)
000b48  f5b15f80          CMP      r1,#0x1000
000b4c  db00              BLT      |L1.2896|
;;;1652   		{
;;;1653   		adc_net_buff_cnt=0;
000b4e  866e              STRH     r6,[r5,#0x32]
                  |L1.2896|
;;;1654   		}
;;;1655   	if((adc_net_buff_cnt&0x03ff)==0)
000b50  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
000b54  058a              LSLS     r2,r1,#22
000b56  d131              BNE      |L1.3004|
;;;1656   		{
;;;1657   		#ifdef UKU_220
;;;1658   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;1659   		#else
;;;1660   		#ifdef UKU_220_V2
;;;1661   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;1662   		#else
;;;1663   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
000b58  ea4f21a1          ASR      r1,r1,#10
000b5c  f8502021          LDR      r2,[r0,r1,LSL #2]
000b60  ea4f2222          ASR      r2,r2,#8
000b64  852a              STRH     r2,[r5,#0x28]
;;;1664   		#endif
;;;1665   		#endif
;;;1666   		main_power_buffer[adc_net_buff_cnt>>10]=0;
000b66  f8406021          STR      r6,[r0,r1,LSL #2]
000b6a  e027              B        |L1.3004|
                  |L1.2924|
;;;1667   		}
;;;1668   
;;;1669   
;;;1670   	} 
;;;1671   else if(!adc_ch_net)
;;;1672   	{
;;;1673   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
000b6c  4867              LDR      r0,|L1.3340|
000b6e  792c              LDRB     r4,[r5,#4]  ; adc_ch
000b70  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
000b72  eb001384          ADD      r3,r0,r4,LSL #6
000b76  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
000b7a  f8431022          STR      r1,[r3,r2,LSL #2]
;;;1674   	
;;;1675   	if((adc_ch_cnt&0x03)==0)
000b7e  0790              LSLS     r0,r2,#30
000b80  d10f              BNE      |L1.2978|
;;;1676   		{
;;;1677   		long temp_L;
;;;1678   		char i;
;;;1679   		temp_L=0;
000b82  4601              MOV      r1,r0
                  |L1.2948|
;;;1680   		for(i=0;i<16;i++)
;;;1681   			{
;;;1682   			temp_L+=adc_buff[adc_ch][i];
000b84  f853c020          LDR      r12,[r3,r0,LSL #2]
000b88  4461              ADD      r1,r1,r12
000b8a  f1000001          ADD      r0,r0,#1              ;1680
000b8e  b2c0              UXTB     r0,r0                 ;1680
000b90  2810              CMP      r0,#0x10              ;1680
000b92  d3f7              BCC      |L1.2948|
;;;1683   			}
;;;1684   		adc_buff_[adc_ch]= (short)(temp_L>>4);
000b94  ea4f1021          ASR      r0,r1,#4
000b98  495b              LDR      r1,|L1.3336|
000b9a  f1a10120          SUB      r1,r1,#0x20
000b9e  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.2978|
;;;1685   
;;;1686   		//adc_buff_[3]=346;
;;;1687   		}
;;;1688   	if(++adc_ch>=16) 
000ba2  1c64              ADDS     r4,r4,#1
000ba4  b2e0              UXTB     r0,r4
000ba6  7128              STRB     r0,[r5,#4]
000ba8  2810              CMP      r0,#0x10
000baa  d307              BCC      |L1.3004|
;;;1689   		{
;;;1690   		adc_ch=0;
000bac  712e              STRB     r6,[r5,#4]
;;;1691   		adc_ch_cnt++;
000bae  f1020201          ADD      r2,r2,#1
000bb2  b2d0              UXTB     r0,r2
000bb4  7168              STRB     r0,[r5,#5]
;;;1692   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
000bb6  2810              CMP      r0,#0x10
000bb8  d300              BCC      |L1.3004|
000bba  716e              STRB     r6,[r5,#5]
                  |L1.3004|
;;;1693   		}
;;;1694   	}
;;;1695   
;;;1696   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;1697   
;;;1698   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;1699   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;1700   /*
;;;1701   	{
;;;1702   	if((adc_cnt1&0x03)==0)
;;;1703   		{
;;;1704   		temp_S=0;
;;;1705   		for(i=0;i<16;i++)
;;;1706   			{
;;;1707   			temp_S+=adc_buff[adc_ch][i];
;;;1708   			} 
;;;1709            	adc_buff_[adc_ch]=temp_S>>4;
;;;1710             }
;;;1711   	}*/
;;;1712   
;;;1713   
;;;1714   		  
;;;1715   
;;;1716   adc_self_ch_cnt=0;
000bbc  70ae              STRB     r6,[r5,#2]
;;;1717   
;;;1718   adc_ch_net++;
000bbe  f1070701          ADD      r7,r7,#1
;;;1719   adc_ch_net&=1;
000bc2  f0070001          AND      r0,r7,#1
000bc6  70e8              STRB     r0,[r5,#3]
;;;1720   
;;;1721   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;1722   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;1723   
;;;1724   if(adc_ch_net)
;;;1725   	{
;;;1726   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;1727   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;1728   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
000bc8  4a4c              LDR      r2,|L1.3324|
000bca  b130              CBZ      r0,|L1.3034|
000bcc  6810              LDR      r0,[r2,#0]
000bce  f02000ff          BIC      r0,r0,#0xff
000bd2  f1000004          ADD      r0,r0,#4
000bd6  6010              STR      r0,[r2,#0]
000bd8  e03d              B        |L1.3158|
                  |L1.3034|
;;;1729   	}
;;;1730   else
;;;1731   	{
;;;1732   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;1733   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;1734   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000bda  7929              LDRB     r1,[r5,#4]  ; adc_ch
000bdc  0708              LSLS     r0,r1,#28
000bde  d406              BMI      |L1.3054|
000be0  6810              LDR      r0,[r2,#0]
000be2  f02000ff          BIC      r0,r0,#0xff
000be6  f1000001          ADD      r0,r0,#1
000bea  6010              STR      r0,[r2,#0]
000bec  e005              B        |L1.3066|
                  |L1.3054|
;;;1735   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
000bee  6810              LDR      r0,[r2,#0]
000bf0  f02000ff          BIC      r0,r0,#0xff
000bf4  f1000002          ADD      r0,r0,#2
000bf8  6010              STR      r0,[r2,#0]
                  |L1.3066|
;;;1736   
;;;1737   
;;;1738   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
000bfa  4845              LDR      r0,|L1.3344|
000bfc  6803              LDR      r3,[r0,#0]
000bfe  f0435380          ORR      r3,r3,#0x10000000
000c02  6003              STR      r3,[r0,#0]
;;;1739   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
000c04  6a03              LDR      r3,[r0,#0x20]
000c06  f0434380          ORR      r3,r3,#0x40000000
000c0a  6203              STR      r3,[r0,#0x20]
;;;1740   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000c0c  6e03              LDR      r3,[r0,#0x60]
000c0e  f0436380          ORR      r3,r3,#0x4000000
000c12  6603              STR      r3,[r0,#0x60]
;;;1741   
;;;1742   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
000c14  07cb              LSLS     r3,r1,#31
000c16  d00a              BEQ      |L1.3118|
;;;1743   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
000c18  6943              LDR      r3,[r0,#0x14]
000c1a  f0435380          ORR      r3,r3,#0x10000000
000c1e  6143              STR      r3,[r0,#0x14]
                  |L1.3104|
;;;1744   
;;;1745   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000c20  078b              LSLS     r3,r1,#30
000c22  d409              BMI      |L1.3128|
000c24  6b43              LDR      r3,[r0,#0x34]
000c26  f0234380          BIC      r3,r3,#0x40000000
000c2a  6343              STR      r3,[r0,#0x34]
000c2c  e008              B        |L1.3136|
                  |L1.3118|
000c2e  6943              LDR      r3,[r0,#0x14]         ;1742
000c30  f0235380          BIC      r3,r3,#0x10000000     ;1742
000c34  6143              STR      r3,[r0,#0x14]         ;1742
000c36  e7f3              B        |L1.3104|
                  |L1.3128|
;;;1746   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
000c38  6b43              LDR      r3,[r0,#0x34]
000c3a  f0434380          ORR      r3,r3,#0x40000000
000c3e  6343              STR      r3,[r0,#0x34]
                  |L1.3136|
;;;1747   
;;;1748   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
000c40  0749              LSLS     r1,r1,#29
000c42  d404              BMI      |L1.3150|
000c44  6f41              LDR      r1,[r0,#0x74]
000c46  f0216180          BIC      r1,r1,#0x4000000
000c4a  6741              STR      r1,[r0,#0x74]
000c4c  e003              B        |L1.3158|
                  |L1.3150|
;;;1749   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
000c4e  6f41              LDR      r1,[r0,#0x74]
000c50  f0416180          ORR      r1,r1,#0x4000000
000c54  6741              STR      r1,[r0,#0x74]
                  |L1.3158|
;;;1750   	}
;;;1751   	
;;;1752   
;;;1753   
;;;1754   
;;;1755   LPC_ADC->ADCR |=  (1<<24);
000c56  6810              LDR      r0,[r2,#0]
000c58  f0407080          ORR      r0,r0,#0x1000000
000c5c  6010              STR      r0,[r2,#0]
;;;1756   
;;;1757   }
000c5e  e8bd81f0          POP      {r4-r8,pc}
;;;1758   
                          ENDP

                  avg_hndl PROC
;;;2015   //-----------------------------------------------
;;;2016   void avg_hndl(void)
000c62  e92d47f0          PUSH     {r4-r10,lr}
;;;2017   { 
;;;2018   char i;
;;;2019   
;;;2020   if(bAVG_BLOCK)return;
000c66  f8df809c          LDR      r8,|L1.3332|
000c6a  f1a80874          SUB      r8,r8,#0x74
000c6e  f898000f          LDRB     r0,[r8,#0xf]  ; bAVG_BLOCK
000c72  2800              CMP      r0,#0
000c74  d106              BNE      |L1.3204|
;;;2021   //#define AVGCNTMAX	5
;;;2022   if(avg_main_cnt)
000c76  f9b80022          LDRSH    r0,[r8,#0x22]  ; avg_main_cnt
000c7a  b128              CBZ      r0,|L1.3208|
;;;2023   	{
;;;2024   	avg_main_cnt--;
000c7c  f1a00001          SUB      r0,r0,#1
000c80  f8a80022          STRH     r0,[r8,#0x22]
                  |L1.3204|
;;;2025   	return;
;;;2026   	}                 
;;;2027   
;;;2028   if(avg_cnt_<10)
;;;2029   	{
;;;2030   	avg_cnt_++;
;;;2031   	return;
;;;2032   	}   
;;;2033   avg_cnt_=0;
;;;2034   avg_num=0;
;;;2035   
;;;2036   if(bAVG_DIR)bAVG_DIR=0;
;;;2037   else bAVG_DIR=1;
;;;2038   
;;;2039   for(i=0;i<NUMIST;i++)
;;;2040   	{
;;;2041   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
;;;2042   	}
;;;2043   
;;;2044   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2045   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2046   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2047   
;;;2048   	
;;;2049   if(avg_num<2)
;;;2050   	{
;;;2051   	return;
;;;2052   	}
;;;2053   	
;;;2054   else
;;;2055   	{
;;;2056   	i_avg_min=5000;
;;;2057   	i_avg_max=0;
;;;2058   	i_avg_summ=0;
;;;2059   	for(i=0;i<NUMIST;i++)
;;;2060   		{
;;;2061   		if(bps[i]._state==bsWRK)
;;;2062   			{
;;;2063   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
;;;2064   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
;;;2065   			
;;;2066   			i_avg_summ+=bps[i]._Ii;
;;;2067   			}
;;;2068   		}
;;;2069   	i_avg=i_avg_summ/avg_num;	
;;;2070   	
;;;2071   	if(i_avg_min==0)i_avg_min=1;
;;;2072   
;;;2073   	avg=i_avg_max;
;;;2074   	avg*=100;
;;;2075   	avg/=i_avg_min;
;;;2076   
;;;2077   	if(avg>160) bAVG=1;
;;;2078   	if((avg<120)||(vd_U<50)) bAVG=0;
;;;2079   
;;;2080   	if(bAVG==1)
;;;2081   		{
;;;2082   		for(i=0;i<NUMIST;i++)
;;;2083   			{
;;;2084   			if(bps[i]._state==bsWRK)
;;;2085   				{
;;;2086   				signed long tempSL;
;;;2087   				tempSL=0;
;;;2088   				tempSL=(signed long)bps[i]._Ii;
;;;2089   				tempSL*=100L;
;;;2090   				if(i_avg==0) i_avg=1;
;;;2091   				tempSL/=(signed long)i_avg;
;;;2092   				bps[i]._avg=(signed short)tempSL;
;;;2093   
;;;2094   				if((bps[i]._Ii>i_avg)&&(bps[i]._avg>120)&&(!bAVG_DIR))bps[i]._x_avg--;
;;;2095   				if((bps[i]._Ii<i_avg)&&(bps[i]._avg<80)&&(bAVG_DIR))bps[i]._x_avg++;
;;;2096   			
;;;2097   				if(bps[i]._x_avg<-50)bps[i]._x_avg=-50;
;;;2098   				if(bps[i]._x_avg>50)bps[i]._x_avg=50;	
;;;2099   				}
;;;2100   			else bps[i]._avg=0;
;;;2101   			}		
;;;2102   		}			
;;;2103   	}   	 
;;;2104   
;;;2105   /*if(((signed long)(UOUT_-in_U))<20L)
;;;2106   	{
;;;2107   	for(i=0;i<NUMIST;i++) bps[i]._x_=0;
;;;2108   	}*/
;;;2109   
;;;2110   avg_hndl_end:
;;;2111   __nop();  
;;;2112   }
000c84  e8bd87f0          POP      {r4-r10,pc}
                  |L1.3208|
000c88  f898000d          LDRB     r0,[r8,#0xd]          ;2028  ; avg_cnt_
000c8c  280a              CMP      r0,#0xa               ;2028
000c8e  d204              BCS      |L1.3226|
000c90  f1000001          ADD      r0,r0,#1              ;2030
000c94  f888000d          STRB     r0,[r8,#0xd]          ;2030
000c98  e7f4              B        |L1.3204|
                  |L1.3226|
000c9a  f04f0c00          MOV      r12,#0                ;2033
000c9e  f888c00d          STRB     r12,[r8,#0xd]         ;2033
000ca2  f888c00e          STRB     r12,[r8,#0xe]         ;2034
000ca6  f8980010          LDRB     r0,[r8,#0x10]         ;2036  ; bAVG_DIR
000caa  f04f0701          MOV      r7,#1                 ;2037
000cae  b110              CBZ      r0,|L1.3254|
000cb0  f888c010          STRB     r12,[r8,#0x10]        ;2036
000cb4  e001              B        |L1.3258|
                  |L1.3254|
000cb6  f8887010          STRB     r7,[r8,#0x10]         ;2037
                  |L1.3258|
000cba  f04f0000          MOV      r0,#0                 ;2039
000cbe  4916              LDR      r1,|L1.3352|
000cc0  4e14              LDR      r6,|L1.3348|
000cc2  f9b13000          LDRSH    r3,[r1,#0]            ;2039
000cc6  e02c              B        |L1.3362|
                  |L1.3272|
000cc8  ebc01100          RSB      r1,r0,r0,LSL #4       ;2041
000ccc  eb0601c1          ADD      r1,r6,r1,LSL #3       ;2041
000cd0  788a              LDRB     r2,[r1,#2]            ;2041
000cd2  2a02              CMP      r2,#2                 ;2041
000cd4  d108              BNE      |L1.3304|
000cd6  78c9              LDRB     r1,[r1,#3]            ;2041
000cd8  2914              CMP      r1,#0x14              ;2041
000cda  d205              BCS      |L1.3304|
000cdc  f898100e          LDRB     r1,[r8,#0xe]          ;2041  ; avg_num
000ce0  f1010101          ADD      r1,r1,#1              ;2041
000ce4  f888100e          STRB     r1,[r8,#0xe]          ;2041
                  |L1.3304|
000ce8  e018              B        |L1.3356|
000cea  0000              DCW      0x0000
                  |L1.3308|
                          DCD      Isumm
                  |L1.3312|
                          DCD      NUMINV
                  |L1.3316|
                          DCD      inv
                  |L1.3320|
                          DCD      0x4002c000
                  |L1.3324|
                          DCD      0x40034000
                  |L1.3328|
                          DCD      0xe000e100
                  |L1.3332|
                          DCD      ||area_number.26||+0x74
                  |L1.3336|
                          DCD      ||.bss||+0x420
                  |L1.3340|
                          DCD      ||.bss||
                  |L1.3344|
                          DCD      0x2009c000
                  |L1.3348|
                          DCD      bps
                  |L1.3352|
                          DCD      NUMIST
                  |L1.3356|
000d1c  f1000001          ADD      r0,r0,#1              ;2039
000d20  b2c0              UXTB     r0,r0                 ;2039
                  |L1.3362|
000d22  4298              CMP      r0,r3                 ;2039
000d24  dbd0              BLT      |L1.3272|
000d26  f898200e          LDRB     r2,[r8,#0xe]          ;2049  ; avg_num
000d2a  2a02              CMP      r2,#2                 ;2049
000d2c  d3aa              BCC      |L1.3204|
000d2e  f2413088          MOV      r0,#0x1388            ;2056
000d32  f8c80058          STR      r0,[r8,#0x58]         ;2056  ; i_avg_min
000d36  f8c8c054          STR      r12,[r8,#0x54]        ;2057  ; i_avg_max
000d3a  f8c8c05c          STR      r12,[r8,#0x5c]        ;2058  ; i_avg_summ
000d3e  f04f0100          MOV      r1,#0                 ;2059
000d42  e01b              B        |L1.3452|
                  |L1.3396|
000d44  ebc11001          RSB      r0,r1,r1,LSL #4       ;2061
000d48  eb0600c0          ADD      r0,r6,r0,LSL #3       ;2061
000d4c  7884              LDRB     r4,[r0,#2]            ;2061
000d4e  2c02              CMP      r4,#2                 ;2061
000d50  d111              BNE      |L1.3446|
000d52  6a40              LDR      r0,[r0,#0x24]         ;2063
000d54  f8d84054          LDR      r4,[r8,#0x54]         ;2063  ; i_avg_max
000d58  42a0              CMP      r0,r4                 ;2063
000d5a  dd01              BLE      |L1.3424|
000d5c  f8c80054          STR      r0,[r8,#0x54]         ;2063  ; i_avg_max
                  |L1.3424|
000d60  f8d84058          LDR      r4,[r8,#0x58]         ;2064  ; i_avg_min
000d64  42a0              CMP      r0,r4                 ;2064
000d66  da01              BGE      |L1.3436|
000d68  f8c80058          STR      r0,[r8,#0x58]         ;2064  ; i_avg_min
                  |L1.3436|
000d6c  f8d8405c          LDR      r4,[r8,#0x5c]         ;2066  ; i_avg_summ
000d70  4420              ADD      r0,r0,r4              ;2066
000d72  f8c8005c          STR      r0,[r8,#0x5c]         ;2066  ; i_avg_summ
                  |L1.3446|
000d76  f1010101          ADD      r1,r1,#1              ;2059
000d7a  b2c9              UXTB     r1,r1                 ;2059
                  |L1.3452|
000d7c  4299              CMP      r1,r3                 ;2059
000d7e  dbe1              BLT      |L1.3396|
000d80  f8d8005c          LDR      r0,[r8,#0x5c]         ;2069  ; i_avg_summ
000d84  fb90f0f2          SDIV     r0,r0,r2              ;2069
000d88  f8c80060          STR      r0,[r8,#0x60]         ;2069  ; i_avg
000d8c  f8d80058          LDR      r0,[r8,#0x58]         ;2071  ; i_avg_min
000d90  b908              CBNZ     r0,|L1.3478|
000d92  f8c87058          STR      r7,[r8,#0x58]         ;2071  ; i_avg_min
                  |L1.3478|
000d96  f8d80054          LDR      r0,[r8,#0x54]         ;2073  ; i_avg_max
000d9a  f04f0164          MOV      r1,#0x64              ;2074
000d9e  fb00f001          MUL      r0,r0,r1              ;2074
000da2  f8d81058          LDR      r1,[r8,#0x58]         ;2075  ; i_avg_min
000da6  fb90f0f1          SDIV     r0,r0,r1              ;2075
000daa  f8c80064          STR      r0,[r8,#0x64]         ;2075  ; avg
000dae  28a0              CMP      r0,#0xa0              ;2077
000db0  dd01              BLE      |L1.3510|
000db2  f888700c          STRB     r7,[r8,#0xc]          ;2077
                  |L1.3510|
000db6  2878              CMP      r0,#0x78              ;2078
000db8  db04              BLT      |L1.3524|
000dba  48f8              LDR      r0,|L1.4508|
000dbc  f9b00000          LDRSH    r0,[r0,#0]            ;2078  ; vd_U
000dc0  2832              CMP      r0,#0x32              ;2078
000dc2  da01              BGE      |L1.3528|
                  |L1.3524|
000dc4  f888c00c          STRB     r12,[r8,#0xc]         ;2078
                  |L1.3528|
000dc8  f898000c          LDRB     r0,[r8,#0xc]          ;2080  ; bAVG
000dcc  2801              CMP      r0,#1                 ;2080
000dce  d112              BNE      |L1.3574|
000dd0  f04f0100          MOV      r1,#0                 ;2082
000dd4  f06f0931          MVN      r9,#0x31              ;2097
000dd8  e00b              B        |L1.3570|
                  |L1.3546|
000dda  ebc11001          RSB      r0,r1,r1,LSL #4       ;2084
000dde  eb0600c0          ADD      r0,r6,r0,LSL #3       ;2084
000de2  7882              LDRB     r2,[r0,#2]            ;2084
000de4  2a02              CMP      r2,#2                 ;2084
000de6  d008              BEQ      |L1.3578|
000de8  f8a0c066          STRH     r12,[r0,#0x66]        ;2100
                  |L1.3564|
000dec  f1010101          ADD      r1,r1,#1              ;2082
000df0  b2c9              UXTB     r1,r1                 ;2082
                  |L1.3570|
000df2  4299              CMP      r1,r3                 ;2082
000df4  dbf1              BLT      |L1.3546|
                  |L1.3574|
000df6  bf00              NOP                            ;2111
000df8  e744              B        |L1.3204|
                  |L1.3578|
000dfa  6a44              LDR      r4,[r0,#0x24]         ;2088
000dfc  f04f0264          MOV      r2,#0x64              ;2089
000e00  fb04f202          MUL      r2,r4,r2              ;2089
000e04  f8d85060          LDR      r5,[r8,#0x60]         ;2090  ; i_avg
000e08  b90d              CBNZ     r5,|L1.3598|
000e0a  f8c87060          STR      r7,[r8,#0x60]         ;2090  ; i_avg
                  |L1.3598|
000e0e  4615              MOV      r5,r2                 ;2091
000e10  f8d82060          LDR      r2,[r8,#0x60]         ;2091  ; i_avg
000e14  fb95f5f2          SDIV     r5,r5,r2              ;2091
000e18  b22d              SXTH     r5,r5                 ;2092
000e1a  f8a05066          STRH     r5,[r0,#0x66]         ;2092
000e1e  4294              CMP      r4,r2                 ;2094
000e20  dd0c              BLE      |L1.3644|
000e22  2d78              CMP      r5,#0x78              ;2094
000e24  dd0a              BLE      |L1.3644|
000e26  f898a010          LDRB     r10,[r8,#0x10]        ;2094  ; bAVG_DIR
000e2a  f1ba0f00          CMP      r10,#0                ;2094
000e2e  d105              BNE      |L1.3644|
000e30  f8b0a056          LDRH     r10,[r0,#0x56]        ;2094
000e34  f1aa0a01          SUB      r10,r10,#1            ;2094
000e38  f8a0a056          STRH     r10,[r0,#0x56]        ;2094
                  |L1.3644|
000e3c  4294              CMP      r4,r2                 ;2095
000e3e  da0a              BGE      |L1.3670|
000e40  2d50              CMP      r5,#0x50              ;2095
000e42  da08              BGE      |L1.3670|
000e44  f8982010          LDRB     r2,[r8,#0x10]         ;2095  ; bAVG_DIR
000e48  b12a              CBZ      r2,|L1.3670|
000e4a  f8b02056          LDRH     r2,[r0,#0x56]         ;2095
000e4e  f1020201          ADD      r2,r2,#1              ;2095
000e52  f8a02056          STRH     r2,[r0,#0x56]         ;2095
                  |L1.3670|
000e56  f9b02056          LDRSH    r2,[r0,#0x56]         ;2097
000e5a  454a              CMP      r2,r9                 ;2097
000e5c  da01              BGE      |L1.3682|
000e5e  f8a09056          STRH     r9,[r0,#0x56]         ;2097
                  |L1.3682|
000e62  f9b02056          LDRSH    r2,[r0,#0x56]         ;2098
000e66  2a32              CMP      r2,#0x32              ;2098
000e68  ddc0              BLE      |L1.3564|
000e6a  f04f0232          MOV      r2,#0x32              ;2098
000e6e  f8a02056          STRH     r2,[r0,#0x56]         ;2098
000e72  e7bb              B        |L1.3564|
;;;2113   
                          ENDP

                  u_out_reg_hndl PROC
;;;2114   //-----------------------------------------------
;;;2115   void u_out_reg_hndl(void)
000e74  b510              PUSH     {r4,lr}
;;;2116   { 
;;;2117   char i;
;;;2118   
;;;2119   if(u_out_reg_main_cnt)
000e76  49ca              LDR      r1,|L1.4512|
000e78  f9b10024          LDRSH    r0,[r1,#0x24]  ; u_out_reg_main_cnt
000e7c  b118              CBZ      r0,|L1.3718|
;;;2120   	{
;;;2121   	u_out_reg_main_cnt--;
000e7e  f1a00001          SUB      r0,r0,#1
000e82  8488              STRH     r0,[r1,#0x24]
;;;2122   	return;
;;;2123   	}                 
;;;2124   u_out_reg_main_cnt=5;
;;;2125   
;;;2126   if(out_U<(UOUT-5))
;;;2127   	{
;;;2128   	//if(UOUT_<UOUT)UOUT_=UOUT;
;;;2129   	UOUT_++;
;;;2130   	if(UOUT_>(UOUT+50))UOUT_=UOUT+50;
;;;2131   	}
;;;2132   else if(out_U>(UOUT+5))
;;;2133   	{
;;;2134   	//if(UOUT_>UOUT)UOUT_=UOUT;
;;;2135   	UOUT_--;
;;;2136   	if(UOUT_<(UOUT-50))UOUT_=UOUT-50;
;;;2137   	}
;;;2138   UOUT_=UOUT;
;;;2139   }
000e84  bd10              POP      {r4,pc}
                  |L1.3718|
000e86  f04f0005          MOV      r0,#5                 ;2124
000e8a  8488              STRH     r0,[r1,#0x24]         ;2124
000e8c  48c5              LDR      r0,|L1.4516|
000e8e  4bc7              LDR      r3,|L1.4524|
000e90  f9b02000          LDRSH    r2,[r0,#0]            ;2126  ; out_U
000e94  48c4              LDR      r0,|L1.4520|
000e96  f9b31000          LDRSH    r1,[r3,#0]            ;2129
000e9a  f9b00000          LDRSH    r0,[r0,#0]            ;2126  ; UOUT
000e9e  f1a00405          SUB      r4,r0,#5              ;2126
000ea2  42a2              CMP      r2,r4                 ;2126
000ea4  da09              BGE      |L1.3770|
000ea6  f1010101          ADD      r1,r1,#1              ;2129
000eaa  b20a              SXTH     r2,r1                 ;2129
000eac  801a              STRH     r2,[r3,#0]            ;2129
000eae  f1000132          ADD      r1,r0,#0x32           ;2130
000eb2  428a              CMP      r2,r1                 ;2130
000eb4  dd0d              BLE      |L1.3794|
000eb6  8019              STRH     r1,[r3,#0]            ;2130
000eb8  e00b              B        |L1.3794|
                  |L1.3770|
000eba  1d44              ADDS     r4,r0,#5              ;2132
000ebc  42a2              CMP      r2,r4                 ;2132
000ebe  dd08              BLE      |L1.3794|
000ec0  f1a10101          SUB      r1,r1,#1              ;2135
000ec4  b20a              SXTH     r2,r1                 ;2135
000ec6  801a              STRH     r2,[r3,#0]            ;2135
000ec8  f1a00132          SUB      r1,r0,#0x32           ;2136
000ecc  428a              CMP      r2,r1                 ;2136
000ece  da00              BGE      |L1.3794|
000ed0  8019              STRH     r1,[r3,#0]            ;2136
                  |L1.3794|
000ed2  8018              STRH     r0,[r3,#0]            ;2138
000ed4  bd10              POP      {r4,pc}
;;;2140   
                          ENDP

                  rele_av_hndl PROC
;;;2153   //-----------------------------------------------
;;;2154   void rele_av_hndl(void)
000ed6  b570              PUSH     {r4-r6,lr}
;;;2155   {
;;;2156   char i,i1,i2;
;;;2157   
;;;2158   i1=0;
000ed8  f04f0300          MOV      r3,#0
;;;2159   i2=0;
000edc  461a              MOV      r2,r3
;;;2160   
;;;2161   for(i=0;i<NUMIST;i++)
000ede  4610              MOV      r0,r2
000ee0  49b4              LDR      r1,|L1.4532|
;;;2162   	{
;;;2163   	if(bps[i]._av&0x0f)i1=1;
000ee2  4cb3              LDR      r4,|L1.4528|
000ee4  f9b15000          LDRSH    r5,[r1,#0]            ;2161
000ee8  e00f              B        |L1.3850|
                  |L1.3818|
000eea  ebc01100          RSB      r1,r0,r0,LSL #4
000eee  eb0401c1          ADD      r1,r4,r1,LSL #3
000ef2  7849              LDRB     r1,[r1,#1]
000ef4  070e              LSLS     r6,r1,#28
000ef6  d001              BEQ      |L1.3836|
000ef8  f04f0301          MOV      r3,#1
                  |L1.3836|
;;;2164   	if(bps[i]._av&0x10)i2=1;
000efc  06c9              LSLS     r1,r1,#27
000efe  d501              BPL      |L1.3844|
000f00  f04f0201          MOV      r2,#1
                  |L1.3844|
000f04  f1000001          ADD      r0,r0,#1              ;2161
000f08  b2c0              UXTB     r0,r0                 ;2161
                  |L1.3850|
000f0a  42a8              CMP      r0,r5                 ;2161
000f0c  dbed              BLT      |L1.3818|
;;;2165   	}
;;;2166   
;;;2167   if(i1)					avar_vd_stat|=(1<<0);
000f0e  49aa              LDR      r1,|L1.4536|
000f10  f9b10000          LDRSH    r0,[r1,#0]
000f14  b11b              CBZ      r3,|L1.3870|
000f16  f0400001          ORR      r0,r0,#1
000f1a  8008              STRH     r0,[r1,#0]
000f1c  e002              B        |L1.3876|
                  |L1.3870|
;;;2168   else 					avar_vd_stat&=~(1<<0);
000f1e  f0200001          BIC      r0,r0,#1
000f22  8008              STRH     r0,[r1,#0]
                  |L1.3876|
;;;2169   if(overloadAvar==0) 	avar_vd_stat&=~(1<<1);
000f24  48a5              LDR      r0,|L1.4540|
000f26  7800              LDRB     r0,[r0,#0]  ; overloadAvar
000f28  b110              CBZ      r0,|L1.3888|
;;;2170   else if(overloadAvar==1)avar_vd_stat|=(1<<1);
000f2a  2801              CMP      r0,#1
000f2c  d005              BEQ      |L1.3898|
000f2e  e008              B        |L1.3906|
                  |L1.3888|
000f30  8808              LDRH     r0,[r1,#0]            ;2169  ; avar_vd_stat
000f32  f0200002          BIC      r0,r0,#2              ;2169
000f36  8008              STRH     r0,[r1,#0]            ;2169
000f38  e003              B        |L1.3906|
                  |L1.3898|
000f3a  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000f3c  f0400002          ORR      r0,r0,#2
000f40  8008              STRH     r0,[r1,#0]
                  |L1.3906|
;;;2171   
;;;2172   if(sysTAvar==0) 		avar_vd_stat&=~(1<<2);
000f42  489f              LDR      r0,|L1.4544|
000f44  7800              LDRB     r0,[r0,#0]  ; sysTAvar
000f46  b110              CBZ      r0,|L1.3918|
;;;2173   else if(sysTAvar==1)	avar_vd_stat|=(1<<2);
000f48  2801              CMP      r0,#1
000f4a  d005              BEQ      |L1.3928|
000f4c  e008              B        |L1.3936|
                  |L1.3918|
000f4e  8808              LDRH     r0,[r1,#0]            ;2172  ; avar_vd_stat
000f50  f0200004          BIC      r0,r0,#4              ;2172
000f54  8008              STRH     r0,[r1,#0]            ;2172
000f56  e003              B        |L1.3936|
                  |L1.3928|
000f58  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000f5a  f0400004          ORR      r0,r0,#4
000f5e  8008              STRH     r0,[r1,#0]
                  |L1.3936|
;;;2174   
;;;2175   if(uOutAvar==0) 		avar_vd_stat&=~((1<<3)|(1<<4));
000f60  4898              LDR      r0,|L1.4548|
000f62  7800              LDRB     r0,[r0,#0]  ; uOutAvar
000f64  b120              CBZ      r0,|L1.3952|
;;;2176   else if(uOutAvar==1)	avar_vd_stat|=(1<<4);
000f66  2801              CMP      r0,#1
000f68  d007              BEQ      |L1.3962|
;;;2177   else if(uOutAvar==2)	avar_vd_stat|=(1<<3);
000f6a  2802              CMP      r0,#2
000f6c  d00a              BEQ      |L1.3972|
000f6e  e00d              B        |L1.3980|
                  |L1.3952|
000f70  8808              LDRH     r0,[r1,#0]            ;2175  ; avar_vd_stat
000f72  f0200018          BIC      r0,r0,#0x18           ;2175
000f76  8008              STRH     r0,[r1,#0]            ;2175
000f78  e008              B        |L1.3980|
                  |L1.3962|
000f7a  8808              LDRH     r0,[r1,#0]            ;2176  ; avar_vd_stat
000f7c  f0400010          ORR      r0,r0,#0x10           ;2176
000f80  8008              STRH     r0,[r1,#0]            ;2176
000f82  e003              B        |L1.3980|
                  |L1.3972|
000f84  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000f86  f0400008          ORR      r0,r0,#8
000f8a  8008              STRH     r0,[r1,#0]
                  |L1.3980|
;;;2178   if(uInAvar==0) 			avar_vd_stat&=~((1<<5)|(1<<6));
000f8c  488e              LDR      r0,|L1.4552|
000f8e  7800              LDRB     r0,[r0,#0]  ; uInAvar
000f90  b120              CBZ      r0,|L1.3996|
;;;2179   else if(uInAvar==1)		avar_vd_stat|=(1<<6);
000f92  2801              CMP      r0,#1
000f94  d007              BEQ      |L1.4006|
;;;2180   else if(uInAvar==2)		avar_vd_stat|=(1<<5);
000f96  2802              CMP      r0,#2
000f98  d00a              BEQ      |L1.4016|
000f9a  e00d              B        |L1.4024|
                  |L1.3996|
000f9c  8808              LDRH     r0,[r1,#0]            ;2178  ; avar_vd_stat
000f9e  f0200060          BIC      r0,r0,#0x60           ;2178
000fa2  8008              STRH     r0,[r1,#0]            ;2178
000fa4  e008              B        |L1.4024|
                  |L1.4006|
000fa6  8808              LDRH     r0,[r1,#0]            ;2179  ; avar_vd_stat
000fa8  f0400040          ORR      r0,r0,#0x40           ;2179
000fac  8008              STRH     r0,[r1,#0]            ;2179
000fae  e003              B        |L1.4024|
                  |L1.4016|
000fb0  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000fb2  f0400020          ORR      r0,r0,#0x20
000fb6  8008              STRH     r0,[r1,#0]
                  |L1.4024|
;;;2181   
;;;2182   if(i2)					avar_vd_stat|=(1<<7);
000fb8  b122              CBZ      r2,|L1.4036|
000fba  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000fbc  f0400080          ORR      r0,r0,#0x80
000fc0  8008              STRH     r0,[r1,#0]
000fc2  e003              B        |L1.4044|
                  |L1.4036|
;;;2183   else 					avar_vd_stat&=~(1<<7);
000fc4  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000fc6  f0200080          BIC      r0,r0,#0x80
000fca  8008              STRH     r0,[r1,#0]
                  |L1.4044|
;;;2184   
;;;2185   if(bVDISWORK)			avar_vd_stat|=(1<<8);
000fcc  487f              LDR      r0,|L1.4556|
000fce  7800              LDRB     r0,[r0,#0]  ; bVDISWORK
000fd0  b120              CBZ      r0,|L1.4060|
000fd2  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000fd4  f4407080          ORR      r0,r0,#0x100
000fd8  8008              STRH     r0,[r1,#0]
000fda  e003              B        |L1.4068|
                  |L1.4060|
;;;2186   else 					avar_vd_stat&=~(1<<8);
000fdc  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
000fde  f4207080          BIC      r0,r0,#0x100
000fe2  8008              STRH     r0,[r1,#0]
                  |L1.4068|
;;;2187   
;;;2188   for (i=0;i<4;i++)
000fe4  f04f0000          MOV      r0,#0
000fe8  f9b15000          LDRSH    r5,[r1,#0]            ;2167
;;;2189   	{
;;;2190   	if(avar_vd_stat&RELE_SET_MASK[i])rele_av_flags|=(1<<i);
000fec  4c78              LDR      r4,|L1.4560|
000fee  4979              LDR      r1,|L1.4564|
000ff0  f04f0601          MOV      r6,#1                 ;2163
                  |L1.4084|
000ff4  f9342010          LDRSH    r2,[r4,r0,LSL #1]
000ff8  422a              TST      r2,r5
000ffa  d006              BEQ      |L1.4106|
000ffc  880a              LDRH     r2,[r1,#0]  ; rele_av_flags
000ffe  fa06f300          LSL      r3,r6,r0
001002  ea430302          ORR      r3,r3,r2
001006  800b              STRH     r3,[r1,#0]
001008  e005              B        |L1.4118|
                  |L1.4106|
;;;2191   	else rele_av_flags&=~(1<<i);
00100a  880a              LDRH     r2,[r1,#0]  ; rele_av_flags
00100c  fa06f300          LSL      r3,r6,r0
001010  ea220203          BIC      r2,r2,r3
001014  800a              STRH     r2,[r1,#0]
                  |L1.4118|
001016  f1000001          ADD      r0,r0,#1              ;2188
00101a  b2c0              UXTB     r0,r0                 ;2188
00101c  2804              CMP      r0,#4                 ;2188
00101e  d3e9              BCC      |L1.4084|
;;;2192   	} 
;;;2193   }
001020  bd70              POP      {r4-r6,pc}
;;;2194   
                          ENDP

                  rele_hndl PROC
;;;2195   //*************-----------------------------------------------
;;;2196   void rele_hndl(void)
001022  b570              PUSH     {r4-r6,lr}
;;;2197   {
;;;2198   //static char cnt_rel_sam;
;;;2199   //char temp;
;;;2200   
;;;2201   //temp=0;
;;;2202   
;;;2203   
;;;2204   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001024  486c              LDR      r0,|L1.4568|
001026  6801              LDR      r1,[r0,#0]
001028  4a6c              LDR      r2,|L1.4572|
00102a  ea010102          AND      r1,r1,r2
00102e  6001              STR      r1,[r0,#0]
;;;2205   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001030  4c6b              LDR      r4,|L1.4576|
001032  6821              LDR      r1,[r4,#0]
001034  f441717c          ORR      r1,r1,#0x3f0
001038  6021              STR      r1,[r4,#0]
;;;2206   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
00103a  69c1              LDR      r1,[r0,#0x1c]
00103c  f4212140          BIC      r1,r1,#0xc0000
001040  61c1              STR      r1,[r0,#0x1c]
;;;2207   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001042  6e21              LDR      r1,[r4,#0x60]
001044  f0417100          ORR      r1,r1,#0x2000000
001048  6621              STR      r1,[r4,#0x60]
;;;2208   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
00104a  6841              LDR      r1,[r0,#4]
00104c  f0216140          BIC      r1,r1,#0xc000000
001050  6041              STR      r1,[r0,#4]
;;;2209   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001052  6820              LDR      r0,[r4,#0]
001054  f0405000          ORR      r0,r0,#0x20000000
001058  6020              STR      r0,[r4,#0]
;;;2210   
;;;2211   
;;;2212   
;;;2213   
;;;2214   
;;;2215   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_1))
00105a  f04f00d2          MOV      r0,#0xd2
00105e  f7fffffe          BL       mess_find_unvol
;;;2216   	{
;;;2217   	if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;2218   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;2219   	}
;;;2220   else if(!(rele_av_flags&(1<<0))) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001062  4e5c              LDR      r6,|L1.4564|
001064  4d5f              LDR      r5,|L1.4580|
001066  b110              CBZ      r0,|L1.4206|
001068  6828              LDR      r0,[r5,#0]            ;2215  ; mess_data
00106a  2865              CMP      r0,#0x65              ;2215
00106c  d015              BEQ      |L1.4250|
                  |L1.4206|
00106e  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
001070  07c0              LSLS     r0,r0,#31
001072  d01e              BEQ      |L1.4274|
;;;2221   else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001074  6fa0              LDR      r0,[r4,#0x78]
001076  f0407000          ORR      r0,r0,#0x2000000
00107a  67a0              STR      r0,[r4,#0x78]
                  |L1.4220|
;;;2222   
;;;2223   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_2))
00107c  20d2              MOVS     r0,#0xd2
00107e  f7fffffe          BL       mess_find_unvol
001082  b110              CBZ      r0,|L1.4234|
001084  6828              LDR      r0,[r5,#0]  ; mess_data
001086  2866              CMP      r0,#0x66
001088  d018              BEQ      |L1.4284|
                  |L1.4234|
;;;2224   	{
;;;2225   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;2226   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;2227   	}
;;;2228   else if(!(rele_av_flags&(1<<1))) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
00108a  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
00108c  0780              LSLS     r0,r0,#30
00108e  d424              BMI      |L1.4314|
001090  69e0              LDR      r0,[r4,#0x1c]
001092  f0400080          ORR      r0,r0,#0x80
001096  61e0              STR      r0,[r4,#0x1c]
001098  e023              B        |L1.4322|
                  |L1.4250|
00109a  6868              LDR      r0,[r5,#4]            ;2217  ; mess_data
00109c  b120              CBZ      r0,|L1.4264|
00109e  6fa0              LDR      r0,[r4,#0x78]         ;2218
0010a0  f0407000          ORR      r0,r0,#0x2000000      ;2218
0010a4  67a0              STR      r0,[r4,#0x78]         ;2218
0010a6  e7e9              B        |L1.4220|
                  |L1.4264|
0010a8  6fe0              LDR      r0,[r4,#0x7c]         ;2217
0010aa  f0407000          ORR      r0,r0,#0x2000000      ;2217
0010ae  67e0              STR      r0,[r4,#0x7c]         ;2217
0010b0  e7e4              B        |L1.4220|
                  |L1.4274|
0010b2  6fe0              LDR      r0,[r4,#0x7c]         ;2220
0010b4  f0407000          ORR      r0,r0,#0x2000000      ;2220
0010b8  67e0              STR      r0,[r4,#0x7c]         ;2220
0010ba  e7df              B        |L1.4220|
                  |L1.4284|
0010bc  6868              LDR      r0,[r5,#4]            ;2225  ; mess_data
0010be  b110              CBZ      r0,|L1.4294|
0010c0  2801              CMP      r0,#1                 ;2226
0010c2  d005              BEQ      |L1.4304|
0010c4  e00d              B        |L1.4322|
                  |L1.4294|
0010c6  69e0              LDR      r0,[r4,#0x1c]         ;2225
0010c8  f0400080          ORR      r0,r0,#0x80           ;2225
0010cc  61e0              STR      r0,[r4,#0x1c]         ;2225
0010ce  e008              B        |L1.4322|
                  |L1.4304|
0010d0  69a0              LDR      r0,[r4,#0x18]         ;2226
0010d2  f0400080          ORR      r0,r0,#0x80           ;2226
0010d6  61a0              STR      r0,[r4,#0x18]         ;2226
0010d8  e003              B        |L1.4322|
                  |L1.4314|
;;;2229   else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
0010da  69a0              LDR      r0,[r4,#0x18]
0010dc  f0400080          ORR      r0,r0,#0x80
0010e0  61a0              STR      r0,[r4,#0x18]
                  |L1.4322|
;;;2230   
;;;2231   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_3))
0010e2  20d2              MOVS     r0,#0xd2
0010e4  f7fffffe          BL       mess_find_unvol
0010e8  b110              CBZ      r0,|L1.4336|
0010ea  6828              LDR      r0,[r5,#0]  ; mess_data
0010ec  2867              CMP      r0,#0x67
0010ee  d007              BEQ      |L1.4352|
                  |L1.4336|
;;;2232   	{
;;;2233   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;2234   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;2235       }
;;;2236   else if(!(rele_av_flags&(1<<2))) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0010f0  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
0010f2  0740              LSLS     r0,r0,#29
0010f4  d413              BMI      |L1.4382|
0010f6  69e0              LDR      r0,[r4,#0x1c]
0010f8  f0400010          ORR      r0,r0,#0x10
0010fc  61e0              STR      r0,[r4,#0x1c]
0010fe  e012              B        |L1.4390|
                  |L1.4352|
001100  6868              LDR      r0,[r5,#4]            ;2233  ; mess_data
001102  b110              CBZ      r0,|L1.4362|
001104  2801              CMP      r0,#1                 ;2234
001106  d005              BEQ      |L1.4372|
001108  e00d              B        |L1.4390|
                  |L1.4362|
00110a  69e0              LDR      r0,[r4,#0x1c]         ;2233
00110c  f0400010          ORR      r0,r0,#0x10           ;2233
001110  61e0              STR      r0,[r4,#0x1c]         ;2233
001112  e008              B        |L1.4390|
                  |L1.4372|
001114  69a0              LDR      r0,[r4,#0x18]         ;2234
001116  f0400010          ORR      r0,r0,#0x10           ;2234
00111a  61a0              STR      r0,[r4,#0x18]         ;2234
00111c  e003              B        |L1.4390|
                  |L1.4382|
;;;2237   else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
00111e  69a0              LDR      r0,[r4,#0x18]
001120  f0400010          ORR      r0,r0,#0x10
001124  61a0              STR      r0,[r4,#0x18]
                  |L1.4390|
;;;2238   
;;;2239   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_4))	 
001126  20d2              MOVS     r0,#0xd2
001128  f7fffffe          BL       mess_find_unvol
00112c  b110              CBZ      r0,|L1.4404|
00112e  6828              LDR      r0,[r5,#0]  ; mess_data
001130  2868              CMP      r0,#0x68
001132  d007              BEQ      |L1.4420|
                  |L1.4404|
;;;2240   	{
;;;2241   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;2242   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;2243   	}
;;;2244   else if(!(rele_av_flags&(1<<3))) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001134  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
001136  0700              LSLS     r0,r0,#28
001138  d413              BMI      |L1.4450|
00113a  69e0              LDR      r0,[r4,#0x1c]
00113c  f4407000          ORR      r0,r0,#0x200
001140  61e0              STR      r0,[r4,#0x1c]
001142  e012              B        |L1.4458|
                  |L1.4420|
001144  6868              LDR      r0,[r5,#4]            ;2241  ; mess_data
001146  b110              CBZ      r0,|L1.4430|
001148  2801              CMP      r0,#1                 ;2242
00114a  d005              BEQ      |L1.4440|
00114c  e00d              B        |L1.4458|
                  |L1.4430|
00114e  69e0              LDR      r0,[r4,#0x1c]         ;2241
001150  f4407000          ORR      r0,r0,#0x200          ;2241
001154  61e0              STR      r0,[r4,#0x1c]         ;2241
001156  e008              B        |L1.4458|
                  |L1.4440|
001158  69a0              LDR      r0,[r4,#0x18]         ;2242
00115a  f4407000          ORR      r0,r0,#0x200          ;2242
00115e  61a0              STR      r0,[r4,#0x18]         ;2242
001160  e003              B        |L1.4458|
                  |L1.4450|
;;;2245   else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001162  69a0              LDR      r0,[r4,#0x18]
001164  f4407000          ORR      r0,r0,#0x200
001168  61a0              STR      r0,[r4,#0x18]
                  |L1.4458|
;;;2246   
;;;2247   rele_on_cnt=0;
00116a  490d              LDR      r1,|L1.4512|
00116c  f04f0000          MOV      r0,#0
001170  8688              STRH     r0,[r1,#0x34]
;;;2248   if(GET_REG( LPC_GPIO3->FIOPIN, 25, 1))	rele_on_cnt++;
001172  6f62              LDR      r2,[r4,#0x74]
001174  0192              LSLS     r2,r2,#6
001176  d502              BPL      |L1.4478|
001178  f1000001          ADD      r0,r0,#1
00117c  8688              STRH     r0,[r1,#0x34]
                  |L1.4478|
;;;2249   if(GET_REG( LPC_GPIO0->FIOPIN, 7, 1))  rele_on_cnt++;
00117e  6960              LDR      r0,[r4,#0x14]
001180  0600              LSLS     r0,r0,#24
001182  d503              BPL      |L1.4492|
001184  8e88              LDRH     r0,[r1,#0x34]  ; rele_on_cnt
001186  f1000001          ADD      r0,r0,#1
00118a  8688              STRH     r0,[r1,#0x34]
                  |L1.4492|
;;;2250   if(GET_REG( LPC_GPIO0->FIOPIN, 4, 1))  rele_on_cnt++;
00118c  6960              LDR      r0,[r4,#0x14]
00118e  06c0              LSLS     r0,r0,#27
001190  d503              BPL      |L1.4506|
001192  8e88              LDRH     r0,[r1,#0x34]  ; rele_on_cnt
001194  f1000001          ADD      r0,r0,#1
001198  8688              STRH     r0,[r1,#0x34]
                  |L1.4506|
;;;2251   
;;;2252   }
00119a  bd70              POP      {r4-r6,pc}
                  |L1.4508|
                          DCD      vd_U
                  |L1.4512|
                          DCD      ||area_number.26||
                  |L1.4516|
                          DCD      out_U
                  |L1.4520|
                          DCD      UOUT
                  |L1.4524|
                          DCD      UOUT_
                  |L1.4528|
                          DCD      bps
                  |L1.4532|
                          DCD      NUMIST
                  |L1.4536|
                          DCD      avar_vd_stat
                  |L1.4540|
                          DCD      overloadAvar
                  |L1.4544|
                          DCD      sysTAvar
                  |L1.4548|
                          DCD      uOutAvar
                  |L1.4552|
                          DCD      uInAvar
                  |L1.4556|
                          DCD      bVDISWORK
                  |L1.4560|
                          DCD      RELE_SET_MASK
                  |L1.4564|
                          DCD      rele_av_flags
                  |L1.4568|
                          DCD      0x4002c000
                  |L1.4572|
                          DCD      0xfff000ff
                  |L1.4576|
                          DCD      0x2009c000
                  |L1.4580|
                          DCD      mess_data
                          ENDP

                  bps_hndl PROC
;;;2254   //-----------------------------------------------
;;;2255   void bps_hndl(void)
0011e8  e92d5ff0          PUSH     {r4-r12,lr}
;;;2256   {
;;;2257   char ptr__,i;
;;;2258   unsigned short tempUS;
;;;2259   
;;;2260   if(sh_cnt0<10)
0011ec  4eff              LDR      r6,|L1.5612|
;;;2261   	{
;;;2262   	sh_cnt0++;
;;;2263   	if(sh_cnt0>=10)
;;;2264   		{
;;;2265   		sh_cnt0=0;
0011ee  2700              MOVS     r7,#0
;;;2266   		b1Hz_sh=1;
0011f0  f04f0a01          MOV      r10,#1
0011f4  7d30              LDRB     r0,[r6,#0x14]         ;2260  ; sh_cnt0
0011f6  280a              CMP      r0,#0xa               ;2260
0011f8  d208              BCS      |L1.4620|
0011fa  f1000001          ADD      r0,r0,#1              ;2262
0011fe  b2c0              UXTB     r0,r0                 ;2262
001200  7530              STRB     r0,[r6,#0x14]         ;2262
001202  280a              CMP      r0,#0xa               ;2263
001204  d302              BCC      |L1.4620|
001206  7537              STRB     r7,[r6,#0x14]         ;2265
001208  f886a015          STRB     r10,[r6,#0x15]
                  |L1.4620|
;;;2267   		}
;;;2268   	}
;;;2269   
;;;2270   /*if(sh_cnt1<5)
;;;2271   	{
;;;2272   	sh_cnt1++;
;;;2273   	if(sh_cnt1==5)
;;;2274   		{
;;;2275   		sh_cnt1=0;
;;;2276   		b2Hz_sh=1;
;;;2277   		}
;;;2278   	} */
;;;2279   
;;;2280   
;;;2281   /*
;;;2282   if(mess_find(MESS_SRC_ON_OFF))
;;;2283   	{
;;;2284   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;2285   		{
;;;2286   		char i;
;;;2287   		for(i=0;i<NUMIST;i++)
;;;2288   			{
;;;2289   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;2290   			}
;;;2291   		
;;;2292   		}
;;;2293   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;2294   		{
;;;2295   		char i;
;;;2296   		for(i=0;i<NUMIST;i++)
;;;2297   			{
;;;2298   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;2299   			}
;;;2300   		
;;;2301   		}
;;;2302   	}
;;;2303   	
;;;2304   else if(mess_find(_MESS_SRC_MASK_ON))
;;;2305   	{				
;;;2306   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;2307   		{
;;;2308   		char i;
;;;2309   		for(i=0;i<NUMIST;i++)
;;;2310   			{
;;;2311   			if(mess_data[1]&(1<<i))
;;;2312   				{
;;;2313   				src[i]._ist_blok_cnt=0;
;;;2314   				src[i]._flags_tu=2;
;;;2315   				}
;;;2316   			}
;;;2317   		
;;;2318   		}				
;;;2319   	}*/
;;;2320   
;;;2321   
;;;2322   
;;;2323   /*else*/ 
;;;2324   bps_on_mask=0;
00120c  66b7              STR      r7,[r6,#0x68]  ; bps_on_mask
;;;2325   bps_off_mask=0;
00120e  66f7              STR      r7,[r6,#0x6c]  ; bps_off_mask
;;;2326   
;;;2327   if(mess_find_unvol(MESS2BPS_HNDL))
001210  20cd              MOVS     r0,#0xcd
001212  f7fffffe          BL       mess_find_unvol
;;;2328   	{
;;;2329   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;2330   		{
;;;2331   		bps_off_mask=0xffff;
;;;2332   		}
;;;2333   
;;;2334   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;2335   		{
;;;2336   		bps_off_mask=mess_data[1];
;;;2337   		}
;;;2338   
;;;2339   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;2340   		{
;;;2341   		bps_on_mask=mess_data[1];
;;;2342   		}
;;;2343   
;;;2344   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;2345   		{
;;;2346   		bps_on_mask=0xffffffff;
;;;2347   		}
;;;2348   
;;;2349   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;2350   		{
;;;2351   		bps_on_mask=mess_data[1];
;;;2352   		bps_off_mask=~(mess_data[1]);
;;;2353   		}
;;;2354   
;;;2355   
;;;2356   	for(i=0;i<=NUMIST;i++)
;;;2357   		{
;;;2358   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001216  f8df83d8          LDR      r8,|L1.5616|
00121a  f8dfb3d8          LDR      r11,|L1.5620|
00121e  b3f0              CBZ      r0,|L1.4766|
001220  49f5              LDR      r1,|L1.5624|
001222  6808              LDR      r0,[r1,#0]            ;2329  ; mess_data
001224  28ce              CMP      r0,#0xce              ;2329
001226  d102              BNE      |L1.4654|
001228  f64f72ff          MOV      r2,#0xffff            ;2331
00122c  66f2              STR      r2,[r6,#0x6c]         ;2331  ; bps_off_mask
                  |L1.4654|
00122e  28cf              CMP      r0,#0xcf              ;2334
001230  d101              BNE      |L1.4662|
001232  684a              LDR      r2,[r1,#4]            ;2336  ; mess_data
001234  66f2              STR      r2,[r6,#0x6c]         ;2336  ; bps_off_mask
                  |L1.4662|
001236  28d1              CMP      r0,#0xd1              ;2339
001238  d101              BNE      |L1.4670|
00123a  684a              LDR      r2,[r1,#4]            ;2341  ; mess_data
00123c  66b2              STR      r2,[r6,#0x68]         ;2341  ; bps_on_mask
                  |L1.4670|
00123e  28d2              CMP      r0,#0xd2              ;2344
001240  d102              BNE      |L1.4680|
001242  f04f32ff          MOV      r2,#0xffffffff        ;2346
001246  66b2              STR      r2,[r6,#0x68]         ;2346  ; bps_on_mask
                  |L1.4680|
001248  28d0              CMP      r0,#0xd0              ;2349
00124a  d104              BNE      |L1.4694|
00124c  6848              LDR      r0,[r1,#4]            ;2351  ; mess_data
00124e  66b0              STR      r0,[r6,#0x68]         ;2351  ; bps_on_mask
001250  ea6f0000          MVN      r0,r0                 ;2352
001254  66f0              STR      r0,[r6,#0x6c]         ;2352  ; bps_off_mask
                  |L1.4694|
001256  f04f0400          MOV      r4,#0                 ;2356
00125a  e030              B        |L1.4798|
                  |L1.4700|
00125c  6ef0              LDR      r0,[r6,#0x6c]  ; bps_off_mask
00125e  fa0af904          LSL      r9,r10,r4
001262  ea190f00          TST      r9,r0
001266  d009              BEQ      |L1.4732|
001268  ebc41004          RSB      r0,r4,r4,LSL #4
00126c  eb0800c0          ADD      r0,r8,r0,LSL #3
001270  f8301f44          LDRH     r1,[r0,#0x44]!
001274  f1010101          ADD      r1,r1,#1
001278  8001              STRH     r1,[r0,#0]
00127a  e005              B        |L1.4744|
                  |L1.4732|
;;;2359   		else bps[i]._blok_cnt=0;
00127c  ebc41004          RSB      r0,r4,r4,LSL #4
001280  eb0800c0          ADD      r0,r8,r0,LSL #3
001284  f8a07044          STRH     r7,[r0,#0x44]
                  |L1.4744|
;;;2360   		gran(&bps[i]._blok_cnt,0,50);
001288  ebc41004          RSB      r0,r4,r4,LSL #4
00128c  eb0805c0          ADD      r5,r8,r0,LSL #3
001290  f1050044          ADD      r0,r5,#0x44
001294  2232              MOVS     r2,#0x32
001296  2100              MOVS     r1,#0
001298  f7fffffe          BL       gran
;;;2361   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
00129c  e000              B        |L1.4768|
                  |L1.4766|
00129e  e013              B        |L1.4808|
                  |L1.4768|
0012a0  f9b50044          LDRSH    r0,[r5,#0x44]
0012a4  2814              CMP      r0,#0x14
0012a6  dd01              BLE      |L1.4780|
0012a8  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.4780|
;;;2362   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
0012ac  6eb0              LDR      r0,[r6,#0x68]  ; bps_on_mask
0012ae  ea190f00          TST      r9,r0
0012b2  d001              BEQ      |L1.4792|
0012b4  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.4792|
0012b8  f1040401          ADD      r4,r4,#1              ;2356
0012bc  b2e4              UXTB     r4,r4                 ;2356
                  |L1.4798|
0012be  f9bb0000          LDRSH    r0,[r11,#0]           ;2356  ; NUMIST
0012c2  4284              CMP      r4,r0                 ;2356
0012c4  ddca              BLE      |L1.4700|
0012c6  e072              B        |L1.5038|
                  |L1.4808|
;;;2363   	     }
;;;2364   
;;;2365   	
;;;2366   /*
;;;2367   
;;;2368   	if(bps_all_off_cnt>20)
;;;2369   		{
;;;2370   		for(i=0;i<=NUMIST;i++)
;;;2371   			{
;;;2372   	     	bps[i]._flags_tu=1;
;;;2373   	     	}
;;;2374   		}
;;;2375   	else if(bps_mask_off_cnt>20)
;;;2376   		{
;;;2377   		for(i=0;i<=NUMIST;i++)
;;;2378   			{
;;;2379   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;2380   	     	}
;;;2381   		}	
;;;2382   		
;;;2383   	else if(bps_mask_on_off_cnt>20)
;;;2384   		{
;;;2385   		for(i=0;i<=NUMIST;i++)
;;;2386   			{
;;;2387   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;2388   			else bps[i]._flags_tu=0;
;;;2389   	     	}
;;;2390   		}
;;;2391   		
;;;2392   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;2393   		{
;;;2394   		for(i=0;i<=NUMIST;i++)
;;;2395   			{
;;;2396   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;2397   	     	}
;;;2398   		}
;;;2399   */										
;;;2400   	}
;;;2401   
;;;2402   
;;;2403   else if(b1Hz_sh)
0012c8  7d70              LDRB     r0,[r6,#0x15]  ; b1Hz_sh
0012ca  b3e8              CBZ      r0,|L1.4936|
;;;2404   	{
;;;2405   	ptr__=0;
0012cc  f04f0400          MOV      r4,#0
;;;2406        for(i=0;i<=NUMIST;i++)
0012d0  4621              MOV      r1,r4
0012d2  f9bb0000          LDRSH    r0,[r11,#0]           ;2356
0012d6  e008              B        |L1.4842|
                  |L1.4824|
;;;2407   		{
;;;2408   	    bps[i]._flags_tu=1;
0012d8  ebc11201          RSB      r2,r1,r1,LSL #4
0012dc  eb0802c2          ADD      r2,r8,r2,LSL #3
0012e0  f882a02c          STRB     r10,[r2,#0x2c]
0012e4  f1010101          ADD      r1,r1,#1              ;2406
0012e8  b2c9              UXTB     r1,r1                 ;2406
                  |L1.4842|
0012ea  4281              CMP      r1,r0                 ;2406
0012ec  ddf4              BLE      |L1.4824|
;;;2409   	    }	
;;;2410     	     
;;;2411     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
0012ee  f04f0100          MOV      r1,#0
0012f2  e020              B        |L1.4918|
                  |L1.4852|
;;;2412     		{
;;;2413   		char ii,iii;
;;;2414   
;;;2415   		ii=(char)NUMIST;
0012f4  b2c2              UXTB     r2,r0
;;;2416   		//if(ii<0)ii=0;
;;;2417   		if(ii>32)ii=32;
0012f6  2a20              CMP      r2,#0x20
0012f8  d901              BLS      |L1.4862|
0012fa  f04f0220          MOV      r2,#0x20
                  |L1.4862|
;;;2418   		iii=numOfForvardBps;
0012fe  7eb3              LDRB     r3,[r6,#0x1a]  ; numOfForvardBps
;;;2419   		//if(iii<0)iii=0;
;;;2420   		if(iii>=NUMIST)iii=0;
001300  4283              CMP      r3,r0
001302  db01              BLT      |L1.4872|
001304  f04f0300          MOV      r3,#0
                  |L1.4872|
;;;2421   		iii+=i;
001308  440b              ADD      r3,r3,r1
00130a  b2db              UXTB     r3,r3
;;;2422   		iii=iii%ii;
00130c  fbb3f5f2          UDIV     r5,r3,r2
001310  fb023215          MLS      r2,r2,r5,r3
;;;2423   		
;;;2424     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
001314  ebc21202          RSB      r2,r2,r2,LSL #4
001318  eb0803c2          ADD      r3,r8,r2,LSL #3
00131c  789a              LDRB     r2,[r3,#2]
00131e  2a03              CMP      r2,#3
001320  d001              BEQ      |L1.4902|
001322  2a02              CMP      r2,#2
001324  d104              BNE      |L1.4912|
                  |L1.4902|
;;;2425     	         	{
;;;2426     	         	bps[iii]._flags_tu=0;
001326  f883702c          STRB     r7,[r3,#0x2c]
;;;2427     	         	ptr__++;
00132a  f1040401          ADD      r4,r4,#1
00132e  b2e4              UXTB     r4,r4
                  |L1.4912|
001330  f1010101          ADD      r1,r1,#1              ;2411
001334  b2c9              UXTB     r1,r1                 ;2411
                  |L1.4918|
001336  4281              CMP      r1,r0                 ;2411
001338  da04              BGE      |L1.4932|
00133a  4ab0              LDR      r2,|L1.5628|
00133c  f9b22000          LDRSH    r2,[r2,#0]            ;2411  ; num_necc
001340  4294              CMP      r4,r2                 ;2411
001342  dbd7              BLT      |L1.4852|
                  |L1.4932|
;;;2428     	         	}
;;;2429   			
;;;2430     	     }
;;;2431   	bps[numOfForvardBps_old]._flags_tu=0;
001344  7ef1              LDRB     r1,[r6,#0x1b]  ; numOfForvardBps_old
001346  e000              B        |L1.4938|
                  |L1.4936|
001348  e031              B        |L1.5038|
                  |L1.4938|
00134a  ebc11101          RSB      r1,r1,r1,LSL #4
00134e  eb0801c1          ADD      r1,r8,r1,LSL #3
001352  f881702c          STRB     r7,[r1,#0x2c]
;;;2432   
;;;2433   	if(main_1Hz_cnt<60)
001356  49aa              LDR      r1,|L1.5632|
001358  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00135c  293c              CMP      r1,#0x3c
00135e  da0d              BGE      |L1.4988|
;;;2434   		{
;;;2435        	for(i=0;i<=NUMIST;i++)
001360  f04f0100          MOV      r1,#0
001364  e008              B        |L1.4984|
                  |L1.4966|
;;;2436   			{
;;;2437   	     	bps[i]._flags_tu=0;
001366  ebc11201          RSB      r2,r1,r1,LSL #4
00136a  eb0802c2          ADD      r2,r8,r2,LSL #3
00136e  f882702c          STRB     r7,[r2,#0x2c]
001372  f1010101          ADD      r1,r1,#1              ;2435
001376  b2c9              UXTB     r1,r1                 ;2435
                  |L1.4984|
001378  4281              CMP      r1,r0                 ;2435
00137a  ddf4              BLE      |L1.4966|
                  |L1.4988|
;;;2438   	     	}	
;;;2439   		}
;;;2440   	if(ipsBlckStat)
00137c  49a1              LDR      r1,|L1.5636|
00137e  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
001380  b169              CBZ      r1,|L1.5022|
;;;2441   		{
;;;2442        	for(i=0;i<=NUMIST;i++)
001382  f04f0100          MOV      r1,#0
001386  e008              B        |L1.5018|
                  |L1.5000|
;;;2443   			{
;;;2444   	     	bps[i]._flags_tu=1;
001388  ebc11201          RSB      r2,r1,r1,LSL #4
00138c  eb0802c2          ADD      r2,r8,r2,LSL #3
001390  f882a02c          STRB     r10,[r2,#0x2c]
001394  f1010101          ADD      r1,r1,#1              ;2442
001398  b2c9              UXTB     r1,r1                 ;2442
                  |L1.5018|
00139a  4281              CMP      r1,r0                 ;2442
00139c  ddf4              BLE      |L1.5000|
                  |L1.5022|
;;;2445   	     	}
;;;2446   		}
;;;2447   
;;;2448        for(i=0;i<=NUMIST;i++)
00139e  f04f0100          MOV      r1,#0
0013a2  e002              B        |L1.5034|
                  |L1.5028|
0013a4  f1010101          ADD      r1,r1,#1
0013a8  b2c9              UXTB     r1,r1
                  |L1.5034|
0013aa  4281              CMP      r1,r0
0013ac  ddfa              BLE      |L1.5028|
                  |L1.5038|
;;;2449   		{
;;;2450   	    //if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
;;;2451   	   	}	
;;;2452   		 
;;;2453     	}
;;;2454   
;;;2455   
;;;2456   for(i=0;i<NUMIST;i++)
0013ae  f04f0000          MOV      r0,#0
;;;2457        {
;;;2458        if(bps[i]._ist_blok_host_cnt!=0)
;;;2459           {
;;;2460           bps[i]._flags_tu=99;
0013b2  f04f0463          MOV      r4,#0x63
0013b6  f9bb3000          LDRSH    r3,[r11,#0]           ;2356
0013ba  e00d              B        |L1.5080|
                  |L1.5052|
0013bc  ebc01100          RSB      r1,r0,r0,LSL #4       ;2458
0013c0  eb0801c1          ADD      r1,r8,r1,LSL #3       ;2458
0013c4  6c0a              LDR      r2,[r1,#0x40]         ;2458
0013c6  b122              CBZ      r2,|L1.5074|
0013c8  f881402c          STRB     r4,[r1,#0x2c]
;;;2461   		bps[i]._ist_blok_host_cnt--;
0013cc  f1a20201          SUB      r2,r2,#1
0013d0  640a              STR      r2,[r1,#0x40]
                  |L1.5074|
0013d2  f1000001          ADD      r0,r0,#1              ;2456
0013d6  b2c0              UXTB     r0,r0                 ;2456
                  |L1.5080|
0013d8  4298              CMP      r0,r3                 ;2456
0013da  dbef              BLT      |L1.5052|
;;;2462           }
;;;2463        }
;;;2464   
;;;2465   
;;;2466   
;;;2467   
;;;2468   b1Hz_sh=0;
0013dc  7577              STRB     r7,[r6,#0x15]
;;;2469   
;;;2470   
;;;2471   num_of_wrks_bps=0;
0013de  7477              STRB     r7,[r6,#0x11]
;;;2472   tempUS=0;
0013e0  f04f0100          MOV      r1,#0
;;;2473   for(i=0;i<NUMIST;i++)
0013e4  4608              MOV      r0,r1
0013e6  e011              B        |L1.5132|
                  |L1.5096|
;;;2474   	{
;;;2475   	if(bps[i]._state==bsWRK)
0013e8  ebc01200          RSB      r2,r0,r0,LSL #4
0013ec  eb0802c2          ADD      r2,r8,r2,LSL #3
0013f0  7894              LDRB     r4,[r2,#2]
0013f2  2c02              CMP      r4,#2
0013f4  d107              BNE      |L1.5126|
;;;2476   		{
;;;2477   		num_of_wrks_bps++;
0013f6  7c74              LDRB     r4,[r6,#0x11]  ; num_of_wrks_bps
0013f8  f1040401          ADD      r4,r4,#1
0013fc  7474              STRB     r4,[r6,#0x11]
;;;2478   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0013fe  69d2              LDR      r2,[r2,#0x1c]
001400  428a              CMP      r2,r1
001402  dd00              BLE      |L1.5126|
001404  b291              UXTH     r1,r2
                  |L1.5126|
001406  f1000001          ADD      r0,r0,#1              ;2473
00140a  b2c0              UXTB     r0,r0                 ;2473
                  |L1.5132|
00140c  4298              CMP      r0,r3                 ;2473
00140e  dbeb              BLT      |L1.5096|
;;;2479   		}
;;;2480   	}
;;;2481   Ubpsmax=tempUS;
001410  87f1              STRH     r1,[r6,#0x3e]
;;;2482   
;;;2483   //bPARALLEL_ENOUG=0;
;;;2484   //bPARALLEL_NOT_ENOUG=1;
;;;2485   /*
;;;2486   for(i=0;i<NUMIST;i++)
;;;2487   	{
;;;2488   	if(bps[i]._Ti>=TSIGN)
;;;2489   		{
;;;2490   		bPARALLEL_ENOUG=1;
;;;2491   		}
;;;2492   	if(bps[i]._Ti>=(TSIGN-5))
;;;2493   		{
;;;2494   		bPARALLEL_NOT_ENOUG=0;
;;;2495   		}
;;;2496   	}
;;;2497   
;;;2498   if(bPARALLEL_ENOUG==1)
;;;2499   	{
;;;2500   	bPARALLEL=1;
;;;2501   	}
;;;2502   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
;;;2503   	{
;;;2504   	bPARALLEL=0;
;;;2505   	}*/
;;;2506   }
001412  e8bd9ff0          POP      {r4-r12,pc}
;;;2507   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;2514   //-----------------------------------------------
;;;2515   void powerAntiAliasingHndl(void)
001416  b570              PUSH     {r4-r6,lr}
;;;2516   {
;;;2517   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
001418  230a              MOVS     r3,#0xa
00141a  4c7c              LDR      r4,|L1.5644|
00141c  487a              LDR      r0,|L1.5640|
;;;2518   	{
;;;2519   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;2520   	if(powerSummaryCnt>=10)
;;;2521   		{
;;;2522   		power_summary=power_summary_tempo;
;;;2523   		}
;;;2524   	}
;;;2525   else powerSummaryCnt=0;
00141e  2500              MOVS     r5,#0
001420  6822              LDR      r2,[r4,#0]            ;2517  ; power_summary_tempo_old
001422  6800              LDR      r0,[r0,#0]            ;2517  ; power_summary_tempo
001424  fbb2f6f3          UDIV     r6,r2,r3              ;2517
001428  fbb0f1f3          UDIV     r1,r0,r3              ;2517
00142c  4a78              LDR      r2,|L1.5648|
00142e  42b1              CMP      r1,r6                 ;2517
001430  d10b              BNE      |L1.5194|
001432  7811              LDRB     r1,[r2,#0]            ;2519  ; powerSummaryCnt
001434  290f              CMP      r1,#0xf               ;2519
001436  d202              BCS      |L1.5182|
001438  f1010101          ADD      r1,r1,#1              ;2519
00143c  7011              STRB     r1,[r2,#0]            ;2519
                  |L1.5182|
00143e  7811              LDRB     r1,[r2,#0]            ;2520  ; powerSummaryCnt
001440  290a              CMP      r1,#0xa               ;2520
001442  d303              BCC      |L1.5196|
001444  4973              LDR      r1,|L1.5652|
001446  6008              STR      r0,[r1,#0]            ;2522  ; power_summary
001448  e000              B        |L1.5196|
                  |L1.5194|
00144a  7015              STRB     r5,[r2,#0]
                  |L1.5196|
;;;2526   power_summary_tempo_old=power_summary_tempo;
00144c  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;2527   
;;;2528   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
00144e  4872              LDR      r0,|L1.5656|
001450  4c72              LDR      r4,|L1.5660|
001452  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
001456  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00145a  fbb0f1f3          UDIV     r1,r0,r3
00145e  fbb2f3f3          UDIV     r3,r2,r3
;;;2529   	{
;;;2530   	if(powerCurrentCnt<15)powerCurrentCnt++;
001462  4a6f              LDR      r2,|L1.5664|
001464  4299              CMP      r1,r3                 ;2528
001466  d10b              BNE      |L1.5248|
001468  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00146a  290f              CMP      r1,#0xf
00146c  d202              BCS      |L1.5236|
00146e  f1010101          ADD      r1,r1,#1
001472  7011              STRB     r1,[r2,#0]
                  |L1.5236|
;;;2531   	if(powerCurrentCnt>=10)
001474  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
001476  290a              CMP      r1,#0xa
001478  d303              BCC      |L1.5250|
;;;2532   		{
;;;2533   		power_current=power_current_tempo;
00147a  496a              LDR      r1,|L1.5668|
00147c  8008              STRH     r0,[r1,#0]
00147e  e000              B        |L1.5250|
                  |L1.5248|
;;;2534   		}
;;;2535   	}
;;;2536   else powerCurrentCnt=0;
001480  7015              STRB     r5,[r2,#0]
                  |L1.5250|
;;;2537   power_current_tempo_old=power_current_tempo;
001482  8020              STRH     r0,[r4,#0]
                  |L1.5252|
;;;2538   }
001484  e689              B        |L1.4506|
;;;2539   
                          ENDP

                  ips_current_average_hndl PROC
;;;2540   //-----------------------------------------------
;;;2541   void ips_current_average_hndl(void)
001486  e92d43f0          PUSH     {r4-r9,lr}
;;;2542   {
00148a  b085              SUB      sp,sp,#0x14
;;;2543   if(++ica_timer_cnt>=10)
00148c  4c66              LDR      r4,|L1.5672|
;;;2544   	{
;;;2545   	ica_timer_cnt=0;
;;;2546   	ica_plazma[0]++;
;;;2547   
;;;2548   	ica_my_current=bps_I;
;;;2549   
;;;2550   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
00148e  4e67              LDR      r6,|L1.5676|
001490  2500              MOVS     r5,#0                 ;2545
001492  7820              LDRB     r0,[r4,#0]            ;2543  ; ica_timer_cnt
001494  1c40              ADDS     r0,r0,#1              ;2543
001496  b2c0              UXTB     r0,r0                 ;2543
001498  7020              STRB     r0,[r4,#0]            ;2543
00149a  280a              CMP      r0,#0xa               ;2543
00149c  d340              BCC      |L1.5408|
00149e  7025              STRB     r5,[r4,#0]            ;2545
0014a0  f8dfc18c          LDR      r12,|L1.5680|
0014a4  f89c0000          LDRB     r0,[r12,#0]           ;2546  ; ica_plazma
0014a8  f1000001          ADD      r0,r0,#1              ;2546
0014ac  f88c0000          STRB     r0,[r12,#0]           ;2546
0014b0  4860              LDR      r0,|L1.5684|
0014b2  4961              LDR      r1,|L1.5688|
0014b4  f9b00000          LDRSH    r0,[r0,#0]            ;2548  ; bps_I
0014b8  8008              STRH     r0,[r1,#0]            ;2548
0014ba  4960              LDR      r1,|L1.5692|
;;;2551   		{
;;;2552   		ica_plazma[1]++;
;;;2553   		ica_u_necc--;
0014bc  f8df8180          LDR      r8,|L1.5696|
0014c0  4662              MOV      r2,r12                ;2546
0014c2  4637              MOV      r7,r6                 ;2550
0014c4  f9b11000          LDRSH    r1,[r1,#0]            ;2550  ; ica_your_current
0014c8  7852              LDRB     r2,[r2,#1]            ;2552
0014ca  f9b83000          LDRSH    r3,[r8,#0]
0014ce  f9b77000          LDRSH    r7,[r7,#0]            ;2550
0014d2  4288              CMP      r0,r1                 ;2550
0014d4  dd06              BLE      |L1.5348|
0014d6  eba00901          SUB      r9,r0,r1              ;2550
0014da  f1b90f0a          CMP      r9,#0xa               ;2550
0014de  db01              BLT      |L1.5348|
0014e0  2f01              CMP      r7,#1                 ;2550
0014e2  d007              BEQ      |L1.5364|
                  |L1.5348|
;;;2554   		}
;;;2555   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
0014e4  4288              CMP      r0,r1
0014e6  da16              BGE      |L1.5398|
0014e8  1a08              SUBS     r0,r1,r0
0014ea  280a              CMP      r0,#0xa
0014ec  db13              BLT      |L1.5398|
0014ee  2f01              CMP      r7,#1
0014f0  d009              BEQ      |L1.5382|
0014f2  e010              B        |L1.5398|
                  |L1.5364|
0014f4  f1020201          ADD      r2,r2,#1              ;2552
0014f8  f88c2001          STRB     r2,[r12,#1]           ;2552
0014fc  f1a30301          SUB      r3,r3,#1              ;2553
001500  f8a83000          STRH     r3,[r8,#0]            ;2553
001504  e007              B        |L1.5398|
                  |L1.5382|
;;;2556   		{
;;;2557   		ica_plazma[1]--;
001506  f1a20201          SUB      r2,r2,#1
00150a  f88c2001          STRB     r2,[r12,#1]
;;;2558   		ica_u_necc++;
00150e  f1030301          ADD      r3,r3,#1
001512  f8a83000          STRH     r3,[r8,#0]
                  |L1.5398|
;;;2559   		}
;;;2560   	gran(&ica_u_necc,-20,20);
001516  2214              MOVS     r2,#0x14
001518  4251              RSBS     r1,r2,#0
00151a  4849              LDR      r0,|L1.5696|
00151c  f7fffffe          BL       gran
                  |L1.5408|
;;;2561   	}
;;;2562   
;;;2563   if((ica_timer_cnt==8)&&(ICA_EN==1))
001520  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;2564   	{
;;;2565   	char modbus_buff[20],i;
;;;2566   	short crc_temp;
;;;2567   
;;;2568   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
001522  f8df8120          LDR      r8,|L1.5700|
;;;2569   	modbus_buff[1] = 4;
;;;2570   	modbus_buff[2] = 0;
;;;2571   	modbus_buff[3] = 2;
;;;2572   	modbus_buff[4] = 0;	
;;;2573   	modbus_buff[5] = 1;
;;;2574   
;;;2575   	crc_temp= CRC16_2(modbus_buff,6);
;;;2576   
;;;2577   	modbus_buff[6]= (char)crc_temp;
;;;2578   	modbus_buff[7]= (char)(crc_temp>>8);
;;;2579   
;;;2580   	if(ICA_CH==0)
001526  4f48              LDR      r7,|L1.5704|
001528  2808              CMP      r0,#8                 ;2563
00152a  d125              BNE      |L1.5496|
00152c  8830              LDRH     r0,[r6,#0]            ;2563  ; ICA_EN
00152e  2801              CMP      r0,#1                 ;2563
001530  d122              BNE      |L1.5496|
001532  f8b80000          LDRH     r0,[r8,#0]            ;2568  ; ICA_MODBUS_ADDRESS
001536  f88d0000          STRB     r0,[sp,#0]            ;2568
00153a  f04f0004          MOV      r0,#4                 ;2569
00153e  f88d0001          STRB     r0,[sp,#1]            ;2569
001542  f88d5002          STRB     r5,[sp,#2]            ;2570
001546  f04f0002          MOV      r0,#2                 ;2571
00154a  f88d0003          STRB     r0,[sp,#3]            ;2571
00154e  f88d5004          STRB     r5,[sp,#4]            ;2572
001552  f04f0001          MOV      r0,#1                 ;2573
001556  f88d0005          STRB     r0,[sp,#5]            ;2573
00155a  f04f0106          MOV      r1,#6                 ;2575
00155e  4668              MOV      r0,sp                 ;2575
001560  f7fffffe          BL       CRC16_2
001564  f88d0006          STRB     r0,[sp,#6]            ;2577
001568  ea4f2020          ASR      r0,r0,#8              ;2578
00156c  f88d0007          STRB     r0,[sp,#7]            ;2578
001570  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
001574  b3c8              CBZ      r0,|L1.5610|
;;;2581   		{
;;;2582   		for (i=0;i<8;i++)
;;;2583   			{
;;;2584   			putchar_sc16is700(modbus_buff[i]);
;;;2585   			}
;;;2586   		}
;;;2587   	else if(ICA_CH==1)
001576  2801              CMP      r0,#1
                  |L1.5496|
;;;2588   		{
;;;2589   	/*	static U8 rem_IP[4];
;;;2590   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
;;;2591   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
;;;2592   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
;;;2593   		rem_IP[3]=ICA_MODBUS_TCP_IP4;*/
;;;2594     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;2595     		if (tcp_soc_avg != 0) 
;;;2596   			{
;;;2597       		
;;;2598   			//tcp_connect_stat=0;
;;;2599       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;2600   			/*while(!tcp_connect_stat)
;;;2601   				{
;;;2602   				}*/
;;;2603   			//delay_us(500);
;;;2604   			//tcp_close(tcp_soc_avg);
;;;2605   
;;;2606   			}
;;;2607   		}
;;;2608   	}
;;;2609   
;;;2610   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;2611   	{
;;;2612   	//if(tcp_connect_stat)
;;;2613   		{
;;;2614   		//tcp_close(tcp_soc_avg);
;;;2615   		//tcp_connect_stat=3;
;;;2616   		}
;;;2617   	}
;;;2618   
;;;2619   if((main_kb_cnt==(TBAT*60)-21)&&(ICA_EN==1))
001578  4834              LDR      r0,|L1.5708|
00157a  f06f0214          MVN      r2,#0x14
00157e  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
001582  ebc01100          RSB      r1,r0,r0,LSL #4
001586  eb020181          ADD      r1,r2,r1,LSL #2
00158a  4a18              LDR      r2,|L1.5612|
00158c  f9b22044          LDRSH    r2,[r2,#0x44]  ; main_kb_cnt
001590  4291              CMP      r1,r2
001592  d166              BNE      |L1.5730|
001594  8831              LDRH     r1,[r6,#0]  ; ICA_EN
001596  2901              CMP      r1,#1
001598  d163              BNE      |L1.5730|
;;;2620   	{
;;;2621   	char modbus_buff[20],i;
;;;2622   	short crc_temp;
;;;2623   
;;;2624   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
00159a  f8b81000          LDRH     r1,[r8,#0]  ; ICA_MODBUS_ADDRESS
00159e  f88d1000          STRB     r1,[sp,#0]
;;;2625   	modbus_buff[1] = 6;
0015a2  f04f0106          MOV      r1,#6
0015a6  f88d1001          STRB     r1,[sp,#1]
;;;2626   	modbus_buff[2] = 0;
0015aa  f88d5002          STRB     r5,[sp,#2]
;;;2627   	modbus_buff[3] = 30;
0015ae  f04f011e          MOV      r1,#0x1e
0015b2  f88d1003          STRB     r1,[sp,#3]
;;;2628   	modbus_buff[4] = (char)(TBAT/256);	
0015b6  ea4f71e0          ASR      r1,r0,#31
0015ba  eb006111          ADD      r1,r0,r1,LSR #24
0015be  ea4f2221          ASR      r2,r1,#8
0015c2  f88d2004          STRB     r2,[sp,#4]
;;;2629   	modbus_buff[5] = (char)(TBAT%256);
0015c6  f88d0005          STRB     r0,[sp,#5]
;;;2630   
;;;2631   	crc_temp= CRC16_2(modbus_buff,6);
0015ca  f04f0106          MOV      r1,#6
0015ce  4668              MOV      r0,sp
0015d0  f7fffffe          BL       CRC16_2
;;;2632   
;;;2633   	modbus_buff[6]= (char)crc_temp;
0015d4  f88d0006          STRB     r0,[sp,#6]
;;;2634   	modbus_buff[7]= (char)(crc_temp>>8);
0015d8  ea4f2020          ASR      r0,r0,#8
0015dc  f88d0007          STRB     r0,[sp,#7]
;;;2635   
;;;2636   	if(ICA_CH==0)
0015e0  8838              LDRH     r0,[r7,#0]  ; ICA_CH
0015e2  2800              CMP      r0,#0
0015e4  d13d              BNE      |L1.5730|
;;;2637   		{
;;;2638   		for (i=0;i<8;i++)
0015e6  4604              MOV      r4,r0
0015e8  e032              B        |L1.5712|
                  |L1.5610|
0015ea  e03d              B        |L1.5736|
                  |L1.5612|
                          DCD      ||area_number.26||
                  |L1.5616|
                          DCD      bps
                  |L1.5620|
                          DCD      NUMIST
                  |L1.5624|
                          DCD      mess_data
                  |L1.5628|
                          DCD      num_necc
                  |L1.5632|
                          DCD      main_1Hz_cnt
                  |L1.5636|
                          DCD      ipsBlckStat
                  |L1.5640|
                          DCD      power_summary_tempo
                  |L1.5644|
                          DCD      power_summary_tempo_old
                  |L1.5648|
                          DCD      powerSummaryCnt
                  |L1.5652|
                          DCD      power_summary
                  |L1.5656|
                          DCD      power_current_tempo
                  |L1.5660|
                          DCD      power_current_tempo_old
                  |L1.5664|
                          DCD      powerCurrentCnt
                  |L1.5668|
                          DCD      power_current
                  |L1.5672|
                          DCD      ica_timer_cnt
                  |L1.5676|
                          DCD      ICA_EN
                  |L1.5680|
                          DCD      ica_plazma
                  |L1.5684|
                          DCD      bps_I
                  |L1.5688|
                          DCD      ica_my_current
                  |L1.5692|
                          DCD      ica_your_current
                  |L1.5696|
                          DCD      ica_u_necc
                  |L1.5700|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.5704|
                          DCD      ICA_CH
                  |L1.5708|
                          DCD      TBAT
                  |L1.5712|
001650  466d              MOV      r5,sp                 ;2621
                  |L1.5714|
;;;2639   			{
;;;2640   			putchar_sc16is700(modbus_buff[i]);
001652  5d28              LDRB     r0,[r5,r4]
001654  f7fffffe          BL       putchar_sc16is700
001658  f1040401          ADD      r4,r4,#1              ;2638
00165c  b2e4              UXTB     r4,r4                 ;2638
00165e  2c08              CMP      r4,#8                 ;2638
001660  d3f7              BCC      |L1.5714|
                  |L1.5730|
;;;2641   			}
;;;2642   		}
;;;2643   	}
;;;2644   
;;;2645   }
001662  b005              ADD      sp,sp,#0x14
001664  e8bd83f0          POP      {r4-r9,pc}
                  |L1.5736|
001668  f04f0400          MOV      r4,#0                 ;2582
00166c  46e9              MOV      r9,sp                 ;2565
                  |L1.5742|
00166e  f8190004          LDRB     r0,[r9,r4]            ;2584
001672  f7fffffe          BL       putchar_sc16is700
001676  f1040401          ADD      r4,r4,#1              ;2582
00167a  b2e4              UXTB     r4,r4                 ;2582
00167c  2c08              CMP      r4,#8                 ;2582
00167e  d3f6              BCC      |L1.5742|
001680  e77a              B        |L1.5496|
;;;2646   
                          ENDP

                  bps_drv PROC
;;;2744   //-----------------------------------------------
;;;2745   void bps_drv(char in)
001682  e92d41f0          PUSH     {r4-r8,lr}
;;;2746   {
001686  4607              MOV      r7,r0
;;;2747   char temp;
;;;2748   
;;;2749   if (bps[in]._device!=dSRC) return;
001688  49fa              LDR      r1,|L1.6772|
00168a  ebc71007          RSB      r0,r7,r7,LSL #4
00168e  f8112030          LDRB     r2,[r1,r0,LSL #3]
001692  2a03              CMP      r2,#3
001694  d175              BNE      |L1.6018|
;;;2750   temp=bps[in]._flags_tm;
001696  eb0104c0          ADD      r4,r1,r0,LSL #3
00169a  f8945046          LDRB     r5,[r4,#0x46]
;;;2751   if(temp&(1<<AV_T))
;;;2752   	{
;;;2753   	if(bps[in]._temp_av_cnt<10/*1200*/) 
;;;2754   		{
;;;2755   		bps[in]._temp_av_cnt++;
;;;2756   		if(bps[in]._temp_av_cnt>=10/*1200*/)
;;;2757   			{
;;;2758   			bps[in]._temp_av_cnt=10/*1200*/;
00169e  f04f060a          MOV      r6,#0xa
0016a2  07a8              LSLS     r0,r5,#30             ;2751
0016a4  d515              BPL      |L1.5842|
0016a6  f9b4104a          LDRSH    r1,[r4,#0x4a]         ;2753
0016aa  290a              CMP      r1,#0xa               ;2753
0016ac  da22              BGE      |L1.5876|
0016ae  f1010101          ADD      r1,r1,#1              ;2755
0016b2  b208              SXTH     r0,r1                 ;2755
0016b4  f8a4004a          STRH     r0,[r4,#0x4a]         ;2755
0016b8  280a              CMP      r0,#0xa               ;2756
0016ba  db1b              BLT      |L1.5876|
0016bc  f8a4604a          STRH     r6,[r4,#0x4a]
;;;2759   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0016c0  7860              LDRB     r0,[r4,#1]
0016c2  07c0              LSLS     r0,r0,#31
0016c4  d116              BNE      |L1.5876|
0016c6  2201              MOVS     r2,#1
0016c8  2100              MOVS     r1,#0
0016ca  4638              MOV      r0,r7
0016cc  f7fffffe          BL       avar_bps_hndl
0016d0  e010              B        |L1.5876|
                  |L1.5842|
;;;2760   			}
;;;2761   		}
;;;2762   	}
;;;2763   
;;;2764   else if(!(temp&(1<<AV_T)))
;;;2765   	{
;;;2766   	if(bps[in]._temp_av_cnt) 
0016d2  f9b4104a          LDRSH    r1,[r4,#0x4a]
0016d6  b169              CBZ      r1,|L1.5876|
;;;2767   		{
;;;2768   		bps[in]._temp_av_cnt--;
0016d8  f1a10101          SUB      r1,r1,#1
0016dc  b208              SXTH     r0,r1
0016de  f8a4004a          STRH     r0,[r4,#0x4a]
;;;2769   		if(!bps[in]._temp_av_cnt)
0016e2  b938              CBNZ     r0,|L1.5876|
;;;2770   			{
;;;2771   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0016e4  7860              LDRB     r0,[r4,#1]
0016e6  07c0              LSLS     r0,r0,#31
0016e8  d004              BEQ      |L1.5876|
0016ea  2200              MOVS     r2,#0
0016ec  4611              MOV      r1,r2
0016ee  4638              MOV      r0,r7
0016f0  f7fffffe          BL       avar_bps_hndl
                  |L1.5876|
;;;2772   			}
;;;2773   		} 	
;;;2774   
;;;2775   	}
;;;2776   
;;;2777   if((temp&(1<<AVUMAX)))
0016f4  0728              LSLS     r0,r5,#28
0016f6  f04f0800          MOV      r8,#0                 ;2759
0016fa  d515              BPL      |L1.5928|
;;;2778   	{
;;;2779   	if(bps[in]._umax_av_cnt<10) 
0016fc  f9b4104c          LDRSH    r1,[r4,#0x4c]
001700  290a              CMP      r1,#0xa
001702  da26              BGE      |L1.5970|
;;;2780   		{
;;;2781   		bps[in]._umax_av_cnt++;
001704  f1010101          ADD      r1,r1,#1
001708  b208              SXTH     r0,r1
00170a  f8a4004c          STRH     r0,[r4,#0x4c]
;;;2782   		if(bps[in]._umax_av_cnt>=10)
00170e  280a              CMP      r0,#0xa
001710  db1f              BLT      |L1.5970|
;;;2783   			{ 
;;;2784   			bps[in]._umax_av_cnt=10;
001712  f8a4604c          STRH     r6,[r4,#0x4c]
;;;2785   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
001716  7860              LDRB     r0,[r4,#1]
001718  0780              LSLS     r0,r0,#30
00171a  d41a              BMI      |L1.5970|
00171c  2201              MOVS     r2,#1
00171e  4611              MOV      r1,r2
001720  4638              MOV      r0,r7
001722  f7fffffe          BL       avar_bps_hndl
001726  e014              B        |L1.5970|
                  |L1.5928|
;;;2786   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;2787   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2788   				{
;;;2789   				apv_cnt[in,0]=APV_INIT;
;;;2790   				apv_cnt[in,1]=APV_INIT;
;;;2791   				apv_cnt[in,2]=APV_INIT;
;;;2792   				apv_flags[in]=afOFF;
;;;2793   				}				*/
;;;2794   						
;;;2795   			}
;;;2796   		} 
;;;2797   	}		
;;;2798   else if(!(temp&(1<<AVUMAX)))
;;;2799   	{
;;;2800   	if(bps[in]._umax_av_cnt>0) 
001728  f9b4104c          LDRSH    r1,[r4,#0x4c]
00172c  2900              CMP      r1,#0
00172e  dd0d              BLE      |L1.5964|
;;;2801   		{
;;;2802   		bps[in]._umax_av_cnt--;
001730  f1a10101          SUB      r1,r1,#1
001734  b208              SXTH     r0,r1
001736  f8a4004c          STRH     r0,[r4,#0x4c]
;;;2803   		if(bps[in]._umax_av_cnt==0)
00173a  b950              CBNZ     r0,|L1.5970|
;;;2804   			{
;;;2805   			bps[in]._umax_av_cnt=0;
;;;2806   			avar_bps_hndl(in,1,0);
00173c  f04f0200          MOV      r2,#0
001740  f04f0101          MOV      r1,#1
001744  4638              MOV      r0,r7
001746  f7fffffe          BL       avar_bps_hndl
00174a  e002              B        |L1.5970|
                  |L1.5964|
;;;2807   	 //		apv_cnt[in,0]=0;
;;;2808   	//		apv_cnt[in,1]=0;
;;;2809   	 //		apv_cnt[in,2]=0;			
;;;2810   			}
;;;2811   		}
;;;2812   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00174c  da01              BGE      |L1.5970|
00174e  f8a4804c          STRH     r8,[r4,#0x4c]
                  |L1.5970|
;;;2813   	}
;;;2814   
;;;2815   if(temp&(1<<AVUMIN))
001752  06e8              LSLS     r0,r5,#27
001754  d516              BPL      |L1.6020|
;;;2816   	{
;;;2817   	if(bps[in]._umin_av_cnt<10) 
001756  f9b4004e          LDRSH    r0,[r4,#0x4e]
00175a  280a              CMP      r0,#0xa
00175c  da20              BGE      |L1.6048|
;;;2818   		{
;;;2819   		bps[in]._umin_av_cnt++;
00175e  f1000001          ADD      r0,r0,#1
001762  b200              SXTH     r0,r0
001764  f8a4004e          STRH     r0,[r4,#0x4e]
;;;2820   		if(bps[in]._umin_av_cnt>=10)
001768  280a              CMP      r0,#0xa
00176a  db19              BLT      |L1.6048|
;;;2821   			{ 
;;;2822   			bps[in]._umin_av_cnt=10;
00176c  f8a4604e          STRH     r6,[r4,#0x4e]
;;;2823   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
001770  7860              LDRB     r0,[r4,#1]
001772  0740              LSLS     r0,r0,#29
001774  d414              BMI      |L1.6048|
001776  2201              MOVS     r2,#1
001778  2102              MOVS     r1,#2
00177a  4638              MOV      r0,r7
00177c  f7fffffe          BL       avar_bps_hndl
001780  e00e              B        |L1.6048|
                  |L1.6018|
001782  e045              B        |L1.6160|
                  |L1.6020|
;;;2824   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;2825   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2826   				{
;;;2827   				apv_cnt[in,0]=APV_INIT;
;;;2828   				apv_cnt[in,1]=APV_INIT;
;;;2829   				apv_cnt[in,2]=APV_INIT;
;;;2830   				apv_flags[in]=afOFF;
;;;2831   				}*/				
;;;2832   			}
;;;2833   		} 
;;;2834   	}	
;;;2835   	
;;;2836   else if(!(temp&(1<<AVUMIN)))
;;;2837   	{
;;;2838   	if(bps[in]._umin_av_cnt) 
001784  f9b4004e          LDRSH    r0,[r4,#0x4e]
001788  b150              CBZ      r0,|L1.6048|
;;;2839   		{
;;;2840   		bps[in]._umin_av_cnt--;
00178a  f1a00001          SUB      r0,r0,#1
00178e  b200              SXTH     r0,r0
001790  f8a4004e          STRH     r0,[r4,#0x4e]
;;;2841   		if(bps[in]._umin_av_cnt==0)
001794  b920              CBNZ     r0,|L1.6048|
;;;2842   			{
;;;2843   			bps[in]._umin_av_cnt=0;
;;;2844   			avar_bps_hndl(in,2,0);
001796  2200              MOVS     r2,#0
001798  2102              MOVS     r1,#2
00179a  4638              MOV      r0,r7
00179c  f7fffffe          BL       avar_bps_hndl
                  |L1.6048|
;;;2845   		//	apv_cnt[in,0]=0;
;;;2846   		//	apv_cnt[in,1]=0;
;;;2847   		//	apv_cnt[in,2]=0;
;;;2848   			}
;;;2849   		}
;;;2850   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2851   	}
;;;2852   
;;;2853   //bps[in]._state=bsOFF;
;;;2854   
;;;2855   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0017a0  7860              LDRB     r0,[r4,#1]
0017a2  0700              LSLS     r0,r0,#28
0017a4  d003              BEQ      |L1.6062|
0017a6  f04f0005          MOV      r0,#5
0017aa  70a0              STRB     r0,[r4,#2]
0017ac  e016              B        |L1.6108|
                  |L1.6062|
;;;2856   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0017ae  48b2              LDR      r0,|L1.6776|
0017b0  7800              LDRB     r0,[r0,#0]  ; net_av
0017b2  b128              CBZ      r0,|L1.6080|
0017b4  78e0              LDRB     r0,[r4,#3]
0017b6  2814              CMP      r0,#0x14
0017b8  d902              BLS      |L1.6080|
;;;2857   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0017ba  f8848002          STRB     r8,[r4,#2]
0017be  e00d              B        |L1.6108|
                  |L1.6080|
;;;2858   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0017c0  f8940046          LDRB     r0,[r4,#0x46]
0017c4  0680              LSLS     r0,r0,#26
0017c6  d503              BPL      |L1.6096|
0017c8  f04f0003          MOV      r0,#3
0017cc  70a0              STRB     r0,[r4,#2]
0017ce  e005              B        |L1.6108|
                  |L1.6096|
;;;2859   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0017d0  78e0              LDRB     r0,[r4,#3]
0017d2  2814              CMP      r0,#0x14
0017d4  d202              BCS      |L1.6108|
0017d6  f04f0002          MOV      r0,#2
0017da  70a0              STRB     r0,[r4,#2]
                  |L1.6108|
;;;2860   
;;;2861   
;;;2862   
;;;2863   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2864   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2865   //else bps[0]._state=ssNOT;
;;;2866   
;;;2867   //bps[in]._is_ready=0;
;;;2868   //bps[in]._is_wrk=0;
;;;2869   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2870   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2871   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2872   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2873   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2874   //	{
;;;2875   //	bps[in]._flags_bp='B';// заблокирован
;;;2876   //	bps[in]._is_ready=1;
;;;2877   //	}
;;;2878   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2879   //     {
;;;2880   //     bps[in]._flags_bp='W';// работает
;;;2881   //     bps[in]._is_ready=1;
;;;2882   //     bps[in]._is_wrk=1;
;;;2883        
;;;2884   //     }
;;;2885   //else bps[in]._is_ready=1;     
;;;2886   
;;;2887   
;;;2888   
;;;2889   
;;;2890   
;;;2891   /*
;;;2892   bps[in]._flags_tu&=BIN8(11111110);
;;;2893   if(bps[in]._ist_blok_cnt)
;;;2894   	{
;;;2895   	bps[in]._ist_blok_cnt--;
;;;2896   	bps[in]._flags_tu|=BIN8(1);
;;;2897   	}
;;;2898   
;;;2899   	   */ 
;;;2900   
;;;2901   //Пересброс БПСа при потере связи
;;;2902   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0017dc  78e0              LDRB     r0,[r4,#3]
0017de  280a              CMP      r0,#0xa
0017e0  d306              BCC      |L1.6128|
0017e2  f894002c          LDRB     r0,[r4,#0x2c]
0017e6  f0400080          ORR      r0,r0,#0x80
0017ea  f884002c          STRB     r0,[r4,#0x2c]
0017ee  e005              B        |L1.6140|
                  |L1.6128|
;;;2903   else bps[in]._flags_tu&=BIN8(1111111);
0017f0  f894002c          LDRB     r0,[r4,#0x2c]
0017f4  f000007f          AND      r0,r0,#0x7f
0017f8  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.6140|
;;;2904   	
;;;2905   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0017fc  499f              LDR      r1,|L1.6780|
0017fe  f9b40054          LDRSH    r0,[r4,#0x54]
001802  f9b1101e          LDRSH    r1,[r1,#0x1e]  ; cntrl_stat
001806  4408              ADD      r0,r0,r1
001808  6360              STR      r0,[r4,#0x34]
;;;2906   bps[in]._vol_i=2000; 
00180a  f44f60fa          MOV      r0,#0x7d0
00180e  63a0              STR      r0,[r4,#0x38]
                  |L1.6160|
;;;2907   }
001810  e8bd81f0          POP      {r4-r8,pc}
;;;2908   
                          ENDP

                  avt_hndl PROC
;;;2909   //-----------------------------------------------
;;;2910   void avt_hndl(void)
001814  b570              PUSH     {r4-r6,lr}
;;;2911   {
;;;2912   char i;
;;;2913   for(i=0;i<12;i++)
001816  f04f0000          MOV      r0,#0
;;;2914   	{
;;;2915   	if(eb2_data_short[6]&(1<<i))
00181a  4999              LDR      r1,|L1.6784|
;;;2916   		{
;;;2917   		avt_stat[i]=avtON;
00181c  4d99              LDR      r5,|L1.6788|
00181e  f04f0401          MOV      r4,#1                 ;2915
001822  f9b1200c          LDRSH    r2,[r1,#0xc]          ;2915
001826  4603              MOV      r3,r0                 ;2913
                  |L1.6184|
001828  fa04f100          LSL      r1,r4,r0              ;2915
00182c  420a              TST      r2,r1                 ;2915
00182e  d001              BEQ      |L1.6196|
001830  542c              STRB     r4,[r5,r0]
001832  e000              B        |L1.6198|
                  |L1.6196|
;;;2918   		}
;;;2919   	else avt_stat[i]=avtOFF;
001834  542b              STRB     r3,[r5,r0]
                  |L1.6198|
001836  f1000001          ADD      r0,r0,#1              ;2913
00183a  b2c0              UXTB     r0,r0                 ;2913
00183c  280c              CMP      r0,#0xc               ;2913
00183e  d3f3              BCC      |L1.6184|
;;;2920   	}
;;;2921   
;;;2922   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
001840  4e91              LDR      r6,|L1.6792|
001842  7828              LDRB     r0,[r5,#0]  ; avt_stat
001844  4c91              LDR      r4,|L1.6796|
001846  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
001848  4281              CMP      r1,r0
00184a  d00b              BEQ      |L1.6244|
00184c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001850  2901              CMP      r1,#1
001852  db07              BLT      |L1.6244|
;;;2923   	{
;;;2924   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
001854  2801              CMP      r0,#1
001856  d07e              BEQ      |L1.6486|
;;;2925   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
001858  2300              MOVS     r3,#0
00185a  2201              MOVS     r2,#1
00185c  210b              MOVS     r1,#0xb
00185e  a08c              ADR      r0,|L1.6800|
001860  f7fffffe          BL       snmp_trap_send
                  |L1.6244|
;;;2926   	}
;;;2927   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
001864  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
001866  7868              LDRB     r0,[r5,#1]  ; avt_stat
001868  4281              CMP      r1,r0
00186a  d00b              BEQ      |L1.6276|
00186c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001870  2902              CMP      r1,#2
001872  db07              BLT      |L1.6276|
;;;2928   	{
;;;2929   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
001874  2801              CMP      r0,#1
001876  d06f              BEQ      |L1.6488|
;;;2930   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
001878  2300              MOVS     r3,#0
00187a  2202              MOVS     r2,#2
00187c  210b              MOVS     r1,#0xb
00187e  a089              ADR      r0,|L1.6820|
001880  f7fffffe          BL       snmp_trap_send
                  |L1.6276|
;;;2931   	}
;;;2932   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
001884  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
001886  78a8              LDRB     r0,[r5,#2]  ; avt_stat
001888  4281              CMP      r1,r0
00188a  d00b              BEQ      |L1.6308|
00188c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001890  2903              CMP      r1,#3
001892  db07              BLT      |L1.6308|
;;;2933   	{
;;;2934   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
001894  2801              CMP      r0,#1
001896  d072              BEQ      |L1.6526|
;;;2935   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
001898  2300              MOVS     r3,#0
00189a  2203              MOVS     r2,#3
00189c  210b              MOVS     r1,#0xb
00189e  a086              ADR      r0,|L1.6840|
0018a0  f7fffffe          BL       snmp_trap_send
                  |L1.6308|
;;;2936   	}
;;;2937   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0018a4  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0018a6  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0018a8  4281              CMP      r1,r0
0018aa  d00b              BEQ      |L1.6340|
0018ac  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0018b0  2904              CMP      r1,#4
0018b2  db07              BLT      |L1.6340|
;;;2938   	{
;;;2939   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
0018b4  2801              CMP      r0,#1
0018b6  d079              BEQ      |L1.6572|
;;;2940   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
0018b8  2300              MOVS     r3,#0
0018ba  2204              MOVS     r2,#4
0018bc  210b              MOVS     r1,#0xb
0018be  a083              ADR      r0,|L1.6860|
0018c0  f7fffffe          BL       snmp_trap_send
                  |L1.6340|
;;;2941   	}
;;;2942   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
0018c4  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
0018c6  7928              LDRB     r0,[r5,#4]  ; avt_stat
0018c8  4281              CMP      r1,r0
0018ca  d00b              BEQ      |L1.6372|
0018cc  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0018d0  2905              CMP      r1,#5
0018d2  db07              BLT      |L1.6372|
;;;2943   	{
;;;2944   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
0018d4  2801              CMP      r0,#1
0018d6  d071              BEQ      |L1.6588|
;;;2945   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
0018d8  2300              MOVS     r3,#0
0018da  2205              MOVS     r2,#5
0018dc  210b              MOVS     r1,#0xb
0018de  a080              ADR      r0,|L1.6880|
0018e0  f7fffffe          BL       snmp_trap_send
                  |L1.6372|
;;;2946   	}
;;;2947   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
0018e4  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
0018e6  7968              LDRB     r0,[r5,#5]  ; avt_stat
0018e8  4281              CMP      r1,r0
0018ea  d00b              BEQ      |L1.6404|
0018ec  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0018f0  2906              CMP      r1,#6
0018f2  db07              BLT      |L1.6404|
;;;2948   	{
;;;2949   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
0018f4  2801              CMP      r0,#1
0018f6  d068              BEQ      |L1.6602|
;;;2950   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
0018f8  2300              MOVS     r3,#0
0018fa  2206              MOVS     r2,#6
0018fc  210b              MOVS     r1,#0xb
0018fe  a07d              ADR      r0,|L1.6900|
001900  f7fffffe          BL       snmp_trap_send
                  |L1.6404|
;;;2951   	}
;;;2952   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
001904  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
001906  79a8              LDRB     r0,[r5,#6]  ; avt_stat
001908  4281              CMP      r1,r0
00190a  d00b              BEQ      |L1.6436|
00190c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001910  2907              CMP      r1,#7
001912  db07              BLT      |L1.6436|
;;;2953   	{
;;;2954   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
001914  2801              CMP      r0,#1
001916  d05f              BEQ      |L1.6616|
;;;2955   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
001918  2300              MOVS     r3,#0
00191a  2207              MOVS     r2,#7
00191c  210b              MOVS     r1,#0xb
00191e  a07a              ADR      r0,|L1.6920|
001920  f7fffffe          BL       snmp_trap_send
                  |L1.6436|
;;;2956   	}
;;;2957   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
001924  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
001926  79e8              LDRB     r0,[r5,#7]  ; avt_stat
001928  4281              CMP      r1,r0
00192a  d00b              BEQ      |L1.6468|
00192c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001930  2908              CMP      r1,#8
001932  db07              BLT      |L1.6468|
;;;2958   	{
;;;2959   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
001934  2801              CMP      r0,#1
001936  d056              BEQ      |L1.6630|
;;;2960   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
001938  2300              MOVS     r3,#0
00193a  2208              MOVS     r2,#8
00193c  210b              MOVS     r1,#0xb
00193e  a077              ADR      r0,|L1.6940|
001940  f7fffffe          BL       snmp_trap_send
                  |L1.6468|
;;;2961   	}
;;;2962   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
001944  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
001946  7a28              LDRB     r0,[r5,#8]  ; avt_stat
001948  4281              CMP      r1,r0
00194a  d00e              BEQ      |L1.6506|
00194c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001950  2909              CMP      r1,#9
001952  db0a              BLT      |L1.6506|
;;;2963   	{
;;;2964   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
001954  e001              B        |L1.6490|
                  |L1.6486|
001956  e013              B        |L1.6528|
                  |L1.6488|
001958  e019              B        |L1.6542|
                  |L1.6490|
00195a  2801              CMP      r0,#1
00195c  d04a              BEQ      |L1.6644|
;;;2965   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
00195e  2300              MOVS     r3,#0
001960  2209              MOVS     r2,#9
001962  210b              MOVS     r1,#0xb
001964  a072              ADR      r0,|L1.6960|
001966  f7fffffe          BL       snmp_trap_send
                  |L1.6506|
;;;2966   	}
;;;2967   
;;;2968   for(i=0;i<12;i++)
00196a  f04f0000          MOV      r0,#0
                  |L1.6510|
;;;2969   	{
;;;2970   	avt_stat_old[i]=avt_stat[i];
00196e  5c29              LDRB     r1,[r5,r0]
001970  5431              STRB     r1,[r6,r0]
001972  f1000001          ADD      r0,r0,#1              ;2968
001976  b2c0              UXTB     r0,r0                 ;2968
001978  280c              CMP      r0,#0xc               ;2968
00197a  d3f8              BCC      |L1.6510|
;;;2971   	}
;;;2972   }
00197c  e40d              B        |L1.4506|
                  |L1.6526|
00197e  e00e              B        |L1.6558|
                  |L1.6528|
001980  2301              MOVS     r3,#1                 ;2924
001982  461a              MOV      r2,r3                 ;2924
001984  210b              MOVS     r1,#0xb               ;2924
001986  a06f              ADR      r0,|L1.6980|
001988  f7fffffe          BL       snmp_trap_send
00198c  e76a              B        |L1.6244|
                  |L1.6542|
00198e  2301              MOVS     r3,#1                 ;2929
001990  2202              MOVS     r2,#2                 ;2929
001992  210b              MOVS     r1,#0xb               ;2929
001994  a070              ADR      r0,|L1.7000|
001996  f7fffffe          BL       snmp_trap_send
00199a  e773              B        |L1.6276|
00199c  e006              B        |L1.6572|
                  |L1.6558|
00199e  2301              MOVS     r3,#1                 ;2934
0019a0  2203              MOVS     r2,#3                 ;2934
0019a2  210b              MOVS     r1,#0xb               ;2934
0019a4  a071              ADR      r0,|L1.7020|
0019a6  f7fffffe          BL       snmp_trap_send
0019aa  e77b              B        |L1.6308|
                  |L1.6572|
0019ac  2301              MOVS     r3,#1                 ;2939
0019ae  2204              MOVS     r2,#4                 ;2939
0019b0  210b              MOVS     r1,#0xb               ;2939
0019b2  a073              ADR      r0,|L1.7040|
0019b4  f7fffffe          BL       snmp_trap_send
0019b8  e784              B        |L1.6340|
0019ba  e7ff              B        |L1.6588|
                  |L1.6588|
0019bc  2301              MOVS     r3,#1                 ;2944
0019be  2205              MOVS     r2,#5                 ;2944
0019c0  210b              MOVS     r1,#0xb               ;2944
0019c2  a074              ADR      r0,|L1.7060|
0019c4  f7fffffe          BL       snmp_trap_send
0019c8  e78c              B        |L1.6372|
                  |L1.6602|
0019ca  2301              MOVS     r3,#1                 ;2949
0019cc  2206              MOVS     r2,#6                 ;2949
0019ce  210b              MOVS     r1,#0xb               ;2949
0019d0  a075              ADR      r0,|L1.7080|
0019d2  f7fffffe          BL       snmp_trap_send
0019d6  e795              B        |L1.6404|
                  |L1.6616|
0019d8  2301              MOVS     r3,#1                 ;2954
0019da  2207              MOVS     r2,#7                 ;2954
0019dc  210b              MOVS     r1,#0xb               ;2954
0019de  a077              ADR      r0,|L1.7100|
0019e0  f7fffffe          BL       snmp_trap_send
0019e4  e79e              B        |L1.6436|
                  |L1.6630|
0019e6  2301              MOVS     r3,#1                 ;2959
0019e8  2208              MOVS     r2,#8                 ;2959
0019ea  210b              MOVS     r1,#0xb               ;2959
0019ec  a078              ADR      r0,|L1.7120|
0019ee  f7fffffe          BL       snmp_trap_send
0019f2  e7a7              B        |L1.6468|
                  |L1.6644|
0019f4  2301              MOVS     r3,#1                 ;2964
0019f6  2209              MOVS     r2,#9                 ;2964
0019f8  210b              MOVS     r1,#0xb               ;2964
0019fa  a07a              ADR      r0,|L1.7140|
0019fc  f7fffffe          BL       snmp_trap_send
001a00  e7b3              B        |L1.6506|
;;;2973   
                          ENDP

                  overload_hndl PROC
;;;3707   //-----------------------------------------------
;;;3708   void overload_hndl(void)
001a02  b570              PUSH     {r4-r6,lr}
;;;3709   {
;;;3710   
;;;3711   if(main_1Hz_cnt<30)return;
001a04  487c              LDR      r0,|L1.7160|
001a06  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001a0a  281e              CMP      r0,#0x1e
001a0c  db31              BLT      |L1.6770|
;;;3712   
;;;3713   if((out_U<UOUT)&&((UOUT-out_U)>50)&&(!(avar_vd_stat&0x0081)))
001a0e  487b              LDR      r0,|L1.7164|
;;;3714   	{
;;;3715   	if(overloadHndlCnt<(OVERLOAD_TIME*10/*TZAS*10*/))
001a10  4b7c              LDR      r3,|L1.7172|
001a12  4c7d              LDR      r4,|L1.7176|
001a14  f9b02000          LDRSH    r2,[r0,#0]            ;3713  ; out_U
001a18  4879              LDR      r0,|L1.7168|
001a1a  f9b01000          LDRSH    r1,[r0,#0]            ;3713  ; UOUT
001a1e  f9b30000          LDRSH    r0,[r3,#0]
001a22  428a              CMP      r2,r1                 ;3713
001a24  da07              BGE      |L1.6710|
001a26  1a8d              SUBS     r5,r1,r2              ;3713
001a28  2d32              CMP      r5,#0x32              ;3713
001a2a  dd04              BLE      |L1.6710|
001a2c  4d77              LDR      r5,|L1.7180|
001a2e  882d              LDRH     r5,[r5,#0]            ;3713  ; avar_vd_stat
001a30  f0150f81          TST      r5,#0x81              ;3713
001a34  d009              BEQ      |L1.6730|
                  |L1.6710|
;;;3716   		{
;;;3717   		overloadHndlCnt++;
;;;3718   		if(overloadHndlCnt==(OVERLOAD_TIME*10/*TZAS*10*/))
;;;3719   			{
;;;3720   			avar_overload_hndl(1);
;;;3721   			}
;;;3722   		}
;;;3723   	}
;;;3724   else if(out_U>(UOUT-50))
001a36  3932              SUBS     r1,r1,#0x32
001a38  428a              CMP      r2,r1
001a3a  dd18              BLE      |L1.6766|
;;;3725   	{
;;;3726   	if(overloadHndlCnt)
001a3c  b1b8              CBZ      r0,|L1.6766|
;;;3727   		{
;;;3728   		overloadHndlCnt--;
001a3e  f1a00001          SUB      r0,r0,#1
001a42  b200              SXTH     r0,r0
001a44  8018              STRH     r0,[r3,#0]
;;;3729   		if(overloadHndlCnt==0)
001a46  b198              CBZ      r0,|L1.6768|
001a48  e0e5              B        |L1.7190|
                  |L1.6730|
001a4a  f9b41000          LDRSH    r1,[r4,#0]            ;3715  ; OVERLOAD_TIME
001a4e  eb010181          ADD      r1,r1,r1,LSL #2       ;3715
001a52  ebb00f41          CMP      r0,r1,LSL #1          ;3715
001a56  da0a              BGE      |L1.6766|
001a58  f1000001          ADD      r0,r0,#1              ;3717
001a5c  b200              SXTH     r0,r0                 ;3717
001a5e  8018              STRH     r0,[r3,#0]            ;3717
001a60  ebb00f41          CMP      r0,r1,LSL #1          ;3718
001a64  d103              BNE      |L1.6766|
001a66  2001              MOVS     r0,#1                 ;3720
001a68  f7fffffe          BL       avar_overload_hndl
001a6c  e0d3              B        |L1.7190|
                  |L1.6766|
001a6e  e0d2              B        |L1.7190|
                  |L1.6768|
001a70  e0ce              B        |L1.7184|
                  |L1.6770|
001a72  e101              B        |L1.7288|
                  |L1.6772|
                          DCD      bps
                  |L1.6776|
                          DCD      net_av
                  |L1.6780|
                          DCD      ||area_number.26||
                  |L1.6784|
                          DCD      eb2_data_short
                  |L1.6788|
                          DCD      avt_stat
                  |L1.6792|
                          DCD      avt_stat_old
                  |L1.6796|
                          DCD      NUMAVT
                  |L1.6800|
001a90  4176746f          DCB      "Avtomat #1 is OFF",0
001a94  6d617420
001a98  23312069
001a9c  73204f46
001aa0  4600    
001aa2  00                DCB      0
001aa3  00                DCB      0
                  |L1.6820|
001aa4  4176746f          DCB      "Avtomat #2 is OFF",0
001aa8  6d617420
001aac  23322069
001ab0  73204f46
001ab4  4600    
001ab6  00                DCB      0
001ab7  00                DCB      0
                  |L1.6840|
001ab8  4176746f          DCB      "Avtomat #3 is OFF",0
001abc  6d617420
001ac0  23332069
001ac4  73204f46
001ac8  4600    
001aca  00                DCB      0
001acb  00                DCB      0
                  |L1.6860|
001acc  4176746f          DCB      "Avtomat #4 is OFF",0
001ad0  6d617420
001ad4  23342069
001ad8  73204f46
001adc  4600    
001ade  00                DCB      0
001adf  00                DCB      0
                  |L1.6880|
001ae0  4176746f          DCB      "Avtomat #5 is OFF",0
001ae4  6d617420
001ae8  23352069
001aec  73204f46
001af0  4600    
001af2  00                DCB      0
001af3  00                DCB      0
                  |L1.6900|
001af4  4176746f          DCB      "Avtomat #6 is OFF",0
001af8  6d617420
001afc  23362069
001b00  73204f46
001b04  4600    
001b06  00                DCB      0
001b07  00                DCB      0
                  |L1.6920|
001b08  4176746f          DCB      "Avtomat #7 is OFF",0
001b0c  6d617420
001b10  23372069
001b14  73204f46
001b18  4600    
001b1a  00                DCB      0
001b1b  00                DCB      0
                  |L1.6940|
001b1c  4176746f          DCB      "Avtomat #8 is OFF",0
001b20  6d617420
001b24  23382069
001b28  73204f46
001b2c  4600    
001b2e  00                DCB      0
001b2f  00                DCB      0
                  |L1.6960|
001b30  4176746f          DCB      "Avtomat #9 is OFF",0
001b34  6d617420
001b38  23392069
001b3c  73204f46
001b40  4600    
001b42  00                DCB      0
001b43  00                DCB      0
                  |L1.6980|
001b44  4176746f          DCB      "Avtomat #1 is ON ",0
001b48  6d617420
001b4c  23312069
001b50  73204f4e
001b54  2000    
001b56  00                DCB      0
001b57  00                DCB      0
                  |L1.7000|
001b58  4176746f          DCB      "Avtomat #2 is ON ",0
001b5c  6d617420
001b60  23322069
001b64  73204f4e
001b68  2000    
001b6a  00                DCB      0
001b6b  00                DCB      0
                  |L1.7020|
001b6c  4176746f          DCB      "Avtomat #3 is ON ",0
001b70  6d617420
001b74  23332069
001b78  73204f4e
001b7c  2000    
001b7e  00                DCB      0
001b7f  00                DCB      0
                  |L1.7040|
001b80  4176746f          DCB      "Avtomat #4 is ON ",0
001b84  6d617420
001b88  23342069
001b8c  73204f4e
001b90  2000    
001b92  00                DCB      0
001b93  00                DCB      0
                  |L1.7060|
001b94  4176746f          DCB      "Avtomat #5 is ON ",0
001b98  6d617420
001b9c  23352069
001ba0  73204f4e
001ba4  2000    
001ba6  00                DCB      0
001ba7  00                DCB      0
                  |L1.7080|
001ba8  4176746f          DCB      "Avtomat #6 is ON ",0
001bac  6d617420
001bb0  23362069
001bb4  73204f4e
001bb8  2000    
001bba  00                DCB      0
001bbb  00                DCB      0
                  |L1.7100|
001bbc  4176746f          DCB      "Avtomat #7 is ON ",0
001bc0  6d617420
001bc4  23372069
001bc8  73204f4e
001bcc  2000    
001bce  00                DCB      0
001bcf  00                DCB      0
                  |L1.7120|
001bd0  4176746f          DCB      "Avtomat #8 is ON ",0
001bd4  6d617420
001bd8  23382069
001bdc  73204f4e
001be0  2000    
001be2  00                DCB      0
001be3  00                DCB      0
                  |L1.7140|
001be4  4176746f          DCB      "Avtomat #9 is ON ",0
001be8  6d617420
001bec  23392069
001bf0  73204f4e
001bf4  2000    
001bf6  00                DCB      0
001bf7  00                DCB      0
                  |L1.7160|
                          DCD      main_1Hz_cnt
                  |L1.7164|
                          DCD      out_U
                  |L1.7168|
                          DCD      UOUT
                  |L1.7172|
                          DCD      overloadHndlCnt
                  |L1.7176|
                          DCD      OVERLOAD_TIME
                  |L1.7180|
                          DCD      avar_vd_stat
                  |L1.7184|
;;;3730   			{
;;;3731   			avar_overload_hndl(0);
001c10  2000              MOVS     r0,#0
001c12  f7fffffe          BL       avar_overload_hndl
                  |L1.7190|
;;;3732   			}
;;;3733   		}
;;;3734   	}
;;;3735   
;;;3736   if((Ib_ips_termokompensat>OVERLOAD_CURR))
001c16  48ff              LDR      r0,|L1.8212|
001c18  f9b01000          LDRSH    r1,[r0,#0]  ; Ib_ips_termokompensat
001c1c  48fe              LDR      r0,|L1.8216|
001c1e  f9b00000          LDRSH    r0,[r0,#0]  ; OVERLOAD_CURR
;;;3737   	{
;;;3738   	if(overloadHndlCnt1<(OVERLOAD_TIME*10))
001c22  4afe              LDR      r2,|L1.8220|
001c24  4281              CMP      r1,r0                 ;3736
001c26  dd14              BLE      |L1.7250|
001c28  f9b40000          LDRSH    r0,[r4,#0]  ; OVERLOAD_TIME
001c2c  eb000180          ADD      r1,r0,r0,LSL #2
001c30  f9b20000          LDRSH    r0,[r2,#0]  ; overloadHndlCnt1
001c34  ebb00f41          CMP      r0,r1,LSL #1
001c38  da1e              BGE      |L1.7288|
;;;3739   		{
;;;3740   		overloadHndlCnt1++;
001c3a  f1000001          ADD      r0,r0,#1
001c3e  b200              SXTH     r0,r0
001c40  8010              STRH     r0,[r2,#0]
;;;3741   		if(overloadHndlCnt1==(OVERLOAD_TIME*10))
001c42  ebb00f41          CMP      r0,r1,LSL #1
001c46  d117              BNE      |L1.7288|
;;;3742   			{
;;;3743   			avar_overload_hndl(1);
001c48  e8bd4070          POP      {r4-r6,lr}
001c4c  2001              MOVS     r0,#1
001c4e  f7ffbffe          B.W      avar_overload_hndl
                  |L1.7250|
;;;3744   			}
;;;3745   		}
;;;3746   	}
;;;3747   else if((Ib_ips_termokompensat<OVERLOAD_CURR)  && (!bIBAT_SMKLBR))
001c52  da11              BGE      |L1.7288|
001c54  48f2              LDR      r0,|L1.8224|
001c56  8800              LDRH     r0,[r0,#0]  ; bIBAT_SMKLBR
001c58  2800              CMP      r0,#0
001c5a  d10d              BNE      |L1.7288|
;;;3748   	{
;;;3749   	if(overloadHndlCnt1)
001c5c  f9b20000          LDRSH    r0,[r2,#0]  ; overloadHndlCnt1
001c60  2800              CMP      r0,#0
001c62  d009              BEQ      |L1.7288|
;;;3750   		{
;;;3751   		overloadHndlCnt1--;
001c64  f1a00001          SUB      r0,r0,#1
001c68  b200              SXTH     r0,r0
001c6a  8010              STRH     r0,[r2,#0]
;;;3752   		if(overloadHndlCnt1==0)
001c6c  2800              CMP      r0,#0
001c6e  d103              BNE      |L1.7288|
;;;3753   			{
;;;3754   			avar_overload_hndl(0);
001c70  e8bd4070          POP      {r4-r6,lr}
001c74  f7ffbffe          B.W      avar_overload_hndl
                  |L1.7288|
;;;3755   			}
;;;3756   		}
;;;3757   	}
;;;3758   
;;;3759   
;;;3760   }
001c78  e404              B        |L1.5252|
;;;3761   
                          ENDP

                  u_avar_hndl PROC
;;;3762   //-----------------------------------------------
;;;3763   void u_avar_hndl(void)
001c7a  e92d41f0          PUSH     {r4-r8,lr}
;;;3764   {
;;;3765   
;;;3766   if(main_1Hz_cnt<10)return;
001c7e  48e9              LDR      r0,|L1.8228|
001c80  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001c84  280a              CMP      r0,#0xa
001c86  db7d              BLT      |L1.7556|
;;;3767   
;;;3768   if(out_U>UOUTMAX)
001c88  4ee7              LDR      r6,|L1.8232|
001c8a  48e8              LDR      r0,|L1.8236|
;;;3769   	{
;;;3770   	if(uAvarHndlOutUMaxCnt<(10*TZAS))
001c8c  4fe8              LDR      r7,|L1.8240|
001c8e  f9b61000          LDRSH    r1,[r6,#0]            ;3768  ; out_U
001c92  f9b02000          LDRSH    r2,[r0,#0]            ;3768  ; UOUTMAX
001c96  f9b70000          LDRSH    r0,[r7,#0]
001c9a  2500              MOVS     r5,#0
001c9c  4ce5              LDR      r4,|L1.8244|
001c9e  4291              CMP      r1,r2                 ;3768
001ca0  dd17              BLE      |L1.7378|
001ca2  f9b42000          LDRSH    r2,[r4,#0]  ; TZAS
001ca6  eb020382          ADD      r3,r2,r2,LSL #2
001caa  ebb00f43          CMP      r0,r3,LSL #1
001cae  da0a              BGE      |L1.7366|
;;;3771   		{
;;;3772   		uAvarHndlOutUMaxCnt++;
001cb0  f1000001          ADD      r0,r0,#1
001cb4  b200              SXTH     r0,r0
001cb6  8038              STRH     r0,[r7,#0]
;;;3773   		if(uAvarHndlOutUMaxCnt>=(10*TZAS))
001cb8  ebb00f43          CMP      r0,r3,LSL #1
001cbc  db15              BLT      |L1.7402|
;;;3774   			{
;;;3775   			avar_u_out_hndl(1,out_U);
001cbe  2001              MOVS     r0,#1
001cc0  f7fffffe          BL       avar_u_out_hndl
001cc4  e011              B        |L1.7402|
                  |L1.7366|
;;;3776   			}
;;;3777   		}
;;;3778   	else uAvarHndlOutUMaxCnt=(10*TZAS);
001cc6  eb020082          ADD      r0,r2,r2,LSL #2
001cca  ea4f0040          LSL      r0,r0,#1
001cce  8038              STRH     r0,[r7,#0]
001cd0  e00b              B        |L1.7402|
                  |L1.7378|
;;;3779   	}
;;;3780   else 
;;;3781   	{
;;;3782   	if(uAvarHndlOutUMaxCnt>0)
001cd2  2800              CMP      r0,#0
001cd4  dd08              BLE      |L1.7400|
;;;3783   		{
;;;3784   		uAvarHndlOutUMaxCnt--;
001cd6  f1a00001          SUB      r0,r0,#1
001cda  b200              SXTH     r0,r0
001cdc  8038              STRH     r0,[r7,#0]
;;;3785   		if(uAvarHndlOutUMaxCnt==0)
001cde  b920              CBNZ     r0,|L1.7402|
;;;3786   			{
;;;3787   			avar_u_out_hndl(0,out_U);
001ce0  2000              MOVS     r0,#0
001ce2  f7fffffe          BL       avar_u_out_hndl
001ce6  e000              B        |L1.7402|
                  |L1.7400|
;;;3788   			}
;;;3789   		}
;;;3790   	else uAvarHndlOutUMaxCnt=0;
001ce8  803d              STRH     r5,[r7,#0]
                  |L1.7402|
;;;3791   	}
;;;3792   
;;;3793   if(out_U<UOUTMIN)
001cea  48d3              LDR      r0,|L1.8248|
001cec  f9b61000          LDRSH    r1,[r6,#0]  ; out_U
;;;3794   	{
;;;3795   	if(uAvarHndlOutUMinCnt<(10*TZAS))
001cf0  4ed2              LDR      r6,|L1.8252|
001cf2  f9b00000          LDRSH    r0,[r0,#0]            ;3793  ; UOUTMIN
001cf6  4281              CMP      r1,r0                 ;3793
001cf8  da19              BGE      |L1.7470|
001cfa  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001cfe  f9b62000          LDRSH    r2,[r6,#0]  ; uAvarHndlOutUMinCnt
001d02  eb000380          ADD      r3,r0,r0,LSL #2
001d06  ebb20f43          CMP      r2,r3,LSL #1
001d0a  da0a              BGE      |L1.7458|
;;;3796   		{
;;;3797   		uAvarHndlOutUMinCnt++;
001d0c  f1020201          ADD      r2,r2,#1
001d10  b210              SXTH     r0,r2
001d12  8030              STRH     r0,[r6,#0]
;;;3798   		if(uAvarHndlOutUMinCnt>=(10*TZAS))
001d14  ebb00f43          CMP      r0,r3,LSL #1
001d18  db17              BLT      |L1.7498|
;;;3799   			{
;;;3800   			avar_u_out_hndl(2,out_U);
001d1a  2002              MOVS     r0,#2
001d1c  f7fffffe          BL       avar_u_out_hndl
001d20  e013              B        |L1.7498|
                  |L1.7458|
;;;3801   			}
;;;3802   		}
;;;3803   	else uAvarHndlOutUMinCnt=(10*TZAS);
001d22  eb000080          ADD      r0,r0,r0,LSL #2
001d26  ea4f0040          LSL      r0,r0,#1
001d2a  8030              STRH     r0,[r6,#0]
001d2c  e00d              B        |L1.7498|
                  |L1.7470|
;;;3804   	}
;;;3805   else 
;;;3806   	{
;;;3807   	if(uAvarHndlOutUMinCnt>0)
001d2e  f9b60000          LDRSH    r0,[r6,#0]  ; uAvarHndlOutUMinCnt
001d32  2800              CMP      r0,#0
001d34  dd08              BLE      |L1.7496|
;;;3808   		{
;;;3809   		uAvarHndlOutUMinCnt--;
001d36  f1a00001          SUB      r0,r0,#1
001d3a  b200              SXTH     r0,r0
001d3c  8030              STRH     r0,[r6,#0]
;;;3810   		if(uAvarHndlOutUMinCnt==0)
001d3e  b920              CBNZ     r0,|L1.7498|
;;;3811   			{
;;;3812   			avar_u_out_hndl(0,out_U);
001d40  2000              MOVS     r0,#0
001d42  f7fffffe          BL       avar_u_out_hndl
001d46  e000              B        |L1.7498|
                  |L1.7496|
;;;3813   			}
;;;3814   		}
;;;3815   	else uAvarHndlOutUMinCnt=0;
001d48  8035              STRH     r5,[r6,#0]
                  |L1.7498|
;;;3816   	}
;;;3817   
;;;3818   if(in_U>UINMAX)
001d4a  4ebd              LDR      r6,|L1.8256|
001d4c  48bd              LDR      r0,|L1.8260|
;;;3819   	{
;;;3820   	if(uAvarHndlInUMaxCnt<(10*TZAS))
001d4e  4fbe              LDR      r7,|L1.8264|
001d50  f9b61000          LDRSH    r1,[r6,#0]            ;3818  ; in_U
001d54  f9b00000          LDRSH    r0,[r0,#0]            ;3818  ; UINMAX
001d58  4281              CMP      r1,r0                 ;3818
001d5a  dd1a              BLE      |L1.7570|
001d5c  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001d60  f9b72000          LDRSH    r2,[r7,#0]  ; uAvarHndlInUMaxCnt
001d64  eb000380          ADD      r3,r0,r0,LSL #2
001d68  ebb20f43          CMP      r2,r3,LSL #1
001d6c  da0b              BGE      |L1.7558|
;;;3821   		{
;;;3822   		uAvarHndlInUMaxCnt++;
001d6e  f1020201          ADD      r2,r2,#1
001d72  b210              SXTH     r0,r2
001d74  8038              STRH     r0,[r7,#0]
;;;3823   		if(uAvarHndlInUMaxCnt>=(10*TZAS))
001d76  ebb00f43          CMP      r0,r3,LSL #1
001d7a  db18              BLT      |L1.7598|
;;;3824   			{
;;;3825   			avar_u_in_hndl(1,in_U);
001d7c  2001              MOVS     r0,#1
001d7e  f7fffffe          BL       avar_u_in_hndl
001d82  e014              B        |L1.7598|
                  |L1.7556|
001d84  e035              B        |L1.7666|
                  |L1.7558|
;;;3826   			}
;;;3827   		}
;;;3828   	else uAvarHndlInUMaxCnt=(10*TZAS);
001d86  eb000080          ADD      r0,r0,r0,LSL #2
001d8a  ea4f0040          LSL      r0,r0,#1
001d8e  8038              STRH     r0,[r7,#0]
001d90  e00d              B        |L1.7598|
                  |L1.7570|
;;;3829   	}
;;;3830   else 
;;;3831   	{
;;;3832   	if(uAvarHndlInUMaxCnt>0)
001d92  f9b70000          LDRSH    r0,[r7,#0]  ; uAvarHndlInUMaxCnt
001d96  2800              CMP      r0,#0
001d98  dd08              BLE      |L1.7596|
;;;3833   		{
;;;3834   		uAvarHndlInUMaxCnt--;
001d9a  f1a00001          SUB      r0,r0,#1
001d9e  b200              SXTH     r0,r0
001da0  8038              STRH     r0,[r7,#0]
;;;3835   		if(uAvarHndlInUMaxCnt==0)
001da2  b920              CBNZ     r0,|L1.7598|
;;;3836   			{
;;;3837   			avar_u_in_hndl(0,in_U);
001da4  2000              MOVS     r0,#0
001da6  f7fffffe          BL       avar_u_in_hndl
001daa  e000              B        |L1.7598|
                  |L1.7596|
;;;3838   			}
;;;3839   		}
;;;3840   	else uAvarHndlInUMaxCnt=0;
001dac  803d              STRH     r5,[r7,#0]
                  |L1.7598|
;;;3841   	}
;;;3842   
;;;3843   if(in_U<UINMIN)
001dae  48a7              LDR      r0,|L1.8268|
001db0  f9b61000          LDRSH    r1,[r6,#0]  ; in_U
;;;3844   	{
;;;3845   	if(uAvarHndlInUMinCnt<(10*TZAS))
001db4  4ea6              LDR      r6,|L1.8272|
001db6  f9b00000          LDRSH    r0,[r0,#0]            ;3843  ; UINMIN
001dba  4281              CMP      r1,r0                 ;3843
001dbc  da1a              BGE      |L1.7668|
001dbe  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001dc2  f9b62000          LDRSH    r2,[r6,#0]  ; uAvarHndlInUMinCnt
001dc6  eb000380          ADD      r3,r0,r0,LSL #2
001dca  ebb20f43          CMP      r2,r3,LSL #1
001dce  da0b              BGE      |L1.7656|
;;;3846   		{
;;;3847   		uAvarHndlInUMinCnt++;
001dd0  f1020201          ADD      r2,r2,#1
001dd4  b210              SXTH     r0,r2
001dd6  8030              STRH     r0,[r6,#0]
;;;3848   		if(uAvarHndlInUMinCnt>=(10*TZAS))
001dd8  ebb00f43          CMP      r0,r3,LSL #1
001ddc  db09              BLT      |L1.7666|
;;;3849   			{
;;;3850   			avar_u_in_hndl(2,in_U);
001dde  e8bd41f0          POP      {r4-r8,lr}
001de2  2002              MOVS     r0,#2
001de4  f7ffbffe          B.W      avar_u_in_hndl
                  |L1.7656|
;;;3851   			}
;;;3852   		}
;;;3853   	else uAvarHndlInUMinCnt=(10*TZAS);
001de8  eb000080          ADD      r0,r0,r0,LSL #2
001dec  ea4f0040          LSL      r0,r0,#1
001df0  8030              STRH     r0,[r6,#0]
                  |L1.7666|
;;;3854   	}
;;;3855   else 
;;;3856   	{
;;;3857   	if(uAvarHndlInUMinCnt>0)
;;;3858   		{
;;;3859   		uAvarHndlInUMinCnt--;
;;;3860   		if(uAvarHndlInUMinCnt==0)
;;;3861   			{
;;;3862   			avar_u_in_hndl(0,in_U);
;;;3863   			}
;;;3864   		}
;;;3865   	else uAvarHndlInUMinCnt=0;
;;;3866   	}
;;;3867   }
001df2  e50d              B        |L1.6160|
                  |L1.7668|
001df4  f9b60000          LDRSH    r0,[r6,#0]            ;3857  ; uAvarHndlInUMinCnt
001df8  2800              CMP      r0,#0                 ;3857
001dfa  dd09              BLE      |L1.7696|
001dfc  f1a00001          SUB      r0,r0,#1              ;3859
001e00  b200              SXTH     r0,r0                 ;3859
001e02  8030              STRH     r0,[r6,#0]            ;3859
001e04  2800              CMP      r0,#0                 ;3860
001e06  d1f4              BNE      |L1.7666|
001e08  e8bd41f0          POP      {r4-r8,lr}            ;3862
001e0c  f7ffbffe          B.W      avar_u_in_hndl
                  |L1.7696|
001e10  8035              STRH     r5,[r6,#0]            ;3865
001e12  e4fd              B        |L1.6160|
;;;3868   
                          ENDP

                  t_sys_avar_hndl PROC
;;;3869   //-----------------------------------------------
;;;3870   void t_sys_avar_hndl(void)
001e14  b430              PUSH     {r4,r5}
;;;3871   {
;;;3872   
;;;3873   if(main_1Hz_cnt<10)return;
001e16  4883              LDR      r0,|L1.8228|
001e18  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001e1c  280a              CMP      r0,#0xa
001e1e  db22              BLT      |L1.7782|
;;;3874   
;;;3875   if(sys_T>TSYSMAX)
001e20  488c              LDR      r0,|L1.8276|
;;;3876   	{
;;;3877   	if(sysTAvarHndlCnt<(10*TZAS))
001e22  4c8e              LDR      r4,|L1.8284|
001e24  f9b01000          LDRSH    r1,[r0,#0]            ;3875  ; sys_T
001e28  488b              LDR      r0,|L1.8280|
001e2a  f9b02000          LDRSH    r2,[r0,#0]            ;3875  ; TSYSMAX
001e2e  f9b40000          LDRSH    r0,[r4,#0]
001e32  4291              CMP      r1,r2                 ;3875
001e34  dd19              BLE      |L1.7786|
001e36  4a7f              LDR      r2,|L1.8244|
001e38  f9b22000          LDRSH    r2,[r2,#0]  ; TZAS
001e3c  eb020382          ADD      r3,r2,r2,LSL #2
001e40  ebb00f43          CMP      r0,r3,LSL #1
001e44  da0a              BGE      |L1.7772|
;;;3878   		{
;;;3879   		sysTAvarHndlCnt++;
001e46  f1000001          ADD      r0,r0,#1
001e4a  b200              SXTH     r0,r0
001e4c  8020              STRH     r0,[r4,#0]
;;;3880   		if(sysTAvarHndlCnt>=(10*TZAS))
001e4e  ebb00f43          CMP      r0,r3,LSL #1
001e52  db08              BLT      |L1.7782|
;;;3881   			{
;;;3882   			avar_sys_t_hndl(1,sys_T);
001e54  bc30              POP      {r4,r5}
001e56  2001              MOVS     r0,#1
001e58  f7ffbffe          B.W      avar_sys_t_hndl
                  |L1.7772|
;;;3883   			}
;;;3884   		}
;;;3885   	else sysTAvarHndlCnt=(10*TZAS);
001e5c  eb020082          ADD      r0,r2,r2,LSL #2
001e60  ea4f0040          LSL      r0,r0,#1
001e64  8020              STRH     r0,[r4,#0]
                  |L1.7782|
;;;3886   	}
;;;3887   else 
;;;3888   	{
;;;3889   	if(sysTAvarHndlCnt>0)
;;;3890   		{
;;;3891   		sysTAvarHndlCnt--;
;;;3892   		if(sysTAvarHndlCnt==0)
;;;3893   			{
;;;3894   			avar_sys_t_hndl(0,sys_T);
;;;3895   			}
;;;3896   		}
;;;3897   	else sysTAvarHndlCnt=0;
;;;3898   	}
;;;3899   }
001e66  bc30              POP      {r4,r5}
001e68  4770              BX       lr
                  |L1.7786|
001e6a  2800              CMP      r0,#0                 ;3889
001e6c  dd08              BLE      |L1.7808|
001e6e  f1a00001          SUB      r0,r0,#1              ;3891
001e72  b200              SXTH     r0,r0                 ;3891
001e74  8020              STRH     r0,[r4,#0]            ;3891
001e76  2800              CMP      r0,#0                 ;3892
001e78  d1f5              BNE      |L1.7782|
001e7a  bc30              POP      {r4,r5}               ;3894
001e7c  f7ffbffe          B.W      avar_sys_t_hndl
                  |L1.7808|
001e80  f04f0000          MOV      r0,#0                 ;3897
001e84  8020              STRH     r0,[r4,#0]            ;3897
001e86  e7ee              B        |L1.7782|
;;;3900   
                          ENDP

                  u_necc_hndl PROC
;;;3902   //-----------------------------------------------
;;;3903   void u_necc_hndl(void)
001e88  b538              PUSH     {r3-r5,lr}
;;;3904   {
;;;3905   signed long temp_L;
;;;3906   signed long temp_SL;
;;;3907   //signed short temp_SS;
;;;3908   
;;;3909   //char i;
;;;3910   
;;;3911   //temp_SS=0;
;;;3912   signed short t[2];
;;;3913   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3914   
;;;3915   if(!TERMOKOMPENS)
001e8a  4975              LDR      r1,|L1.8288|
;;;3916   	{
;;;3917   	//u_necc=U0B;
;;;3918   	//u_necc=UB20;
;;;3919   	}
;;;3920   else
;;;3921   	{
;;;3922   	if(ND_EXT[0])t[0]=20;
;;;3923   	else t[0]=t_ext[0];
;;;3924   
;;;3925   	mat_temper=t[0];
;;;3926   			
;;;3927   /*	if(mat_temper<0)temp_SL=UB0; 
;;;3928   	else 
;;;3929   		{
;;;3930   		if(mat_temper>40)mat_temper=40; 
;;;3931   		temp_SL=(UB20-UB0)*10;
;;;3932   		temp_SL*=mat_temper;
;;;3933   		temp_SL/=200;
;;;3934   		temp_SL+=UB0;
;;;3935   		}			  */
;;;3936   	if(spc_stat==spcVZ)
;;;3937   		{
;;;3938   		//temp_SL=UVZ;
;;;3939   		}
;;;3940   	u_necc=(unsigned int)temp_SL;
001e8c  4c75              LDR      r4,|L1.8292|
001e8e  8809              LDRH     r1,[r1,#0]            ;3915  ; TERMOKOMPENS
001e90  b181              CBZ      r1,|L1.7860|
001e92  4975              LDR      r1,|L1.8296|
001e94  7809              LDRB     r1,[r1,#0]            ;3922  ; ND_EXT
001e96  b121              CBZ      r1,|L1.7842|
001e98  f04f0114          MOV      r1,#0x14              ;3922
001e9c  f8ad1000          STRH     r1,[sp,#0]            ;3922
001ea0  e003              B        |L1.7850|
                  |L1.7842|
001ea2  4972              LDR      r1,|L1.8300|
001ea4  8809              LDRH     r1,[r1,#0]            ;3923  ; t_ext
001ea6  f8ad1000          STRH     r1,[sp,#0]            ;3923
                  |L1.7850|
001eaa  4a71              LDR      r2,|L1.8304|
001eac  f9bd1000          LDRSH    r1,[sp,#0]            ;3925
001eb0  6011              STR      r1,[r2,#0]            ;3925  ; mat_temper
001eb2  8020              STRH     r0,[r4,#0]
                  |L1.7860|
;;;3941   	///u_necc=3456;
;;;3942   	}  
;;;3943   
;;;3944   //u_necc=2355;
;;;3945   
;;;3946   if(speedChIsOn)
001eb4  486f              LDR      r0,|L1.8308|
001eb6  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
001eb8  b110              CBZ      r0,|L1.7872|
;;;3947   	{
;;;3948   	u_necc=speedChrgVolt;
001eba  486f              LDR      r0,|L1.8312|
001ebc  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
001ebe  8020              STRH     r0,[r4,#0]
                  |L1.7872|
;;;3949   	}
;;;3950   
;;;3951   if(mess_find_unvol(MESS2UNECC_HNDL))
001ec0  20be              MOVS     r0,#0xbe
001ec2  f7fffffe          BL       mess_find_unvol
001ec6  b128              CBZ      r0,|L1.7892|
;;;3952   	{		
;;;3953   	if(mess_data[0]==PARAM_UNECC_SET)
001ec8  486c              LDR      r0,|L1.8316|
001eca  6801              LDR      r1,[r0,#0]  ; mess_data
001ecc  29bf              CMP      r1,#0xbf
001ece  d101              BNE      |L1.7892|
;;;3954   		{
;;;3955   		u_necc=mess_data[1];
001ed0  6840              LDR      r0,[r0,#4]  ; mess_data
001ed2  8020              STRH     r0,[r4,#0]
                  |L1.7892|
;;;3956   		}		
;;;3957   	}
;;;3958   if(ICA_EN)u_necc+=ica_u_necc;
001ed4  486a              LDR      r0,|L1.8320|
001ed6  8800              LDRH     r0,[r0,#0]  ; ICA_EN
001ed8  b120              CBZ      r0,|L1.7908|
001eda  496a              LDR      r1,|L1.8324|
001edc  8820              LDRH     r0,[r4,#0]  ; u_necc
001ede  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
001ee0  4408              ADD      r0,r0,r1
001ee2  8020              STRH     r0,[r4,#0]
                  |L1.7908|
;;;3959   #endif
;;;3960   
;;;3961   
;;;3962   //#ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;3963   /*
;;;3964   #ifndef UKU_TELECORE2015
;;;3965   #ifndef UKU_TELECORE2017
;;;3966   if(unh_cnt0<10)
;;;3967   	{
;;;3968   	unh_cnt0++;
;;;3969   	if(unh_cnt0>=10)
;;;3970   		{
;;;3971   		unh_cnt0=0;
;;;3972   		b1Hz_unh=1;
;;;3973   		}
;;;3974   	}
;;;3975   
;;;3976   if(unh_cnt1<5)
;;;3977   	{
;;;3978   	unh_cnt1++;
;;;3979   	if(unh_cnt1==5)
;;;3980   		{
;;;3981   		unh_cnt1=0;
;;;3982   //		b2Hz_unh=1;
;;;3983   		}
;;;3984   	} 
;;;3985   
;;;3986   
;;;3987   
;;;3988   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;3989   	{		
;;;3990   	if(mess_data[0]==PARAM_UNECC_SET)
;;;3991   		{
;;;3992   		u_necc=mess_data[1];
;;;3993   		}		
;;;3994   	}
;;;3995   
;;;3996   
;;;3997   else if(b1Hz_unh)
;;;3998   	{
;;;3999   	
;;;4000   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;4001   		{
;;;4002   		
;;;4003   		u_necc=U0B;
;;;4004   		}
;;;4005   	else 
;;;4006   		{
;;;4007   		if(BAT_TYPE==0) //если батарея обычная
;;;4008   			{
;;;4009   			for(i=0;i<2;i++)
;;;4010   				{
;;;4011   				if(BAT_IS_ON[i]==bisON)
;;;4012   					{
;;;4013   					if(bat[i]._nd)t[i]=20;
;;;4014   					else t[i]=bat[i]._Tb;
;;;4015   					}
;;;4016   				else
;;;4017   					{
;;;4018   					t[i]=-20;
;;;4019   					}
;;;4020   				}
;;;4021   			if(t[0]>t[1])mat_temper=t[0];
;;;4022   			else mat_temper=t[1];
;;;4023   			
;;;4024   		
;;;4025   			if(mat_temper<0)temp_SL=UB0; 
;;;4026   			else 
;;;4027   				{
;;;4028   				if(mat_temper>40)mat_temper=40; 
;;;4029   				temp_SL=(UB20-UB0)*10;
;;;4030   				temp_SL*=mat_temper;
;;;4031   				temp_SL/=200;
;;;4032   				temp_SL+=UB0;
;;;4033   				}
;;;4034   			if(spc_stat==spcVZ)
;;;4035   				{
;;;4036   				temp_SL=UVZ;
;;;4037   				}
;;;4038   			u_necc=(unsigned int)temp_SL;
;;;4039   			}
;;;4040   		else if(BAT_TYPE==1) //если батарея китайская
;;;4041   			{
;;;4042   			u_necc=U0B;
;;;4043   					
;;;4044   			u_necc=bat[0]._Ub+10;
;;;4045   
;;;4046   			
;;;4047   			if(spc_stat==spcVZ)
;;;4048   				{
;;;4049   				u_necc=UVZ;
;;;4050   				}
;;;4051   			if(u_necc>=UB0) u_necc=UB0;
;;;4052   			if(u_necc>=UB20) u_necc=UB20;
;;;4053   			}
;;;4054   		}  
;;;4055   	}
;;;4056   #endif
;;;4057   #endif*/
;;;4058   /*
;;;4059   #ifdef UKU_TELECORE2015
;;;4060   
;;;4061   if(unh_cnt0<10)
;;;4062   	{
;;;4063   	unh_cnt0++;
;;;4064   	if(unh_cnt0>=10)
;;;4065   		{
;;;4066   		unh_cnt0=0;
;;;4067   		b1Hz_unh=1;
;;;4068   		}
;;;4069   	}
;;;4070   
;;;4071   if(unh_cnt1<5)
;;;4072   	{
;;;4073   	unh_cnt1++;
;;;4074   	if(unh_cnt1==5)
;;;4075   		{
;;;4076   		unh_cnt1=0;
;;;4077   //		b2Hz_unh=1;
;;;4078   		}
;;;4079   	} 
;;;4080   
;;;4081   
;;;4082   
;;;4083   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;4084   	{		
;;;4085   	if(mess_data[0]==PARAM_UNECC_SET)
;;;4086   		{
;;;4087   		u_necc=mess_data[1];
;;;4088   		}		
;;;4089   	}
;;;4090   
;;;4091   
;;;4092   else if(b1Hz_unh)
;;;4093   	{
;;;4094   	b1Hz_unh=0;
;;;4095   
;;;4096   	if(BAT_TYPE==0)
;;;4097   		{
;;;4098   		if(bat[0]._nd)mat_temper=20;
;;;4099   		else mat_temper=bat[0]._Tb;
;;;4100   
;;;4101   			
;;;4102   		if(mat_temper<0)temp_SL=UB0; 
;;;4103   		else 
;;;4104   			{
;;;4105   			if(mat_temper>40)mat_temper=40; 
;;;4106   			temp_SL=(UB20-UB0)*10;
;;;4107   			temp_SL*=mat_temper;
;;;4108   			temp_SL/=200;
;;;4109   			temp_SL+=UB0;
;;;4110   			}
;;;4111   		if(spc_stat==spcVZ)
;;;4112   			{
;;;4113   			temp_SL=UVZ;
;;;4114   			}
;;;4115   		u_necc=(unsigned int)temp_SL;
;;;4116   	///u_necc=3456;
;;;4117   		}
;;;4118   	else if(BAT_TYPE==1)
;;;4119   		{
;;;4120   		
;;;4121   		gran(&DU_LI_BAT,1,30);
;;;4122   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;4123   		gran(&u_necc,0,UB0);
;;;4124   		gran(&u_necc,0,UB20);
;;;4125   		gran(&u_necc,0,540);		
;;;4126   
;;;4127   
;;;4128   		if(li_bat._batStat!=bsOK)
;;;4129   			{
;;;4130   			u_necc=U0B;
;;;4131   			}
;;;4132   		if(spc_stat==spcVZ)
;;;4133   			{
;;;4134   			u_necc=UVZ;
;;;4135   			}
;;;4136   
;;;4137   		}
;;;4138   	else if(BAT_TYPE==2)
;;;4139   		{
;;;4140   		u_necc=U0B;
;;;4141   		
;;;4142   		if(spc_stat==spcVZ)
;;;4143   			{
;;;4144   			u_necc=UVZ;
;;;4145   			}
;;;4146   	
;;;4147   		u_necc=UB0;
;;;4148   		}
;;;4149   
;;;4150   	else if(BAT_TYPE==3)
;;;4151   		{
;;;4152   		u_necc=U0B;
;;;4153   		
;;;4154   		if(spc_stat==spcVZ)
;;;4155   			{
;;;4156   			u_necc=UVZ;
;;;4157   			}
;;;4158   
;;;4159   		gran(&DU_LI_BAT,1,30);
;;;4160   
;;;4161   
;;;4162   		if(lakbNotErrorNum==0)
;;;4163   			{
;;;4164   			u_necc=U0B;
;;;4165   			}
;;;4166   		else 
;;;4167   			{
;;;4168   			signed short i;
;;;4169   			//signed short u_necc_max;
;;;4170   			//u_necc_max=0;
;;;4171   			char soc_flag=0;
;;;4172   
;;;4173   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;4174   				{
;;;4175   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;4176   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;4177   				}
;;;4178   
;;;4179   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;4180   			}
;;;4181   		gran(&u_necc,0,UB0);
;;;4182   		//gran(&u_necc,0,UB20);
;;;4183   		gran(&u_necc,0,540);
;;;4184   		}
;;;4185   	}
;;;4186   
;;;4187   #endif */
;;;4188   /*
;;;4189   #ifdef UKU_TELECORE2017
;;;4190   
;;;4191   if(unh_cnt0<10)
;;;4192   	{
;;;4193   	unh_cnt0++;
;;;4194   	if(unh_cnt0>=10)
;;;4195   		{
;;;4196   		unh_cnt0=0;
;;;4197   		b1Hz_unh=1;
;;;4198   		}
;;;4199   	}
;;;4200   
;;;4201   if(unh_cnt1<5)
;;;4202   	{
;;;4203   	unh_cnt1++;
;;;4204   	if(unh_cnt1==5)
;;;4205   		{
;;;4206   		unh_cnt1=0;
;;;4207   //		b2Hz_unh=1;
;;;4208   		}
;;;4209   	} 
;;;4210   
;;;4211   
;;;4212   
;;;4213   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;4214   	{		
;;;4215   	if(mess_data[0]==PARAM_UNECC_SET)
;;;4216   		{
;;;4217   		u_necc=mess_data[1];
;;;4218   		}		
;;;4219   	}
;;;4220   
;;;4221   
;;;4222   else if(b1Hz_unh)
;;;4223   	{
;;;4224   	b1Hz_unh=0;
;;;4225   
;;;4226   	if(BAT_TYPE==0)
;;;4227   		{
;;;4228   		if(bat[0]._nd)mat_temper=20;
;;;4229   		else mat_temper=bat[0]._Tb;
;;;4230   
;;;4231   			
;;;4232   		if(mat_temper<0)temp_SL=UB0; 
;;;4233   		else 
;;;4234   			{
;;;4235   			if(mat_temper>40)mat_temper=40; 
;;;4236   			temp_SL=(UB20-UB0)*10;
;;;4237   			temp_SL*=mat_temper;
;;;4238   			temp_SL/=200;
;;;4239   			temp_SL+=UB0;
;;;4240   			}
;;;4241   		if(spc_stat==spcVZ)
;;;4242   			{
;;;4243   			temp_SL=UVZ;
;;;4244   			}
;;;4245   		u_necc=(unsigned int)temp_SL;
;;;4246   	///u_necc=3456;
;;;4247   		}
;;;4248   	else if(BAT_TYPE==1)
;;;4249   		{
;;;4250   		
;;;4251   		gran(&DU_LI_BAT,1,30);
;;;4252   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;4253   		gran(&u_necc,0,UB0);
;;;4254   		gran(&u_necc,0,UB20);
;;;4255   		gran(&u_necc,0,540);		
;;;4256   
;;;4257   
;;;4258   		if(li_bat._batStat!=bsOK)
;;;4259   			{
;;;4260   			u_necc=U0B;
;;;4261   			}
;;;4262   		if(spc_stat==spcVZ)
;;;4263   			{
;;;4264   			u_necc=UVZ;
;;;4265   			}
;;;4266   		}
;;;4267   	else if(BAT_TYPE==2)
;;;4268   		{
;;;4269   		u_necc=U0B;
;;;4270   		
;;;4271   		if(spc_stat==spcVZ)
;;;4272   			{
;;;4273   			u_necc=UVZ;
;;;4274   			}
;;;4275   	
;;;4276   		u_necc=UB0;
;;;4277   		}
;;;4278   
;;;4279   	else if(BAT_TYPE==3)
;;;4280   		{
;;;4281   		u_necc=U0B;
;;;4282   		
;;;4283   		if(spc_stat==spcVZ)
;;;4284   			{
;;;4285   			u_necc=UVZ;
;;;4286   			}
;;;4287   
;;;4288   		gran(&DU_LI_BAT,1,30);
;;;4289   
;;;4290   
;;;4291   		if(lakbNotErrorNum==0)
;;;4292   			{
;;;4293   			u_necc=U0B;
;;;4294   			}
;;;4295   		else 
;;;4296   			{
;;;4297   			signed short i;
;;;4298   			//signed short u_necc_max;
;;;4299   			//u_necc_max=0;
;;;4300   			char soc_flag=0;
;;;4301   
;;;4302   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;4303   				{
;;;4304   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;4305   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;4306   				}
;;;4307   
;;;4308   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;4309   			}
;;;4310   		gran(&u_necc,0,UB0);
;;;4311   		//gran(&u_necc,0,UB20);
;;;4312   		gran(&u_necc,0,540);
;;;4313   		}
;;;4314   	}
;;;4315   
;;;4316   #endif 
;;;4317   */
;;;4318   //u_necc=2356;
;;;4319   //#endif//gran(&u_necc,400,UMAX);
;;;4320   
;;;4321   temp_L=(signed long) u_necc;
001ee4  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;4322   temp_L*=98L;
001ee8  f04f0162          MOV      r1,#0x62
001eec  fb00f101          MUL      r1,r0,r1
;;;4323   temp_L/=100L;
001ef0  f04f0264          MOV      r2,#0x64
001ef4  fb91f1f2          SDIV     r1,r1,r2
;;;4324   u_necc_dn=(signed short)temp_L;
001ef8  4b63              LDR      r3,|L1.8328|
001efa  8019              STRH     r1,[r3,#0]
;;;4325   
;;;4326   temp_L=(signed long) u_necc;
;;;4327   temp_L*=102L;
001efc  f04f0166          MOV      r1,#0x66
001f00  fb00f001          MUL      r0,r0,r1
;;;4328   temp_L/=100L;
001f04  fb90f0f2          SDIV     r0,r0,r2
;;;4329   u_necc_up=(signed short)temp_L;
001f08  4960              LDR      r1,|L1.8332|
001f0a  8008              STRH     r0,[r1,#0]
;;;4330   
;;;4331   
;;;4332   }
001f0c  bd38              POP      {r3-r5,pc}
;;;4333   
                          ENDP

                  num_necc_hndl PROC
;;;4335   //-----------------------------------------------
;;;4336   void num_necc_hndl(void)
001f0e  e92d41f0          PUSH     {r4-r8,lr}
;;;4337   {
;;;4338   
;;;4339   static short num_necc_block_cnt;
;;;4340   if(num_necc_block_cnt) num_necc_block_cnt--;
001f12  4c5f              LDR      r4,|L1.8336|
001f14  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
001f18  b110              CBZ      r0,|L1.7968|
001f1a  f1a00001          SUB      r0,r0,#1
001f1e  84e0              STRH     r0,[r4,#0x26]
                  |L1.7968|
;;;4341   
;;;4342   Isumm_=Isumm;
001f20  485c              LDR      r0,|L1.8340|
001f22  4d5d              LDR      r5,|L1.8344|
001f24  8800              LDRH     r0,[r0,#0]  ; Isumm
001f26  8028              STRH     r0,[r5,#0]
;;;4343   
;;;4344   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
001f28  4e5c              LDR      r6,|L1.8348|
001f2a  270a              MOVS     r7,#0xa
001f2c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
001f30  2800              CMP      r0,#0
001f32  da06              BGE      |L1.8002|
001f34  f7fffffe          BL       abs
001f38  fb90f0f7          SDIV     r0,r0,r7
001f3c  8829              LDRH     r1,[r5,#0]  ; Isumm_
001f3e  4408              ADD      r0,r0,r1
001f40  8028              STRH     r0,[r5,#0]
                  |L1.8002|
;;;4345   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
001f42  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
001f46  2800              CMP      r0,#0
001f48  da06              BGE      |L1.8024|
001f4a  f7fffffe          BL       abs
001f4e  fb90f0f7          SDIV     r0,r0,r7
001f52  8829              LDRH     r1,[r5,#0]  ; Isumm_
001f54  4408              ADD      r0,r0,r1
001f56  8028              STRH     r0,[r5,#0]
                  |L1.8024|
;;;4346   
;;;4347   num_necc_up=(Isumm_/((signed short)IMAX))+1;
001f58  4851              LDR      r0,|L1.8352|
001f5a  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
001f5e  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
001f62  fb91f0f0          SDIV     r0,r1,r0
001f66  f1000001          ADD      r0,r0,#1
001f6a  b2c0              UXTB     r0,r0
001f6c  74a0              STRB     r0,[r4,#0x12]
;;;4348   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;4349   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;4350   
;;;4351   num_necc_down=(Isumm_/((signed short)IMIN))+1;
001f6e  4a4d              LDR      r2,|L1.8356|
001f70  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
001f74  fb91f1f2          SDIV     r1,r1,r2
001f78  f1010101          ADD      r1,r1,#1
001f7c  b2c9              UXTB     r1,r1
001f7e  74e1              STRB     r1,[r4,#0x13]
;;;4352   
;;;4353   if(num_necc_up>num_necc)
001f80  4b49              LDR      r3,|L1.8360|
;;;4354   	{
;;;4355   	num_necc=num_necc_up;
;;;4356   	num_necc_block_cnt=60;
001f82  f04f053c          MOV      r5,#0x3c
001f86  f9b32000          LDRSH    r2,[r3,#0]            ;4353  ; num_necc
001f8a  4290              CMP      r0,r2                 ;4353
001f8c  dd02              BLE      |L1.8084|
001f8e  8018              STRH     r0,[r3,#0]            ;4355
001f90  84e5              STRH     r5,[r4,#0x26]
001f92  e005              B        |L1.8096|
                  |L1.8084|
;;;4357   	}
;;;4358   else if(num_necc_down<num_necc)
001f94  4291              CMP      r1,r2
001f96  da03              BGE      |L1.8096|
;;;4359   	{
;;;4360   	if(!num_necc_block_cnt)
001f98  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
001f9a  b908              CBNZ     r0,|L1.8096|
;;;4361   		{
;;;4362   		num_necc=num_necc_down;
001f9c  8019              STRH     r1,[r3,#0]
;;;4363   		num_necc_block_cnt=60;
001f9e  84e5              STRH     r5,[r4,#0x26]
                  |L1.8096|
;;;4364   		}
;;;4365   	}
;;;4366   
;;;4367   /*if(PAR)*/ num_necc=NUMIST;
001fa0  4842              LDR      r0,|L1.8364|
001fa2  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
001fa6  801a              STRH     r2,[r3,#0]
;;;4368   
;;;4369   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4370   //if(bPARALLEL) num_necc=NUMIST;
;;;4371   #endif
;;;4372   
;;;4373   num_necc=NUMIST;
;;;4374   
;;;4375   gran(&num_necc,1,NUMIST);
001fa8  e8bd41f0          POP      {r4-r8,lr}
001fac  2101              MOVS     r1,#1
001fae  483e              LDR      r0,|L1.8360|
001fb0  f7ffbffe          B.W      gran
;;;4376   
;;;4377   }
;;;4378   
                          ENDP

                  cntrl_hndl PROC
;;;4380   //-----------------------------------------------
;;;4381   void cntrl_hndl(void)
001fb4  e92d47f0          PUSH     {r4-r10,lr}
;;;4382   {
;;;4383   #define UBPSMAXPWM	2350
;;;4384   #define UBPSMINPWM	2100
;;;4385   
;;;4386   IZMAX_=IZMAX;
001fb8  483d              LDR      r0,|L1.8368|
001fba  f8df80d4          LDR      r8,|L1.8336|
001fbe  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
001fc2  f8a8103c          STRH     r1,[r8,#0x3c]
;;;4387   
;;;4388   //cntrl_hndl_plazma=10;
;;;4389   
;;;4390   if(speedChIsOn)IZMAX_=speedChrgCurr;
001fc6  482b              LDR      r0,|L1.8308|
001fc8  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
001fca  b118              CBZ      r0,|L1.8148|
001fcc  4839              LDR      r0,|L1.8372|
001fce  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
001fd0  f8a8003c          STRH     r0,[r8,#0x3c]
                  |L1.8148|
;;;4391   
;;;4392   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
001fd4  f9b8004c          LDRSH    r0,[r8,#0x4c]  ; cntrl_stat_blok_cnt
001fd8  b118              CBZ      r0,|L1.8162|
001fda  f1a00001          SUB      r0,r0,#1
001fde  f8a8004c          STRH     r0,[r8,#0x4c]
                  |L1.8162|
;;;4393   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
001fe2  f9b8004e          LDRSH    r0,[r8,#0x4e]  ; cntrl_stat_blok_cnt_
001fe6  b118              CBZ      r0,|L1.8176|
001fe8  f1a00001          SUB      r0,r0,#1
001fec  f8a8004e          STRH     r0,[r8,#0x4e]
                  |L1.8176|
;;;4394   
;;;4395   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
001ff0  482a              LDR      r0,|L1.8348|
001ff2  f04f070a          MOV      r7,#0xa
001ff6  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
001ffa  0792              LSLS     r2,r2,#30
001ffc  d103              BNE      |L1.8198|
001ffe  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
002002  0780              LSLS     r0,r0,#30
002004  d003              BEQ      |L1.8206|
                  |L1.8198|
002006  fb91f0f7          SDIV     r0,r1,r7
00200a  f8a8003c          STRH     r0,[r8,#0x3c]
                  |L1.8206|
;;;4396   
;;;4397   
;;;4398   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4399   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
00200e  482a              LDR      r0,|L1.8376|
002010  e054              B        |L1.8380|
002012  0000              DCW      0x0000
                  |L1.8212|
                          DCD      Ib_ips_termokompensat
                  |L1.8216|
                          DCD      OVERLOAD_CURR
                  |L1.8220|
                          DCD      overloadHndlCnt1
                  |L1.8224|
                          DCD      bIBAT_SMKLBR
                  |L1.8228|
                          DCD      main_1Hz_cnt
                  |L1.8232|
                          DCD      out_U
                  |L1.8236|
                          DCD      UOUTMAX
                  |L1.8240|
                          DCD      uAvarHndlOutUMaxCnt
                  |L1.8244|
                          DCD      TZAS
                  |L1.8248|
                          DCD      UOUTMIN
                  |L1.8252|
                          DCD      uAvarHndlOutUMinCnt
                  |L1.8256|
                          DCD      in_U
                  |L1.8260|
                          DCD      UINMAX
                  |L1.8264|
                          DCD      uAvarHndlInUMaxCnt
                  |L1.8268|
                          DCD      UINMIN
                  |L1.8272|
                          DCD      uAvarHndlInUMinCnt
                  |L1.8276|
                          DCD      sys_T
                  |L1.8280|
                          DCD      TSYSMAX
                  |L1.8284|
                          DCD      sysTAvarHndlCnt
                  |L1.8288|
                          DCD      TERMOKOMPENS
                  |L1.8292|
                          DCD      u_necc
                  |L1.8296|
                          DCD      ND_EXT
                  |L1.8300|
                          DCD      t_ext
                  |L1.8304|
                          DCD      mat_temper
                  |L1.8308|
                          DCD      speedChIsOn
                  |L1.8312|
                          DCD      speedChrgVolt
                  |L1.8316|
                          DCD      mess_data
                  |L1.8320|
                          DCD      ICA_EN
                  |L1.8324|
                          DCD      ica_u_necc
                  |L1.8328|
                          DCD      u_necc_dn
                  |L1.8332|
                          DCD      u_necc_up
                  |L1.8336|
                          DCD      ||area_number.26||
                  |L1.8340|
                          DCD      Isumm
                  |L1.8344|
                          DCD      Isumm_
                  |L1.8348|
                          DCD      bat
                  |L1.8352|
                          DCD      IMAX
                  |L1.8356|
                          DCD      IMIN
                  |L1.8360|
                          DCD      num_necc
                  |L1.8364|
                          DCD      NUMIST
                  |L1.8368|
                          DCD      IZMAX
                  |L1.8372|
                          DCD      speedChrgCurr
                  |L1.8376|
                          DCD      REG_SPEED
                  |L1.8380|
0020bc  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
0020c0  2201              MOVS     r2,#1
0020c2  1e49              SUBS     r1,r1,#1
0020c4  2905              CMP      r1,#5
0020c6  d300              BCC      |L1.8394|
0020c8  8002              STRH     r2,[r0,#0]
                  |L1.8394|
;;;4400   if(ch_cnt0<(10*REG_SPEED))
0020ca  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
0020ce  2400              MOVS     r4,#0                 ;4390
0020d0  eb000180          ADD      r1,r0,r0,LSL #2
0020d4  f8980007          LDRB     r0,[r8,#7]  ; ch_cnt0
0020d8  ebb00f41          CMP      r0,r1,LSL #1
0020dc  da0b              BGE      |L1.8438|
;;;4401   	{
;;;4402   	ch_cnt0++;
0020de  f1000001          ADD      r0,r0,#1
0020e2  b2c0              UXTB     r0,r0
0020e4  f8880007          STRB     r0,[r8,#7]
;;;4403   	if(ch_cnt0>=10*REG_SPEED)
0020e8  ebb00f41          CMP      r0,r1,LSL #1
0020ec  db03              BLT      |L1.8438|
;;;4404   		{
;;;4405   		ch_cnt0=0;
0020ee  f8884007          STRB     r4,[r8,#7]
;;;4406   		b1Hz_ch=1;
0020f2  f8882008          STRB     r2,[r8,#8]
                  |L1.8438|
;;;4407   		}
;;;4408   	}
;;;4409   #endif
;;;4410   
;;;4411   
;;;4412   if(mess_find_unvol(MESS2CNTRL_HNDL))
0020f6  20e1              MOVS     r0,#0xe1
0020f8  f7fffffe          BL       mess_find_unvol
;;;4413   	{
;;;4414   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
0020fc  4df9              LDR      r5,|L1.9444|
;;;4415   		{
;;;4416   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;4417   		}
;;;4418   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;4419   		{
;;;4420   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;4421   		}
;;;4422   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;4423   		{
;;;4424   		static char cntrlStatIsDownCnt;
;;;4425   		cntrl_stat--;
;;;4426   
;;;4427   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;4428   			{
;;;4429   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;4430   			}
;;;4431   		else 
;;;4432   			{
;;;4433   			cntrlStatIsDownCnt=0;
;;;4434   			}
;;;4435   
;;;4436   		}
;;;4437   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;4438   		{
;;;4439   		cntrl_stat=mess_data[1];
;;;4440   		}
;;;4441   
;;;4442   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;4443   		{
;;;4444   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4445   		if(load_U>u_necc)
0020fe  f8dfc3e8          LDR      r12,|L1.9448|
;;;4446   			{
;;;4447   			cntrl_hndl_plazma=11;
;;;4448   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
002102  4bfa              LDR      r3,|L1.9452|
;;;4449   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;4450   			}
;;;4451   		else if(bps_U<u_necc)
;;;4452   			{
;;;4453   			cntrl_hndl_plazma=12;	
;;;4454   			if(((u_necc-bps_U)>40)&&(cntrl_stat<2015))cntrl_stat+=5;
;;;4455   			else	if((cntrl_stat<2020)&&b1Hz_ch)cntrl_stat++;
;;;4456   			}
;;;4457   		#endif	
;;;4458   	 	}
;;;4459   	}
;;;4460   
;;;4461   #ifdef UKU_VD
;;;4462   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
002104  4efa              LDR      r6,|L1.9456|
002106  2800              CMP      r0,#0                 ;4412
002108  d07e              BEQ      |L1.8712|
00210a  6828              LDR      r0,[r5,#0]            ;4414  ; mess_data
00210c  2864              CMP      r0,#0x64              ;4414
00210e  d009              BEQ      |L1.8484|
002110  2869              CMP      r0,#0x69              ;4418
002112  d00e              BEQ      |L1.8498|
002114  49f7              LDR      r1,|L1.9460|
002116  286e              CMP      r0,#0x6e              ;4422
002118  d013              BEQ      |L1.8514|
00211a  28e5              CMP      r0,#0xe5              ;4437
00211c  d033              BEQ      |L1.8582|
00211e  28e6              CMP      r0,#0xe6              ;4442
002120  d035              BEQ      |L1.8590|
002122  e123              B        |L1.9068|
                  |L1.8484|
002124  f8b81020          LDRH     r1,[r8,#0x20]         ;4416  ; cntrl_stat_old
002128  6868              LDR      r0,[r5,#4]            ;4416  ; mess_data
00212a  4408              ADD      r0,r0,r1              ;4416
00212c  f8a8001e          STRH     r0,[r8,#0x1e]         ;4416
002130  e11c              B        |L1.9068|
                  |L1.8498|
002132  f8b81020          LDRH     r1,[r8,#0x20]         ;4420  ; cntrl_stat_old
002136  6868              LDR      r0,[r5,#4]            ;4420  ; mess_data
002138  eba10000          SUB      r0,r1,r0              ;4420
00213c  f8a8001e          STRH     r0,[r8,#0x1e]         ;4420
002140  e114              B        |L1.9068|
                  |L1.8514|
002142  f8b8001e          LDRH     r0,[r8,#0x1e]         ;4425  ; cntrl_stat
002146  f1a00001          SUB      r0,r0,#1              ;4425
00214a  b200              SXTH     r0,r0                 ;4425
00214c  f8a8001e          STRH     r0,[r8,#0x1e]         ;4425
002150  281e              CMP      r0,#0x1e              ;4427
002152  dd06              BLE      |L1.8546|
002154  f9b10000          LDRSH    r0,[r1,#0]            ;4427  ; load_U
002158  49e7              LDR      r1,|L1.9464|
00215a  f9b11000          LDRSH    r1,[r1,#0]            ;4427  ; USIGN
00215e  4288              CMP      r0,r1                 ;4427
002160  da0e              BGE      |L1.8576|
                  |L1.8546|
002162  f8980001          LDRB     r0,[r8,#1]            ;4429  ; cntrlStatIsDownCnt
002166  1c40              ADDS     r0,r0,#1              ;4429
002168  b2c0              UXTB     r0,r0                 ;4429
00216a  f8880001          STRB     r0,[r8,#1]            ;4429
00216e  28fa              CMP      r0,#0xfa              ;4429
002170  d105              BNE      |L1.8574|
002172  230a              MOVS     r3,#0xa               ;4429
002174  2200              MOVS     r2,#0                 ;4429
002176  21e7              MOVS     r1,#0xe7              ;4429
002178  20e6              MOVS     r0,#0xe6              ;4429
00217a  f7fffffe          BL       mess_send
                  |L1.8574|
00217e  e0f5              B        |L1.9068|
                  |L1.8576|
002180  f8884001          STRB     r4,[r8,#1]            ;4433
002184  e0f2              B        |L1.9068|
                  |L1.8582|
002186  6868              LDR      r0,[r5,#4]            ;4439  ; mess_data
002188  f8a8001e          STRH     r0,[r8,#0x1e]         ;4439
00218c  e0ee              B        |L1.9068|
                  |L1.8590|
00218e  f9b11000          LDRSH    r1,[r1,#0]            ;4445  ; load_U
002192  f9bc0000          LDRSH    r0,[r12,#0]           ;4445  ; u_necc
002196  4281              CMP      r1,r0                 ;4445
002198  dd1f              BLE      |L1.8666|
00219a  f04f010b          MOV      r1,#0xb               ;4447
00219e  f888101d          STRB     r1,[r8,#0x1d]         ;4447
0021a2  f9b31000          LDRSH    r1,[r3,#0]            ;4448  ; bps_U
0021a6  eba10000          SUB      r0,r1,r0              ;4448
0021aa  2828              CMP      r0,#0x28              ;4448
0021ac  dd08              BLE      |L1.8640|
0021ae  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4448  ; cntrl_stat
0021b2  2800              CMP      r0,#0                 ;4448
0021b4  dd04              BLE      |L1.8640|
0021b6  f1a00005          SUB      r0,r0,#5              ;4448
0021ba  f8a8001e          STRH     r0,[r8,#0x1e]         ;4448
0021be  e0d5              B        |L1.9068|
                  |L1.8640|
0021c0  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4449  ; cntrl_stat
0021c4  2800              CMP      r0,#0                 ;4449
0021c6  d007              BEQ      |L1.8664|
0021c8  f8981008          LDRB     r1,[r8,#8]            ;4449  ; b1Hz_ch
0021cc  2900              CMP      r1,#0                 ;4449
0021ce  d003              BEQ      |L1.8664|
0021d0  f1a00001          SUB      r0,r0,#1              ;4449
0021d4  f8a8001e          STRH     r0,[r8,#0x1e]         ;4449
                  |L1.8664|
0021d8  e0c8              B        |L1.9068|
                  |L1.8666|
0021da  f9b31000          LDRSH    r1,[r3,#0]            ;4451  ; bps_U
0021de  4281              CMP      r1,r0                 ;4451
0021e0  da11              BGE      |L1.8710|
0021e2  f04f020c          MOV      r2,#0xc               ;4453
0021e6  f888201d          STRB     r2,[r8,#0x1d]         ;4453
0021ea  eba00001          SUB      r0,r0,r1              ;4454
0021ee  2828              CMP      r0,#0x28              ;4454
0021f0  dd0b              BLE      |L1.8714|
0021f2  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4454  ; cntrl_stat
0021f6  f24071df          MOV      r1,#0x7df             ;4454
0021fa  4288              CMP      r0,r1                 ;4454
0021fc  da05              BGE      |L1.8714|
0021fe  f1000005          ADD      r0,r0,#5              ;4454
002202  f8a8001e          STRH     r0,[r8,#0x1e]         ;4454
                  |L1.8710|
002206  e0b1              B        |L1.9068|
                  |L1.8712|
002208  e00d              B        |L1.8742|
                  |L1.8714|
00220a  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4455  ; cntrl_stat
00220e  f24071e4          MOV      r1,#0x7e4             ;4455
002212  4288              CMP      r0,r1                 ;4455
002214  da33              BGE      |L1.8830|
002216  f8981008          LDRB     r1,[r8,#8]            ;4455  ; b1Hz_ch
00221a  b381              CBZ      r1,|L1.8830|
00221c  f1000001          ADD      r0,r0,#1              ;4455
002220  f8a8001e          STRH     r0,[r8,#0x1e]         ;4455
002224  e0a2              B        |L1.9068|
                  |L1.8742|
002226  f8980008          LDRB     r0,[r8,#8]  ; b1Hz_ch
00222a  b340              CBZ      r0,|L1.8830|
00222c  48b3              LDR      r0,|L1.9468|
00222e  8800              LDRH     r0,[r0,#0]  ; bIBAT_SMKLBR
002230  b118              CBZ      r0,|L1.8762|
002232  f89603c3          LDRB     r0,[r6,#0x3c3]  ; bps
002236  2828              CMP      r0,#0x28
002238  d921              BLS      |L1.8830|
                  |L1.8762|
;;;4463   	{
;;;4464   	cntrl_stat_new=cntrl_stat_old;
00223a  f9b80020          LDRSH    r0,[r8,#0x20]  ; cntrl_stat_old
00223e  f8a80038          STRH     r0,[r8,#0x38]
;;;4465   	cntrl_hndl_plazma=19;
002242  f04f0113          MOV      r1,#0x13
002246  f888101d          STRB     r1,[r8,#0x1d]
;;;4466   	if((Ibmax/10)>(2*IZMAX_))
00224a  f9b8203a          LDRSH    r2,[r8,#0x3a]  ; Ibmax
00224e  f8b8103c          LDRH     r1,[r8,#0x3c]  ; IZMAX_
002252  fb92f7f7          SDIV     r7,r2,r7
002256  ebb70f41          CMP      r7,r1,LSL #1
00225a  dd11              BLE      |L1.8832|
;;;4467   		{
;;;4468   		cntrl_hndl_plazma=20;
00225c  f04f0114          MOV      r1,#0x14
002260  f888101d          STRB     r1,[r8,#0x1d]
;;;4469             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
002264  f8b8104c          LDRH     r1,[r8,#0x4c]  ; cntrl_stat_blok_cnt
002268  b121              CBZ      r1,|L1.8820|
00226a  f1a00001          SUB      r0,r0,#1
00226e  f8a80038          STRH     r0,[r8,#0x38]
002272  e03a              B        |L1.8938|
                  |L1.8820|
;;;4470   		else	cntrl_stat_new-=10;
002274  f1a0000a          SUB      r0,r0,#0xa
002278  f8a80038          STRH     r0,[r8,#0x38]
00227c  e035              B        |L1.8938|
                  |L1.8830|
00227e  e075              B        |L1.9068|
                  |L1.8832|
;;;4471   		}		
;;;4472   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
002280  da14              BGE      |L1.8876|
002282  ebc11901          RSB      r9,r1,r1,LSL #4
002286  4591              CMP      r9,r2
002288  da10              BGE      |L1.8876|
;;;4473   		{
;;;4474   		cntrl_hndl_plazma=21;
00228a  f04f0115          MOV      r1,#0x15
00228e  f888101d          STRB     r1,[r8,#0x1d]
;;;4475             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
002292  f8b8104c          LDRH     r1,[r8,#0x4c]  ; cntrl_stat_blok_cnt
002296  b121              CBZ      r1,|L1.8866|
002298  f1a00001          SUB      r0,r0,#1
00229c  f8a80038          STRH     r0,[r8,#0x38]
0022a0  e023              B        |L1.8938|
                  |L1.8866|
;;;4476             else	cntrl_stat_new-=3;
0022a2  f1a00003          SUB      r0,r0,#3
0022a6  f8a80038          STRH     r0,[r8,#0x38]
0022aa  e01e              B        |L1.8938|
                  |L1.8876|
;;;4477   		}   
;;;4478   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
0022ac  ebc11901          RSB      r9,r1,r1,LSL #4
0022b0  4591              CMP      r9,r2
0022b2  dd0a              BLE      |L1.8906|
0022b4  428f              CMP      r7,r1
0022b6  dd08              BLE      |L1.8906|
;;;4479   		{
;;;4480   		cntrl_hndl_plazma=22;
0022b8  f04f0116          MOV      r1,#0x16
0022bc  f888101d          STRB     r1,[r8,#0x1d]
;;;4481   		cntrl_stat_new--;
0022c0  f1a00001          SUB      r0,r0,#1
0022c4  f8a80038          STRH     r0,[r8,#0x38]
0022c8  e00f              B        |L1.8938|
                  |L1.8906|
;;;4482   		}
;;;4483   		
;;;4484   	else if(bps_U<u_necc)
0022ca  f9b30000          LDRSH    r0,[r3,#0]  ; bps_U
0022ce  f9bc1000          LDRSH    r1,[r12,#0]  ; u_necc
0022d2  4288              CMP      r0,r1
0022d4  da04              BGE      |L1.8928|
;;;4485   		{
;;;4486   		cntrl_hndl_plazma=23;
0022d6  f04f0017          MOV      r0,#0x17
0022da  f888001d          STRB     r0,[r8,#0x1d]
0022de  e004              B        |L1.8938|
                  |L1.8928|
;;;4487   /*		if(bps_U<(u_necc-(UB0-UB20)))
;;;4488   			{
;;;4489   			cntrl_hndl_plazma=24;
;;;4490   			if(Ibmax<0)
;;;4491   				{
;;;4492   				cntrl_hndl_plazma=25;
;;;4493                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4494   				else cntrl_stat_new+=10;
;;;4495   				}
;;;4496   			else if(Ibmax<(IZMAX_*5))
;;;4497   				{
;;;4498   				cntrl_hndl_plazma=26;
;;;4499                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4500   				else	cntrl_stat_new+=2;
;;;4501   				}
;;;4502   			else if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4503   				{
;;;4504   				cntrl_hndl_plazma=27;
;;;4505   				cntrl_stat_new++;
;;;4506   				}					
;;;4507   			}	*/
;;;4508   /*		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;4509   			{
;;;4510   			cntrl_hndl_plazma=28;
;;;4511   			if(Ibmax<(IZMAX_*5))
;;;4512   				{
;;;4513   				cntrl_hndl_plazma=29;
;;;4514                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4515   				else	cntrl_stat_new+=2;
;;;4516   				}
;;;4517   			else if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4518   				{
;;;4519   				cntrl_hndl_plazma=30;
;;;4520   				cntrl_stat_new++;
;;;4521   				}					
;;;4522   			}
;;;4523   		else if(bps_U<(u_necc-1))
;;;4524   			{
;;;4525   			cntrl_hndl_plazma=31;
;;;4526   			if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4527   				{
;;;4528   				cntrl_hndl_plazma=32;
;;;4529   				cntrl_stat_new++;
;;;4530   				}					
;;;4531   			}	*/					
;;;4532   		}	
;;;4533   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
0022e0  dd03              BLE      |L1.8938|
;;;4534   		{ 	
;;;4535   		cntrl_hndl_plazma=33;
0022e2  f04f0021          MOV      r0,#0x21
0022e6  f888001d          STRB     r0,[r8,#0x1d]
                  |L1.8938|
;;;4536   /*		if(bps_U>(u_necc+(UB0-UB20)))
;;;4537   			{
;;;4538   			cntrl_hndl_plazma=34;
;;;4539                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4540   			else	cntrl_stat_new-=10;
;;;4541   			}
;;;4542   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;4543   			{
;;;4544   			cntrl_hndl_plazma=35;
;;;4545                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4546   			else cntrl_stat_new-=2;
;;;4547   			}	
;;;4548   		else if(bps_U>(u_necc+1))
;;;4549   			{
;;;4550   			cntrl_hndl_plazma=36;
;;;4551   			cntrl_stat_new--;
;;;4552   			}*/					
;;;4553   		}
;;;4554   
;;;4555   	cntrl_stat_new=(short)((2000L*((long)(UOUT_-in_U+30)))/650L);
0022ea  4885              LDR      r0,|L1.9472|
0022ec  f240228a          MOV      r2,#0x28a
0022f0  f9b01000          LDRSH    r1,[r0,#0]  ; UOUT_
0022f4  4883              LDR      r0,|L1.9476|
0022f6  f9b00000          LDRSH    r0,[r0,#0]  ; in_U
0022fa  eba10000          SUB      r0,r1,r0
0022fe  f100001e          ADD      r0,r0,#0x1e
002302  f44f61fa          MOV      r1,#0x7d0
002306  fb00f101          MUL      r1,r0,r1
00230a  fb91f1f2          SDIV     r1,r1,r2
00230e  f8a81038          STRH     r1,[r8,#0x38]
;;;4556   	if(((signed long)(UOUT_-in_U+30))<0L)cntrl_stat_new=0;
002312  2800              CMP      r0,#0
002314  da01              BGE      |L1.8986|
002316  f8a84038          STRH     r4,[r8,#0x38]
                  |L1.8986|
;;;4557   	gran(&cntrl_stat_new,10,2010);			
00231a  f24072da          MOV      r2,#0x7da
00231e  210a              MOVS     r1,#0xa
002320  4879              LDR      r0,|L1.9480|
002322  f7fffffe          BL       gran
;;;4558   	cntrl_stat_old=cntrl_stat_new;
002326  f8b80038          LDRH     r0,[r8,#0x38]  ; cntrl_stat_new
00232a  f8a80020          STRH     r0,[r8,#0x20]
;;;4559   	cntrl_stat=cntrl_stat_new;
00232e  f8a8001e          STRH     r0,[r8,#0x1e]
;;;4560   	cntrl_stat_buff[cntrl_stat_buff_ptr]=cntrl_stat_new;  //pwm_u_buff[pwm_u_buff_ptr]=pwm_u_;
002332  4a76              LDR      r2,|L1.9484|
002334  f898100b          LDRB     r1,[r8,#0xb]  ; cntrl_stat_buff_ptr
002338  f8220011          STRH     r0,[r2,r1,LSL #1]
;;;4561   	cntrl_stat_buff_ptr++;								   //pwm_u_buff_ptr++;
00233c  f1010101          ADD      r1,r1,#1
002340  b2c8              UXTB     r0,r1
002342  f888000b          STRB     r0,[r8,#0xb]
;;;4562   	
;;;4563   	if(cntrl_stat_buff_ptr>=16)cntrl_stat_buff_ptr=0;	//if(pwm_u_buff_ptr>=16)pwm_u_buff_ptr=0;
002346  2810              CMP      r0,#0x10
002348  d301              BCC      |L1.9038|
00234a  f888400b          STRB     r4,[r8,#0xb]
                  |L1.9038|
;;;4564   		{
;;;4565   		char i;
;;;4566   		signed long tempSL;
;;;4567   		tempSL=0;
00234e  f04f0100          MOV      r1,#0
;;;4568   		for(i=0;i<16;i++)
002352  4608              MOV      r0,r1
                  |L1.9044|
;;;4569   			{
;;;4570   			tempSL+=(signed long)cntrl_stat_buff[i];			//tempSL+=(signed long)pwm_u_buff[i];
002354  f9323010          LDRSH    r3,[r2,r0,LSL #1]
002358  4419              ADD      r1,r1,r3
00235a  f1000001          ADD      r0,r0,#1              ;4568
00235e  b2c0              UXTB     r0,r0                 ;4568
002360  2810              CMP      r0,#0x10              ;4568
002362  d3f7              BCC      |L1.9044|
;;;4571   			}
;;;4572   		tempSL>>=4;
002364  ea4f1021          ASR      r0,r1,#4
;;;4573   		cntrl_stat_buff_=(signed short)tempSL;
002368  f8a80040          STRH     r0,[r8,#0x40]
                  |L1.9068|
;;;4574   		}
;;;4575   	//if(NUMSK)cntrl_stat=cntrl_stat_buff_;
;;;4576   
;;;4577   	}
;;;4578   
;;;4579   #endif
;;;4580   
;;;4581   iiii=0;
00236c  f888400a          STRB     r4,[r8,#0xa]
;;;4582   for(i=0;i<NUMIST;i++)
002370  f8884009          STRB     r4,[r8,#9]
;;;4583        {
;;;4584   
;;;4585   	 //bps[i]._x_avg=0;
;;;4586   
;;;4587        /*if(bps[i]._cnt<30)iiii=1;*/
;;;4588   
;;;4589   	 bps[i]._x_=_x_reg+bps[i]._x_avg;
002374  4f66              LDR      r7,|L1.9488|
002376  4867              LDR      r0,|L1.9492|
002378  f9b72000          LDRSH    r2,[r7,#0]
00237c  f9b03000          LDRSH    r3,[r0,#0]            ;4582
002380  e00c              B        |L1.9116|
                  |L1.9090|
002382  ebc01100          RSB      r1,r0,r0,LSL #4
002386  eb0601c1          ADD      r1,r6,r1,LSL #3
00238a  f8b1c056          LDRH     r12,[r1,#0x56]
00238e  4494              ADD      r12,r12,r2
002390  f8a1c054          STRH     r12,[r1,#0x54]
002394  f1000001          ADD      r0,r0,#1              ;4582
002398  f8880009          STRB     r0,[r8,#9]            ;4582
                  |L1.9116|
00239c  f8980009          LDRB     r0,[r8,#9]            ;4582  ; i
0023a0  4298              CMP      r0,r3                 ;4582
0023a2  dbee              BLT      |L1.9090|
;;;4590   	 //if(bps[i]._flags_tu&0x01) bps[i]._cntrl_stat=0;
;;;4591        }
;;;4592   
;;;4593   /*if(iiii==0)
;;;4594        {
;;;4595        cntrl_stat=1200;	
;;;4596        cntrl_stat_old=1200;
;;;4597        cntrl_stat_new=1200;
;;;4598        }
;;;4599   gran(&cntrl_stat,10,2010); */
;;;4600   
;;;4601   //if(main_1Hz_cnt<10)	cntrl_stat=2000;
;;;4602   
;;;4603   if(++_x_reg_cnt>=100)
0023a4  495c              LDR      r1,|L1.9496|
;;;4604   	{
;;;4605   	_x_reg_cnt=0;
;;;4606   
;;;4607   	if((out_U<UOUT)&&(vd_U>20))
0023a6  4e5d              LDR      r6,|L1.9500|
0023a8  8808              LDRH     r0,[r1,#0]            ;4603  ; _x_reg_cnt
0023aa  1c40              ADDS     r0,r0,#1              ;4603
0023ac  b200              SXTH     r0,r0                 ;4603
0023ae  8008              STRH     r0,[r1,#0]            ;4603
0023b0  2864              CMP      r0,#0x64              ;4603
0023b2  db1a              BLT      |L1.9194|
0023b4  800c              STRH     r4,[r1,#0]            ;4605
0023b6  485a              LDR      r0,|L1.9504|
0023b8  4b5a              LDR      r3,|L1.9508|
0023ba  f9b01000          LDRSH    r1,[r0,#0]  ; out_U
0023be  f9b60000          LDRSH    r0,[r6,#0]  ; UOUT
0023c2  4281              CMP      r1,r0
0023c4  da08              BGE      |L1.9176|
0023c6  f9b3c000          LDRSH    r12,[r3,#0]  ; vd_U
0023ca  f1bc0f14          CMP      r12,#0x14
0023ce  dd03              BLE      |L1.9176|
;;;4608   		{
;;;4609   		_x_reg++;
0023d0  f1020201          ADD      r2,r2,#1
0023d4  803a              STRH     r2,[r7,#0]
0023d6  e008              B        |L1.9194|
                  |L1.9176|
;;;4610   		}
;;;4611   	else if((out_U>UOUT)&&(vd_U>20))
0023d8  4281              CMP      r1,r0
0023da  dd06              BLE      |L1.9194|
0023dc  f9b30000          LDRSH    r0,[r3,#0]  ; vd_U
0023e0  2814              CMP      r0,#0x14
0023e2  dd02              BLE      |L1.9194|
;;;4612   		{
;;;4613   		_x_reg--;
0023e4  f1a20201          SUB      r2,r2,#1
0023e8  803a              STRH     r2,[r7,#0]
                  |L1.9194|
;;;4614   		}
;;;4615   	}
;;;4616   gran(&_x_reg,-50,50);
0023ea  2232              MOVS     r2,#0x32
0023ec  4251              RSBS     r1,r2,#0
0023ee  4848              LDR      r0,|L1.9488|
0023f0  f7fffffe          BL       gran
;;;4617   gran(&_x_reg,UBPSMINPWM-UOUT,UBPSMAXPWM-UOUT);
0023f4  8830              LDRH     r0,[r6,#0]  ; UOUT
0023f6  f6a0112e          SUB      r1,r0,#0x92e
0023fa  4249              RSBS     r1,r1,#0
0023fc  f6a00034          SUB      r0,r0,#0x834
002400  b20a              SXTH     r2,r1
002402  4240              RSBS     r0,r0,#0
002404  b201              SXTH     r1,r0
002406  4842              LDR      r0,|L1.9488|
002408  f7fffffe          BL       gran
;;;4618   
;;;4619   if(mess_data[0]==PARAM_CNTRL_STAT_SET)
00240c  6828              LDR      r0,[r5,#0]  ; mess_data
00240e  28e5              CMP      r0,#0xe5
002410  d10c              BNE      |L1.9260|
;;;4620   		{
;;;4621   		if(cntrl_stat==1020)_x_reg=5000;
002412  f9b8001e          LDRSH    r0,[r8,#0x1e]  ; cntrl_stat
002416  f5b07f7f          CMP      r0,#0x3fc
00241a  d102              BNE      |L1.9250|
00241c  f2413188          MOV      r1,#0x1388
002420  8039              STRH     r1,[r7,#0]
                  |L1.9250|
;;;4622   		if(cntrl_stat==30)_x_reg=-5000;
002422  281e              CMP      r0,#0x1e
002424  d102              BNE      |L1.9260|
002426  f64e4078          MOV      r0,#0xec78
00242a  8038              STRH     r0,[r7,#0]
                  |L1.9260|
;;;4623   		}
;;;4624   
;;;4625   b1Hz_ch=0;
00242c  f8884008          STRB     r4,[r8,#8]
;;;4626   }
002430  e8bd87f0          POP      {r4-r10,pc}
;;;4627   
                          ENDP

                  ext_drv PROC
;;;4629   //-----------------------------------------------
;;;4630   void ext_drv(void)
002434  e92d5ff0          PUSH     {r4-r12,lr}
;;;4631   {
;;;4632   char i;
;;;4633   
;;;4634   
;;;4635   for(i=0;i<NUMSK;i++)
002438  f04f0000          MOV      r0,#0
00243c  4a3c              LDR      r2,|L1.9520|
;;;4636   	{
;;;4637   	#ifdef UKU_MGTS
;;;4638   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;4639   	#endif
;;;4640   	#ifdef UKU_RSTKM
;;;4641   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;4642   	#endif
;;;4643   	#ifdef UKU_3U
;;;4644   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;4645   	#endif
;;;4646   	#ifdef UKU_GLONASS
;;;4647   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;4648   	#endif
;;;4649   	#ifdef UKU_KONTUR
;;;4650   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;4651   	#endif
;;;4652   	#ifdef UKU_6U
;;;4653   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;4654   	#endif
;;;4655   	#ifdef UKU_220
;;;4656   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4657   	#endif
;;;4658   	#ifdef UKU_220_V2
;;;4659   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4660   	#endif
;;;4661   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4662   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4663   	#endif
;;;4664   	#ifdef UKU_TELECORE2015	
;;;4665   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;4666   	#endif
;;;4667   	#ifdef UKU_TELECORE2017
;;;4668   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;4669   	#endif		
;;;4670   		{
;;;4671   		if(sk_cnt[i]<10)
00243e  4b3a              LDR      r3,|L1.9512|
;;;4672   			{
;;;4673   			sk_cnt[i]++;
;;;4674   			if(sk_cnt[i]>=10)
;;;4675   				{
;;;4676   				sk_stat[i]=ssON;
002440  4d3a              LDR      r5,|L1.9516|
002442  f04f0a01          MOV      r10,#1
;;;4677   				}
;;;4678   			}
;;;4679   		else 
;;;4680   			{
;;;4681   			sk_cnt[i]=10;
002446  f04f0b0a          MOV      r11,#0xa
00244a  4606              MOV      r6,r0                 ;4635
00244c  f9b24000          LDRSH    r4,[r2,#0]            ;4635
002450  e026              B        |L1.9376|
                  |L1.9298|
002452  4938              LDR      r1,|L1.9524|
002454  4f2d              LDR      r7,|L1.9484|
002456  5c09              LDRB     r1,[r1,r0]            ;4662
002458  3f40              SUBS     r7,r7,#0x40           ;4662
00245a  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;4662
00245e  f5b16ffa          CMP      r1,#0x7d0             ;4662
002462  da0e              BGE      |L1.9346|
002464  5619              LDRSB    r1,[r3,r0]            ;4671
002466  290a              CMP      r1,#0xa               ;4671
002468  da08              BGE      |L1.9340|
00246a  f1010101          ADD      r1,r1,#1              ;4673
00246e  b249              SXTB     r1,r1                 ;4673
002470  5419              STRB     r1,[r3,r0]            ;4673
002472  290a              CMP      r1,#0xa               ;4674
002474  db11              BLT      |L1.9370|
002476  f805a000          STRB     r10,[r5,r0]           ;4676
00247a  e00e              B        |L1.9370|
                  |L1.9340|
00247c  f803b000          STRB     r11,[r3,r0]
002480  e00b              B        |L1.9370|
                  |L1.9346|
;;;4682   			}
;;;4683                  
;;;4684   		}
;;;4685   	else
;;;4686   		{
;;;4687   		if(sk_cnt[i]>0)
002482  5619              LDRSB    r1,[r3,r0]
002484  2900              CMP      r1,#0
002486  dd07              BLE      |L1.9368|
;;;4688   			{
;;;4689   			sk_cnt[i]--;
002488  f1a10101          SUB      r1,r1,#1
00248c  b249              SXTB     r1,r1
00248e  5419              STRB     r1,[r3,r0]
;;;4690   			if(sk_cnt[i]<=0)
002490  2900              CMP      r1,#0
002492  dc02              BGT      |L1.9370|
;;;4691   				{
;;;4692   				sk_stat[i]=ssOFF;
002494  542e              STRB     r6,[r5,r0]
002496  e000              B        |L1.9370|
                  |L1.9368|
;;;4693   				}
;;;4694   			}
;;;4695   		else 
;;;4696   			{
;;;4697   			sk_cnt[i]=0;
002498  541e              STRB     r6,[r3,r0]
                  |L1.9370|
00249a  f1000001          ADD      r0,r0,#1              ;4635
00249e  b2c0              UXTB     r0,r0                 ;4635
                  |L1.9376|
0024a0  42a0              CMP      r0,r4                 ;4635
0024a2  dbd6              BLT      |L1.9298|
;;;4698   			}
;;;4699   		}
;;;4700   	}
;;;4701   
;;;4702   for(i=0;i<NUMSK;i++)
0024a4  f04f0400          MOV      r4,#0
;;;4703   	{
;;;4704   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;4705   		{
;;;4706   		if(sk_av_cnt[i]<10)
0024a8  f8df908c          LDR      r9,|L1.9528|
;;;4707   			{
;;;4708   			sk_av_cnt[i]++;
;;;4709   			if(sk_av_cnt[i]>=10)
;;;4710   				{
;;;4711   				sk_av_stat[i]=sasON;
0024ac  4f23              LDR      r7,|L1.9532|
;;;4712   				}
;;;4713   			}
;;;4714   		else 
;;;4715   			{
;;;4716   			sk_av_cnt[i]=10;
;;;4717   			}
;;;4718   		}
;;;4719   	else
;;;4720   		{
;;;4721   		if(sk_av_cnt[i]>=0)
;;;4722   			{
;;;4723   			sk_av_cnt[i]--;
;;;4724   			if(sk_av_cnt[i]<=0)
;;;4725   				{
;;;4726   				sk_av_stat[i]=sasOFF;
;;;4727   				}
;;;4728   			}
;;;4729   		else 
;;;4730   			{
;;;4731   			sk_av_cnt[i]=0;
;;;4732   			}
;;;4733   		}
;;;4734   
;;;4735   #ifndef UKU_KONTUR
;;;4736   	if(sk_av_stat_old[i]!=sk_av_stat[i])
0024ae  f8df8090          LDR      r8,|L1.9536|
0024b2  e0b5              B        |L1.9760|
                  |L1.9396|
0024b4  4823              LDR      r0,|L1.9540|
0024b6  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;4704
0024ba  b910              CBNZ     r0,|L1.9410|
0024bc  5d29              LDRB     r1,[r5,r4]            ;4704
0024be  2901              CMP      r1,#1                 ;4704
0024c0  d042              BEQ      |L1.9544|
                  |L1.9410|
0024c2  b108              CBZ      r0,|L1.9416|
0024c4  5d28              LDRB     r0,[r5,r4]            ;4704
0024c6  b160              CBZ      r0,|L1.9442|
                  |L1.9416|
0024c8  f9190004          LDRSB    r0,[r9,r4]            ;4721
0024cc  2800              CMP      r0,#0                 ;4721
0024ce  db4c              BLT      |L1.9578|
0024d0  f1a00001          SUB      r0,r0,#1              ;4723
0024d4  b240              SXTB     r0,r0                 ;4723
0024d6  f8090004          STRB     r0,[r9,r4]            ;4723
0024da  2800              CMP      r0,#0                 ;4724
0024dc  dc47              BGT      |L1.9582|
0024de  553e              STRB     r6,[r7,r4]            ;4726
0024e0  e045              B        |L1.9582|
                  |L1.9442|
0024e2  e031              B        |L1.9544|
                  |L1.9444|
                          DCD      mess_data
                  |L1.9448|
                          DCD      u_necc
                  |L1.9452|
                          DCD      bps_U
                  |L1.9456|
                          DCD      bps
                  |L1.9460|
                          DCD      load_U
                  |L1.9464|
                          DCD      USIGN
                  |L1.9468|
                          DCD      bIBAT_SMKLBR
                  |L1.9472|
                          DCD      UOUT_
                  |L1.9476|
                          DCD      in_U
                  |L1.9480|
                          DCD      ||area_number.26||+0x38
                  |L1.9484|
                          DCD      ||.bss||+0x440
                  |L1.9488|
                          DCD      _x_reg
                  |L1.9492|
                          DCD      NUMIST
                  |L1.9496|
                          DCD      _x_reg_cnt
                  |L1.9500|
                          DCD      UOUT
                  |L1.9504|
                          DCD      out_U
                  |L1.9508|
                          DCD      vd_U
                  |L1.9512|
                          DCD      sk_cnt
                  |L1.9516|
                          DCD      sk_stat
                  |L1.9520|
                          DCD      NUMSK
                  |L1.9524|
                          DCD      ||area_number.20||
                  |L1.9528|
                          DCD      sk_av_cnt
                  |L1.9532|
                          DCD      sk_av_stat
                  |L1.9536|
                          DCD      sk_av_stat_old
                  |L1.9540|
                          DCD      SK_SIGN
                  |L1.9544|
002548  f9190004          LDRSB    r0,[r9,r4]            ;4706
00254c  280a              CMP      r0,#0xa               ;4706
00254e  da09              BGE      |L1.9572|
002550  f1000001          ADD      r0,r0,#1              ;4708
002554  b240              SXTB     r0,r0                 ;4708
002556  f8090004          STRB     r0,[r9,r4]            ;4708
00255a  280a              CMP      r0,#0xa               ;4709
00255c  db07              BLT      |L1.9582|
00255e  f807a004          STRB     r10,[r7,r4]           ;4711
002562  e004              B        |L1.9582|
                  |L1.9572|
002564  f809b004          STRB     r11,[r9,r4]           ;4716
002568  e001              B        |L1.9582|
                  |L1.9578|
00256a  f8096004          STRB     r6,[r9,r4]            ;4731
                  |L1.9582|
00256e  f8181004          LDRB     r1,[r8,r4]
002572  5d38              LDRB     r0,[r7,r4]
002574  4281              CMP      r1,r0
002576  d04d              BEQ      |L1.9748|
;;;4737   		{
;;;4738   		plazma_sk++;
002578  4afd              LDR      r2,|L1.10608|
00257a  8ed1              LDRH     r1,[r2,#0x36]  ; plazma_sk
00257c  f1010101          ADD      r1,r1,#1
002580  86d1              STRH     r1,[r2,#0x36]
;;;4739   		if(sk_av_stat[i]==sasON)
002582  2801              CMP      r0,#1
002584  d007              BEQ      |L1.9622|
;;;4740   			{
;;;4741   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;4742   			else if(i==1)
;;;4743   				{
;;;4744   				#ifndef UKU_TELEKORE2017
;;;4745   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;4746   				#endif
;;;4747   				#ifdef UKU_TELEKORE2017
;;;4748   				snmp_trap_send("Door open",15,2,1);
;;;4749   				#endif
;;;4750   				}
;;;4751   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;4752   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;4753   			}
;;;4754   		else 
;;;4755   			{
;;;4756   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
002586  b354              CBZ      r4,|L1.9694|
;;;4757   			else if(i==1)
002588  2c01              CMP      r4,#1
00258a  d02f              BEQ      |L1.9708|
;;;4758   				{
;;;4759   				#ifndef UKU_TELEKORE2017
;;;4760   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;4761   				#endif
;;;4762   				#ifdef UKU_TELEKORE2017
;;;4763   				snmp_trap_send("Door open clear",15,2,0);
;;;4764   				#endif
;;;4765   				}
;;;4766   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00258c  2c02              CMP      r4,#2
00258e  d034              BEQ      |L1.9722|
;;;4767   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
002590  2c03              CMP      r4,#3
002592  d039              BEQ      |L1.9736|
002594  e03e              B        |L1.9748|
                  |L1.9622|
002596  b134              CBZ      r4,|L1.9638|
002598  2c01              CMP      r4,#1                 ;4742
00259a  d00b              BEQ      |L1.9652|
00259c  2c02              CMP      r4,#2                 ;4751
00259e  d010              BEQ      |L1.9666|
0025a0  2c03              CMP      r4,#3                 ;4752
0025a2  d015              BEQ      |L1.9680|
0025a4  e036              B        |L1.9748|
                  |L1.9638|
0025a6  2301              MOVS     r3,#1                 ;4741
0025a8  461a              MOV      r2,r3                 ;4741
0025aa  210f              MOVS     r1,#0xf               ;4741
0025ac  a0f1              ADR      r0,|L1.10612|
0025ae  f7fffffe          BL       snmp_trap_send
0025b2  e02f              B        |L1.9748|
                  |L1.9652|
0025b4  2301              MOVS     r3,#1                 ;4745
0025b6  2202              MOVS     r2,#2                 ;4745
0025b8  210f              MOVS     r1,#0xf               ;4745
0025ba  a0f1              ADR      r0,|L1.10624|
0025bc  f7fffffe          BL       snmp_trap_send
0025c0  e028              B        |L1.9748|
                  |L1.9666|
0025c2  2301              MOVS     r3,#1                 ;4751
0025c4  2203              MOVS     r2,#3                 ;4751
0025c6  210f              MOVS     r1,#0xf               ;4751
0025c8  a0f0              ADR      r0,|L1.10636|
0025ca  f7fffffe          BL       snmp_trap_send
0025ce  e021              B        |L1.9748|
                  |L1.9680|
0025d0  2301              MOVS     r3,#1                 ;4752
0025d2  2204              MOVS     r2,#4                 ;4752
0025d4  210f              MOVS     r1,#0xf               ;4752
0025d6  a0f0              ADR      r0,|L1.10648|
0025d8  f7fffffe          BL       snmp_trap_send
0025dc  e01a              B        |L1.9748|
                  |L1.9694|
0025de  2300              MOVS     r3,#0                 ;4756
0025e0  2201              MOVS     r2,#1                 ;4756
0025e2  210f              MOVS     r1,#0xf               ;4756
0025e4  a0ef              ADR      r0,|L1.10660|
0025e6  f7fffffe          BL       snmp_trap_send
0025ea  e013              B        |L1.9748|
                  |L1.9708|
0025ec  2300              MOVS     r3,#0                 ;4760
0025ee  2202              MOVS     r2,#2                 ;4760
0025f0  210f              MOVS     r1,#0xf               ;4760
0025f2  a0f1              ADR      r0,|L1.10680|
0025f4  f7fffffe          BL       snmp_trap_send
0025f8  e00c              B        |L1.9748|
                  |L1.9722|
0025fa  2300              MOVS     r3,#0                 ;4766
0025fc  2203              MOVS     r2,#3                 ;4766
0025fe  210f              MOVS     r1,#0xf               ;4766
002600  a0f2              ADR      r0,|L1.10700|
002602  f7fffffe          BL       snmp_trap_send
002606  e005              B        |L1.9748|
                  |L1.9736|
002608  2300              MOVS     r3,#0
00260a  2204              MOVS     r2,#4
00260c  210f              MOVS     r1,#0xf
00260e  a0f4              ADR      r0,|L1.10720|
002610  f7fffffe          BL       snmp_trap_send
                  |L1.9748|
;;;4768   			}
;;;4769   	 	}
;;;4770   #endif
;;;4771   
;;;4772   #ifdef UKU_KONTUR
;;;4773   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;4774   		{
;;;4775   		plazma_sk++;
;;;4776   		if(sk_av_stat[i]==sasON)
;;;4777   			{
;;;4778   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;4779   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;4780   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;4781   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;4782   			}
;;;4783   		else 
;;;4784   			{
;;;4785   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;4786   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;4787   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;4788   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;4789   			}
;;;4790   	 	}
;;;4791   #endif
;;;4792   	sk_av_stat_old[i]=sk_av_stat[i];
002614  5d38              LDRB     r0,[r7,r4]
002616  f8080004          STRB     r0,[r8,r4]
00261a  f1040401          ADD      r4,r4,#1              ;4702
00261e  b2e4              UXTB     r4,r4                 ;4702
                  |L1.9760|
002620  48f4              LDR      r0,|L1.10740|
002622  f9b00000          LDRSH    r0,[r0,#0]            ;4702  ; NUMSK
002626  4284              CMP      r4,r0                 ;4702
002628  f6ffaf44          BLT      |L1.9396|
                  |L1.9772|
;;;4793   	}
;;;4794   }
00262c  e8bd9ff0          POP      {r4-r12,pc}
;;;4795   
                          ENDP

                  zar_superviser_start PROC
;;;4832   //-----------------------------------------------
;;;4833   void zar_superviser_start(void)
002630  4af1              LDR      r2,|L1.10744|
;;;4834   {
;;;4835   sign_U[0]=1;
002632  f04f0001          MOV      r0,#1
002636  7010              STRB     r0,[r2,#0]
;;;4836   sign_I[0]=1;
002638  49f0              LDR      r1,|L1.10748|
00263a  7008              STRB     r0,[r1,#0]
;;;4837   sign_U[1]=1;
00263c  7050              STRB     r0,[r2,#1]
;;;4838   sign_I[1]=1;
00263e  7048              STRB     r0,[r1,#1]
;;;4839   
;;;4840   }
002640  4770              BX       lr
;;;4841   
                          ENDP

                  zar_superviser_drv PROC
;;;4797   //-----------------------------------------------
;;;4798   void zar_superviser_drv(void)
002642  e92d5ff0          PUSH     {r4-r12,lr}
;;;4799   {
;;;4800   
;;;4801   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
002646  48ef              LDR      r0,|L1.10756|
002648  f8df93bc          LDR      r9,|L1.10760|
00264c  f8df83b0          LDR      r8,|L1.10752|
002650  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
002654  f9b90000          LDRSH    r0,[r9,#0]
002658  4cc5              LDR      r4,|L1.10608|
00265a  ebc01100          RSB      r1,r0,r0,LSL #4
00265e  f9b87002          LDRSH    r7,[r8,#2]  ; bat
002662  f06f0a1d          MVN      r10,#0x1d
002666  f06f0b95          MVN      r11,#0x95
00266a  2500              MOVS     r5,#0
00266c  4ee2              LDR      r6,|L1.10744|
00266e  f9b40044          LDRSH    r0,[r4,#0x44]
002672  eb0a0281          ADD      r2,r10,r1,LSL #2
002676  eb0b0381          ADD      r3,r11,r1,LSL #2
00267a  4567              CMP      r7,r12
00267c  dc05              BGT      |L1.9866|
00267e  f8dfc38c          LDR      r12,|L1.10764|
002682  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
002686  4567              CMP      r7,r12
002688  da04              BGE      |L1.9876|
                  |L1.9866|
00268a  4282              CMP      r2,r0
00268c  dd02              BLE      |L1.9876|
00268e  4283              CMP      r3,r0
002690  da00              BGE      |L1.9876|
002692  7035              STRB     r5,[r6,#0]
                  |L1.9876|
;;;4802   
;;;4803   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
002694  4fde              LDR      r7,|L1.10768|
002696  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
00269a  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
00269e  4fd7              LDR      r7,|L1.10748|
0026a0  ebbc0f4e          CMP      r12,lr,LSL #1
0026a4  dc04              BGT      |L1.9904|
0026a6  f1ce0e00          RSB      lr,lr,#0
0026aa  ebbc0f4e          CMP      r12,lr,LSL #1
0026ae  da04              BGE      |L1.9914|
                  |L1.9904|
0026b0  4282              CMP      r2,r0
0026b2  dd02              BLE      |L1.9914|
0026b4  4283              CMP      r3,r0
0026b6  da00              BGE      |L1.9914|
0026b8  703d              STRB     r5,[r7,#0]
                  |L1.9914|
;;;4804   																 
;;;4805   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0026ba  f06f0209          MVN      r2,#9
0026be  eb020181          ADD      r1,r2,r1,LSL #2
0026c2  4281              CMP      r1,r0
0026c4  d120              BNE      |L1.9992|
0026c6  7da0              LDRB     r0,[r4,#0x16]  ; spc_stat
0026c8  b9f0              CBNZ     r0,|L1.9992|
;;;4806   	{
;;;4807   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
0026ca  7830              LDRB     r0,[r6,#0]  ; sign_U
0026cc  2801              CMP      r0,#1
0026ce  d11b              BNE      |L1.9992|
0026d0  7838              LDRB     r0,[r7,#0]  ; sign_I
0026d2  2801              CMP      r0,#1
0026d4  d118              BNE      |L1.9992|
0026d6  f44f70d6          MOV      r0,#0x1ac
0026da  f7fffffe          BL       lc640_read_int
0026de  49cd              LDR      r1,|L1.10772|
0026e0  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
0026e4  4288              CMP      r0,r1
0026e6  d00f              BEQ      |L1.9992|
0026e8  48cb              LDR      r0,|L1.10776|
0026ea  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0026ec  b160              CBZ      r0,|L1.9992|
0026ee  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
0026f2  07c0              LSLS     r0,r0,#31
0026f4  d108              BNE      |L1.9992|
;;;4808   		{
;;;4809   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
0026f6  f44f70d6          MOV      r0,#0x1ac
0026fa  f7fffffe          BL       lc640_write_int
;;;4810   		superviser_cnt++;
0026fe  48c7              LDR      r0,|L1.10780|
002700  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
002702  f1010101          ADD      r1,r1,#1
002706  7001              STRB     r1,[r0,#0]
                  |L1.9992|
;;;4811   		}
;;;4812   	
;;;4813   	}
;;;4814   
;;;4815   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
002708  48be              LDR      r0,|L1.10756|
00270a  f9b81002          LDRSH    r1,[r8,#2]  ; bat
00270e  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
002712  4281              CMP      r1,r0
002714  dc06              BGT      |L1.10020|
002716  48bd              LDR      r0,|L1.10764|
002718  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
00271c  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
002720  4281              CMP      r1,r0
002722  da0e              BGE      |L1.10050|
                  |L1.10020|
002724  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
002728  f9b41044          LDRSH    r1,[r4,#0x44]  ; main_kb_cnt
00272c  ebc01000          RSB      r0,r0,r0,LSL #4
002730  eb0a0280          ADD      r2,r10,r0,LSL #2
002734  428a              CMP      r2,r1
002736  dd04              BLE      |L1.10050|
002738  eb0b0080          ADD      r0,r11,r0,LSL #2
00273c  4288              CMP      r0,r1
00273e  da00              BGE      |L1.10050|
002740  7075              STRB     r5,[r6,#1]
                  |L1.10050|
;;;4816   
;;;4817   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
002742  49b3              LDR      r1,|L1.10768|
002744  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
002748  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
00274c  ebb00f41          CMP      r0,r1,LSL #1
002750  dc03              BGT      |L1.10074|
002752  4249              RSBS     r1,r1,#0
002754  ebb00f41          CMP      r0,r1,LSL #1
002758  da0e              BGE      |L1.10104|
                  |L1.10074|
00275a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00275e  f9b41044          LDRSH    r1,[r4,#0x44]  ; main_kb_cnt
002762  ebc01000          RSB      r0,r0,r0,LSL #4
002766  eb0a0280          ADD      r2,r10,r0,LSL #2
00276a  428a              CMP      r2,r1
00276c  dd04              BLE      |L1.10104|
00276e  eb0b0080          ADD      r0,r11,r0,LSL #2
002772  4288              CMP      r0,r1
002774  da00              BGE      |L1.10104|
002776  707d              STRB     r5,[r7,#1]
                  |L1.10104|
;;;4818   																 
;;;4819   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
002778  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00277c  ebc01100          RSB      r1,r0,r0,LSL #4
002780  f06f0009          MVN      r0,#9
002784  eb000081          ADD      r0,r0,r1,LSL #2
002788  f9b41044          LDRSH    r1,[r4,#0x44]  ; main_kb_cnt
00278c  4288              CMP      r0,r1
00278e  d121              BNE      |L1.10196|
002790  7da0              LDRB     r0,[r4,#0x16]  ; spc_stat
002792  b9f8              CBNZ     r0,|L1.10196|
;;;4820   	{
;;;4821   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
002794  7870              LDRB     r0,[r6,#1]  ; sign_U
002796  2801              CMP      r0,#1
002798  d11c              BNE      |L1.10196|
00279a  7878              LDRB     r0,[r7,#1]  ; sign_I
00279c  2801              CMP      r0,#1
00279e  d119              BNE      |L1.10196|
0027a0  f44f75e5          MOV      r5,#0x1ca
0027a4  4628              MOV      r0,r5
0027a6  f7fffffe          BL       lc640_read_int
0027aa  499a              LDR      r1,|L1.10772|
0027ac  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
0027b0  4288              CMP      r0,r1
0027b2  d00f              BEQ      |L1.10196|
0027b4  4898              LDR      r0,|L1.10776|
0027b6  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0027b8  2802              CMP      r0,#2
0027ba  d10b              BNE      |L1.10196|
0027bc  f8980089          LDRB     r0,[r8,#0x89]  ; bat
0027c0  07c0              LSLS     r0,r0,#31
0027c2  d107              BNE      |L1.10196|
;;;4822   		{
;;;4823   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
0027c4  4628              MOV      r0,r5
0027c6  f7fffffe          BL       lc640_write_int
;;;4824   		superviser_cnt++;
0027ca  4894              LDR      r0,|L1.10780|
0027cc  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
0027ce  f1010101          ADD      r1,r1,#1
0027d2  7001              STRB     r1,[r0,#0]
                  |L1.10196|
;;;4825   		}
;;;4826   	
;;;4827   	}
;;;4828   
;;;4829   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
0027d4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0027d8  f06f0101          MVN      r1,#1
0027dc  ebc01000          RSB      r0,r0,r0,LSL #4
0027e0  eb010080          ADD      r0,r1,r0,LSL #2
0027e4  f9b41044          LDRSH    r1,[r4,#0x44]  ; main_kb_cnt
0027e8  4288              CMP      r0,r1
0027ea  d102              BNE      |L1.10226|
0027ec  e8bd5ff0          POP      {r4-r12,lr}
0027f0  e7fe              B        zar_superviser_start
                  |L1.10226|
;;;4830   }
0027f2  e71b              B        |L1.9772|
;;;4831   
                          ENDP

                  npn_hndl PROC
;;;4842   //-----------------------------------------------
;;;4843   void npn_hndl(void)
0027f4  e92d03f0          PUSH     {r4-r9}
;;;4844   {
;;;4845   if(NPN_OUT!=npnoOFF)
0027f8  4889              LDR      r0,|L1.10784|
;;;4846   	{
;;;4847   /*	if(NPN_SIGN==npnsAVNET)
;;;4848   		{
;;;4849   		if(net_av==1)
;;;4850   			{
;;;4851   			if(npn_tz_cnt<TZNPN)
;;;4852   				{
;;;4853   				npn_tz_cnt++;
;;;4854   				if(npn_tz_cnt==TZNPN)
;;;4855   					{
;;;4856   					npn_stat=npnsOFF;
;;;4857   					}
;;;4858   				}
;;;4859   			}
;;;4860   		else
;;;4861   			{
;;;4862   			if(npn_tz_cnt)
;;;4863   				{
;;;4864   				npn_tz_cnt--;
;;;4865   				if(npn_tz_cnt==0)
;;;4866   					{
;;;4867   					npn_stat=npnsON;
;;;4868   					}
;;;4869   				}
;;;4870   			}
;;;4871   		}*/
;;;4872   /*	if(NPN_SIGN==npnsULOAD)
;;;4873   		{
;;;4874   		if(load_U<UONPN)
;;;4875   			{
;;;4876   			if(npn_tz_cnt<TZNPN)
;;;4877   				{
;;;4878   				npn_tz_cnt++;
;;;4879   				if(npn_tz_cnt==TZNPN)
;;;4880   					{
;;;4881   					npn_stat=npnsOFF;
;;;4882   					}
;;;4883   				}
;;;4884   			}
;;;4885   		else if(load_U>UVNPN)
;;;4886   			{
;;;4887   			if(npn_tz_cnt)
;;;4888   				{
;;;4889   				npn_tz_cnt--;
;;;4890   				if(npn_tz_cnt==0)
;;;4891   					{
;;;4892   					npn_stat=npnsON;
;;;4893   					}
;;;4894   				}
;;;4895   			}
;;;4896   		}*/
;;;4897   
;;;4898   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;4899   		{
;;;4900   		if(npn_tz_cnt<TZNPN)
0027fa  4f8a              LDR      r7,|L1.10788|
;;;4901   			{
;;;4902   			npn_tz_cnt++;
;;;4903   			if(npn_tz_cnt==TZNPN)
;;;4904   				{
;;;4905   				npn_stat=npnsOFF;
0027fc  4e8a              LDR      r6,|L1.10792|
0027fe  7800              LDRB     r0,[r0,#0]            ;4845  ; NPN_OUT
002800  f04f0c00          MOV      r12,#0                ;4845
;;;4906   				}
;;;4907   			}
;;;4908   		}
;;;4909   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;4910   		{
;;;4911   		if(npn_tz_cnt)
;;;4912   			{
;;;4913   			npn_tz_cnt--;
;;;4914   			if(npn_tz_cnt==0)
;;;4915   				{
;;;4916   				npn_stat=npnsON;
002804  f04f0801          MOV      r8,#1
002808  b3e8              CBZ      r0,|L1.10374|
00280a  4888              LDR      r0,|L1.10796|
00280c  4639              MOV      r1,r7                 ;4900
00280e  f9b05000          LDRSH    r5,[r0,#0]            ;4898  ; load_U
002812  4887              LDR      r0,|L1.10800|
002814  f9b11000          LDRSH    r1,[r1,#0]            ;4900
002818  f9b09000          LDRSH    r9,[r0,#0]            ;4898  ; UONPN
00281c  4885              LDR      r0,|L1.10804|
00281e  454d              CMP      r5,r9                 ;4898
002820  f9b02000          LDRSH    r2,[r0,#0]            ;4898
002824  4884              LDR      r0,|L1.10808|
002826  f9b03000          LDRSH    r3,[r0,#0]            ;4898
00282a  4884              LDR      r0,|L1.10812|
00282c  f9b04000          LDRSH    r4,[r0,#0]            ;4898
002830  4883              LDR      r0,|L1.10816|
002832  f9b00000          LDRSH    r0,[r0,#0]            ;4898
002836  da13              BGE      |L1.10336|
002838  4282              CMP      r2,r0                 ;4898
00283a  db03              BLT      |L1.10308|
00283c  4283              CMP      r3,r0                 ;4898
00283e  db01              BLT      |L1.10308|
002840  4284              CMP      r4,r0                 ;4898
002842  da0d              BGE      |L1.10336|
                  |L1.10308|
002844  487f              LDR      r0,|L1.10820|
002846  f9b02000          LDRSH    r2,[r0,#0]            ;4900  ; TZNPN
00284a  4291              CMP      r1,r2                 ;4900
00284c  da23              BGE      |L1.10390|
00284e  f1010101          ADD      r1,r1,#1              ;4902
002852  b208              SXTH     r0,r1                 ;4902
002854  8038              STRH     r0,[r7,#0]            ;4902
002856  4290              CMP      r0,r2                 ;4903
002858  d11d              BNE      |L1.10390|
00285a  f886c000          STRB     r12,[r6,#0]           ;4905
00285e  e01a              B        |L1.10390|
                  |L1.10336|
002860  f8dfc1e4          LDR      r12,|L1.10824|
002864  f9bcc000          LDRSH    r12,[r12,#0]          ;4909  ; UVNPN
002868  4565              CMP      r5,r12                ;4909
00286a  dd14              BLE      |L1.10390|
00286c  4282              CMP      r2,r0                 ;4909
00286e  dd12              BLE      |L1.10390|
002870  4283              CMP      r3,r0                 ;4909
002872  dd10              BLE      |L1.10390|
002874  4284              CMP      r4,r0                 ;4909
002876  dd0e              BLE      |L1.10390|
002878  b169              CBZ      r1,|L1.10390|
00287a  f1a10101          SUB      r1,r1,#1              ;4913
00287e  b208              SXTH     r0,r1                 ;4913
002880  8038              STRH     r0,[r7,#0]            ;4913
002882  b940              CBNZ     r0,|L1.10390|
002884  e000              B        |L1.10376|
                  |L1.10374|
002886  e002              B        |L1.10382|
                  |L1.10376|
002888  f8868000          STRB     r8,[r6,#0]
00288c  e003              B        |L1.10390|
                  |L1.10382|
;;;4917   				}
;;;4918   			}
;;;4919   		}
;;;4920   	}
;;;4921   else
;;;4922   	{
;;;4923   	npn_tz_cnt=0;
00288e  f8a7c000          STRH     r12,[r7,#0]
;;;4924   	npn_stat=npnsON;
002892  f8868000          STRB     r8,[r6,#0]
                  |L1.10390|
;;;4925   	}
;;;4926   
;;;4927   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
002896  7830              LDRB     r0,[r6,#0]  ; npn_stat
002898  2800              CMP      r0,#0
00289a  d107              BNE      |L1.10412|
00289c  e8bd03f0          POP      {r4-r9}
0028a0  230f              MOVS     r3,#0xf
0028a2  2201              MOVS     r2,#1
0028a4  216e              MOVS     r1,#0x6e
0028a6  20d2              MOVS     r0,#0xd2
0028a8  f7ffbffe          B.W      mess_send
                  |L1.10412|
;;;4928   
;;;4929   
;;;4930   }
0028ac  e8bd03f0          POP      {r4-r9}
0028b0  4770              BX       lr
;;;4931   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;5025   //-----------------------------------------------
;;;5026   void	numOfForvardBps_hndl(void)			//Программа смены первого источника для равномерного износа БПСов
0028b2  e92d41f0          PUSH     {r4-r8,lr}
;;;5027   {
;;;5028   
;;;5029   numOfForvardBps_old=numOfForvardBps;
0028b6  4c2e              LDR      r4,|L1.10608|
0028b8  7ea0              LDRB     r0,[r4,#0x1a]  ; numOfForvardBps
0028ba  76e0              STRB     r0,[r4,#0x1b]
;;;5030   
;;;5031   numOfForvardBps=0;
0028bc  f04f0500          MOV      r5,#0
0028c0  76a5              STRB     r5,[r4,#0x1a]
;;;5032   
;;;5033   //FORVARDBPSCHHOUR=10;
;;;5034   
;;;5035   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
0028c2  4e62              LDR      r6,|L1.10828|
0028c4  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
0028c8  2800              CMP      r0,#0
0028ca  dd02              BLE      |L1.10450|
0028cc  f5b07ffa          CMP      r0,#0x1f4
0028d0  dd02              BLE      |L1.10456|
                  |L1.10450|
;;;5036   	{
;;;5037   	FORVARDBPSCHHOUR=0;
0028d2  8035              STRH     r5,[r6,#0]
                  |L1.10452|
;;;5038   	return;
;;;5039   	}
;;;5040   
;;;5041   numOfForvardBps_minCnt++;
;;;5042   
;;;5043   
;;;5044   if(numOfForvardBps_minCnt>=60)
;;;5045   	{
;;;5046   	numOfForvardBps_minCnt=0;
;;;5047   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;5048   	numOfForvardBps_hourCnt++;
;;;5049   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;5050   		{
;;;5051   		numOfForvardBps_hourCnt=0;
;;;5052   		}
;;;5053   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;5054   	}
;;;5055   
;;;5056   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;5057   
;;;5058   //if(numOfForvardBps)
;;;5059   //numOfForvardBps_old=numOfForvardBps; 
;;;5060   }
0028d4  e8bd81f0          POP      {r4-r8,pc}
                  |L1.10456|
0028d8  7f20              LDRB     r0,[r4,#0x1c]         ;5041  ; numOfForvardBps_minCnt
0028da  f1000001          ADD      r0,r0,#1              ;5041
0028de  b2c0              UXTB     r0,r0                 ;5041
0028e0  7720              STRB     r0,[r4,#0x1c]         ;5041
0028e2  283c              CMP      r0,#0x3c              ;5044
0028e4  d31a              BCC      |L1.10524|
0028e6  7725              STRB     r5,[r4,#0x1c]         ;5046
0028e8  f44f7794          MOV      r7,#0x128             ;5047
0028ec  4638              MOV      r0,r7                 ;5047
0028ee  f7fffffe          BL       lc640_read_int
0028f2  f1000001          ADD      r0,r0,#1              ;5048
0028f6  b200              SXTH     r0,r0                 ;5048
0028f8  f8a40050          STRH     r0,[r4,#0x50]         ;5048
0028fc  4a54              LDR      r2,|L1.10832|
0028fe  f9b61000          LDRSH    r1,[r6,#0]            ;5049  ; FORVARDBPSCHHOUR
002902  f9b22000          LDRSH    r2,[r2,#0]            ;5049  ; NUMIST
002906  fb01f102          MUL      r1,r1,r2              ;5049
00290a  4281              CMP      r1,r0                 ;5049
00290c  dc01              BGT      |L1.10514|
00290e  f8a45050          STRH     r5,[r4,#0x50]         ;5051
                  |L1.10514|
002912  f9b41050          LDRSH    r1,[r4,#0x50]         ;5053  ; numOfForvardBps_hourCnt
002916  4638              MOV      r0,r7                 ;5053
002918  f7fffffe          BL       lc640_write_int
                  |L1.10524|
00291c  f9b40050          LDRSH    r0,[r4,#0x50]         ;5056  ; numOfForvardBps_hourCnt
002920  f9b61000          LDRSH    r1,[r6,#0]            ;5056  ; FORVARDBPSCHHOUR
002924  fb90f0f1          SDIV     r0,r0,r1              ;5056
002928  76a0              STRB     r0,[r4,#0x1a]         ;5056
00292a  e7d3              B        |L1.10452|
;;;5061   
                          ENDP

                  numOfForvardBps_init PROC
;;;5062   //-----------------------------------------------
;;;5063   void	numOfForvardBps_init(void)			//Программа сброса системы смены первого источника для равномерного износа БПСов
00292c  b510              PUSH     {r4,lr}
;;;5064   {									//Должна вызываться при изменении кол-ва источников в структуре
;;;5065   lc640_write_int(EE_FORVBPSHOURCNT,0);
00292e  2100              MOVS     r1,#0
002930  f44f7094          MOV      r0,#0x128
002934  f7fffffe          BL       lc640_write_int
;;;5066   numOfForvardBps_minCnt=58;
002938  490d              LDR      r1,|L1.10608|
00293a  f04f003a          MOV      r0,#0x3a
00293e  7708              STRB     r0,[r1,#0x1c]
;;;5067   }
002940  bd10              POP      {r4,pc}
;;;5068   
                          ENDP

                  vent_resurs_hndl PROC
;;;5114   //-----------------------------------------------
;;;5115   void vent_resurs_hndl(void)
002942  e92d41f0          PUSH     {r4-r8,lr}
;;;5116   {
;;;5117   char i;
;;;5118   char crc_in,crc_eval;
;;;5119   
;;;5120   for(i=0;i<NUMIST;i++)
002946  f04f0200          MOV      r2,#0
00294a  4841              LDR      r0,|L1.10832|
;;;5121   	{
;;;5122   	if((bps[i]._buff[7]&0xc0)==0x00)
00294c  4f41              LDR      r7,|L1.10836|
00294e  f9b06000          LDRSH    r6,[r0,#0]            ;5120
002952  e0e2              B        |L1.11034|
                  |L1.10580|
002954  ebc21002          RSB      r0,r2,r2,LSL #4
002958  eb0700c0          ADD      r0,r7,r0,LSL #3
00295c  7b41              LDRB     r1,[r0,#0xd]
00295e  098b              LSRS     r3,r1,#6
002960  d07c              BEQ      |L1.10844|
;;;5123   		{
;;;5124   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;5125   		}
;;;5126   	else if((bps[i]._buff[7]&0xc0)==0x40)
002962  2301              MOVS     r3,#1
002964  ebb31f91          CMP      r3,r1,LSR #6
002968  d17b              BNE      |L1.10850|
;;;5127   		{
;;;5128   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
00296a  f880105b          STRB     r1,[r0,#0x5b]
00296e  e085              B        |L1.10876|
                  |L1.10608|
                          DCD      ||area_number.26||
                  |L1.10612|
002974  534b2023          DCB      "SK #1 Alarm",0
002978  3120416c
00297c  61726d00
                  |L1.10624|
002980  534b2023          DCB      "SK #2 Alarm",0
002984  3220416c
002988  61726d00
                  |L1.10636|
00298c  534b2023          DCB      "SK #3 Alarm",0
002990  3320416c
002994  61726d00
                  |L1.10648|
002998  534b2023          DCB      "SK #4 Alarm",0
00299c  3420416c
0029a0  61726d00
                  |L1.10660|
0029a4  534b2023          DCB      "SK #1 Alarm is off",0
0029a8  3120416c
0029ac  61726d20
0029b0  6973206f
0029b4  666600  
0029b7  00                DCB      0
                  |L1.10680|
0029b8  534b2023          DCB      "SK #2 Alarm is off",0
0029bc  3220416c
0029c0  61726d20
0029c4  6973206f
0029c8  666600  
0029cb  00                DCB      0
                  |L1.10700|
0029cc  534b2023          DCB      "SK #3 Alarm is off",0
0029d0  3320416c
0029d4  61726d20
0029d8  6973206f
0029dc  666600  
0029df  00                DCB      0
                  |L1.10720|
0029e0  534b2023          DCB      "SK #4 Alarm is off",0
0029e4  3420416c
0029e8  61726d20
0029ec  6973206f
0029f0  666600  
0029f3  00                DCB      0
                  |L1.10740|
                          DCD      NUMSK
                  |L1.10744|
                          DCD      sign_U
                  |L1.10748|
                          DCD      sign_I
                  |L1.10752|
                          DCD      bat
                  |L1.10756|
                          DCD      u_necc_up
                  |L1.10760|
                          DCD      TBAT
                  |L1.10764|
                          DCD      u_necc_dn
                  |L1.10768|
                          DCD      IKB
                  |L1.10772|
                          DCD      BAT_C_REAL
                  |L1.10776|
                          DCD      NUMBAT
                  |L1.10780|
                          DCD      superviser_cnt
                  |L1.10784|
                          DCD      NPN_OUT
                  |L1.10788|
                          DCD      npn_tz_cnt
                  |L1.10792|
                          DCD      npn_stat
                  |L1.10796|
                          DCD      load_U
                  |L1.10800|
                          DCD      UONPN
                  |L1.10804|
                          DCD      net_Ua
                  |L1.10808|
                          DCD      net_Ub
                  |L1.10812|
                          DCD      net_Uc
                  |L1.10816|
                          DCD      UMN
                  |L1.10820|
                          DCD      TZNPN
                  |L1.10824|
                          DCD      UVNPN
                  |L1.10828|
                          DCD      FORVARDBPSCHHOUR
                  |L1.10832|
                          DCD      NUMIST
                  |L1.10836|
                          DCD      bps
002a58  e000              B        |L1.10844|
002a5a  e002              B        |L1.10850|
                  |L1.10844|
002a5c  f880105a          STRB     r1,[r0,#0x5a]         ;5124
002a60  e00c              B        |L1.10876|
                  |L1.10850|
;;;5129   		}
;;;5130   	else if((bps[i]._buff[7]&0xc0)==0x80)
002a62  2302              MOVS     r3,#2
002a64  ebb31f91          CMP      r3,r1,LSR #6
002a68  d102              BNE      |L1.10864|
;;;5131   		{
;;;5132   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
002a6a  f880105c          STRB     r1,[r0,#0x5c]
002a6e  e005              B        |L1.10876|
                  |L1.10864|
;;;5133   		}
;;;5134   	else if((bps[i]._buff[7]&0xc0)==0xc0)
002a70  2303              MOVS     r3,#3
002a72  ebb31f91          CMP      r3,r1,LSR #6
002a76  d101              BNE      |L1.10876|
;;;5135   		{
;;;5136   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
002a78  f880105d          STRB     r1,[r0,#0x5d]
                  |L1.10876|
;;;5137   		}
;;;5138   	crc_in=0;
;;;5139   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
002a7c  f8101f5a          LDRB     r1,[r0,#0x5a]!
002a80  f3c11401          UBFX     r4,r1,#4,#2
;;;5140   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
002a84  7843              LDRB     r3,[r0,#1]
002a86  f0030530          AND      r5,r3,#0x30
002a8a  ea440595          ORR      r5,r4,r5,LSR #2
;;;5141   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
002a8e  7884              LDRB     r4,[r0,#2]
002a90  f0040c30          AND      r12,r4,#0x30
002a94  ea4c0c05          ORR      r12,r12,r5
;;;5142   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
002a98  78c5              LDRB     r5,[r0,#3]
002a9a  f1a0005a          SUB      r0,r0,#0x5a
002a9e  f0050830          AND      r8,r5,#0x30
002aa2  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;5143   
;;;5144   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
002aa6  f001010f          AND      r1,r1,#0xf
;;;5145   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
002aaa  f003030f          AND      r3,r3,#0xf
002aae  ea830801          EOR      r8,r3,r1
;;;5146   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
002ab2  f004040f          AND      r4,r4,#0xf
002ab6  ea840808          EOR      r8,r4,r8
;;;5147   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
002aba  f005050f          AND      r5,r5,#0xf
002abe  ea850808          EOR      r8,r5,r8
;;;5148   
;;;5149   	if(crc_eval==crc_in)
002ac2  45e0              CMP      r8,r12
002ac4  d113              BNE      |L1.10990|
;;;5150   		{
;;;5151   		unsigned short temp_US;
;;;5152   		temp_US=0;
;;;5153   
;;;5154   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;5155   		temp_US<<=4;
002ac6  ea4f1505          LSL      r5,r5,#4
;;;5156   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
002aca  ea440405          ORR      r4,r4,r5
;;;5157   		temp_US<<=4;
002ace  ea4f1404          LSL      r4,r4,#4
;;;5158   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
002ad2  ea430304          ORR      r3,r3,r4
;;;5159   		temp_US<<=4;
002ad6  ea4f5303          LSL      r3,r3,#20
002ada  ea4f4313          LSR      r3,r3,#16
;;;5160   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
002ade  ea410103          ORR      r1,r1,r3
;;;5161   
;;;5162   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
002ae2  f8b0305e          LDRH     r3,[r0,#0x5e]
002ae6  428b              CMP      r3,r1
002ae8  d001              BEQ      |L1.10990|
002aea  f8a0105e          STRH     r1,[r0,#0x5e]
                  |L1.10990|
;;;5163   		}
;;;5164   
;;;5165   	if(bps[i]._vent_resurs>TVENTMAX*10)
002aee  49cb              LDR      r1,|L1.11804|
002af0  f8b0305e          LDRH     r3,[r0,#0x5e]
002af4  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
002af8  eb010181          ADD      r1,r1,r1,LSL #2
002afc  ebb30f41          CMP      r3,r1,LSL #1
002b00  dd04              BLE      |L1.11020|
;;;5166   		{
;;;5167   		bps[i]._av|=(1<<4);
002b02  7841              LDRB     r1,[r0,#1]
002b04  f0410110          ORR      r1,r1,#0x10
002b08  7041              STRB     r1,[r0,#1]
002b0a  e003              B        |L1.11028|
                  |L1.11020|
;;;5168   		}
;;;5169   	else bps[i]._av&=~(1<<4);
002b0c  7841              LDRB     r1,[r0,#1]
002b0e  f0210110          BIC      r1,r1,#0x10
002b12  7041              STRB     r1,[r0,#1]
                  |L1.11028|
002b14  f1020201          ADD      r2,r2,#1              ;5120
002b18  b2d2              UXTB     r2,r2                 ;5120
                  |L1.11034|
002b1a  42b2              CMP      r2,r6                 ;5120
002b1c  f6ffaf1a          BLT      |L1.10580|
;;;5170   	}
;;;5171   }
002b20  e6d8              B        |L1.10452|
;;;5172   
                          ENDP

                  vent_hndl PROC
;;;5173   //-----------------------------------------------
;;;5174   void vent_hndl(void)
002b22  e92d4ff0          PUSH     {r4-r11,lr}
;;;5175   {
002b26  b087              SUB      sp,sp,#0x1c
;;;5176   if(RELEVENTSIGN==rvsAKB)
002b28  48bd              LDR      r0,|L1.11808|
;;;5177   	{
;;;5178   	if(vent_stat==0)
002b2a  4cbe              LDR      r4,|L1.11812|
;;;5179   		{
;;;5180   		if	(
;;;5181   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
002b2c  49be              LDR      r1,|L1.11816|
;;;5182   			||
;;;5183   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;5184   			)
;;;5185   			{
;;;5186   			vent_stat=1;
;;;5187   			}
;;;5188   		}
;;;5189   	else if(vent_stat==1)
;;;5190   		{
;;;5191   		if	(
;;;5192   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
002b2e  4abf              LDR      r2,|L1.11820|
002b30  7800              LDRB     r0,[r0,#0]            ;5176  ; RELEVENTSIGN
002b32  f9943000          LDRSB    r3,[r4,#0]            ;5178
002b36  f9b11000          LDRSH    r1,[r1,#0]            ;5181
002b3a  f9b22000          LDRSH    r2,[r2,#0]
002b3e  b148              CBZ      r0,|L1.11092|
;;;5193   			&&
;;;5194   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;5195   			)
;;;5196   			{
;;;5197   			vent_stat=0;
;;;5198   			}
;;;5199   		}
;;;5200   	}
;;;5201   else if(RELEVENTSIGN==rvsBPS)
002b40  2802              CMP      r0,#2
002b42  d03c              BEQ      |L1.11198|
;;;5202   	{
;;;5203   /*	if	(
;;;5204   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;5205   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;5206   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;5207   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;5208   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;5209   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;5210   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;5211   		)
;;;5212   		{
;;;5213   		vent_stat=1;
;;;5214   		}
;;;5215   	else vent_stat=0;
;;;5216   	*/
;;;5217   
;;;5218   	if	(
;;;5219   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;5220   		||
;;;5221   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;5222   		||
;;;5223   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;5224   		||
;;;5225   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;5226   		||
;;;5227   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;5228   		||
;;;5229   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;5230   		||
;;;5231   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;5232   		||
;;;5233   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;5234   		)
;;;5235   		{
;;;5236   		vent_stat=1;
;;;5237   		}
;;;5238   	else if(vent_stat==1)
;;;5239   		{
;;;5240   		if	(
;;;5241   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;5242   			&&
;;;5243   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;5244   			&&
;;;5245   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;5246   			&&
;;;5247   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;5248   			&&
;;;5249   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;5250   			&&
;;;5251   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;5252   			&&
;;;5253   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;5254   			&&
;;;5255   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;5256   			)
;;;5257   			{
;;;5258   			vent_stat=0;
;;;5259   			}
;;;5260   		}
;;;5261   	}
;;;5262   else if(RELEVENTSIGN==rvsEXT)
002b44  2801              CMP      r0,#1
002b46  d07e              BEQ      |L1.11334|
;;;5263   	{
;;;5264   	if	(
;;;5265   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;5266   		||
;;;5267   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;5268   		||
;;;5269   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;5270   		)
;;;5271   		{
;;;5272   		vent_stat=1;
;;;5273   		}
;;;5274   	else if(vent_stat==1)
;;;5275   		{
;;;5276   		if	(
;;;5277   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;5278   			&&
;;;5279   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;5280   			&&
;;;5281   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;5282   			)
;;;5283   			{
;;;5284   			vent_stat=0;
;;;5285   			}
;;;5286   		}
;;;5287   	}
;;;5288   else vent_stat=1;
002b48  f04f0001          MOV      r0,#1
002b4c  7020              STRB     r0,[r4,#0]
                  |L1.11086|
;;;5289   }
002b4e  b007              ADD      sp,sp,#0x1c
002b50  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.11092|
002b54  4fb6              LDR      r7,|L1.11824|
002b56  f8df82dc          LDR      r8,|L1.11828|
002b5a  f9b7000a          LDRSH    r0,[r7,#0xa]          ;5181
002b5e  7b3d              LDRB     r5,[r7,#0xc]          ;5181
002b60  f9b76056          LDRSH    r6,[r7,#0x56]         ;5183
002b64  f898c000          LDRB     r12,[r8,#0]           ;5180
002b68  f8977058          LDRB     r7,[r7,#0x58]         ;5183
002b6c  f8988001          LDRB     r8,[r8,#1]            ;5183
002b70  b12b              CBZ      r3,|L1.11134|
002b72  2b01              CMP      r3,#1                 ;5189
002b74  d1eb              BNE      |L1.11086|
002b76  f1bc0f55          CMP      r12,#0x55             ;5191
002b7a  d115              BNE      |L1.11176|
002b7c  e010              B        |L1.11168|
                  |L1.11134|
002b7e  f1bc0f55          CMP      r12,#0x55             ;5180
002b82  d102              BNE      |L1.11146|
002b84  4288              CMP      r0,r1                 ;5181
002b86  dc07              BGT      |L1.11160|
002b88  b935              CBNZ     r5,|L1.11160|
                  |L1.11146|
002b8a  f1b80f55          CMP      r8,#0x55              ;5183
002b8e  d1de              BNE      |L1.11086|
002b90  428e              CMP      r6,r1                 ;5183
002b92  dc01              BGT      |L1.11160|
002b94  2f00              CMP      r7,#0                 ;5183
002b96  d0da              BEQ      |L1.11086|
                  |L1.11160|
002b98  f04f0001          MOV      r0,#1                 ;5186
002b9c  7020              STRB     r0,[r4,#0]            ;5186
002b9e  e7d6              B        |L1.11086|
                  |L1.11168|
002ba0  4290              CMP      r0,r2                 ;5192
002ba2  dad4              BGE      |L1.11086|
002ba4  2d00              CMP      r5,#0                 ;5192
002ba6  d1d2              BNE      |L1.11086|
                  |L1.11176|
002ba8  f1b80f55          CMP      r8,#0x55              ;5194
002bac  d103              BNE      |L1.11190|
002bae  4296              CMP      r6,r2                 ;5194
002bb0  dacd              BGE      |L1.11086|
002bb2  2f00              CMP      r7,#0                 ;5194
002bb4  d1cb              BNE      |L1.11086|
                  |L1.11190|
002bb6  f04f0000          MOV      r0,#0                 ;5197
002bba  7020              STRB     r0,[r4,#0]            ;5197
002bbc  e7c7              B        |L1.11086|
                  |L1.11198|
002bbe  4e9f              LDR      r6,|L1.11836|
002bc0  489d              LDR      r0,|L1.11832|
002bc2  6ab5              LDR      r5,[r6,#0x28]         ;5219
002bc4  f9b00000          LDRSH    r0,[r0,#0]            ;5218  ; NUMIST
002bc8  78f6              LDRB     r6,[r6,#3]            ;5219
002bca  b118              CBZ      r0,|L1.11220|
002bcc  428d              CMP      r5,r1                 ;5219
002bce  dc7a              BGT      |L1.11462|
002bd0  2e1e              CMP      r6,#0x1e              ;5219
002bd2  d278              BCS      |L1.11462|
                  |L1.11220|
002bd4  f8dfc264          LDR      r12,|L1.11836|
002bd8  2801              CMP      r0,#1                 ;5221
002bda  f8dc70a0          LDR      r7,[r12,#0xa0]        ;5221
002bde  f89cc07b          LDRB     r12,[r12,#0x7b]       ;5221
002be2  f8cdc018          STR      r12,[sp,#0x18]        ;5221
002be6  dd06              BLE      |L1.11254|
002be8  428f              CMP      r7,r1                 ;5221
002bea  dc6c              BGT      |L1.11462|
002bec  f8ddc018          LDR      r12,[sp,#0x18]        ;5221
002bf0  f1bc0f1e          CMP      r12,#0x1e             ;5221
002bf4  d267              BCS      |L1.11462|
                  |L1.11254|
002bf6  f8dfc244          LDR      r12,|L1.11836|
002bfa  2802              CMP      r0,#2                 ;5223
002bfc  f8dc8118          LDR      r8,[r12,#0x118]       ;5223
002c00  f8cd8014          STR      r8,[sp,#0x14]         ;5223
002c04  f89cc0f3          LDRB     r12,[r12,#0xf3]       ;5223
002c08  f8cdc010          STR      r12,[sp,#0x10]        ;5223
002c0c  dd08              BLE      |L1.11296|
002c0e  f8ddc014          LDR      r12,[sp,#0x14]        ;5223
002c12  458c              CMP      r12,r1                ;5223
002c14  dc57              BGT      |L1.11462|
002c16  f8ddc010          LDR      r12,[sp,#0x10]        ;5223
002c1a  f1bc0f1e          CMP      r12,#0x1e             ;5223
002c1e  d252              BCS      |L1.11462|
                  |L1.11296|
002c20  f8dfc218          LDR      r12,|L1.11836|
002c24  2803              CMP      r0,#3                 ;5225
002c26  f8dc8190          LDR      r8,[r12,#0x190]       ;5225
002c2a  f8cd800c          STR      r8,[sp,#0xc]          ;5225
002c2e  f89cc16b          LDRB     r12,[r12,#0x16b]      ;5225
002c32  f8cdc008          STR      r12,[sp,#8]           ;5225
002c36  dd0a              BLE      |L1.11342|
002c38  f8ddc00c          LDR      r12,[sp,#0xc]         ;5225
002c3c  458c              CMP      r12,r1                ;5225
002c3e  dc42              BGT      |L1.11462|
002c40  f8ddc008          LDR      r12,[sp,#8]           ;5225
002c44  e000              B        |L1.11336|
                  |L1.11334|
002c46  e080              B        |L1.11594|
                  |L1.11336|
002c48  f1bc0f1e          CMP      r12,#0x1e             ;5225
002c4c  d23b              BCS      |L1.11462|
                  |L1.11342|
002c4e  f8df81ec          LDR      r8,|L1.11836|
002c52  2804              CMP      r0,#4                 ;5227
002c54  f8d8c208          LDR      r12,[r8,#0x208]       ;5227
002c58  f89881e3          LDRB     r8,[r8,#0x1e3]        ;5227
002c5c  f8cd8004          STR      r8,[sp,#4]            ;5227
002c60  dd06              BLE      |L1.11376|
002c62  458c              CMP      r12,r1                ;5227
002c64  dc2f              BGT      |L1.11462|
002c66  f8dd8004          LDR      r8,[sp,#4]            ;5227
002c6a  f1b80f1e          CMP      r8,#0x1e              ;5227
002c6e  d22a              BCS      |L1.11462|
                  |L1.11376|
002c70  f8df91c8          LDR      r9,|L1.11836|
002c74  2805              CMP      r0,#5                 ;5229
002c76  f8d98280          LDR      r8,[r9,#0x280]        ;5229
002c7a  f899925b          LDRB     r9,[r9,#0x25b]        ;5229
002c7e  f8cd9000          STR      r9,[sp,#0]            ;5229
002c82  dd06              BLE      |L1.11410|
002c84  4588              CMP      r8,r1                 ;5229
002c86  dc1e              BGT      |L1.11462|
002c88  f8dd9000          LDR      r9,[sp,#0]            ;5229
002c8c  f1b90f1e          CMP      r9,#0x1e              ;5229
002c90  d219              BCS      |L1.11462|
                  |L1.11410|
002c92  f8dfa1a8          LDR      r10,|L1.11836|
002c96  2806              CMP      r0,#6                 ;5231
002c98  f89ae2d3          LDRB     lr,[r10,#0x2d3]       ;5231
002c9c  f8da92f8          LDR      r9,[r10,#0x2f8]       ;5231
002ca0  dd04              BLE      |L1.11436|
002ca2  4589              CMP      r9,r1                 ;5231
002ca4  dc0f              BGT      |L1.11462|
002ca6  f1be0f1e          CMP      lr,#0x1e              ;5231
002caa  d20c              BCS      |L1.11462|
                  |L1.11436|
002cac  f8dfb18c          LDR      r11,|L1.11836|
002cb0  2807              CMP      r0,#7                 ;5233
002cb2  f8dba370          LDR      r10,[r11,#0x370]      ;5233
002cb6  f89bb34b          LDRB     r11,[r11,#0x34b]      ;5233
002cba  dd08              BLE      |L1.11470|
002cbc  458a              CMP      r10,r1                ;5233
002cbe  dc02              BGT      |L1.11462|
002cc0  f1bb0f1e          CMP      r11,#0x1e             ;5233
002cc4  d303              BCC      |L1.11470|
                  |L1.11462|
002cc6  f04f0001          MOV      r0,#1                 ;5236
002cca  7020              STRB     r0,[r4,#0]            ;5236
                  |L1.11468|
002ccc  e73f              B        |L1.11086|
                  |L1.11470|
002cce  2b01              CMP      r3,#1                 ;5238
002cd0  d1fc              BNE      |L1.11468|
002cd2  b118              CBZ      r0,|L1.11484|
002cd4  4295              CMP      r5,r2                 ;5241
002cd6  daf9              BGE      |L1.11468|
002cd8  2e0a              CMP      r6,#0xa               ;5241
002cda  d2f7              BCS      |L1.11468|
                  |L1.11484|
002cdc  2802              CMP      r0,#2                 ;5243
002cde  db04              BLT      |L1.11498|
002ce0  4297              CMP      r7,r2                 ;5243
002ce2  daf3              BGE      |L1.11468|
002ce4  9906              LDR      r1,[sp,#0x18]         ;5243
002ce6  290a              CMP      r1,#0xa               ;5243
002ce8  d2f0              BCS      |L1.11468|
                  |L1.11498|
002cea  2803              CMP      r0,#3                 ;5245
002cec  db05              BLT      |L1.11514|
002cee  9905              LDR      r1,[sp,#0x14]         ;5245
002cf0  4291              CMP      r1,r2                 ;5245
002cf2  daeb              BGE      |L1.11468|
002cf4  9904              LDR      r1,[sp,#0x10]         ;5245
002cf6  290a              CMP      r1,#0xa               ;5245
002cf8  d2e8              BCS      |L1.11468|
                  |L1.11514|
002cfa  2804              CMP      r0,#4                 ;5247
002cfc  db05              BLT      |L1.11530|
002cfe  9903              LDR      r1,[sp,#0xc]          ;5247
002d00  4291              CMP      r1,r2                 ;5247
002d02  dae3              BGE      |L1.11468|
002d04  9902              LDR      r1,[sp,#8]            ;5247
002d06  290a              CMP      r1,#0xa               ;5247
002d08  d2e0              BCS      |L1.11468|
                  |L1.11530|
002d0a  2805              CMP      r0,#5                 ;5249
002d0c  db04              BLT      |L1.11544|
002d0e  4594              CMP      r12,r2                ;5249
002d10  dadc              BGE      |L1.11468|
002d12  9901              LDR      r1,[sp,#4]            ;5249
002d14  290a              CMP      r1,#0xa               ;5249
002d16  d2d9              BCS      |L1.11468|
                  |L1.11544|
002d18  2806              CMP      r0,#6                 ;5251
002d1a  db04              BLT      |L1.11558|
002d1c  4590              CMP      r8,r2                 ;5251
002d1e  dad5              BGE      |L1.11468|
002d20  9900              LDR      r1,[sp,#0]            ;5251
002d22  290a              CMP      r1,#0xa               ;5251
002d24  d2d2              BCS      |L1.11468|
                  |L1.11558|
002d26  2807              CMP      r0,#7                 ;5253
002d28  db04              BLT      |L1.11572|
002d2a  4591              CMP      r9,r2                 ;5253
002d2c  dace              BGE      |L1.11468|
002d2e  f1be0f0a          CMP      lr,#0xa               ;5253
002d32  d2cb              BCS      |L1.11468|
                  |L1.11572|
002d34  2808              CMP      r0,#8                 ;5255
002d36  db04              BLT      |L1.11586|
002d38  4592              CMP      r10,r2                ;5255
002d3a  dac7              BGE      |L1.11468|
002d3c  f1bb0f0a          CMP      r11,#0xa              ;5255
002d40  d2c4              BCS      |L1.11468|
                  |L1.11586|
002d42  f04f0000          MOV      r0,#0                 ;5258
002d46  7020              STRB     r0,[r4,#0]            ;5258
                  |L1.11592|
002d48  e701              B        |L1.11086|
                  |L1.11594|
002d4a  483d              LDR      r0,|L1.11840|
002d4c  4d3d              LDR      r5,|L1.11844|
002d4e  4e3e              LDR      r6,|L1.11848|
002d50  f9b00000          LDRSH    r0,[r0,#0]            ;5264  ; NUMDT
002d54  f9b55000          LDRSH    r5,[r5,#0]            ;5265
002d58  7836              LDRB     r6,[r6,#0]            ;5265
002d5a  b110              CBZ      r0,|L1.11618|
002d5c  428d              CMP      r5,r1                 ;5265
002d5e  dc1d              BGT      |L1.11676|
002d60  b9e6              CBNZ     r6,|L1.11676|
                  |L1.11618|
002d62  4f38              LDR      r7,|L1.11844|
002d64  f8dfc0e0          LDR      r12,|L1.11848|
002d68  2801              CMP      r0,#1                 ;5267
002d6a  f9b77002          LDRSH    r7,[r7,#2]            ;5267
002d6e  f89cc001          LDRB     r12,[r12,#1]          ;5267
002d72  dd04              BLE      |L1.11646|
002d74  428f              CMP      r7,r1                 ;5267
002d76  dc11              BGT      |L1.11676|
002d78  f1bc0f00          CMP      r12,#0                ;5267
002d7c  d10e              BNE      |L1.11676|
                  |L1.11646|
002d7e  f8df80c4          LDR      r8,|L1.11844|
002d82  f8df90c4          LDR      r9,|L1.11848|
002d86  2802              CMP      r0,#2                 ;5269
002d88  f9b88004          LDRSH    r8,[r8,#4]            ;5269
002d8c  f8999002          LDRB     r9,[r9,#2]            ;5269
002d90  dd08              BLE      |L1.11684|
002d92  4588              CMP      r8,r1                 ;5269
002d94  dc02              BGT      |L1.11676|
002d96  f1b90f00          CMP      r9,#0                 ;5269
002d9a  d003              BEQ      |L1.11684|
                  |L1.11676|
002d9c  f04f0001          MOV      r0,#1                 ;5272
002da0  7020              STRB     r0,[r4,#0]            ;5272
002da2  e6d4              B        |L1.11086|
                  |L1.11684|
002da4  2b01              CMP      r3,#1                 ;5274
002da6  d191              BNE      |L1.11468|
002da8  b118              CBZ      r0,|L1.11698|
002daa  4295              CMP      r5,r2                 ;5277
002dac  da8e              BGE      |L1.11468|
002dae  2e00              CMP      r6,#0                 ;5277
002db0  d18c              BNE      |L1.11468|
                  |L1.11698|
002db2  2802              CMP      r0,#2                 ;5279
002db4  db04              BLT      |L1.11712|
002db6  4297              CMP      r7,r2                 ;5279
002db8  da88              BGE      |L1.11468|
002dba  f1bc0f00          CMP      r12,#0                ;5279
002dbe  d185              BNE      |L1.11468|
                  |L1.11712|
002dc0  2803              CMP      r0,#3                 ;5281
002dc2  db04              BLT      |L1.11726|
002dc4  4590              CMP      r8,r2                 ;5281
002dc6  dabf              BGE      |L1.11592|
002dc8  f1b90f00          CMP      r9,#0                 ;5281
002dcc  d1bc              BNE      |L1.11592|
                  |L1.11726|
002dce  f04f0000          MOV      r0,#0                 ;5284
002dd2  7020              STRB     r0,[r4,#0]            ;5284
002dd4  e6bb              B        |L1.11086|
;;;5290   
                          ENDP

                  vd_is_work_hndl PROC
;;;5291   //-----------------------------------------------
;;;5292   void vd_is_work_hndl(void)
002dd6  481d              LDR      r0,|L1.11852|
;;;5293   {
;;;5294   if(vd_U>20)
;;;5295   	{
;;;5296   	if(vd_is_work_cnt<5)vd_is_work_cnt++;
002dd8  491d              LDR      r1,|L1.11856|
002dda  2200              MOVS     r2,#0
002ddc  f9b03000          LDRSH    r3,[r0,#0]            ;5294  ; vd_U
002de0  7808              LDRB     r0,[r1,#0]
002de2  2b14              CMP      r3,#0x14              ;5294
002de4  dd09              BLE      |L1.11770|
002de6  2805              CMP      r0,#5
002de8  d203              BCS      |L1.11762|
002dea  f1000001          ADD      r0,r0,#1
002dee  7008              STRB     r0,[r1,#0]
002df0  e007              B        |L1.11778|
                  |L1.11762|
;;;5297   	else vd_is_work_cnt=5;
002df2  f04f0005          MOV      r0,#5
002df6  7008              STRB     r0,[r1,#0]
002df8  e003              B        |L1.11778|
                  |L1.11770|
;;;5298   	}
;;;5299   else
;;;5300   	{
;;;5301   	if(vd_is_work_cnt>0)vd_is_work_cnt--;
002dfa  b110              CBZ      r0,|L1.11778|
002dfc  f1a00001          SUB      r0,r0,#1
002e00  7008              STRB     r0,[r1,#0]
                  |L1.11778|
;;;5302   	else vd_is_work_cnt=0;
;;;5303   	}
;;;5304   
;;;5305   if(vd_is_work_cnt==5) bVDISWORK=1;
002e02  7808              LDRB     r0,[r1,#0]  ; vd_is_work_cnt
002e04  4913              LDR      r1,|L1.11860|
002e06  2805              CMP      r0,#5
002e08  d003              BEQ      |L1.11794|
;;;5306   else if(vd_is_work_cnt==0) bVDISWORK=0;
002e0a  2800              CMP      r0,#0
002e0c  d100              BNE      |L1.11792|
002e0e  700a              STRB     r2,[r1,#0]
                  |L1.11792|
;;;5307   }
002e10  4770              BX       lr
                  |L1.11794|
002e12  f04f0001          MOV      r0,#1                 ;5305
002e16  7008              STRB     r0,[r1,#0]            ;5305
002e18  4770              BX       lr
;;;5308   
                          ENDP

002e1a  0000              DCW      0x0000
                  |L1.11804|
                          DCD      TVENTMAX
                  |L1.11808|
                          DCD      RELEVENTSIGN
                  |L1.11812|
                          DCD      ||area_number.26||
                  |L1.11816|
                          DCD      TVENTON
                  |L1.11820|
                          DCD      TVENTOFF
                  |L1.11824|
                          DCD      bat
                  |L1.11828|
                          DCD      BAT_IS_ON
                  |L1.11832|
                          DCD      NUMIST
                  |L1.11836|
                          DCD      bps
                  |L1.11840|
                          DCD      NUMDT
                  |L1.11844|
                          DCD      t_ext
                  |L1.11848|
                          DCD      ND_EXT
                  |L1.11852|
                          DCD      vd_U
                  |L1.11856|
                          DCD      vd_is_work_cnt
                  |L1.11860|
                          DCD      bVDISWORK

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;246    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f8a10042          STRH     r0,[r1,#0x42]
00000a  4770              BX       lr
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
;;;320    
                          ENDP

                  |L2.12|
                          DCD      ||area_number.26||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;246    {          
000004  4c80              LDR      r4,|L3.520|
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000036  f1a40674          SUB      r6,r4,#0x74
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;254  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;254
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;254  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;254
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;255  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;255
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;255  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;256  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;256
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;256  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;256
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;256  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;256  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;257  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;257
000074  6004              STR      r4,[r0,#0]            ;257  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;257  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;257
00007c  6044              STR      r4,[r0,#4]            ;247  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;258  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;258
000084  6084              STR      r4,[r0,#8]            ;258  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;259  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;259
00008c  60c1              STR      r1,[r0,#0xc]          ;258  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;258  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;259  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;263
00009c  85f1              STRH     r1,[r6,#0x2e]         ;263
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;263
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]         ;265  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;267
0000aa  428c              CMP      r4,r1                 ;267
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;267
0000b0  6002              STR      r2,[r0,#0]            ;269  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;270  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;271  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;271  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;271
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;271  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;271
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;274  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;274
0000c8  b209              SXTH     r1,r1                 ;274
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;274
0000cc  f5b17f00          CMP      r1,#0x200             ;276
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;278
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;278  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;278
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;285
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;285
0000e8  ea4f2424          ASR      r4,r4,#8              ;285
0000ec  8534              STRH     r4,[r6,#0x28]         ;285
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;287
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;287  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;288
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;288
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;288
000100  2827              CMP      r0,#0x27              ;288
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;289  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;289
00010c  71b0              STRB     r0,[r6,#6]            ;291
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;292  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;292  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;292
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;293  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;293
000122  0798              LSLS     r0,r3,#30             ;295
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;296
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;296
00012c  4461              ADD      r1,r1,r12             ;296
00012e  f1000001          ADD      r0,r0,#1              ;297
000132  b2c0              UXTB     r0,r0                 ;297
000134  2810              CMP      r0,#0x10              ;299
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;299
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;300
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;300
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;302
000148  b2e8              UXTB     r0,r5                 ;303
00014a  7130              STRB     r0,[r6,#4]            ;303
00014c  2810              CMP      r0,#0x10              ;303
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;303
000152  f1030301          ADD      r3,r3,#1              ;304
000156  b2d8              UXTB     r0,r3                 ;304
000158  7170              STRB     r0,[r6,#5]            ;306
00015a  2810              CMP      r0,#0x10              ;306
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;307
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;307
000162  f1070701          ADD      r7,r7,#1              ;307
000166  f0070001          AND      r0,r7,#1              ;308
00016a  70f0              STRB     r0,[r6,#3]            ;308
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;311
000172  f02000ff          BIC      r0,r0,#0xff           ;311
000176  f1000004          ADD      r0,r0,#4              ;311
00017a  6010              STR      r0,[r2,#0]            ;312
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;312  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;314
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;314
000186  f02000ff          BIC      r0,r0,#0xff           ;315
00018a  f1000001          ADD      r0,r0,#1              ;315
00018e  6010              STR      r0,[r2,#0]            ;315
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff           ;259
000198  f1000002          ADD      r0,r0,#2              ;259
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;320    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.26||+0x74
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;246    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L4.54|
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000034  7091              STRB     r1,[r2,#2]
                  |L4.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;254  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;254
000044  70d0              STRB     r0,[r2,#3]            ;254
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;254
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;255
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;255
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;256
00005a  210e              MOVS     r1,#0xe               ;256
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;256
000066  2202              MOVS     r2,#2                 ;256
000068  210e              MOVS     r1,#0xe               ;256
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;257
000074  2203              MOVS     r2,#3                 ;257
000076  210e              MOVS     r1,#0xe               ;257
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;258
000082  2204              MOVS     r2,#4                 ;258
000084  210e              MOVS     r1,#0xe               ;258
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;258
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;259  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;263
00009c  70d0              STRB     r0,[r2,#3]            ;263
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;263
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;266
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;267
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;267
0000b0  2201              MOVS     r2,#1                 ;269
0000b2  210e              MOVS     r1,#0xe               ;270
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;271
0000be  461a              MOV      r2,r3                 ;273
0000c0  210e              MOVS     r1,#0xe               ;274
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;274
0000cc  2203              MOVS     r2,#3                 ;276
0000ce  210e              MOVS     r1,#0xe               ;277
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;278
0000da  2204              MOVS     r2,#4                 ;285
0000dc  210e              MOVS     r1,#0xe               ;285
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;285
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;285
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;287  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;287
0000f4  70d0              STRB     r0,[r2,#3]            ;288
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;288
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;288
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;288
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;289
000108  2201              MOVS     r2,#1                 ;289
00010a  210e              MOVS     r1,#0xe               ;289
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;292
000116  2202              MOVS     r2,#2                 ;292
000118  210e              MOVS     r1,#0xe               ;292
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;295
000124  461a              MOV      r2,r3                 ;296
000126  210e              MOVS     r1,#0xe               ;296
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;297
000132  2204              MOVS     r2,#4                 ;297
000134  210e              MOVS     r1,#0xe               ;299
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;300
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;300
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;302  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;303
00014c  70d0              STRB     r0,[r2,#3]            ;303
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;303
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;304
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;306
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;307
000160  2201              MOVS     r2,#1                 ;307
000162  210e              MOVS     r1,#0xe               ;307
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;310
00016e  2202              MOVS     r2,#2                 ;310
000170  210e              MOVS     r1,#0xe               ;311
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;312
00017c  2203              MOVS     r2,#3                 ;312
00017e  210e              MOVS     r1,#0xe               ;312
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;315
00018a  461a              MOV      r2,r3                 ;315
00018c  210e              MOVS     r1,#0xe               ;315
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;259
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;320    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.26||+0x70
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  ipsBlckHndl PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  b510              PUSH     {r4,lr}
;;;246    {          
000002  4b15              LDR      r3,|L5.88|
000004  f04f0000          MOV      r0,#0
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000008  8018              STRH     r0,[r3,#0]
00000a  4814              LDR      r0,|L5.92|
00000c  f04f0401          MOV      r4,#1
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
000010  f44f62fa          MOV      r2,#0x7d0
000014  f9b01000          LDRSH    r1,[r0,#0]  ; ipsBlckSrc
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  4811              LDR      r0,|L5.96|
00001a  2901              CMP      r1,#1
00001c  f9b00000          LDRSH    r0,[r0,#0]
000020  d006              BEQ      |L5.48|
000022  2902              CMP      r1,#2
000024  d10f              BNE      |L5.70|
000026  490f              LDR      r1,|L5.100|
000028  f9b1101a          LDRSH    r1,[r1,#0x1a]
00002c  b160              CBZ      r0,|L5.72|
00002e  e00d              B        |L5.76|
                  |L5.48|
000030  490c              LDR      r1,|L5.100|
000032  f9b11016          LDRSH    r1,[r1,#0x16]
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000036  b908              CBNZ     r0,|L5.60|
000038  4291              CMP      r1,r2                 ;249
00003a  dc03              BGT      |L5.68|
                  |L5.60|
00003c  2801              CMP      r0,#1                 ;254
00003e  d102              BNE      |L5.70|
000040  4291              CMP      r1,r2                 ;254
000042  da00              BGE      |L5.70|
                  |L5.68|
000044  801c              STRH     r4,[r3,#0]            ;254
                  |L5.70|
000046  bd10              POP      {r4,pc}               ;254
                  |L5.72|
000048  4291              CMP      r1,r2                 ;254
00004a  dc03              BGT      |L5.84|
                  |L5.76|
00004c  2801              CMP      r0,#1                 ;255
00004e  d1fa              BNE      |L5.70|
000050  4291              CMP      r1,r2                 ;255
000052  daf8              BGE      |L5.70|
                  |L5.84|
000054  801c              STRH     r4,[r3,#0]            ;255
000056  bd10              POP      {r4,pc}
;;;320    
                          ENDP

                  |L5.88|
                          DCD      ipsBlckStat
                  |L5.92|
                          DCD      ipsBlckSrc
                  |L5.96|
                          DCD      ipsBlckLog
                  |L5.100|
                          DCD      ||.bss||+0x400

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  bat_hndl PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;246    {          
000002  20c8              MOVS     r0,#0xc8
000004  f7fffffe          BL       mess_find_unvol
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000008  493a              LDR      r1,|L6.244|
00000a  2200              MOVS     r2,#0
00000c  b3a8              CBZ      r0,|L6.122|
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  4b3a              LDR      r3,|L6.248|
000010  2401              MOVS     r4,#1
000012  6818              LDR      r0,[r3,#0]  ; mess_data
000014  28c9              CMP      r0,#0xc9
000016  d01c              BEQ      |L6.82|
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  28ca              CMP      r0,#0xca
00001a  d02f              BEQ      |L6.124|
00001c  4610              MOV      r0,r2
                  |L6.30|
00001e  eb000340          ADD      r3,r0,r0,LSL #1
000022  eb031300          ADD      r3,r3,r0,LSL #4
000026  f8012023          STRB     r2,[r1,r3,LSL #2]
00002a  f1000001          ADD      r0,r0,#1
00002e  b2c0              UXTB     r0,r0
000030  2802              CMP      r0,#2
000032  d3f4              BCC      |L6.30|
                  |L6.52|
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000034  f04f0000          MOV      r0,#0
                  |L6.56|
000038  eb000340          ADD      r3,r0,r0,LSL #1       ;249
00003c  eb031300          ADD      r3,r3,r0,LSL #4       ;254
000040  f8115023          LDRB     r5,[r1,r3,LSL #2]     ;254
000044  2d14              CMP      r5,#0x14              ;254
000046  d939              BLS      |L6.188|
000048  eb010383          ADD      r3,r1,r3,LSL #2       ;254
00004c  f883403c          STRB     r4,[r3,#0x3c]         ;255
000050  e038              B        |L6.196|
                  |L6.82|
000052  f04f0000          MOV      r0,#0                 ;255
                  |L6.86|
000056  eb000340          ADD      r3,r0,r0,LSL #1
00005a  eb031500          ADD      r5,r3,r0,LSL #4       ;256
00005e  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;256
000062  2b32              CMP      r3,#0x32              ;256
000064  d203              BCS      |L6.110|
000066  f1030301          ADD      r3,r3,#1              ;256
00006a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;256
                  |L6.110|
00006e  f1000001          ADD      r0,r0,#1              ;257
000072  b2c0              UXTB     r0,r0                 ;257
000074  2802              CMP      r0,#2                 ;257
000076  d3ee              BCC      |L6.86|
000078  e7dc              B        |L6.52|
                  |L6.122|
00007a  e029              B        |L6.208|
                  |L6.124|
00007c  f04f0000          MOV      r0,#0                 ;247
000080  685e              LDR      r6,[r3,#4]            ;258
                  |L6.130|
000082  fa04f300          LSL      r3,r4,r0              ;258
000086  421e              TST      r6,r3                 ;259
000088  d00c              BEQ      |L6.164|
00008a  eb000340          ADD      r3,r0,r0,LSL #1       ;259
00008e  eb031500          ADD      r5,r3,r0,LSL #4       ;258
000092  f8113025          LDRB     r3,[r1,r5,LSL #2]
000096  2b32              CMP      r3,#0x32              ;259
000098  d20a              BCS      |L6.176|
00009a  f1030301          ADD      r3,r3,#1              ;263
00009e  f8013025          STRB     r3,[r1,r5,LSL #2]     ;263
0000a2  e005              B        |L6.176|
                  |L6.164|
0000a4  eb000340          ADD      r3,r0,r0,LSL #1       ;266
0000a8  eb031300          ADD      r3,r3,r0,LSL #4       ;267
0000ac  f8012023          STRB     r2,[r1,r3,LSL #2]     ;267
                  |L6.176|
0000b0  f1000001          ADD      r0,r0,#1              ;269
0000b4  b2c0              UXTB     r0,r0                 ;271
0000b6  2802              CMP      r0,#2                 ;271
0000b8  d3e3              BCC      |L6.130|
0000ba  e7bb              B        |L6.52|
                  |L6.188|
0000bc  eb010383          ADD      r3,r1,r3,LSL #2       ;271
0000c0  f883203c          STRB     r2,[r3,#0x3c]         ;274
                  |L6.196|
0000c4  f1000001          ADD      r0,r0,#1              ;274
0000c8  b2c0              UXTB     r0,r0                 ;274
0000ca  2802              CMP      r0,#2                 ;274
0000cc  d3b4              BCC      |L6.56|
0000ce  bd70              POP      {r4-r6,pc}            ;277
                  |L6.208|
0000d0  f04f0000          MOV      r0,#0                 ;278
                  |L6.212|
0000d4  eb000340          ADD      r3,r0,r0,LSL #1       ;278
0000d8  eb031300          ADD      r3,r3,r0,LSL #4       ;278
0000dc  f8012023          STRB     r2,[r1,r3,LSL #2]     ;285
0000e0  eb010383          ADD      r3,r1,r3,LSL #2       ;285
0000e4  f883203c          STRB     r2,[r3,#0x3c]         ;285
0000e8  f1000001          ADD      r0,r0,#1              ;285
0000ec  b2c0              UXTB     r0,r0                 ;285
0000ee  2802              CMP      r0,#2                 ;287
0000f0  d3f0              BCC      |L6.212|
0000f2  bd70              POP      {r4-r6,pc}            ;287
;;;320    
                          ENDP

                  |L6.244|
                          DCD      bat
                  |L6.248|
                          DCD      mess_data

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  klimat_hndl PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;246    {          
000004  4d66              LDR      r5,|L7.416|
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L7.420|
000008  4c67              LDR      r4,|L7.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L7.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L7.42|
                  |L7.34|
000022  da02              BGE      |L7.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L7.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L7.424|
000030  f7fffffe          BL       gran
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L7.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;254
00003e  dd00              BLE      |L7.66|
000040  700e              STRB     r6,[r1,#0]            ;254
                  |L7.66|
000042  2400              MOVS     r4,#0                 ;254
000044  2801              CMP      r0,#1                 ;254
000046  da00              BGE      |L7.74|
000048  700c              STRB     r4,[r1,#0]            ;254
                  |L7.74|
00004a  4959              LDR      r1,|L7.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;255  ; t_box
000050  4a58              LDR      r2,|L7.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;255  ; TBOXREG
000056  4f58              LDR      r7,|L7.440|
000058  1e8b              SUBS     r3,r1,#2              ;256
00005a  4298              CMP      r0,r3                 ;256
00005c  da0f              BGE      |L7.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;256  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;256
000064  da1e              BGE      |L7.164|
000066  f1010101          ADD      r1,r1,#1              ;256
00006a  b249              SXTB     r1,r1                 ;256
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;257
000070  db18              BLT      |L7.164|
000072  8839              LDRH     r1,[r7,#0]            ;257  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;257
000078  8039              STRH     r1,[r7,#0]            ;257
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L7.164|
                  |L7.126|
00007e  4288              CMP      r0,r1                 ;258
000080  dd0f              BLE      |L7.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;258  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;259
000088  da0c              BGE      |L7.164|
00008a  f1010101          ADD      r1,r1,#1              ;259
00008e  b249              SXTB     r1,r1                 ;258
000090  7011              STRB     r1,[r2,#0]            ;258
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L7.164|
000096  8839              LDRH     r1,[r7,#0]            ;259  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;263
00009c  8039              STRH     r1,[r7,#0]            ;263
00009e  7014              STRB     r4,[r2,#0]            ;263
0000a0  e000              B        |L7.164|
                  |L7.162|
0000a2  7014              STRB     r4,[r2,#0]            ;265
                  |L7.164|
0000a4  4945              LDR      r1,|L7.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;267  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;267
0000ac  dd05              BLE      |L7.186|
0000ae  2214              MOVS     r2,#0x14              ;267
0000b0  2100              MOVS     r1,#0                 ;269
0000b2  4841              LDR      r0,|L7.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L7.202|
                  |L7.186|
0000ba  4841              LDR      r0,|L7.448|
0000bc  2100              MOVS     r1,#0                 ;271
0000be  8800              LDRH     r0,[r0,#0]            ;273  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;274
0000c2  b202              SXTH     r2,r0                 ;274
0000c4  483c              LDR      r0,|L7.440|
0000c6  f7fffffe          BL       gran
                  |L7.202|
0000ca  20f0              MOVS     r0,#0xf0              ;274
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L7.222|
0000d2  483c              LDR      r0,|L7.452|
0000d4  6801              LDR      r1,[r0,#0]            ;278  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;278
0000d8  d101              BNE      |L7.222|
0000da  6840              LDR      r0,[r0,#4]            ;285  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;285
                  |L7.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;285  ; main_vent_pos
0000e2  4839              LDR      r0,|L7.456|
0000e4  2901              CMP      r1,#1                 ;285
0000e6  dc01              BGT      |L7.236|
0000e8  7006              STRB     r6,[r0,#0]            ;285
0000ea  e000              B        |L7.238|
                  |L7.236|
0000ec  7004              STRB     r4,[r0,#0]            ;285
                  |L7.238|
0000ee  4837              LDR      r0,|L7.460|
0000f0  f8df80dc          LDR      r8,|L7.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;288  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;288
0000fc  2928              CMP      r1,#0x28              ;288
0000fe  d821              BHI      |L7.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;288  ; t_box
000104  4f33              LDR      r7,|L7.468|
000106  4281              CMP      r1,r0                 ;289
000108  dd03              BLE      |L7.274|
00010a  8838              LDRH     r0,[r7,#0]            ;289  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;291
000110  8038              STRH     r0,[r7,#0]            ;292
                  |L7.274|
000112  4831              LDR      r0,|L7.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;292  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;292
00011a  da03              BGE      |L7.292|
00011c  8838              LDRH     r0,[r7,#0]            ;293  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;293
000122  8038              STRH     r0,[r7,#0]            ;295
                  |L7.292|
000124  2206              MOVS     r2,#6                 ;296
000126  2100              MOVS     r1,#0                 ;296
000128  482a              LDR      r0,|L7.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;297  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;297
000134  dd01              BLE      |L7.314|
000136  f8886000          STRB     r6,[r8,#0]            ;299
                  |L7.314|
00013a  2801              CMP      r0,#1                 ;300
00013c  da04              BGE      |L7.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;300
000142  e001              B        |L7.328|
                  |L7.324|
000144  f8884000          STRB     r4,[r8,#0]            ;302
                  |L7.328|
000148  4824              LDR      r0,|L7.476|
00014a  4f25              LDR      r7,|L7.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;303  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;303
000154  291e              CMP      r1,#0x1e              ;304
000156  d820              BHI      |L7.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;306  ; t_box
00015c  4d21              LDR      r5,|L7.484|
00015e  4281              CMP      r1,r0                 ;307
000160  dd03              BLE      |L7.362|
000162  8828              LDRH     r0,[r5,#0]            ;307  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;307
000168  8028              STRH     r0,[r5,#0]            ;308
                  |L7.362|
00016a  481f              LDR      r0,|L7.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;310  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;311
000172  da03              BGE      |L7.380|
000174  8828              LDRH     r0,[r5,#0]            ;311  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;311
00017a  8028              STRH     r0,[r5,#0]            ;312
                  |L7.380|
00017c  2206              MOVS     r2,#6                 ;312
00017e  2100              MOVS     r1,#0                 ;312
000180  4818              LDR      r0,|L7.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;315  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;315
00018c  dd00              BLE      |L7.400|
00018e  703e              STRB     r6,[r7,#0]            ;315
                  |L7.400|
000190  2801              CMP      r0,#1
000192  da00              BGE      |L7.406|
000194  703c              STRB     r4,[r7,#0]            ;259
                  |L7.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;259
                  |L7.410|
00019a  703c              STRB     r4,[r7,#0]
00019c  e7fb              B        |L7.406|
;;;320    
                          ENDP

00019e  0000              DCW      0x0000
                  |L7.416|
                          DCD      t_box
                  |L7.420|
                          DCD      TBOXMAX
                  |L7.424|
                          DCD      av_tbox_cnt
                  |L7.428|
                          DCD      av_tbox_stat
                  |L7.432|
                          DCD      TBOXREG
                  |L7.436|
                          DCD      t_box_cnt
                  |L7.440|
                          DCD      main_vent_pos
                  |L7.444|
                          DCD      TBOXVENTMAX
                  |L7.448|
                          DCD      pos_vent
                  |L7.452|
                          DCD      mess_data
                  |L7.456|
                          DCD      mixer_vent_stat
                  |L7.460|
                          DCD      TBATDISABLE
                  |L7.464|
                          DCD      tbatdisable_stat
                  |L7.468|
                          DCD      tbatdisable_cnt
                  |L7.472|
                          DCD      TBATENABLE
                  |L7.476|
                          DCD      TLOADDISABLE
                  |L7.480|
                          DCD      tloaddisable_stat
                  |L7.484|
                          DCD      tloaddisable_cnt
                  |L7.488|
                          DCD      TLOADENABLE

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  speedChargeHndl PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  b5f8              PUSH     {r3-r7,lr}
;;;246    {          
000002  4f43              LDR      r7,|L8.272|
000004  4d43              LDR      r5,|L8.276|
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  2400              MOVS     r4,#0
000008  8838              LDRH     r0,[r7,#0]  ; speedChIsOn
00000a  b198              CBZ      r0,|L8.52|
00000c  4a42              LDR      r2,|L8.280|
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  6811              LDR      r1,[r2,#0]  ; speedChTimeCnt
000010  f1010101          ADD      r1,r1,#1
000014  6011              STR      r1,[r2,#0]  ; speedChTimeCnt
000016  4841              LDR      r0,|L8.284|
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgTimeInHour
00001c  ebc01340          RSB      r3,r0,r0,LSL #5
000020  ebc32000          RSB      r0,r3,r0,LSL #8
000024  ebb11f00          CMP      r1,r0,LSL #4
000028  db00              BLT      |L8.44|
00002a  803c              STRH     r4,[r7,#0]
                  |L8.44|
00002c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
00002e  b108              CBZ      r0,|L8.52|
000030  803c              STRH     r4,[r7,#0]
000032  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L8.52|
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
000034  483a              LDR      r0,|L8.288|
000036  2601              MOVS     r6,#1
000038  8800              LDRH     r0,[r0,#0]            ;249  ; speedChrgAvtEn
00003a  b300              CBZ      r0,|L8.126|
00003c  8838              LDRH     r0,[r7,#0]            ;254  ; speedChIsOn
00003e  b9f0              CBNZ     r0,|L8.126|
000040  4838              LDR      r0,|L8.292|
000042  4939              LDR      r1,|L8.296|
000044  f9b00000          LDRSH    r0,[r0,#0]            ;254  ; load_U
000048  f9b11000          LDRSH    r1,[r1,#0]            ;254  ; u_necc
00004c  4288              CMP      r0,r1                 ;255
00004e  da16              BGE      |L8.126|
000050  1a08              SUBS     r0,r1,r0              ;255
000052  4936              LDR      r1,|L8.300|
000054  f9b11000          LDRSH    r1,[r1,#0]            ;255  ; speedChrgDU
000058  4288              CMP      r0,r1                 ;256
00005a  dd10              BLE      |L8.126|
00005c  4834              LDR      r0,|L8.304|
00005e  210a              MOVS     r1,#0xa               ;256
000060  f9b00000          LDRSH    r0,[r0,#0]            ;256  ; Ib_ips_termokompensat
000064  fb90f0f1          SDIV     r0,r0,r1              ;256
000068  4932              LDR      r1,|L8.308|
00006a  8809              LDRH     r1,[r1,#0]            ;256  ; IZMAX
00006c  1a40              SUBS     r0,r0,r1
00006e  b200              SXTH     r0,r0                 ;257
000070  f7fffffe          BL       abs
000074  2805              CMP      r0,#5                 ;257
000076  da02              BGE      |L8.126|
000078  8828              LDRH     r0,[r5,#0]            ;257  ; speedChrgBlckStat
00007a  b900              CBNZ     r0,|L8.126|
00007c  803e              STRH     r6,[r7,#0]            ;247
                  |L8.126|
00007e  482e              LDR      r0,|L8.312|
000080  f9b00000          LDRSH    r0,[r0,#0]            ;258  ; speedChrgBlckSrc
000084  2801              CMP      r0,#1                 ;258
000086  d003              BEQ      |L8.144|
000088  2802              CMP      r0,#2                 ;259
00008a  d001              BEQ      |L8.144|
00008c  802c              STRH     r4,[r5,#0]            ;258
00008e  e026              B        |L8.222|
                  |L8.144|
000090  802c              STRH     r4,[r5,#0]            ;258
000092  4b2a              LDR      r3,|L8.316|
000094  492a              LDR      r1,|L8.320|
000096  f44f62fa          MOV      r2,#0x7d0             ;259
00009a  2801              CMP      r0,#1                 ;263
00009c  d002              BEQ      |L8.164|
00009e  2802              CMP      r0,#2                 ;263
0000a0  d00f              BEQ      |L8.194|
0000a2  e01c              B        |L8.222|
                  |L8.164|
0000a4  f9b30000          LDRSH    r0,[r3,#0]            ;266  ; speedChrgBlckLog
0000a8  b918              CBNZ     r0,|L8.178|
0000aa  f9b13016          LDRSH    r3,[r1,#0x16]         ;267  ; adc_buff_
0000ae  4293              CMP      r3,r2                 ;267
0000b0  dc05              BGT      |L8.190|
                  |L8.178|
0000b2  2801              CMP      r0,#1                 ;270
0000b4  d113              BNE      |L8.222|
0000b6  f9b10016          LDRSH    r0,[r1,#0x16]         ;271  ; adc_buff_
0000ba  4290              CMP      r0,r2                 ;271
0000bc  da0f              BGE      |L8.222|
                  |L8.190|
0000be  802e              STRH     r6,[r5,#0]            ;273
0000c0  e00d              B        |L8.222|
                  |L8.194|
0000c2  f9b30000          LDRSH    r0,[r3,#0]            ;274  ; speedChrgBlckLog
0000c6  b918              CBNZ     r0,|L8.208|
0000c8  f9b1301a          LDRSH    r3,[r1,#0x1a]         ;274  ; adc_buff_
0000cc  4293              CMP      r3,r2                 ;276
0000ce  dc05              BGT      |L8.220|
                  |L8.208|
0000d0  2801              CMP      r0,#1                 ;278
0000d2  d104              BNE      |L8.222|
0000d4  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;278  ; adc_buff_
0000d8  4290              CMP      r0,r2                 ;278
0000da  da00              BGE      |L8.222|
                  |L8.220|
0000dc  802e              STRH     r6,[r5,#0]            ;285
                  |L8.222|
0000de  8828              LDRH     r0,[r5,#0]            ;285  ; speedChrgBlckStat
0000e0  4918              LDR      r1,|L8.324|
0000e2  2801              CMP      r0,#1                 ;285
0000e4  d001              BEQ      |L8.234|
0000e6  700c              STRB     r4,[r1,#0]            ;285
                  |L8.232|
0000e8  bdf8              POP      {r3-r7,pc}            ;285
                  |L8.234|
0000ea  7808              LDRB     r0,[r1,#0]            ;285  ; speedChrgShowCnt
0000ec  f1000001          ADD      r0,r0,#1              ;285
0000f0  b2c0              UXTB     r0,r0                 ;287
0000f2  7008              STRB     r0,[r1,#0]            ;287
0000f4  281e              CMP      r0,#0x1e              ;288
0000f6  d3f7              BCC      |L8.232|
0000f8  700c              STRB     r4,[r1,#0]            ;288
0000fa  f2413088          MOV      r0,#0x1388            ;288
0000fe  9000              STR      r0,[sp,#0]            ;288
000100  a311              ADR      r3,|L8.328|
000102  a217              ADR      r2,|L8.352|
000104  a11c              ADR      r1,|L8.376|
000106  a022              ADR      r0,|L8.400|
000108  f7fffffe          BL       show_mess
00010c  bdf8              POP      {r3-r7,pc}            ;291
;;;320    
                          ENDP

00010e  0000              DCW      0x0000
                  |L8.272|
                          DCD      speedChIsOn
                  |L8.276|
                          DCD      speedChrgBlckStat
                  |L8.280|
                          DCD      speedChTimeCnt
                  |L8.284|
                          DCD      speedChrgTimeInHour
                  |L8.288|
                          DCD      speedChrgAvtEn
                  |L8.292|
                          DCD      load_U
                  |L8.296|
                          DCD      u_necc
                  |L8.300|
                          DCD      speedChrgDU
                  |L8.304|
                          DCD      Ib_ips_termokompensat
                  |L8.308|
                          DCD      IZMAX
                  |L8.312|
                          DCD      speedChrgBlckSrc
                  |L8.316|
                          DCD      speedChrgBlckLog
                  |L8.320|
                          DCD      ||.bss||+0x400
                  |L8.324|
                          DCD      speedChrgShowCnt
                  |L8.328|
000148  20202020          DCB      "                    ",0
00014c  20202020
000150  20202020
000154  20202020
000158  20202020
00015c  00      
00015d  00                DCB      0
00015e  00                DCB      0
00015f  00                DCB      0
                  |L8.352|
000160  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
000164  20c7c0cf
000168  d0c5d9c5
00016c  cd212121
000170  20202020
000174  00      
000175  00                DCB      0
000176  00                DCB      0
000177  00                DCB      0
                  |L8.376|
000178  20202020          DCB      "       ",199,192,208,223,196,"        ",0
00017c  202020c7
000180  c0d0dfc4
000184  20202020
000188  20202020
00018c  00      
00018d  00                DCB      0
00018e  00                DCB      0
00018f  00                DCB      0
                  |L8.400|
000190  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
000194  20d3d1ca
000198  ced0c5cd
00019c  cddbc920
0001a0  20202020
0001a4  00      
0001a5  00                DCB      0
0001a6  00                DCB      0
0001a7  00                DCB      0

                          AREA ||area_number.9||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.9||, ||.text||
                  speedChargeStartStop PROC
;;;244    //-----------------------------------------------
;;;245    void ke_start(char in)
000000  b508              PUSH     {r3,lr}
;;;246    {          
000002  480c              LDR      r0,|L9.52|
000004  2100              MOVS     r1,#0
;;;247    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
000008  b10a              CBZ      r2,|L9.14|
00000a  8001              STRH     r1,[r0,#0]
00000c  bd08              POP      {r3,pc}
                  |L9.14|
;;;248    
;;;249    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  4a0a              LDR      r2,|L9.56|
000010  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
000012  b14a              CBZ      r2,|L9.40|
000014  f44f60fa          MOV      r0,#0x7d0
;;;250    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;251    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;252    #endif
;;;253    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  9000              STR      r0,[sp,#0]
00001a  a308              ADR      r3,|L9.60|
00001c  a20d              ADR      r2,|L9.84|
00001e  a113              ADR      r1,|L9.108|
000020  a018              ADR      r0,|L9.132|
000022  f7fffffe          BL       show_mess
000026  bd08              POP      {r3,pc}
                  |L9.40|
000028  f04f0201          MOV      r2,#1
00002c  8002              STRH     r2,[r0,#0]
00002e  481b              LDR      r0,|L9.156|
000030  6001              STR      r1,[r0,#0]  ; speedChTimeCnt
000032  bd08              POP      {r3,pc}
;;;254    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;255    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;256    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;257    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;259    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;260    else 
;;;261    	{
;;;262    
;;;263    	ke_start_stat=kssYES;
;;;264    
;;;265    	spc_stat=spcKE;
;;;266    	__ee_spc_stat=spcKE;
;;;267    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;268    	
;;;269    	spc_bat=in;
;;;270    	__ee_spc_bat=in;
;;;271    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;272    
;;;273    	bat[in]._zar_cnt_ke=0;
;;;274    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;275    	
;;;276    	spc_phase=0;
;;;277    	__ee_spc_phase=0;
;;;278    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;279    
;;;280    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;281    
;;;282    		{					
;;;283    		signed short temp_temp;
;;;284    		signed char temp;
;;;285    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;286    		    
;;;287    		temp=LPC_RTC->YEAR;
;;;288    		gran_char(&temp,1,99);
;;;289    		*((char*)(&(ke_date[0])))=temp;
;;;290    			
;;;291    		temp=LPC_RTC->MONTH;
;;;292    		gran_char(&temp,1,12);
;;;293    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;294    		
;;;295    		temp=LPC_RTC->DOM;
;;;296    		gran_char(&temp,1,31);
;;;297    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;298    				
;;;299    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;300    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;301    
;;;302    		temp=LPC_RTC->HOUR;
;;;303    		gran_char(&temp,0,23);
;;;304    		*((char*)(&(ke_date[1])))=temp;
;;;305                   
;;;306    		temp=LPC_RTC->MIN;
;;;307    		gran_char(&temp,0,59);
;;;308    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;309    	          
;;;310    		temp=LPC_RTC->SEC;
;;;311    		gran_char(&temp,0,59);
;;;312    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;313    			
;;;314    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;315    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;316    		}
;;;317    
;;;318    	}
;;;319    }
;;;320    
                          ENDP

                  |L9.52|
                          DCD      speedChIsOn
                  |L9.56|
                          DCD      speedChrgBlckStat
                  |L9.60|
00003c  20202020          DCB      "                    ",0
000040  20202020
000044  20202020
000048  20202020
00004c  20202020
000050  00      
000051  00                DCB      0
000052  00                DCB      0
000053  00                DCB      0
                  |L9.84|
000054  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
000058  e7e0e1eb
00005c  eeeae8f0
000060  eee2e0ed
000064  21      
000065  20202000          DCB      "   ",0
000069  00                DCB      0
00006a  00                DCB      0
00006b  00                DCB      0
                  |L9.108|
00006c  20202020          DCB      "       ",231,224,240,255,228,"        ",0
000070  202020e7
000074  e0f0ffe4
000078  20202020
00007c  20202020
000080  00      
000081  00                DCB      0
000082  00                DCB      0
000083  00                DCB      0
                  |L9.132|
000084  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
000088  20d3f1ea
00008c  eef0e5ed
000090  edfbe920
000094  20202020
000098  00      
000099  00                DCB      0
00009a  00                DCB      0
00009b  00                DCB      0
                  |L9.156|
                          DCD      speedChTimeCnt

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32
                  cntrl_stat_buff
                          %        64

                          AREA ||area_number.12||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.13||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.13||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.19||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.20||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.21||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.26||, DATA, ALIGN=2

                          EXPORTAS ||area_number.26||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  cntrl_stat_buff_ptr
00000b  00                DCB      0x00
                  bAVG
00000c  00                DCB      0x00
                  avg_cnt_
00000d  00                DCB      0x00
                  avg_num
00000e  00                DCB      0x00
                  bAVG_BLOCK
00000f  00                DCB      0x00
                  bAVG_DIR
000010  00                DCB      0x00
                  num_of_wrks_bps
000011  00                DCB      0x00
                  num_necc_up
000012  00                DCB      0x00
                  num_necc_down
000013  00                DCB      0x00
                  sh_cnt0
000014  00                DCB      0x00
                  b1Hz_sh
000015  00                DCB      0x00
                  spc_stat
000016  00                DCB      0x00
                  spc_bat
000017  00                DCB      0x00
                  spc_phase
000018  00                DCB      0x00
                  ke_start_stat
000019  00                DCB      0x00
                  numOfForvardBps
00001a  00                DCB      0x00
                  numOfForvardBps_old
00001b  00                DCB      0x00
                  numOfForvardBps_minCnt
00001c  00                DCB      0x00
                  cntrl_hndl_plazma
00001d  00                DCB      0x00
                  cntrl_stat
00001e  04b0              DCW      0x04b0
                  cntrl_stat_old
000020  04b0              DCW      0x04b0
                  avg_main_cnt
000022  0014              DCW      0x0014
                  u_out_reg_main_cnt
000024  000a              DCW      0x000a
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  rele_on_cnt
000034  0000              DCB      0x00,0x00
                  plazma_sk
000036  0000              DCB      0x00,0x00
                  cntrl_stat_new
000038  0000              DCB      0x00,0x00
                  Ibmax
00003a  0000              DCB      0x00,0x00
                  IZMAX_
00003c  0000              DCB      0x00,0x00
                  Ubpsmax
00003e  0000              DCB      0x00,0x00
                  cntrl_stat_buff_
000040  0000              DCB      0x00,0x00
                  samokalibr_cnt
000042  0000              DCB      0x00,0x00
                  main_kb_cnt
000044  0000              DCB      0x00,0x00
                  __ee_spc_stat
000046  0000              DCB      0x00,0x00
                  __ee_spc_bat
000048  0000              DCB      0x00,0x00
                  __ee_spc_phase
00004a  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00004c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00004e  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000050  00000000          DCB      0x00,0x00,0x00,0x00
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  bps_on_mask
                          DCD      0x00000000
                  bps_off_mask
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  adc_self_ch_buff
                          DCD      0x00000000
000078  0000              DCB      0x00,0x00
                  adc_self_ch_disp
00007a  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  ke_date
                          %        8

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  net_metr_buff_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=0

                          EXPORTAS ||area_number.32||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=2

                          EXPORTAS ||area_number.38||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=1

                          EXPORTAS ||area_number.49||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  kb_start_ips
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=1

                          EXPORTAS ||area_number.57||, ||.data||
                  ibat_ips
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.58||, DATA, ALIGN=1

                          EXPORTAS ||area_number.58||, ||.data||
                  ibat_ips_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=0

                          EXPORTAS ||area_number.60||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.61||, DATA, ALIGN=0

                          EXPORTAS ||area_number.61||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.62||, DATA, ALIGN=0

                          EXPORTAS ||area_number.62||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=1

                          EXPORTAS ||area_number.65||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.67||, DATA, ALIGN=0

                          EXPORTAS ||area_number.67||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.71||, DATA, ALIGN=1

                          EXPORTAS ||area_number.71||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.73||, DATA, ALIGN=0

                          EXPORTAS ||area_number.73||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
