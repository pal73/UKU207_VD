; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_VD.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_VD -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;245    {          
000004  4606              MOV      r6,r0
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f04f0700          MOV      r7,#0
00000a  4dff              LDR      r5,|L1.1032|
00000c  766f              STRB     r7,[r5,#0x19]
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7da8              LDRB     r0,[r5,#0x16]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49fa              LDR      r1,|L1.1036|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7668              STRB     r0,[r5,#0x19]
                  |L1.52|
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  766b              STRB     r3,[r5,#0x19]         ;248
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;253
000040  0792              LSLS     r2,r2,#30             ;253
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;253
000048  7668              STRB     r0,[r5,#0x19]         ;253
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;254
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;254
000054  7668              STRB     r0,[r5,#0x19]         ;254
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4aed              LDR      r2,|L1.1040|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;255
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;255  ; IKB
000062  4291              CMP      r1,r2                 ;255
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;255
00006a  7668              STRB     r0,[r5,#0x19]         ;255
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;256
000070  4291              CMP      r1,r2                 ;256
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;256
000078  7668              STRB     r0,[r5,#0x19]         ;256
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49e2              LDR      r1,|L1.1032|
00007e  2801              CMP      r0,#1                 ;257
000080  7dc9              LDRB     r1,[r1,#0x17]         ;257
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;258
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;257
000090  7668              STRB     r0,[r5,#0x19]         ;257
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;258
000096  d07d              BEQ      |L1.404|
                  |L1.152|
000098  f1050516          ADD      r5,r5,#0x16           ;262
00009c  f04f0064          MOV      r0,#0x64              ;262
0000a0  70e8              STRB     r0,[r5,#3]            ;262
0000a2  702b              STRB     r3,[r5,#0]            ;264
0000a4  866b              STRH     r3,[r5,#0x32]         ;265
0000a6  4619              MOV      r1,r3                 ;266
0000a8  f44f70f8          MOV      r0,#0x1f0             ;266
0000ac  f7fffffe          BL       lc640_write_int
0000b0  706e              STRB     r6,[r5,#1]            ;268
0000b2  86ae              STRH     r6,[r5,#0x34]         ;269
0000b4  4631              MOV      r1,r6                 ;270
0000b6  f44f70fa          MOV      r0,#0x1f4             ;270
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;272
0000c0  48d4              LDR      r0,|L1.1044|
0000c2  2100              MOVS     r1,#0                 ;273
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;273
0000c8  f7fffffe          BL       lc640_write_int
0000cc  70af              STRB     r7,[r5,#2]            ;275
0000ce  86ef              STRH     r7,[r5,#0x36]         ;276
0000d0  4639              MOV      r1,r7                 ;277
0000d2  f44f70fb          MOV      r0,#0x1f6             ;277
0000d6  f7fffffe          BL       lc640_write_int
0000da  48cf              LDR      r0,|L1.1048|
0000dc  8800              LDRH     r0,[r0,#0]            ;284  ; bat_u_old_cnt
0000de  f1000001          ADD      r0,r0,#1              ;284
0000e2  f0000007          AND      r0,r0,#7              ;284
0000e6  eb040040          ADD      r0,r4,r0,LSL #1       ;284
0000ea  8c00              LDRH     r0,[r0,#0x20]         ;284
0000ec  9001              STR      r0,[sp,#4]            ;284
0000ee  4dcb              LDR      r5,|L1.1052|
0000f0  8ba8              LDRH     r0,[r5,#0x1c]         ;286
0000f2  9000              STR      r0,[sp,#0]            ;286
0000f4  f04f0263          MOV      r2,#0x63              ;287
0000f8  f04f0101          MOV      r1,#1                 ;287
0000fc  4668              MOV      r0,sp                 ;287
0000fe  f7fffffe          BL       gran_char
000102  4cc1              LDR      r4,|L1.1032|
000104  f89d0000          LDRB     r0,[sp,#0]            ;288
000108  3480              ADDS     r4,r4,#0x80           ;288
00010a  7020              STRB     r0,[r4,#0]            ;288
00010c  7e28              LDRB     r0,[r5,#0x18]         ;290
00010e  9000              STR      r0,[sp,#0]            ;290
000110  220c              MOVS     r2,#0xc               ;291
000112  2101              MOVS     r1,#1                 ;291
000114  4668              MOV      r0,sp                 ;291
000116  f7fffffe          BL       gran_char
00011a  f89d0000          LDRB     r0,[sp,#0]            ;292
00011e  7060              STRB     r0,[r4,#1]            ;292
000120  7b28              LDRB     r0,[r5,#0xc]          ;294
000122  9000              STR      r0,[sp,#0]            ;294
000124  221f              MOVS     r2,#0x1f              ;295
000126  2101              MOVS     r1,#1                 ;295
000128  4668              MOV      r0,sp                 ;295
00012a  f7fffffe          BL       gran_char
00012e  f89d0000          LDRB     r0,[sp,#0]            ;296
000132  70a0              STRB     r0,[r4,#2]            ;296
000134  f89d0004          LDRB     r0,[sp,#4]            ;298
000138  70e0              STRB     r0,[r4,#3]            ;298
00013a  f44f70fc          MOV      r0,#0x1f8             ;299
00013e  6821              LDR      r1,[r4,#0]            ;299  ; ke_date
000140  f7fffffe          BL       lc640_write_long
000144  7a28              LDRB     r0,[r5,#8]            ;301
000146  9000              STR      r0,[sp,#0]            ;301
000148  2217              MOVS     r2,#0x17              ;302
00014a  2100              MOVS     r1,#0                 ;302
00014c  4668              MOV      r0,sp                 ;302
00014e  f7fffffe          BL       gran_char
000152  f89d0000          LDRB     r0,[sp,#0]            ;303
000156  7120              STRB     r0,[r4,#4]            ;303
000158  7928              LDRB     r0,[r5,#4]            ;305
00015a  9000              STR      r0,[sp,#0]            ;305
00015c  223b              MOVS     r2,#0x3b              ;306
00015e  2100              MOVS     r1,#0                 ;306
000160  4668              MOV      r0,sp                 ;306
000162  f7fffffe          BL       gran_char
000166  f89d0000          LDRB     r0,[sp,#0]            ;307
00016a  7160              STRB     r0,[r4,#5]            ;307
00016c  7828              LDRB     r0,[r5,#0]            ;309
00016e  9000              STR      r0,[sp,#0]            ;309
000170  223b              MOVS     r2,#0x3b              ;310
000172  2100              MOVS     r1,#0                 ;310
000174  4668              MOV      r0,sp                 ;310
000176  f7fffffe          BL       gran_char
00017a  f89d0000          LDRB     r0,[sp,#0]            ;311
00017e  71a0              STRB     r0,[r4,#6]            ;311
000180  f89d0005          LDRB     r0,[sp,#5]            ;313
000184  71e0              STRB     r0,[r4,#7]            ;313
000186  f44f70fe          MOV      r0,#0x1fc             ;314
00018a  6861              LDR      r1,[r4,#4]            ;314  ; ke_date
00018c  f7fffffe          BL       lc640_write_long
000190  e750              B        |L1.52|
000192  e7ff              B        |L1.404|
                  |L1.404|
000194  f04f006c          MOV      r0,#0x6c              ;258
000198  7668              STRB     r0,[r5,#0x19]         ;258
00019a  e74b              B        |L1.52|
;;;319    
                          ENDP

                  samokalibr_hndl PROC
;;;326    //-----------------------------------------------
;;;327    void samokalibr_hndl(void)
00019c  e92d47f0          PUSH     {r4-r10,lr}
;;;328    {
;;;329    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
0001a0  4c99              LDR      r4,|L1.1032|
0001a2  f8b40040          LDRH     r0,[r4,#0x40]  ; samokalibr_cnt
0001a6  1c40              ADDS     r0,r0,#1
0001a8  b200              SXTH     r0,r0
0001aa  f8a40040          STRH     r0,[r4,#0x40]
0001ae  f5b06fe1          CMP      r0,#0x708
0001b2  db03              BLT      |L1.444|
0001b4  f04f0000          MOV      r0,#0
0001b8  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.444|
;;;330    
;;;331    if(samokalibr_cnt>=1785U)
0001bc  f9b40040          LDRSH    r0,[r4,#0x40]  ; samokalibr_cnt
0001c0  f5b06fdf          CMP      r0,#0x6f8
0001c4  d911              BLS      |L1.490|
;;;332    	{
;;;333    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
0001c6  230f              MOVS     r3,#0xf
0001c8  2201              MOVS     r2,#1
0001ca  2164              MOVS     r1,#0x64
0001cc  20d2              MOVS     r0,#0xd2
0001ce  f7fffffe          BL       mess_send
;;;334    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
0001d2  230f              MOVS     r3,#0xf
0001d4  2200              MOVS     r2,#0
0001d6  21d8              MOVS     r1,#0xd8
0001d8  20d7              MOVS     r0,#0xd7
0001da  f7fffffe          BL       mess_send
;;;335    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
0001de  230f              MOVS     r3,#0xf
0001e0  2200              MOVS     r2,#0
0001e2  21d8              MOVS     r1,#0xd8
0001e4  20dc              MOVS     r0,#0xdc
0001e6  f7fffffe          BL       mess_send
                  |L1.490|
;;;336    	} 
;;;337    
;;;338    if(samokalibr_cnt==1799U)
0001ea  f9b40040          LDRSH    r0,[r4,#0x40]  ; samokalibr_cnt
0001ee  f5a061e0          SUB      r1,r0,#0x700
0001f2  3907              SUBS     r1,#7
0001f4  d133              BNE      |L1.606|
;;;339    	{
;;;340    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
0001f6  4d8a              LDR      r5,|L1.1056|
0001f8  4c8a              LDR      r4,|L1.1060|
0001fa  4e84              LDR      r6,|L1.1036|
0001fc  8828              LDRH     r0,[r5,#0]  ; Kibat0
0001fe  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000200  270a              MOVS     r7,#0xa
000202  f8df8224          LDR      r8,|L1.1064|
000206  f8df9224          LDR      r9,|L1.1068|
00020a  4288              CMP      r0,r1
00020c  d010              BEQ      |L1.560|
00020e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000212  fb90f0f7          SDIV     r0,r0,r7
000216  b200              SXTH     r0,r0
000218  f7fffffe          BL       abs
00021c  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000220  4288              CMP      r0,r1
000222  da05              BGE      |L1.560|
000224  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000228  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
00022c  f7fffffe          BL       lc640_write_int
                  |L1.560|
;;;341    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000230  8868              LDRH     r0,[r5,#2]  ; Kibat0
000232  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000234  4288              CMP      r0,r1
000236  d012              BEQ      |L1.606|
000238  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00023c  fb90f0f7          SDIV     r0,r0,r7
000240  b200              SXTH     r0,r0
000242  f7fffffe          BL       abs
000246  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
00024a  4288              CMP      r0,r1
00024c  da07              BGE      |L1.606|
00024e  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000252  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000256  e8bd47f0          POP      {r4-r10,lr}
00025a  f7ffbffe          B.W      lc640_write_int
                  |L1.606|
;;;342    	
;;;343    	}	 	
;;;344    }
00025e  e8bd87f0          POP      {r4-r10,pc}
;;;345    
                          ENDP

                  ubat_old_drv PROC
;;;348    //-----------------------------------------------
;;;349    void ubat_old_drv(void)
000262  b510              PUSH     {r4,lr}
;;;350    {        
;;;351    bat_u_old_cnt++;
000264  4c6c              LDR      r4,|L1.1048|
000266  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000268  f1000001          ADD      r0,r0,#1
00026c  8020              STRH     r0,[r4,#0]
;;;352    gran_ring(&bat_u_old_cnt,0,8);
00026e  f04f0208          MOV      r2,#8
000272  f04f0100          MOV      r1,#0
000276  4620              MOV      r0,r4
000278  f7fffffe          BL       gran_ring
;;;353    
;;;354    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
00027c  4963              LDR      r1,|L1.1036|
00027e  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000282  eb010040          ADD      r0,r1,r0,LSL #1
000286  884a              LDRH     r2,[r1,#2]  ; bat
000288  8402              STRH     r2,[r0,#0x20]
;;;355    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
00028a  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
00028e  f8a0106c          STRH     r1,[r0,#0x6c]
;;;356    }
000292  bd10              POP      {r4,pc}
;;;357    /*
                          ENDP

                  matemat PROC
;;;394    //-----------------------------------------------
;;;395    void matemat(void)
000294  e92d4ffe          PUSH     {r1-r11,lr}
;;;396    {
;;;397    //signed short temp_SS;
;;;398    signed long temp_SL/*,temp_SL_*/;
;;;399    char /*temp,*/i;
;;;400    //signed short temp_SS;
;;;401    
;;;402    #ifdef UKU_MGTS
;;;403    //напр€жение сети
;;;404    temp_SL=(signed long)net_buff_;
;;;405    temp_SL*=Kunet;
;;;406    temp_SL/=110000L;
;;;407    net_U=(signed short)temp_SL;
;;;408    #endif
;;;409    
;;;410    #ifdef UKU_RSTKM
;;;411    //напр€жение сети
;;;412    temp_SL=(signed long)net_buff_;
;;;413    temp_SL*=Kunet;
;;;414    temp_SL/=110000L;
;;;415    net_U=(signed short)temp_SL;
;;;416    #endif
;;;417    
;;;418    #ifdef UKU_3U
;;;419    //напр€жение сети
;;;420    temp_SL=(signed long)net_buff_;
;;;421    temp_SL*=Kunet;
;;;422    temp_SL/=36000L;
;;;423    net_U=(signed short)temp_SL;
;;;424    #endif
;;;425    
;;;426    #ifdef UKU_6U
;;;427    //напр€жение сети
;;;428    
;;;429    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;430    	{
;;;431    
;;;432    	if(bps[11]._device==dNET_METR)
;;;433    		{
;;;434    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;435    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;436    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;437    
;;;438    		temp_SL=(signed long)net_metr_buff_[0];
;;;439    		temp_SL*=KunetA;
;;;440    		temp_SL/=6000L;
;;;441    		net_Ua=(signed short)temp_SL;
;;;442    	
;;;443    		temp_SL=(signed long)net_metr_buff_[1];
;;;444    		temp_SL*=KunetB;
;;;445    		temp_SL/=6000L;
;;;446    		net_Ub=(signed short)temp_SL;
;;;447    	
;;;448    		temp_SL=(signed long)net_metr_buff_[2];
;;;449    		temp_SL*=KunetC;
;;;450    		temp_SL/=6000L;
;;;451    		net_Uc=(signed short)temp_SL;
;;;452    		}
;;;453    	else
;;;454    		{
;;;455    		temp_SL=(signed long)net_buff_;
;;;456    		temp_SL*=KunetA;
;;;457    		temp_SL/=110000L;
;;;458    		net_Ua=(signed short)temp_SL;
;;;459    	
;;;460    		temp_SL=(signed long)adc_buff_[3];
;;;461    		temp_SL*=KunetB;
;;;462    		temp_SL/=6000L;
;;;463    		net_Ub=(signed short)temp_SL;
;;;464    	
;;;465    		temp_SL=(signed long)adc_buff_[10];
;;;466    		temp_SL*=KunetC;
;;;467    		temp_SL/=6000L;
;;;468    		net_Uc=(signed short)temp_SL;
;;;469    		}
;;;470    
;;;471    	net_U=net_Ua;
;;;472    	if(net_Ub<net_U)net_U=net_Ub;
;;;473    	if(net_Uc<net_U)net_U=net_Uc;
;;;474    	}
;;;475    else 
;;;476    	{
;;;477    	temp_SL=(signed long)net_buff_;
;;;478    	temp_SL*=Kunet;
;;;479    	temp_SL/=110000L;
;;;480    	net_U=(signed short)temp_SL;
;;;481    	}
;;;482    
;;;483    
;;;484    
;;;485    
;;;486    #endif
;;;487    
;;;488    #ifdef UKU_GLONASS
;;;489    //напр€жение сети
;;;490    temp_SL=(signed long)net_buff_;
;;;491    temp_SL*=Kunet;
;;;492    temp_SL/=110000L;
;;;493    net_U=(signed short)temp_SL;
;;;494    #endif
;;;495    
;;;496    #ifdef UKU_KONTUR
;;;497    //напр€жение сети
;;;498    temp_SL=(signed long)net_buff_;
;;;499    temp_SL*=Kunet;
;;;500    temp_SL/=110000L;
;;;501    net_U=(signed short)temp_SL;
;;;502    #endif
;;;503    
;;;504    
;;;505    #ifdef UKU_220_V2
;;;506    //напр€жение сети
;;;507    
;;;508    if(AUSW_MAIN==22033)
;;;509    	{
;;;510    	temp_SL=(signed long)net_buff_;
;;;511    	temp_SL*=KunetA;
;;;512    	temp_SL/=6000L;
;;;513    	net_Ua=(signed short)temp_SL;
;;;514    
;;;515    	temp_SL=(signed long)adc_buff_[3];
;;;516    	temp_SL*=KunetB;
;;;517    	temp_SL/=6000L;
;;;518    	net_Ub=(signed short)temp_SL;
;;;519    
;;;520    	temp_SL=(signed long)adc_buff_[10];
;;;521    	temp_SL*=KunetC;
;;;522    	temp_SL/=6000L;
;;;523    	net_Uc=(signed short)temp_SL;
;;;524    
;;;525    	net_U=net_Ua;
;;;526    	if(net_Ub<net_U)net_U=net_Ub;
;;;527    	if(net_Uc<net_U)net_U=net_Uc;
;;;528    	}
;;;529    else
;;;530    	{
;;;531    	temp_SL=(signed long)net_buff_;
;;;532    	temp_SL*=Kunet;
;;;533    	temp_SL/=5000L;
;;;534    	net_U=(signed short)temp_SL;
;;;535    	}
;;;536    #endif
;;;537    
;;;538    
;;;539    #ifdef UKU_220
;;;540    //напр€жение сети
;;;541    
;;;542    if(AUSW_MAIN==22035)
;;;543    	{
;;;544    	temp_SL=(signed long)net_buff_;
;;;545    	temp_SL*=KunetA;
;;;546    	temp_SL/=6000L;
;;;547    	net_Ua=(signed short)temp_SL;
;;;548    
;;;549    	temp_SL=(signed long)adc_buff_[3];
;;;550    	temp_SL*=KunetB;
;;;551    	temp_SL/=6000L;
;;;552    	net_Ub=(signed short)temp_SL;
;;;553    
;;;554    	temp_SL=(signed long)adc_buff_[10];
;;;555    	temp_SL*=KunetC;
;;;556    	temp_SL/=6000L;
;;;557    	net_Uc=(signed short)temp_SL;
;;;558    
;;;559    	net_U=net_Ua;
;;;560    	if(net_Ub<net_U)net_U=net_Ub;
;;;561    	if(net_Uc<net_U)net_U=net_Uc;
;;;562    	}
;;;563    else
;;;564    	{
;;;565    	temp_SL=(signed long)net_buff_;
;;;566    	temp_SL*=Kunet;
;;;567    	#ifdef _ACDC_
;;;568    	temp_SL/=500L;
;;;569    	#else
;;;570    	temp_SL/=5000L;
;;;571    	#endif
;;;572    	net_U=(signed short)temp_SL;
;;;573    	
;;;574    	}
;;;575    #endif
;;;576    
;;;577    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;578    //напр€жение сети
;;;579    
;;;580    
;;;581    	if(bps[11]._device==dNET_METR)
000298  4865              LDR      r0,|L1.1072|
;;;582    		{
;;;583    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;584    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;585    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;586    
;;;587    		temp_SL=(signed long)net_metr_buff_[2];
;;;588    		temp_SL*=KunetA;
00029a  4b66              LDR      r3,|L1.1076|
;;;589    		temp_SL/=6000L;
;;;590    		net_Ua=(signed short)temp_SL;
;;;591    	
;;;592    		temp_SL=(signed long)net_metr_buff_[1];
;;;593    		temp_SL*=KunetB;
00029c  4a67              LDR      r2,|L1.1084|
00029e  f8900478          LDRB     r0,[r0,#0x478]        ;581  ; bps
0002a2  9002              STR      r0,[sp,#8]            ;588
;;;594    		temp_SL/=6000L;
;;;595    		net_Ub=(signed short)temp_SL;
;;;596    	
;;;597    		temp_SL=(signed long)net_metr_buff_[0];
;;;598    		temp_SL*=KunetC;
0002a4  4966              LDR      r1,|L1.1088|
0002a6  f9b3b000          LDRSH    r11,[r3,#0]           ;588
0002aa  f9b22000          LDRSH    r2,[r2,#0]            ;593
0002ae  9201              STR      r2,[sp,#4]
0002b0  4d61              LDR      r5,|L1.1080|
0002b2  f9b11000          LDRSH    r1,[r1,#0]
0002b6  4b63              LDR      r3,|L1.1092|
;;;599    		temp_SL/=6000L;
;;;600    		net_Uc=(signed short)temp_SL;
0002b8  4e63              LDR      r6,|L1.1096|
;;;601    
;;;602    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;603    
;;;604    		net_U=net_Ua;
0002ba  4c64              LDR      r4,|L1.1100|
;;;605    		if(net_Ub<net_U)net_U=net_Ub;
;;;606    		if(net_Uc<net_U)net_U=net_Uc;
;;;607    		}
;;;608    	  else if(AUSW_MAIN==22033)
0002bc  f8df8190          LDR      r8,|L1.1104|
0002c0  f2456a11          MOV      r10,#0x5611
;;;609    	{
;;;610    	temp_SL=(signed long)net_buff_;
;;;611    	temp_SL*=KunetA;
;;;612    	temp_SL/=4000L;
;;;613    	net_Ua=(signed short)temp_SL;
;;;614    
;;;615    	temp_SL=(signed long)adc_buff_[3];
;;;616    	temp_SL*=KunetB;
;;;617    	temp_SL/=6000L;
;;;618    	net_Ub=(signed short)temp_SL;
;;;619    
;;;620    	temp_SL=(signed long)adc_buff_[10];
;;;621    	temp_SL*=KunetC;
;;;622    	temp_SL/=6000L;
;;;623    	net_Uc=(signed short)temp_SL;
;;;624    
;;;625    	net_U=net_Ua;
;;;626    	if(net_Ub<net_U)net_U=net_Ub;
;;;627    	if(net_Uc<net_U)net_U=net_Uc;
;;;628    	}
;;;629    else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;630    	{
;;;631    	temp_SL=(signed long)net_buff_;
;;;632    	temp_SL*=KunetA;
;;;633    	temp_SL/=40000L;
;;;634    	net_Ua=(signed short)temp_SL;
;;;635    
;;;636    	temp_SL=(signed long)adc_buff_[3];
;;;637    	temp_SL*=KunetB;
;;;638    	temp_SL/=6000L;
;;;639    	net_Ub=(signed short)temp_SL;
;;;640    
;;;641    	temp_SL=(signed long)adc_buff_[10];
;;;642    	temp_SL*=KunetC;
;;;643    	temp_SL/=6000L;
;;;644    	net_Uc=(signed short)temp_SL;
;;;645    
;;;646    	net_U=net_Ua;
;;;647    	if(net_Ub<net_U)net_U=net_Ub;
;;;648    	if(net_Uc<net_U)net_U=net_Uc;
;;;649    	}
;;;650    else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
0002c4  f24557fa          MOV      r7,#0x55fa
0002c8  9100              STR      r1,[sp,#0]            ;581
0002ca  2807              CMP      r0,#7                 ;581
0002cc  d038              BEQ      |L1.832|
0002ce  494e              LDR      r1,|L1.1032|
0002d0  f8dfc180          LDR      r12,|L1.1108|
0002d4  f8df9164          LDR      r9,|L1.1084|
0002d8  8d0a              LDRH     r2,[r1,#0x28]         ;610
0002da  4956              LDR      r1,|L1.1076|
0002dc  f9b99000          LDRSH    r9,[r9,#0]            ;593
0002e0  f2417b70          MOV      r11,#0x1770           ;589
0002e4  f9b11000          LDRSH    r1,[r1,#0]            ;588
0002e8  f8b80000          LDRH     r0,[r8,#0]            ;608  ; AUSW_MAIN
0002ec  434a              MULS     r2,r1,r2              ;611
0002ee  f9bc1006          LDRSH    r1,[r12,#6]           ;615
0002f2  f9bcc014          LDRSH    r12,[r12,#0x14]       ;620
0002f6  fb01f109          MUL      r1,r1,r9              ;616
0002fa  f8df9144          LDR      r9,|L1.1088|
0002fe  fb91f1fb          SDIV     r1,r1,r11             ;617
000302  f9b99000          LDRSH    r9,[r9,#0]            ;598
000306  b209              SXTH     r1,r1                 ;618
000308  fb0cfc09          MUL      r12,r12,r9            ;621
00030c  fb9cfcfb          SDIV     r12,r12,r11           ;622
000310  fa0ffc8c          SXTH     r12,r12               ;623
000314  4550              CMP      r0,r10                ;608
000316  d158              BNE      |L1.970|
000318  f44f607a          MOV      r0,#0xfa0             ;612
00031c  fb92f0f0          SDIV     r0,r2,r0              ;612
000320  b200              SXTH     r0,r0                 ;613
000322  8028              STRH     r0,[r5,#0]            ;613
000324  8019              STRH     r1,[r3,#0]            ;618
000326  f8a6c000          STRH     r12,[r6,#0]           ;623
00032a  8020              STRH     r0,[r4,#0]            ;625
00032c  4281              CMP      r1,r0                 ;626
00032e  da00              BGE      |L1.818|
000330  8021              STRH     r1,[r4,#0]            ;626
                  |L1.818|
000332  f9b40000          LDRSH    r0,[r4,#0]            ;627  ; net_U
000336  4584              CMP      r12,r0                ;627
000338  da01              BGE      |L1.830|
00033a  f8a4c000          STRH     r12,[r4,#0]           ;627
                  |L1.830|
00033e  e0aa              B        |L1.1174|
                  |L1.832|
000340  4845              LDR      r0,|L1.1112|
000342  f8dfc0c4          LDR      r12,|L1.1032|
000346  7801              LDRB     r1,[r0,#0]            ;583  ; bps
000348  7842              LDRB     r2,[r0,#1]            ;583  ; bps
00034a  f10c0c6c          ADD      r12,r12,#0x6c         ;583
00034e  eb012102          ADD      r1,r1,r2,LSL #8       ;583
000352  fa1ff981          UXTH     r9,r1                 ;583
000356  f8ac9000          STRH     r9,[r12,#0]           ;583
00035a  7881              LDRB     r1,[r0,#2]            ;584  ; bps
00035c  78c2              LDRB     r2,[r0,#3]            ;584  ; bps
00035e  eb012102          ADD      r1,r1,r2,LSL #8       ;584
000362  b289              UXTH     r1,r1                 ;584
000364  f8ac1002          STRH     r1,[r12,#2]           ;584
000368  7902              LDRB     r2,[r0,#4]            ;585  ; bps
00036a  f890e005          LDRB     lr,[r0,#5]            ;585  ; bps
00036e  eb02220e          ADD      r2,r2,lr,LSL #8       ;585
000372  b292              UXTH     r2,r2                 ;585
000374  f8ac2004          STRH     r2,[r12,#4]           ;585
000378  fb02f20b          MUL      r2,r2,r11             ;588
00037c  f2417c70          MOV      r12,#0x1770           ;589
000380  fb92f2fc          SDIV     r2,r2,r12             ;589
000384  fa0ffb82          SXTH     r11,r2                ;590
000388  f8a5b000          STRH     r11,[r5,#0]           ;590
00038c  9a01              LDR      r2,[sp,#4]            ;593
00038e  fb01f102          MUL      r1,r1,r2              ;593
000392  fb91f1fc          SDIV     r1,r1,r12             ;594
000396  b209              SXTH     r1,r1                 ;595
000398  8019              STRH     r1,[r3,#0]            ;595
00039a  9a00              LDR      r2,[sp,#0]            ;598
00039c  fb09f902          MUL      r9,r9,r2              ;598
0003a0  fb99f2fc          SDIV     r2,r9,r12             ;599
0003a4  b212              SXTH     r2,r2                 ;600
0003a6  8032              STRH     r2,[r6,#0]            ;600
0003a8  7983              LDRB     r3,[r0,#6]            ;602  ; bps
0003aa  79c0              LDRB     r0,[r0,#7]            ;602  ; bps
0003ac  eb032000          ADD      r0,r3,r0,LSL #8       ;602
0003b0  4b2a              LDR      r3,|L1.1116|
0003b2  8018              STRH     r0,[r3,#0]            ;602
0003b4  f8a4b000          STRH     r11,[r4,#0]           ;604
0003b8  4559              CMP      r1,r11                ;605
0003ba  da00              BGE      |L1.958|
0003bc  8021              STRH     r1,[r4,#0]            ;605
                  |L1.958|
0003be  f9b40000          LDRSH    r0,[r4,#0]            ;606  ; net_U
0003c2  4282              CMP      r2,r0                 ;606
0003c4  da67              BGE      |L1.1174|
0003c6  8022              STRH     r2,[r4,#0]            ;606
0003c8  e065              B        |L1.1174|
                  |L1.970|
0003ca  f5a049ac          SUB      r9,r0,#0x5600         ;629
0003ce  f1b9092f          SUBS     r9,r9,#0x2f           ;629
0003d2  d008              BEQ      |L1.998|
0003d4  f1190928          ADDS     r9,r9,#0x28           ;629
0003d8  d005              BEQ      |L1.998|
0003da  f1b90914          SUBS     r9,r9,#0x14           ;629
0003de  d002              BEQ      |L1.998|
0003e0  f1190919          ADDS     r9,r9,#0x19           ;629
0003e4  d140              BNE      |L1.1128|
                  |L1.998|
0003e6  f6494040          MOV      r0,#0x9c40            ;633
0003ea  fb92f0f0          SDIV     r0,r2,r0              ;633
0003ee  b200              SXTH     r0,r0                 ;634
0003f0  8028              STRH     r0,[r5,#0]            ;634
0003f2  8019              STRH     r1,[r3,#0]            ;639
0003f4  f8a6c000          STRH     r12,[r6,#0]           ;644
0003f8  8020              STRH     r0,[r4,#0]            ;646
0003fa  4281              CMP      r1,r0                 ;647
0003fc  da00              BGE      |L1.1024|
0003fe  8021              STRH     r1,[r4,#0]            ;647
                  |L1.1024|
000400  f9b40000          LDRSH    r0,[r4,#0]            ;648  ; net_U
000404  4584              CMP      r12,r0                ;648
000406  e02b              B        |L1.1120|
                  |L1.1032|
                          DCD      ||area_number.26||
                  |L1.1036|
                          DCD      bat
                  |L1.1040|
                          DCD      IKB
                  |L1.1044|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1048|
                          DCD      bat_u_old_cnt
                  |L1.1052|
                          DCD      0x40024020
                  |L1.1056|
                          DCD      Kibat0
                  |L1.1060|
                          DCD      ad7705_buff_
                  |L1.1064|
                          DCD      IZMAX
                  |L1.1068|
                          DCD      ADR_KI0BAT
                  |L1.1072|
                          DCD      bps
                  |L1.1076|
                          DCD      KunetA
                  |L1.1080|
                          DCD      net_Ua
                  |L1.1084|
                          DCD      KunetB
                  |L1.1088|
                          DCD      KunetC
                  |L1.1092|
                          DCD      net_Ub
                  |L1.1096|
                          DCD      net_Uc
                  |L1.1100|
                          DCD      net_U
                  |L1.1104|
                          DCD      AUSW_MAIN
                  |L1.1108|
                          DCD      ||.bss||+0x400
                  |L1.1112|
                          DCD      bps+0x47e
                  |L1.1116|
                          DCD      net_F3
                  |L1.1120|
000460  da19              BGE      |L1.1174|
000462  f8a4c000          STRH     r12,[r4,#0]           ;648
000466  e016              B        |L1.1174|
                  |L1.1128|
;;;651    	{
;;;652    	temp_SL=(signed long)net_buff_;
;;;653    	temp_SL*=Kunet;
000468  49ff              LDR      r1,|L1.2152|
00046a  f9b12000          LDRSH    r2,[r1,#0]
00046e  49ff              LDR      r1,|L1.2156|
000470  8d09              LDRH     r1,[r1,#0x28]         ;610
000472  4351              MULS     r1,r2,r1
000474  42b8              CMP      r0,r7                 ;650
000476  d003              BEQ      |L1.1152|
000478  f5a042aa          SUB      r2,r0,#0x5500         ;650
00047c  3afb              SUBS     r2,r2,#0xfb           ;650
00047e  d105              BNE      |L1.1164|
                  |L1.1152|
;;;654    	temp_SL/=35000L;
000480  f64800b8          MOV      r0,#0x88b8
000484  fb91f0f0          SDIV     r0,r1,r0
;;;655    	net_U=(signed short)temp_SL;
000488  8020              STRH     r0,[r4,#0]
00048a  e004              B        |L1.1174|
                  |L1.1164|
;;;656    	
;;;657    	}
;;;658    else
;;;659    	{
;;;660    	temp_SL=(signed long)net_buff_;
;;;661    	temp_SL*=Kunet;
;;;662    	#ifdef _ACDC_
;;;663    	temp_SL/=500L;
00048c  f44f70fa          MOV      r0,#0x1f4
000490  fb91f0f0          SDIV     r0,r1,r0
;;;664    	#else
;;;665    	temp_SL/=5000L;
;;;666    	#endif
;;;667    	net_U=(signed short)temp_SL;
000494  8020              STRH     r0,[r4,#0]
                  |L1.1174|
;;;668    	
;;;669    	}
;;;670    if(bps[11]._device!=dNET_METR) net_F3=net_F;
000496  9802              LDR      r0,[sp,#8]
000498  2807              CMP      r0,#7
00049a  d003              BEQ      |L1.1188|
00049c  48f4              LDR      r0,|L1.2160|
00049e  8801              LDRH     r1,[r0,#0]  ; net_F
0004a0  48f4              LDR      r0,|L1.2164|
0004a2  8001              STRH     r1,[r0,#0]
                  |L1.1188|
;;;671    #endif
;;;672    
;;;673    #ifdef UKU_TELECORE2015
;;;674    //напр€жение сети
;;;675    temp_SL=(signed long)net_buff_;
;;;676    temp_SL*=Kunet;
;;;677    temp_SL/=110000L;
;;;678    net_U=(signed short)temp_SL;
;;;679    #endif
;;;680    
;;;681    #ifdef UKU_TELECORE2017
;;;682    //напр€жение сети
;;;683    temp_SL=(signed long)net_buff_;
;;;684    temp_SL*=Kunet;
;;;685    temp_SL/=110000L;
;;;686    net_U=(signed short)temp_SL;
;;;687    #endif
;;;688    
;;;689    //Ќапр€жени€ батарей
;;;690    temp_SL=(signed long)adc_buff_[0];
0004a4  f8df93d0          LDR      r9,|L1.2168|
0004a8  f9b92000          LDRSH    r2,[r9,#0]  ; adc_buff_
;;;691    temp_SL*=Kubat[0];
0004ac  49f3              LDR      r1,|L1.2172|
0004ae  f9b10000          LDRSH    r0,[r1,#0]  ; Kubat
0004b2  4350              MULS     r0,r2,r0
;;;692    temp_SL/=2000L;
0004b4  f44f66fa          MOV      r6,#0x7d0
0004b8  fb90f0f6          SDIV     r0,r0,r6
;;;693    bat[0]._Ub=(signed short)temp_SL;
0004bc  4df0              LDR      r5,|L1.2176|
0004be  8068              STRH     r0,[r5,#2]
;;;694    
;;;695    #ifdef UKU_220
;;;696    //Ќапр€жени€ батарей
;;;697    temp_SL=(signed long)adc_buff_[0];
;;;698    temp_SL*=Kubat[0];
;;;699    temp_SL/=400L;
;;;700    bat[0]._Ub=(signed short)temp_SL;
;;;701    #endif
;;;702    
;;;703    #ifdef UKU_220_V2
;;;704    //Ќапр€жени€ батарей
;;;705    temp_SL=(signed long)adc_buff_[0];
;;;706    temp_SL*=Kubat[0];
;;;707    temp_SL/=400L;
;;;708    bat[0]._Ub=(signed short)temp_SL;
;;;709    #endif
;;;710    
;;;711    temp_SL=(signed long)adc_buff_[4];
0004c0  f9b93008          LDRSH    r3,[r9,#8]  ; adc_buff_
;;;712    temp_SL*=Kubatm[0];
0004c4  4aef              LDR      r2,|L1.2180|
0004c6  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
0004ca  fb00f003          MUL      r0,r0,r3
;;;713    temp_SL/=700L;
0004ce  f44f732f          MOV      r3,#0x2bc
0004d2  fb90f0f3          SDIV     r0,r0,r3
;;;714    bat[0]._Ubm=(signed short)temp_SL;
0004d6  80a8              STRH     r0,[r5,#4]
;;;715    
;;;716    #ifdef UKU_KONTUR
;;;717    temp_SL=(signed long)adc_buff_[4];
;;;718    temp_SL*=Kubatm[0];
;;;719    temp_SL/=2000L;
;;;720    bat[0]._Ubm=(signed short)temp_SL;
;;;721    #endif
;;;722    
;;;723    temp_SL=(signed long)adc_buff_[12];
0004d8  f9b90018          LDRSH    r0,[r9,#0x18]  ; adc_buff_
;;;724    temp_SL*=Kubat[1];
0004dc  f9b11002          LDRSH    r1,[r1,#2]  ; Kubat
0004e0  fb01f100          MUL      r1,r1,r0
;;;725    temp_SL/=2000L;
0004e4  fb91f0f6          SDIV     r0,r1,r6
;;;726    bat[1]._Ub=(signed short)temp_SL;
0004e8  f8a5004e          STRH     r0,[r5,#0x4e]
;;;727    
;;;728    #ifdef UKU_220
;;;729    temp_SL=(signed long)adc_buff_[12];
;;;730    temp_SL*=Kubat[1];
;;;731    temp_SL/=400L;
;;;732    bat[1]._Ub=(signed short)temp_SL;
;;;733    #endif
;;;734    
;;;735    #ifdef UKU_220_V2
;;;736    temp_SL=(signed long)adc_buff_[12];
;;;737    temp_SL*=Kubat[1];
;;;738    temp_SL/=400L;
;;;739    bat[1]._Ub=(signed short)temp_SL;
;;;740    #endif
;;;741    
;;;742    temp_SL=(signed long)adc_buff_[1];
0004ec  f9b91002          LDRSH    r1,[r9,#2]  ; adc_buff_
;;;743    temp_SL*=Kubatm[1];
0004f0  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
0004f4  fb00f001          MUL      r0,r0,r1
;;;744    temp_SL/=700L;
0004f8  fb90f0f3          SDIV     r0,r0,r3
;;;745    bat[1]._Ubm=(signed short)temp_SL;
0004fc  f8a50050          STRH     r0,[r5,#0x50]
;;;746    #ifdef UKU_KONTUR
;;;747    temp_SL=(signed long)adc_buff_[1];
;;;748    temp_SL*=Kubatm[1];
;;;749    temp_SL/=2000L;
;;;750    bat[1]._Ubm=(signed short)temp_SL;
;;;751    #endif
;;;752    
;;;753    #ifdef UKU_TELECORE2015
;;;754    temp_SL=(signed long)adc_buff_[2];
;;;755    temp_SL*=Kubat[0];
;;;756    temp_SL/=2000L;
;;;757    bat[0]._Ub=(signed short)temp_SL;
;;;758    #endif
;;;759    
;;;760    /*
;;;761    //“оки батарей
;;;762    if(!mess_find_unvol(MESS2MATEMAT))
;;;763    	{
;;;764    	temp_SL=(signed long)ad7705_buff_[0];
;;;765    	temp_SL-=(signed long)Kibat0[0];
;;;766    	temp_SL*=(signed long)Kibat1[0];
;;;767    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;768    	else temp_SL/=1000L;
;;;769    	bat[0]._Ib=(signed short)temp_SL;
;;;770    
;;;771    	temp_SL=(signed long)ad7705_buff_[1];
;;;772    	temp_SL-=(signed long)Kibat0[1];
;;;773    	temp_SL*=(signed long)Kibat1[1];
;;;774    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;775    	else temp_SL/=1000L;
;;;776    	bat[1]._Ib=(signed short)temp_SL;
;;;777    	}
;;;778    */
;;;779    
;;;780    
;;;781    //“оки батарей
;;;782    if(!mess_find_unvol(MESS2MATEMAT))
000500  f04f00dc          MOV      r0,#0xdc
000504  f7fffffe          BL       mess_find_unvol
000508  bbf0              CBNZ     r0,|L1.1416|
;;;783    	{
;;;784    	temp_SL=(signed long)ad7705_buff_[0];
00050a  f8dfc37c          LDR      r12,|L1.2184|
00050e  f8bc0000          LDRH     r0,[r12,#0]  ; ad7705_buff_
;;;785    	temp_SL-=(signed long)Kibat0[0];
000512  f8dfb378          LDR      r11,|L1.2188|
000516  f8bb1000          LDRH     r1,[r11,#0]  ; Kibat0
00051a  eba00001          SUB      r0,r0,r1
;;;786    	temp_SL*=(signed long)Kibat1[0];
00051e  4adc              LDR      r2,|L1.2192|
000520  f9b21000          LDRSH    r1,[r2,#0]  ; Kibat1
000524  fb01f100          MUL      r1,r1,r0
;;;787    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000528  f8b80000          LDRH     r0,[r8,#0]  ; AUSW_MAIN
00052c  f6456338          MOV      r3,#0x5e38
000530  4298              CMP      r0,r3
000532  d004              BEQ      |L1.1342|
000534  f5a04ebc          SUB      lr,r0,#0x5e00
000538  f1be0e92          SUBS     lr,lr,#0x92
00053c  d104              BNE      |L1.1352|
                  |L1.1342|
00053e  f44f7e96          MOV      lr,#0x12c
000542  fb91f1fe          SDIV     r1,r1,lr
000546  e00f              B        |L1.1384|
                  |L1.1352|
;;;788    	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000548  42b8              CMP      r0,r7
00054a  d006              BEQ      |L1.1370|
00054c  f5a04eac          SUB      lr,r0,#0x5600
000550  f1be0e13          SUBS     lr,lr,#0x13
000554  d001              BEQ      |L1.1370|
000556  4550              CMP      r0,r10
000558  d102              BNE      |L1.1376|
                  |L1.1370|
00055a  fb91f1f6          SDIV     r1,r1,r6
00055e  e003              B        |L1.1384|
                  |L1.1376|
;;;789    	else temp_SL/=1000L;
000560  f44f7e7a          MOV      lr,#0x3e8
000564  fb91f1fe          SDIV     r1,r1,lr
                  |L1.1384|
;;;790    	#ifdef UKU_TELECORE2015
;;;791    	temp_SL/=2L;
;;;792    	//temp_SL=-temp_SL;
;;;793    	#endif
;;;794    	//#ifdef UKU_TELECORE2017
;;;795    	//temp_SL/=-2L;
;;;796    	//temp_SL=-temp_SL;
;;;797    	//#endif
;;;798    	bat[0]._Ib=(signed short)temp_SL;
000568  8129              STRH     r1,[r5,#8]
;;;799    
;;;800    	temp_SL=(signed long)ad7705_buff_[1];
00056a  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;801    	temp_SL-=(signed long)Kibat0[1];
00056e  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000572  eba10c0c          SUB      r12,r1,r12
;;;802    	temp_SL*=(signed long)Kibat1[1];
000576  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
00057a  fb01f10c          MUL      r1,r1,r12
;;;803    	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
00057e  4298              CMP      r0,r3
000580  d005              BEQ      |L1.1422|
000582  f5a042bc          SUB      r2,r0,#0x5e00
000586  e000              B        |L1.1418|
                  |L1.1416|
000588  e017              B        |L1.1466|
                  |L1.1418|
00058a  3a92              SUBS     r2,r2,#0x92
00058c  d104              BNE      |L1.1432|
                  |L1.1422|
00058e  f44f7096          MOV      r0,#0x12c
000592  fb91f0f0          SDIV     r0,r1,r0
000596  e00e              B        |L1.1462|
                  |L1.1432|
;;;804    	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000598  42b8              CMP      r0,r7
00059a  d005              BEQ      |L1.1448|
00059c  f5a042ac          SUB      r2,r0,#0x5600
0005a0  3a13              SUBS     r2,r2,#0x13
0005a2  d001              BEQ      |L1.1448|
0005a4  4550              CMP      r0,r10
0005a6  d102              BNE      |L1.1454|
                  |L1.1448|
0005a8  fb91f0f6          SDIV     r0,r1,r6
0005ac  e003              B        |L1.1462|
                  |L1.1454|
;;;805    	else temp_SL/=1000L;
0005ae  f44f707a          MOV      r0,#0x3e8
0005b2  fb91f0f0          SDIV     r0,r1,r0
                  |L1.1462|
;;;806    	bat[1]._Ib=(signed short)temp_SL;
0005b6  f8a50054          STRH     r0,[r5,#0x54]
                  |L1.1466|
;;;807    	}
;;;808    
;;;809    
;;;810    
;;;811    
;;;812    
;;;813    //“емпературы батарей
;;;814    
;;;815    #ifdef UKU_KONTUR
;;;816    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;817    else bat[0]._nd=1;
;;;818    temp_SL=(signed long)adc_buff_[6];
;;;819    temp_SL*=Ktbat[0];
;;;820    temp_SL/=20000L;
;;;821    temp_SL-=273L;
;;;822    bat[0]._Tb=(signed short)temp_SL;
;;;823    #else
;;;824    if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
0005ba  f9b9200c          LDRSH    r2,[r9,#0xc]  ; adc_buff_
0005be  f6403bb7          MOV      r11,#0xbb7
0005c2  f2a23c21          SUB      r12,r2,#0x321
;;;825    else bat[0]._nd=1;
0005c6  2301              MOVS     r3,#1
0005c8  2000              MOVS     r0,#0                 ;824
0005ca  45dc              CMP      r12,r11               ;824
0005cc  d201              BCS      |L1.1490|
0005ce  7328              STRB     r0,[r5,#0xc]          ;824
0005d0  e000              B        |L1.1492|
                  |L1.1490|
0005d2  732b              STRB     r3,[r5,#0xc]
                  |L1.1492|
;;;826    temp_SL=(signed long)adc_buff_[6];
;;;827    temp_SL*=Ktbat[0];
0005d4  49af              LDR      r1,|L1.2196|
0005d6  f9b1a000          LDRSH    r10,[r1,#0]  ; Ktbat
0005da  fb0afa02          MUL      r10,r10,r2
;;;828    temp_SL/=20000L;
0005de  f6446120          MOV      r1,#0x4e20
0005e2  fb9afaf1          SDIV     r10,r10,r1
;;;829    temp_SL-=273L;
0005e6  f2aa1a11          SUB      r10,r10,#0x111
;;;830    bat[0]._Tb=(signed short)temp_SL;
0005ea  f8a5a00a          STRH     r10,[r5,#0xa]
;;;831    #endif
;;;832    
;;;833    #ifdef UKU_KONTUR
;;;834    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;835    else bat[1]._nd=1;
;;;836    temp_SL=(signed long)adc_buff_[7];
;;;837    temp_SL*=Ktbat[1];
;;;838    temp_SL/=20000L;
;;;839    temp_SL-=273L;
;;;840    bat[1]._Tb=(signed short)temp_SL;
;;;841    #else
;;;842    if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
0005ee  f9b9a00e          LDRSH    r10,[r9,#0xe]  ; adc_buff_
0005f2  f6403bb7          MOV      r11,#0xbb7
0005f6  f2aa3e21          SUB      lr,r10,#0x321
0005fa  45de              CMP      lr,r11
0005fc  d202              BCS      |L1.1540|
0005fe  f8850058          STRB     r0,[r5,#0x58]
000602  e001              B        |L1.1544|
                  |L1.1540|
;;;843    else bat[1]._nd=1;
000604  f8853058          STRB     r3,[r5,#0x58]
                  |L1.1544|
;;;844    temp_SL=(signed long)adc_buff_[7];
;;;845    temp_SL*=Ktbat[1];
000608  f8dfb288          LDR      r11,|L1.2196|
00060c  f9bbb002          LDRSH    r11,[r11,#2]  ; Ktbat
000610  fb0bfb0a          MUL      r11,r11,r10
;;;846    temp_SL/=20000L;
000614  f6446120          MOV      r1,#0x4e20
000618  fb9bf1f1          SDIV     r1,r11,r1
;;;847    temp_SL-=273L;
00061c  f2a11111          SUB      r1,r1,#0x111
;;;848    bat[1]._Tb=(signed short)temp_SL;
000620  4d97              LDR      r5,|L1.2176|
000622  f8a51056          STRH     r1,[r5,#0x56]
;;;849    #endif
;;;850    
;;;851    #ifdef UKU_6U
;;;852    
;;;853    if(NUMMAKB==2)
;;;854    	{
;;;855    	if(makb[0]._cnt<5)
;;;856    		{
;;;857    		if(makb[0]._T_nd[0]==0)
;;;858    			{
;;;859    			bat[0]._Tb=makb[0]._T[0];
;;;860    			bat[0]._nd=0;
;;;861    			}
;;;862    		}
;;;863    
;;;864    	if(makb[1]._cnt<5)
;;;865    		{
;;;866    		if(makb[1]._T_nd[0]==0)
;;;867    			{
;;;868    			bat[1]._Tb=makb[1]._T[0];
;;;869    			bat[1]._nd=0;
;;;870    			}
;;;871    		}
;;;872    
;;;873    	}
;;;874    else if(NUMMAKB==4)
;;;875    	{
;;;876    	signed short temp_t;
;;;877    	temp_t=-20;
;;;878    	if(makb[0]._cnt<5)
;;;879    		{
;;;880    		if(makb[0]._T_nd[0]==0)
;;;881    			{
;;;882    			temp_t=makb[0]._T[0];
;;;883    			bat[0]._nd=0;
;;;884    			}
;;;885    		}
;;;886    	if(makb[1]._cnt<5)
;;;887    		{
;;;888    		if(makb[1]._T_nd[0]==0)
;;;889    			{
;;;890    			if(temp_t<makb[1]._T[0])
;;;891    				{
;;;892    				bat[0]._nd=0;
;;;893    				temp_t=makb[1]._T[0];
;;;894    				}
;;;895    			}
;;;896    		}
;;;897    	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;898    
;;;899     	temp_t=-20;
;;;900    	if(makb[2]._cnt<5)
;;;901    		{
;;;902    		if(makb[2]._T_nd[0]==0)
;;;903    			{
;;;904    			temp_t=makb[2]._T[0];
;;;905    			bat[1]._nd=0;
;;;906    			}
;;;907    		}
;;;908    	if(makb[3]._cnt<5)
;;;909    		{
;;;910    		if(makb[3]._T_nd[0]==0)
;;;911    			{
;;;912    			if(temp_t<makb[3]._T[0])
;;;913    				{
;;;914    				bat[1]._nd=0;
;;;915    				temp_t=makb[3]._T[0];
;;;916    				}
;;;917    			}
;;;918    		}
;;;919    	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;920    	}
;;;921    
;;;922    #endif
;;;923    
;;;924    
;;;925    //Ќапр€жение нагрузки
;;;926    temp_SL=(signed long)adc_buff_[2];
000626  f9b91004          LDRSH    r1,[r9,#4]  ; adc_buff_
;;;927    temp_SL*=Kuload;
00062a  4d9b              LDR      r5,|L1.2200|
00062c  f9b55000          LDRSH    r5,[r5,#0]  ; Kuload
000630  fb01f505          MUL      r5,r1,r5
;;;928    temp_SL/=2000L;
000634  f44f66fa          MOV      r6,#0x7d0
000638  fb95f5f6          SDIV     r5,r5,r6
;;;929    load_U=(signed short)temp_SL;
00063c  b22e              SXTH     r6,r5
00063e  4d97              LDR      r5,|L1.2204|
000640  802e              STRH     r6,[r5,#0]
;;;930    
;;;931    #ifdef UKU_220 
;;;932    //Ќапр€жение нагрузки
;;;933    temp_SL=(signed long)adc_buff_[2];
;;;934    temp_SL*=Kuload;
;;;935    temp_SL/=350L;
;;;936    load_U=(signed short)temp_SL;
;;;937    #endif
;;;938    
;;;939    #ifdef UKU_220_V2 
;;;940    //Ќапр€жение нагрузки
;;;941    temp_SL=(signed long)adc_buff_[2];
;;;942    temp_SL*=Kuload;
;;;943    temp_SL/=350L;
;;;944    load_U=(signed short)temp_SL;
;;;945    #endif
;;;946    
;;;947    #ifdef UKU_VD
;;;948    //Ќапр€жение выхода
;;;949    temp_SL=(signed long)adc_buff_[1];
000642  f9b95002          LDRSH    r5,[r9,#2]  ; adc_buff_
;;;950    temp_SL*=Kuout;
000646  f8dfa258          LDR      r10,|L1.2208|
00064a  f9baa000          LDRSH    r10,[r10,#0]  ; Kuout
00064e  fb05f50a          MUL      r5,r5,r10
;;;951    temp_SL/=500L;
000652  f44f7bfa          MOV      r11,#0x1f4
000656  fb95f5fb          SDIV     r5,r5,r11
;;;952    out_U=(signed short)temp_SL;
00065a  f8dfa248          LDR      r10,|L1.2212|
00065e  f8aa5000          STRH     r5,[r10,#0]
;;;953    
;;;954    
;;;955    //Ќапр€жение вольтдобавки
;;;956    temp_SL=(signed long)adc_buff_[2];
;;;957    temp_SL*=Kuvd;
000662  f8dfa244          LDR      r10,|L1.2216|
000666  f9baa000          LDRSH    r10,[r10,#0]  ; Kuvd
00066a  fb01fa0a          MUL      r10,r1,r10
;;;958    temp_SL/=500L;
00066e  fb9afafb          SDIV     r10,r10,r11
;;;959    vd_U=(signed short)temp_SL;
000672  f8dfe238          LDR      lr,|L1.2220|
000676  f8aea000          STRH     r10,[lr,#0]
;;;960    
;;;961    //Ќапр€жение входа
;;;962    in_U=out_U-vd_U;
00067a  eba5050a          SUB      r5,r5,r10
00067e  f8dfa230          LDR      r10,|L1.2224|
000682  f8aa5000          STRH     r5,[r10,#0]
;;;963    
;;;964    //Ќапр€жение выпр€мителей
;;;965    temp_SL=(signed long)adc_buff_[2];
;;;966    temp_SL*=Kubps;
000686  4d8b              LDR      r5,|L1.2228|
000688  f9b55000          LDRSH    r5,[r5,#0]  ; Kubps
00068c  fb01f105          MUL      r1,r1,r5
;;;967    if(AUSW_MAIN==22010)temp_SL/=400L;
000690  f8b85000          LDRH     r5,[r8,#0]  ; AUSW_MAIN
000694  42bd              CMP      r5,r7
000696  d104              BNE      |L1.1698|
000698  f44f75c8          MOV      r5,#0x190
00069c  fb91f1f5          SDIV     r1,r1,r5
0006a0  e001              B        |L1.1702|
                  |L1.1698|
;;;968    else temp_SL/=500L;
0006a2  fb91f1fb          SDIV     r1,r1,r11
                  |L1.1702|
;;;969    bps_U=(signed short)temp_SL;
0006a6  f8df8210          LDR      r8,|L1.2232|
0006aa  b209              SXTH     r1,r1
0006ac  f8a81000          STRH     r1,[r8,#0]
;;;970    
;;;971    if(bps_U<100)
;;;972    	{
;;;973    	char i;
;;;974    	for(i=0;i<NUMIST;i++)
0006b0  f8dfe208          LDR      lr,|L1.2236|
0006b4  2964              CMP      r1,#0x64              ;971
0006b6  da18              BGE      |L1.1770|
0006b8  f04f0100          MOV      r1,#0
0006bc  f9bea000          LDRSH    r10,[lr,#0]
0006c0  f8dfb1fc          LDR      r11,|L1.2240|
0006c4  e00f              B        |L1.1766|
                  |L1.1734|
;;;975    		{
;;;976    		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
0006c6  eb010581          ADD      r5,r1,r1,LSL #2
0006ca  eb0505c1          ADD      r5,r5,r1,LSL #3
0006ce  eb0b05c5          ADD      r5,r11,r5,LSL #3
0006d2  f9b87000          LDRSH    r7,[r8,#0]  ; bps_U
0006d6  6a2d              LDR      r5,[r5,#0x20]
0006d8  42bd              CMP      r5,r7
0006da  dd01              BLE      |L1.1760|
0006dc  f8a85000          STRH     r5,[r8,#0]
                  |L1.1760|
0006e0  f1010101          ADD      r1,r1,#1              ;974
0006e4  b2c9              UXTB     r1,r1                 ;974
                  |L1.1766|
0006e6  4551              CMP      r1,r10                ;974
0006e8  dbed              BLT      |L1.1734|
                  |L1.1770|
;;;977    		}
;;;978    	}
;;;979    
;;;980    //—уммарный ток выпр€мителей
;;;981    temp_SL=0;
0006ea  f04f0800          MOV      r8,#0
;;;982    for (i=0;i<NUMIST;i++)
0006ee  4641              MOV      r1,r8
0006f0  f9be7000          LDRSH    r7,[lr,#0]            ;974
0006f4  4d72              LDR      r5,|L1.2240|
0006f6  e00b              B        |L1.1808|
                  |L1.1784|
;;;983    	{
;;;984    	temp_SL+=((signed long)bps[i]._Ii);
0006f8  eb010a81          ADD      r10,r1,r1,LSL #2
0006fc  eb0a0ac1          ADD      r10,r10,r1,LSL #3
000700  eb050aca          ADD      r10,r5,r10,LSL #3
000704  f8daa024          LDR      r10,[r10,#0x24]
000708  44d0              ADD      r8,r8,r10
00070a  f1010101          ADD      r1,r1,#1              ;982
00070e  b2c9              UXTB     r1,r1                 ;982
                  |L1.1808|
000710  42b9              CMP      r1,r7                 ;982
000712  dbf1              BLT      |L1.1784|
;;;985    	}
;;;986    bps_I=(signed short)temp_SL;
000714  496b              LDR      r1,|L1.2244|
000716  f8a18000          STRH     r8,[r1,#0]
;;;987    
;;;988    
;;;989    #endif
;;;990    
;;;991    
;;;992    #ifdef UKU_KONTUR
;;;993    //¬нешний датчик температуры є1(температура внешнего воздуха)
;;;994    if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;995    else ND_EXT[0]=1;
;;;996    temp_SL=(signed long)adc_buff_[5];
;;;997    temp_SL*=Ktext[0];
;;;998    temp_SL/=20000L;
;;;999    temp_SL-=273L;
;;;1000   t_ext[0]=(signed short)temp_SL;
;;;1001   #else 
;;;1002   //¬нешний датчик температуры є1(температура внешнего воздуха)
;;;1003   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
00071a  f9b9900a          LDRSH    r9,[r9,#0xa]  ; adc_buff_
00071e  f6403bb7          MOV      r11,#0xbb7
000722  f2a93121          SUB      r1,r9,#0x321
000726  f8df81a0          LDR      r8,|L1.2248|
00072a  4559              CMP      r1,r11
00072c  d202              BCS      |L1.1844|
00072e  f8880000          STRB     r0,[r8,#0]
000732  e001              B        |L1.1848|
                  |L1.1844|
;;;1004   else ND_EXT[0]=1;
000734  f8883000          STRB     r3,[r8,#0]
                  |L1.1848|
;;;1005   temp_SL=(signed long)adc_buff_[5];
;;;1006   temp_SL*=Ktext[0];
000738  4964              LDR      r1,|L1.2252|
00073a  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
00073e  fb01f909          MUL      r9,r1,r9
;;;1007   temp_SL/=20000L;
000742  f6446e20          MOV      lr,#0x4e20
000746  fb99fafe          SDIV     r10,r9,lr
;;;1008   temp_SL-=273L;
00074a  f2aa1a11          SUB      r10,r10,#0x111
;;;1009   t_ext[0]=(signed short)temp_SL;
00074e  f8df9180          LDR      r9,|L1.2256|
000752  f8a9a000          STRH     r10,[r9,#0]
;;;1010   /*
;;;1011   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1012   else ND_EXT[1]=1;
;;;1013   temp_SL=(signed long)adc_buff_[6];
;;;1014   temp_SL*=Ktext[1];
;;;1015   temp_SL/=20000L;
;;;1016   temp_SL-=273L;
;;;1017   t_ext[1]=(signed short)temp_SL;	*/
;;;1018   #endif
;;;1019   
;;;1020   #ifdef UKU_220
;;;1021   
;;;1022   //¬нешний датчик температуры є2(температура отсека Ёѕ”)
;;;1023   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1024   else ND_EXT[1]=1;
;;;1025   temp_SL=(signed long)adc_buff_[3];
;;;1026   temp_SL*=Ktext[1];
;;;1027   temp_SL/=20000L;
;;;1028   temp_SL-=273L;
;;;1029   t_ext[1]=(signed short)temp_SL;
;;;1030   
;;;1031   //¬нешний датчик температуры є3(температура отсека MSAN)
;;;1032   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1033   else ND_EXT[2]=1;
;;;1034   temp_SL=(signed long)adc_buff_[10];
;;;1035   temp_SL*=Ktext[2];
;;;1036   temp_SL/=20000L;
;;;1037   temp_SL-=273L;
;;;1038   t_ext[2]=(signed short)temp_SL;
;;;1039   
;;;1040   #else
;;;1041   
;;;1042   
;;;1043   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1044   
;;;1045   //¬нешний датчик температуры 
;;;1046   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
000756  45dc              CMP      r12,r11
000758  d202              BCS      |L1.1888|
00075a  f8880000          STRB     r0,[r8,#0]
00075e  e001              B        |L1.1892|
                  |L1.1888|
;;;1047   else ND_EXT[0]=1;
000760  f8883000          STRB     r3,[r8,#0]
                  |L1.1892|
;;;1048   temp_SL=(signed long)adc_buff_[6];
;;;1049   temp_SL*=Ktext[0];
000764  4351              MULS     r1,r2,r1
;;;1050   temp_SL/=20000L;
000766  fb91f1fe          SDIV     r1,r1,lr
;;;1051   temp_SL-=273L;
00076a  f2a11111          SUB      r1,r1,#0x111
;;;1052   t_ext[0]=(signed short)temp_SL;
00076e  f8a91000          STRH     r1,[r9,#0]
;;;1053   sys_T=t_ext[0];
000772  4a58              LDR      r2,|L1.2260|
000774  8011              STRH     r1,[r2,#0]
;;;1054   #else
;;;1055   
;;;1056   
;;;1057   
;;;1058   //¬нешний датчик температуры є2(температура отсека Ёѕ”)
;;;1059   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1060   else ND_EXT[1]=1;
;;;1061   temp_SL=(signed long)adc_buff_[6];
;;;1062   temp_SL*=Ktext[1];
;;;1063   temp_SL/=20000L;
;;;1064   temp_SL-=273L;
;;;1065   t_ext[1]=(signed short)temp_SL;
;;;1066   
;;;1067   //¬нешний датчик температуры є3(температура отсека MSAN)
;;;1068   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1069   else ND_EXT[2]=1;
;;;1070   temp_SL=(signed long)adc_buff_[3];
;;;1071   temp_SL*=Ktext[2];
;;;1072   temp_SL/=20000L;
;;;1073   temp_SL-=273L;
;;;1074   t_ext[2]=(signed short)temp_SL;
;;;1075   
;;;1076   #endif
;;;1077   #endif
;;;1078   
;;;1079   if(!bIBAT_SMKLBR)
000776  4958              LDR      r1,|L1.2264|
;;;1080   	{
;;;1081   	signed long temp_SL;
;;;1082   	temp_SL=(signed long)ibat_metr_buff_[0];
;;;1083   	temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1084   	temp_SL*=(signed long)Kibat1[0];
;;;1085   	temp_SL/=2000L;
;;;1086   	
;;;1087   	Ib_ips_termokompensat =(signed short)temp_SL;
000778  f8dfc160          LDR      r12,|L1.2268|
00077c  8809              LDRH     r1,[r1,#0]            ;1079  ; bIBAT_SMKLBR
00077e  b989              CBNZ     r1,|L1.1956|
000780  4a57              LDR      r2,|L1.2272|
000782  6811              LDR      r1,[r2,#0]            ;1082  ; ibat_metr_buff_
000784  6852              LDR      r2,[r2,#4]            ;1083  ; ibat_metr_buff_
000786  eba10202          SUB      r2,r1,r2              ;1083
00078a  4941              LDR      r1,|L1.2192|
00078c  f9b11000          LDRSH    r1,[r1,#0]            ;1084  ; Kibat1
000790  fb01f102          MUL      r1,r1,r2              ;1084
000794  f44f62fa          MOV      r2,#0x7d0             ;1085
000798  fb91f1f2          SDIV     r1,r1,r2              ;1085
00079c  f8ac1000          STRH     r1,[r12,#0]
;;;1088   	out_I=Ib_ips_termokompensat;
0007a0  4a50              LDR      r2,|L1.2276|
0007a2  8011              STRH     r1,[r2,#0]
                  |L1.1956|
;;;1089   	}
;;;1090   
;;;1091   
;;;1092   bat[0]._Ub=load_U;
0007a4  4b36              LDR      r3,|L1.2176|
0007a6  805e              STRH     r6,[r3,#2]
;;;1093   
;;;1094   
;;;1095   
;;;1096   
;;;1097   #ifdef UKU_TELECORE2015
;;;1098   
;;;1099   //¬нешний датчик температуры є1
;;;1100   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1101   else ND_EXT[0]=1;
;;;1102   temp_SL=(signed long)adc_buff_[7];
;;;1103   temp_SL*=Ktext[0];
;;;1104   temp_SL/=20000L;
;;;1105   temp_SL-=273L;
;;;1106   t_ext[0]=(signed short)temp_SL;
;;;1107   
;;;1108   
;;;1109   //¬нешний датчик температуры є2
;;;1110   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1111   else ND_EXT[1]=1;
;;;1112   temp_SL=(signed long)adc_buff_[6];
;;;1113   temp_SL*=Ktext[1];
;;;1114   temp_SL/=20000L;
;;;1115   temp_SL-=273L;
;;;1116   t_ext[1]=(signed short)temp_SL;
;;;1117   
;;;1118   #endif
;;;1119   
;;;1120   #ifdef UKU_TELECORE2017
;;;1121   
;;;1122   //¬нешний датчик температуры є1
;;;1123   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1124   else ND_EXT[0]=1;
;;;1125   temp_SL=(signed long)adc_buff_[7];
;;;1126   temp_SL*=Ktext[0];
;;;1127   temp_SL/=20000L;
;;;1128   temp_SL-=273L;
;;;1129   t_ext[0]=(signed short)temp_SL;
;;;1130   
;;;1131   
;;;1132   //¬нешний датчик температуры є2
;;;1133   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1134   else ND_EXT[1]=1;
;;;1135   temp_SL=(signed long)adc_buff_[6];
;;;1136   temp_SL*=Ktext[1];
;;;1137   temp_SL/=20000L;
;;;1138   temp_SL-=273L;
;;;1139   t_ext[1]=(signed short)temp_SL;
;;;1140   
;;;1141   #endif
;;;1142   
;;;1143   //напр€жение ввода
;;;1144   temp_SL=(signed long)adc_buff_ext_[0];
0007a8  f8dfb13c          LDR      r11,|L1.2280|
0007ac  f8bb2000          LDRH     r2,[r11,#0]  ; adc_buff_ext_
;;;1145   temp_SL*=Kunet_ext[0];
0007b0  494e              LDR      r1,|L1.2284|
0007b2  f9b11000          LDRSH    r1,[r1,#0]  ; Kunet_ext
0007b6  4351              MULS     r1,r2,r1
;;;1146   temp_SL/=4000L;
0007b8  f44f627a          MOV      r2,#0xfa0
0007bc  fb91f1f2          SDIV     r1,r1,r2
;;;1147   Uvv[0]=(signed short)temp_SL;
0007c0  f8dfa12c          LDR      r10,|L1.2288|
0007c4  b289              UXTH     r1,r1
0007c6  f8aa1000          STRH     r1,[r10,#0]
;;;1148   if(Uvv[0]<100) Uvv0=Uvv[0];
0007ca  f8dfe128          LDR      lr,|L1.2292|
0007ce  2964              CMP      r1,#0x64
0007d0  d202              BCS      |L1.2008|
0007d2  f8ae1000          STRH     r1,[lr,#0]
0007d6  e002              B        |L1.2014|
                  |L1.2008|
;;;1149   else Uvv0=net_U;
0007d8  8821              LDRH     r1,[r4,#0]  ; net_U
0007da  f8ae1000          STRH     r1,[lr,#0]
                  |L1.2014|
;;;1150   
;;;1151   //напр€жение пэс
;;;1152   temp_SL=(signed long)adc_buff_ext_[1];
0007de  f8bb4002          LDRH     r4,[r11,#2]  ; adc_buff_ext_
;;;1153   temp_SL*=Kunet_ext[1];
0007e2  4942              LDR      r1,|L1.2284|
0007e4  f9b11002          LDRSH    r1,[r1,#2]  ; Kunet_ext
0007e8  4361              MULS     r1,r4,r1
;;;1154   temp_SL/=4000L;
0007ea  fb91f1f2          SDIV     r1,r1,r2
;;;1155   Uvv[1]=(signed short)temp_SL;
0007ee  f8aa1002          STRH     r1,[r10,#2]
;;;1156   
;;;1157   
;;;1158   //напр€жение ввода трехфазное
;;;1159   temp_SL=(signed long)eb2_data_short[0];
0007f2  4a41              LDR      r2,|L1.2296|
0007f4  f9b21000          LDRSH    r1,[r2,#0]  ; eb2_data_short
;;;1160   temp_SL*=Kvv_eb2[0];
0007f8  4c40              LDR      r4,|L1.2300|
0007fa  f9b4a000          LDRSH    r10,[r4,#0]  ; Kvv_eb2
0007fe  fb0afa01          MUL      r10,r10,r1
;;;1161   temp_SL/=6000L;
000802  f2417170          MOV      r1,#0x1770
000806  fb9afbf1          SDIV     r11,r10,r1
;;;1162   Uvv_eb2[0]=(signed short)temp_SL;
00080a  f8dfa0f4          LDR      r10,|L1.2304|
00080e  f8aab000          STRH     r11,[r10,#0]
;;;1163   
;;;1164   temp_SL=(signed long)eb2_data_short[1];
000812  f9b2e002          LDRSH    lr,[r2,#2]  ; eb2_data_short
;;;1165   temp_SL*=Kvv_eb2[1];
000816  f9b4b002          LDRSH    r11,[r4,#2]  ; Kvv_eb2
00081a  fb0bfb0e          MUL      r11,r11,lr
;;;1166   temp_SL/=6000L;
00081e  fb9bfbf1          SDIV     r11,r11,r1
;;;1167   Uvv_eb2[1]=(signed short)temp_SL;
000822  f8aab002          STRH     r11,[r10,#2]
;;;1168   
;;;1169   temp_SL=(signed long)eb2_data_short[2];
000826  f9b2b004          LDRSH    r11,[r2,#4]  ; eb2_data_short
;;;1170   temp_SL*=Kvv_eb2[2];
00082a  f9b44004          LDRSH    r4,[r4,#4]  ; Kvv_eb2
00082e  fb04f40b          MUL      r4,r4,r11
;;;1171   temp_SL/=6000L;
000832  fb94f4f1          SDIV     r4,r4,r1
;;;1172   Uvv_eb2[2]=(signed short)temp_SL;
000836  f8aa4004          STRH     r4,[r10,#4]
;;;1173   
;;;1174   //напр€жение пэс трехфазное
;;;1175   temp_SL=(signed long)eb2_data_short[3];
00083a  f9b2b006          LDRSH    r11,[r2,#6]  ; eb2_data_short
;;;1176   temp_SL*=Kpes_eb2[0];
00083e  f8dfa0c4          LDR      r10,|L1.2308|
000842  f9ba4000          LDRSH    r4,[r10,#0]  ; Kpes_eb2
000846  fb04f40b          MUL      r4,r4,r11
;;;1177   temp_SL/=6000L;
00084a  fb94fbf1          SDIV     r11,r4,r1
;;;1178   Upes_eb2[0]=(signed short)temp_SL;
00084e  4c2e              LDR      r4,|L1.2312|
000850  f8a4b000          STRH     r11,[r4,#0]
;;;1179   
;;;1180   temp_SL=(signed long)eb2_data_short[4];
000854  f9b2e008          LDRSH    lr,[r2,#8]  ; eb2_data_short
;;;1181   temp_SL*=Kpes_eb2[1];
000858  f9bab002          LDRSH    r11,[r10,#2]  ; Kpes_eb2
00085c  fb0bfb0e          MUL      r11,r11,lr
;;;1182   temp_SL/=6000L;
000860  fb9bfbf1          SDIV     r11,r11,r1
;;;1183   Upes_eb2[1]=(signed short)temp_SL;
000864  e052              B        |L1.2316|
000866  0000              DCW      0x0000
                  |L1.2152|
                          DCD      Kunet
                  |L1.2156|
                          DCD      ||area_number.26||
                  |L1.2160|
                          DCD      net_F
                  |L1.2164|
                          DCD      net_F3
                  |L1.2168|
                          DCD      ||.bss||+0x400
                  |L1.2172|
                          DCD      Kubat
                  |L1.2176|
                          DCD      bat
                  |L1.2180|
                          DCD      Kubatm
                  |L1.2184|
                          DCD      ad7705_buff_
                  |L1.2188|
                          DCD      Kibat0
                  |L1.2192|
                          DCD      Kibat1
                  |L1.2196|
                          DCD      Ktbat
                  |L1.2200|
                          DCD      Kuload
                  |L1.2204|
                          DCD      load_U
                  |L1.2208|
                          DCD      Kuout
                  |L1.2212|
                          DCD      out_U
                  |L1.2216|
                          DCD      Kuvd
                  |L1.2220|
                          DCD      vd_U
                  |L1.2224|
                          DCD      in_U
                  |L1.2228|
                          DCD      Kubps
                  |L1.2232|
                          DCD      bps_U
                  |L1.2236|
                          DCD      NUMIST
                  |L1.2240|
                          DCD      bps
                  |L1.2244|
                          DCD      bps_I
                  |L1.2248|
                          DCD      ND_EXT
                  |L1.2252|
                          DCD      Ktext
                  |L1.2256|
                          DCD      t_ext
                  |L1.2260|
                          DCD      sys_T
                  |L1.2264|
                          DCD      bIBAT_SMKLBR
                  |L1.2268|
                          DCD      Ib_ips_termokompensat
                  |L1.2272|
                          DCD      ibat_metr_buff_
                  |L1.2276|
                          DCD      out_I
                  |L1.2280|
                          DCD      adc_buff_ext_
                  |L1.2284|
                          DCD      Kunet_ext
                  |L1.2288|
                          DCD      Uvv
                  |L1.2292|
                          DCD      Uvv0
                  |L1.2296|
                          DCD      eb2_data_short
                  |L1.2300|
                          DCD      Kvv_eb2
                  |L1.2304|
                          DCD      Uvv_eb2
                  |L1.2308|
                          DCD      Kpes_eb2
                  |L1.2312|
                          DCD      Upes_eb2
                  |L1.2316|
00090c  f8a4b002          STRH     r11,[r4,#2]
;;;1184   
;;;1185   temp_SL=(signed long)eb2_data_short[5];
000910  f9b2b00a          LDRSH    r11,[r2,#0xa]  ; eb2_data_short
;;;1186   temp_SL*=Kpes_eb2[2];
000914  f9ba2004          LDRSH    r2,[r10,#4]  ; Kpes_eb2
000918  fb02f20b          MUL      r2,r2,r11
;;;1187   temp_SL/=6000L;
00091c  fb92f1f1          SDIV     r1,r2,r1
;;;1188   Upes_eb2[2]=(signed short)temp_SL;
000920  80a1              STRH     r1,[r4,#4]
;;;1189   
;;;1190   //¬ычисление температуры шкафа
;;;1191   
;;;1192   ibt._T[0]=t_ext[1]+273;
000922  f8b91002          LDRH     r1,[r9,#2]  ; t_ext
000926  4cfc              LDR      r4,|L1.3352|
000928  f2011111          ADD      r1,r1,#0x111
00092c  fa0ffa81          SXTH     r10,r1
000930  f8a4a000          STRH     r10,[r4,#0]
;;;1193   ibt._T[1]=t_ext[2]+273;
000934  f8b91004          LDRH     r1,[r9,#4]  ; t_ext
000938  f2011111          ADD      r1,r1,#0x111
00093c  fa0ff981          SXTH     r9,r1
000940  f8a49002          STRH     r9,[r4,#2]
;;;1194   
;;;1195   ibt._nd[0]=ND_EXT[1];
000944  f8982001          LDRB     r2,[r8,#1]  ; ND_EXT
000948  7222              STRB     r2,[r4,#8]
;;;1196   ibt._nd[1]=ND_EXT[2];
00094a  f8981002          LDRB     r1,[r8,#2]  ; ND_EXT
00094e  7261              STRB     r1,[r4,#9]
;;;1197   
;;;1198   #ifndef UKU_TELECORE2015
;;;1199   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1200   	{
;;;1201   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
000950  4cf2              LDR      r4,|L1.3356|
000952  b902              CBNZ     r2,|L1.2390|
000954  b111              CBZ      r1,|L1.2396|
                  |L1.2390|
;;;1202   	}
;;;1203   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
000956  2a01              CMP      r2,#1
000958  d00a              BEQ      |L1.2416|
00095a  e00a              B        |L1.2418|
                  |L1.2396|
00095c  eb0a0109          ADD      r1,r10,r9             ;1201
000960  eb0171d1          ADD      r1,r1,r1,LSR #31      ;1201
000964  f46f7288          MVN      r2,#0x110             ;1201
000968  eb020161          ADD      r1,r2,r1,ASR #1       ;1201
00096c  8021              STRH     r1,[r4,#0]            ;1201
00096e  e01e              B        |L1.2478|
                  |L1.2416|
000970  b109              CBZ      r1,|L1.2422|
                  |L1.2418|
;;;1204   	{
;;;1205   	t_box=ibt._T[1]-273;
;;;1206   	}
;;;1207   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
000972  b12a              CBZ      r2,|L1.2432|
000974  e006              B        |L1.2436|
                  |L1.2422|
000976  f2a91911          SUB      r9,r9,#0x111          ;1205
00097a  f8a49000          STRH     r9,[r4,#0]            ;1205
00097e  e016              B        |L1.2478|
                  |L1.2432|
000980  2901              CMP      r1,#1
000982  d002              BEQ      |L1.2442|
                  |L1.2436|
;;;1208   	{
;;;1209   	t_box=ibt._T[0]-273;
;;;1210   	}
;;;1211   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
000984  2a01              CMP      r2,#1
000986  d005              BEQ      |L1.2452|
000988  e011              B        |L1.2478|
                  |L1.2442|
00098a  f2aa1a11          SUB      r10,r10,#0x111        ;1209
00098e  f8a4a000          STRH     r10,[r4,#0]           ;1209
000992  e00c              B        |L1.2478|
                  |L1.2452|
000994  2901              CMP      r1,#1
000996  d10a              BNE      |L1.2478|
;;;1212   	{
;;;1213   	if(t_ext_can_nd<5)t_box= t_ext_can;
000998  49e1              LDR      r1,|L1.3360|
00099a  7809              LDRB     r1,[r1,#0]  ; t_ext_can_nd
00099c  2905              CMP      r1,#5
00099e  d203              BCS      |L1.2472|
0009a0  49e0              LDR      r1,|L1.3364|
0009a2  8809              LDRH     r1,[r1,#0]  ; t_ext_can
0009a4  8021              STRH     r1,[r4,#0]
0009a6  e002              B        |L1.2478|
                  |L1.2472|
;;;1214   	else t_box=20;
0009a8  f04f0114          MOV      r1,#0x14
0009ac  8021              STRH     r1,[r4,#0]
                  |L1.2478|
;;;1215   	}
;;;1216   #endif
;;;1217   /*
;;;1218   //¬ычисление температуры шкафа
;;;1219   
;;;1220   ibt._T[0]=bat[0]._Tb+273;
;;;1221   ibt._T[1]=bat[1]._Tb+273;
;;;1222   ibt._T[2]=t_ext[1]+273;
;;;1223   ibt._T[3]=t_ext[2]+273;
;;;1224   
;;;1225   ibt._nd[0]=bat[0]._nd;
;;;1226   ibt._nd[1]=bat[1]._nd;
;;;1227   ibt._nd[2]=ND_EXT[1];
;;;1228   ibt._nd[3]=ND_EXT[2];
;;;1229   
;;;1230   ibt._avg1=0;
;;;1231   ibt._avg_cnt=4;
;;;1232   
;;;1233   if(ibt._nd[0]==0)
;;;1234   	{
;;;1235   	ibt._avg1+=ibt._T[0];
;;;1236   	}
;;;1237   else 
;;;1238   	{
;;;1239   	ibt._avg_cnt--;
;;;1240   	}
;;;1241   
;;;1242   if(ibt._nd[1]==0)
;;;1243   	{
;;;1244   	ibt._avg1+=ibt._T[1];
;;;1245   	}
;;;1246   else 
;;;1247   	{
;;;1248   	ibt._avg_cnt--;
;;;1249   	}
;;;1250   
;;;1251   if(ibt._nd[2]==0)
;;;1252   	{
;;;1253   	ibt._avg1+=ibt._T[2];
;;;1254   	}
;;;1255   else 
;;;1256   	{
;;;1257   	ibt._avg_cnt--;
;;;1258   	}
;;;1259   
;;;1260   if(ibt._nd[3]==0)
;;;1261   	{
;;;1262   	ibt._avg1+=ibt._T[3];
;;;1263   	}
;;;1264   else 
;;;1265   	{
;;;1266   	ibt._avg_cnt--;
;;;1267   	}
;;;1268   
;;;1269   if(ibt._avg_cnt==0)
;;;1270   	{
;;;1271   	}
;;;1272   else
;;;1273   	{
;;;1274   	ibt._avg1/=ibt._avg_cnt;
;;;1275   	}
;;;1276   
;;;1277   
;;;1278   if(ibt._nd[0]!=0)
;;;1279   	{
;;;1280   	ibt._T_dispers[0]=0;
;;;1281   	}
;;;1282   else 
;;;1283   	{
;;;1284   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1285   	}
;;;1286   
;;;1287   if(ibt._nd[1]!=0)
;;;1288   	{
;;;1289   	ibt._T_dispers[1]=0;
;;;1290   	}
;;;1291   else 
;;;1292   	{
;;;1293   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1294   	}
;;;1295   
;;;1296   if(ibt._nd[2]!=0)
;;;1297   	{
;;;1298   	ibt._T_dispers[2]=0;
;;;1299   	}
;;;1300   else 
;;;1301   	{
;;;1302   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1303   	}
;;;1304   
;;;1305   if(ibt._nd[3]!=0)
;;;1306   	{
;;;1307   	ibt._T_dispers[3]=0;
;;;1308   	}
;;;1309   else 
;;;1310   	{
;;;1311   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1312   	}
;;;1313   
;;;1314   if(	ibt._nd[0]&&
;;;1315   	ibt._nd[1]&&
;;;1316   	ibt._nd[2]&&
;;;1317   	ibt._nd[3]
;;;1318   	)
;;;1319   	{
;;;1320   	t_box=(bps[0]._Ti);
;;;1321   	}
;;;1322   
;;;1323   else if(	ibt._nd[0]||
;;;1324   	ibt._nd[1]||
;;;1325   	ibt._nd[2]||
;;;1326   	ibt._nd[3]
;;;1327   	)
;;;1328   	{
;;;1329   	t_box=(ibt._avg1-273);
;;;1330   	}
;;;1331   else 
;;;1332   	{
;;;1333   	ibt._max_dispers_num=0;
;;;1334   	ibt._max_dispers=ibt._T_dispers[0];
;;;1335   
;;;1336   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1337   		{
;;;1338   		ibt._max_dispers_num=1;
;;;1339   		ibt._max_dispers=ibt._T_dispers[1];
;;;1340   		}
;;;1341   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1342   		{
;;;1343   		ibt._max_dispers_num=2;
;;;1344   		ibt._max_dispers=ibt._T_dispers[2];
;;;1345   		}
;;;1346   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1347   		{
;;;1348   		ibt._max_dispers_num=3;
;;;1349   		ibt._max_dispers=ibt._T_dispers[3];
;;;1350   		}
;;;1351   
;;;1352   	ibt._avg2=0;
;;;1353   
;;;1354   	if(ibt._max_dispers_num!=0)
;;;1355   		{
;;;1356   		ibt._avg2+=ibt._T[0];
;;;1357   		}
;;;1358   	if(ibt._max_dispers_num!=1)
;;;1359   		{
;;;1360   		ibt._avg2+=ibt._T[1];
;;;1361   		}
;;;1362   	if(ibt._max_dispers_num!=2)
;;;1363   		{
;;;1364   		ibt._avg2+=ibt._T[2];
;;;1365   		}
;;;1366   	if(ibt._max_dispers_num!=3)
;;;1367   		{
;;;1368   		ibt._avg2+=ibt._T[3];
;;;1369   		}
;;;1370   
;;;1371   	t_box=(ibt._avg2/3)-273;
;;;1372   
;;;1373   	}*/
;;;1374   
;;;1375   
;;;1376   //*********************************************
;;;1377   
;;;1378   #ifndef TELECORE
;;;1379   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
0009ae  49de              LDR      r1,|L1.3368|
0009b0  780a              LDRB     r2,[r1,#0]  ; BAT_IS_ON
0009b2  2a55              CMP      r2,#0x55
0009b4  d104              BNE      |L1.2496|
0009b6  2ec8              CMP      r6,#0xc8
0009b8  dd02              BLE      |L1.2496|
0009ba  4adc              LDR      r2,|L1.3372|
0009bc  891c              LDRH     r4,[r3,#8]  ; bat
0009be  8714              STRH     r4,[r2,#0x38]
                  |L1.2496|
;;;1380   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
0009c0  7849              LDRB     r1,[r1,#1]  ; BAT_IS_ON
0009c2  2955              CMP      r1,#0x55
0009c4  d10b              BNE      |L1.2526|
0009c6  f9b3104e          LDRSH    r1,[r3,#0x4e]  ; bat
0009ca  29c8              CMP      r1,#0xc8
0009cc  dd07              BLE      |L1.2526|
0009ce  f9b31054          LDRSH    r1,[r3,#0x54]  ; bat
0009d2  f9b32008          LDRSH    r2,[r3,#8]  ; bat
0009d6  4291              CMP      r1,r2
0009d8  dd01              BLE      |L1.2526|
0009da  4ad4              LDR      r2,|L1.3372|
0009dc  8711              STRH     r1,[r2,#0x38]
                  |L1.2526|
;;;1381   #endif
;;;1382   
;;;1383   #ifdef TELECORE
;;;1384   Ibmax=0;
;;;1385   /*
;;;1386   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1387   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1388   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1389   */
;;;1390   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1391   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1392   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1393   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1394   #endif
;;;1395   //Ibmax=bat[0]._Ib;
;;;1396   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1397   
;;;1398   #ifdef UKU_TELECORE2017
;;;1399   Ibmax=0;
;;;1400   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1401   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1402   #endif
;;;1403   
;;;1404   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1405   Ibmax=Ib_ips_termokompensat;
0009de  49d3              LDR      r1,|L1.3372|
0009e0  f8bc2000          LDRH     r2,[r12,#0]  ; Ib_ips_termokompensat
0009e4  870a              STRH     r2,[r1,#0x38]
;;;1406   #endif
;;;1407   for(i=0;i<NUMIST;i++)
0009e6  f04f0200          MOV      r2,#0
0009ea  e03b              B        |L1.2660|
                  |L1.2540|
;;;1408   	{
;;;1409   	if(bps[i]._cnt<25)
0009ec  eb020182          ADD      r1,r2,r2,LSL #2
0009f0  eb0101c2          ADD      r1,r1,r2,LSL #3
0009f4  eb0501c1          ADD      r1,r5,r1,LSL #3
0009f8  78cc              LDRB     r4,[r1,#3]
0009fa  2c19              CMP      r4,#0x19
0009fc  d228              BCS      |L1.2640|
;;;1410        	{
;;;1411        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0009fe  798c              LDRB     r4,[r1,#6]
000a00  79ce              LDRB     r6,[r1,#7]
000a02  eb042406          ADD      r4,r4,r6,LSL #8
000a06  624c              STR      r4,[r1,#0x24]
;;;1412        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
000a08  7a0c              LDRB     r4,[r1,#8]
000a0a  7a4e              LDRB     r6,[r1,#9]
000a0c  eb042406          ADD      r4,r4,r6,LSL #8
000a10  620c              STR      r4,[r1,#0x20]
;;;1413        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
000a12  7a8c              LDRB     r4,[r1,#0xa]
000a14  7ace              LDRB     r6,[r1,#0xb]
000a16  eb042406          ADD      r4,r4,r6,LSL #8
000a1a  61cc              STR      r4,[r1,#0x1c]
;;;1414        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
000a1c  7b0c              LDRB     r4,[r1,#0xc]
000a1e  628c              STR      r4,[r1,#0x28]
;;;1415        	bps[i]._adr_ee=bps[i]._buff[7];
000a20  7b4c              LDRB     r4,[r1,#0xd]
000a22  f8814056          STRB     r4,[r1,#0x56]
;;;1416        	bps[i]._flags_tm=bps[i]._buff[8];
000a26  7b8c              LDRB     r4,[r1,#0xe]
000a28  f8814046          STRB     r4,[r1,#0x46]
;;;1417   	    //bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256); 
;;;1418   		bps[i]._Uisum=bps[i]._buff[10]+(bps[i]._buff[11]*256); 
000a2c  7c0c              LDRB     r4,[r1,#0x10]
000a2e  7c4e              LDRB     r6,[r1,#0x11]
000a30  eb042406          ADD      r4,r4,r6,LSL #8
000a34  630c              STR      r4,[r1,#0x30]
;;;1419   		bps[i].debug_info_to_uku0=bps[i]._buff[12]+(bps[i]._buff[13]*256); 
000a36  7c8c              LDRB     r4,[r1,#0x12]
000a38  7cce              LDRB     r6,[r1,#0x13]
000a3a  eb042406          ADD      r4,r4,r6,LSL #8
000a3e  f8a1405e          STRH     r4,[r1,#0x5e]
;;;1420   		bps[i].debug_info_to_uku1=bps[i]._buff[14]+(bps[i]._buff[15]*256);    
000a42  7d0c              LDRB     r4,[r1,#0x14]
000a44  7d4e              LDRB     r6,[r1,#0x15]
000a46  eb042406          ADD      r4,r4,r6,LSL #8
000a4a  f8a14060          STRH     r4,[r1,#0x60]
000a4e  e006              B        |L1.2654|
                  |L1.2640|
;;;1421        	} 
;;;1422   	else 
;;;1423        	{
;;;1424        	bps[i]._Uii=0; 
000a50  61c8              STR      r0,[r1,#0x1c]
;;;1425        	bps[i]._Ii=0;
000a52  6248              STR      r0,[r1,#0x24]
;;;1426        	bps[i]._Uin=0;
000a54  6208              STR      r0,[r1,#0x20]
;;;1427        	bps[i]._Ti=0;
000a56  6288              STR      r0,[r1,#0x28]
;;;1428        	bps[i]._flags_tm=0; 
000a58  f8810046          STRB     r0,[r1,#0x46]
;;;1429   	     //bps[i]._rotor=0;
;;;1430   		bps[i]._Uisum=0;    
000a5c  6308              STR      r0,[r1,#0x30]
                  |L1.2654|
000a5e  f1020201          ADD      r2,r2,#1              ;1407
000a62  b2d2              UXTB     r2,r2                 ;1407
                  |L1.2660|
000a64  42ba              CMP      r2,r7                 ;1407
000a66  dbc1              BLT      |L1.2540|
;;;1431        	}
;;;1432        
;;;1433        }
;;;1434   
;;;1435   load_I=0;
000a68  4cb1              LDR      r4,|L1.3376|
;;;1436   #ifdef TELECORE
;;;1437   
;;;1438   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1439   	{
;;;1440   	load_I-=lakb[i]._ch_curr/10;
;;;1441   	}*/
;;;1442   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1443   #elif UKU_TELECORE2017
;;;1444   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1445   #else
;;;1446   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
000a6a  f9b32008          LDRSH    r2,[r3,#8]  ; bat
000a6e  f04f010a          MOV      r1,#0xa
000a72  fb92f2f1          SDIV     r2,r2,r1
000a76  f9b33054          LDRSH    r3,[r3,#0x54]  ; bat
000a7a  fb93f1f1          SDIV     r1,r3,r1
000a7e  4411              ADD      r1,r1,r2
000a80  f1c10100          RSB      r1,r1,#0
000a84  b20e              SXTH     r6,r1
000a86  8026              STRH     r6,[r4,#0]
;;;1447   #endif
;;;1448   Isumm=0;
000a88  4baa              LDR      r3,|L1.3380|
000a8a  8018              STRH     r0,[r3,#0]
;;;1449   
;;;1450   for(i=0;i<NUMIST;i++)
000a8c  f04f0100          MOV      r1,#0
000a90  e012              B        |L1.2744|
                  |L1.2706|
;;;1451        {
;;;1452        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
000a92  eb010281          ADD      r2,r1,r1,LSL #2
000a96  eb0202c1          ADD      r2,r2,r1,LSL #3
000a9a  eb0502c2          ADD      r2,r5,r2,LSL #3
000a9e  f892c003          LDRB     r12,[r2,#3]
000aa2  f1bc0f05          CMP      r12,#5
000aa6  d204              BCS      |L1.2738|
000aa8  6a52              LDR      r2,[r2,#0x24]
000aaa  f8b3c000          LDRH     r12,[r3,#0]  ; Isumm
000aae  4462              ADD      r2,r2,r12
000ab0  801a              STRH     r2,[r3,#0]
                  |L1.2738|
000ab2  f1010101          ADD      r1,r1,#1              ;1450
000ab6  b2c9              UXTB     r1,r1                 ;1450
                  |L1.2744|
000ab8  42b9              CMP      r1,r7                 ;1450
000aba  dbea              BLT      |L1.2706|
;;;1453        }  
;;;1454        
;;;1455   load_I=load_I+Isumm;
000abc  8819              LDRH     r1,[r3,#0]  ; Isumm
000abe  4431              ADD      r1,r1,r6
000ac0  b209              SXTH     r1,r1
000ac2  8021              STRH     r1,[r4,#0]
;;;1456   if(load_I<0)load_I=0;
000ac4  2900              CMP      r1,#0
000ac6  da00              BGE      |L1.2762|
000ac8  8020              STRH     r0,[r4,#0]
                  |L1.2762|
;;;1457   
;;;1458   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1459   load_I=0;
000aca  8020              STRH     r0,[r4,#0]
;;;1460   
;;;1461   Isumm=0;
000acc  8018              STRH     r0,[r3,#0]
;;;1462   
;;;1463   for(i=0;i<NUMIST;i++)
000ace  f04f0100          MOV      r1,#0
000ad2  e00f              B        |L1.2804|
                  |L1.2772|
;;;1464        {
;;;1465        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
000ad4  eb010281          ADD      r2,r1,r1,LSL #2
000ad8  eb0202c1          ADD      r2,r2,r1,LSL #3
000adc  eb0502c2          ADD      r2,r5,r2,LSL #3
000ae0  78d6              LDRB     r6,[r2,#3]
000ae2  2e05              CMP      r6,#5
000ae4  d203              BCS      |L1.2798|
000ae6  6a52              LDR      r2,[r2,#0x24]
000ae8  881e              LDRH     r6,[r3,#0]  ; Isumm
000aea  4432              ADD      r2,r2,r6
000aec  801a              STRH     r2,[r3,#0]
                  |L1.2798|
000aee  f1010101          ADD      r1,r1,#1              ;1463
000af2  b2c9              UXTB     r1,r1                 ;1463
                  |L1.2804|
000af4  42b9              CMP      r1,r7                 ;1463
000af6  dbed              BLT      |L1.2772|
;;;1466        }  
;;;1467        
;;;1468   load_I=load_I+Isumm;
000af8  881a              LDRH     r2,[r3,#0]  ; Isumm
000afa  eb000102          ADD      r1,r0,r2
000afe  b209              SXTH     r1,r1
000b00  8021              STRH     r1,[r4,#0]
;;;1469   if(load_I<0)load_I=0;
000b02  2900              CMP      r1,#0
000b04  da00              BGE      |L1.2824|
000b06  8020              STRH     r0,[r4,#0]
                  |L1.2824|
;;;1470   
;;;1471   #endif
;;;1472   
;;;1473   
;;;1474   
;;;1475   #ifdef UKU_GLONASS
;;;1476   inv[0]._Uio=6;
;;;1477   if (NUMINV)
;;;1478   	{
;;;1479   	for(i=0;i<NUMINV;i++)
;;;1480   		{
;;;1481   		if(bps[i+first_inv_slot]._cnt<25)
;;;1482        		{
;;;1483        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1484        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1485        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1486        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1487        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1488   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1489   			inv[i]._cnt=0;    
;;;1490        		} 
;;;1491   		else 
;;;1492        		{
;;;1493        		inv[i]._Uio=0; 
;;;1494        		inv[i]._Ii=0;
;;;1495        		inv[i]._Uin=0;
;;;1496        		inv[i]._Ti=0;
;;;1497        		inv[i]._flags_tm=0; 
;;;1498   //	     	inv[i]._rotor0;
;;;1499   			inv[i]._cnt=25;    
;;;1500        		}
;;;1501        	}
;;;1502      	}
;;;1503   #endif
;;;1504   
;;;1505   #ifndef UKU_GLONASS
;;;1506   if (NUMINV)
000b08  498b              LDR      r1,|L1.3384|
000b0a  f9b14000          LDRSH    r4,[r1,#0]  ; NUMINV
000b0e  2c00              CMP      r4,#0
000b10  d066              BEQ      |L1.3040|
;;;1507   	{
;;;1508   	for(i=0;i<NUMINV;i++)
000b12  f04f0300          MOV      r3,#0
;;;1509   		{
;;;1510   		if(bps[i+20]._cnt<25)
;;;1511        		{
;;;1512        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
000b16  4e89              LDR      r6,|L1.3388|
000b18  e060              B        |L1.3036|
                  |L1.2842|
000b1a  f1030114          ADD      r1,r3,#0x14           ;1510
000b1e  eb010281          ADD      r2,r1,r1,LSL #2       ;1510
000b22  eb0201c1          ADD      r1,r2,r1,LSL #3       ;1510
000b26  eb0501c1          ADD      r1,r5,r1,LSL #3       ;1510
000b2a  78ca              LDRB     r2,[r1,#3]            ;1510
000b2c  2a19              CMP      r2,#0x19              ;1510
000b2e  d239              BCS      |L1.2980|
000b30  798a              LDRB     r2,[r1,#6]
000b32  79cf              LDRB     r7,[r1,#7]
000b34  eb022707          ADD      r7,r2,r7,LSL #8
000b38  eb030243          ADD      r2,r3,r3,LSL #1
000b3c  eb061242          ADD      r2,r6,r2,LSL #5
000b40  61d7              STR      r7,[r2,#0x1c]
;;;1513        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
000b42  7a0f              LDRB     r7,[r1,#8]
000b44  f891c009          LDRB     r12,[r1,#9]
000b48  eb07270c          ADD      r7,r7,r12,LSL #8
000b4c  62d7              STR      r7,[r2,#0x2c]
;;;1514        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
000b4e  7a8f              LDRB     r7,[r1,#0xa]
000b50  f891c00b          LDRB     r12,[r1,#0xb]
000b54  eb07270c          ADD      r7,r7,r12,LSL #8
000b58  6197              STR      r7,[r2,#0x18]
;;;1515        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
000b5a  7b0f              LDRB     r7,[r1,#0xc]
000b5c  6217              STR      r7,[r2,#0x20]
;;;1516        		inv[i]._flags_tm=bps[i+20]._buff[7];
000b5e  7b4f              LDRB     r7,[r1,#0xd]
000b60  f8827046          STRB     r7,[r2,#0x46]
;;;1517        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
000b64  7b8f              LDRB     r7,[r1,#0xe]
000b66  f891c00f          LDRB     r12,[r1,#0xf]
000b6a  eb07270c          ADD      r7,r7,r12,LSL #8
000b6e  6297              STR      r7,[r2,#0x28]
;;;1518        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
000b70  7c0f              LDRB     r7,[r1,#0x10]
000b72  f891c011          LDRB     r12,[r1,#0x11]
000b76  eb07270c          ADD      r7,r7,r12,LSL #8
000b7a  6257              STR      r7,[r2,#0x24]
;;;1519   			inv[i]._cnt=0;
000b7c  7090              STRB     r0,[r2,#2]
;;;1520   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
000b7e  7c8f              LDRB     r7,[r1,#0x12]
000b80  f8827059          STRB     r7,[r2,#0x59]
;;;1521   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
000b84  7ccf              LDRB     r7,[r1,#0x13]
000b86  f882705a          STRB     r7,[r2,#0x5a]
;;;1522   			inv[i]._Pnom=bps[i+20]._buff[14]; 
000b8a  7d0f              LDRB     r7,[r1,#0x14]
000b8c  f8827058          STRB     r7,[r2,#0x58]
;;;1523   			inv[i]._net_contr_en=bps[i+20]._buff[15];
000b90  7d4f              LDRB     r7,[r1,#0x15]
000b92  f882705b          STRB     r7,[r2,#0x5b]
;;;1524   			inv[i]._pwm_en=bps[i+20]._buff[16];  
000b96  7d8f              LDRB     r7,[r1,#0x16]
000b98  f882705c          STRB     r7,[r2,#0x5c]
;;;1525   			inv[i]._phase_mode=bps[i+20]._buff[17];  
000b9c  7dc9              LDRB     r1,[r1,#0x17]
000b9e  f882105d          STRB     r1,[r2,#0x5d]
000ba2  e018              B        |L1.3030|
                  |L1.2980|
;;;1526        		} 
;;;1527   		else 
;;;1528        		{
;;;1529         		inv[i]._Ii=0;
000ba4  eb030143          ADD      r1,r3,r3,LSL #1
000ba8  eb061141          ADD      r1,r6,r1,LSL #5
000bac  61c8              STR      r0,[r1,#0x1c]
;;;1530   			inv[i]._Pio=0;
000bae  62c8              STR      r0,[r1,#0x2c]
;;;1531   			inv[i]._Uio=0;
000bb0  6188              STR      r0,[r1,#0x18]
;;;1532        		inv[i]._Ti=0;
000bb2  6208              STR      r0,[r1,#0x20]
;;;1533        		inv[i]._flags_tm=0; 
000bb4  f8810046          STRB     r0,[r1,#0x46]
;;;1534        		inv[i]._Uil=0;
000bb8  6248              STR      r0,[r1,#0x24]
;;;1535        		inv[i]._Uin=0;
000bba  6288              STR      r0,[r1,#0x28]
;;;1536   			inv[i]._cnt=25; 
000bbc  f04f0219          MOV      r2,#0x19
000bc0  708a              STRB     r2,[r1,#2]
;;;1537   			inv[i]._Uoutmin=0; 
000bc2  f8810059          STRB     r0,[r1,#0x59]
;;;1538   			inv[i]._Uoutmax=0; 
000bc6  f881005a          STRB     r0,[r1,#0x5a]
;;;1539   			inv[i]._Pnom=0; 
000bca  f8810058          STRB     r0,[r1,#0x58]
;;;1540   			inv[i]._net_contr_en=0;
000bce  f881005b          STRB     r0,[r1,#0x5b]
;;;1541   			inv[i]._pwm_en=0;   
000bd2  f881005c          STRB     r0,[r1,#0x5c]
                  |L1.3030|
000bd6  f1030301          ADD      r3,r3,#1              ;1508
000bda  b2db              UXTB     r3,r3                 ;1508
                  |L1.3036|
000bdc  42a3              CMP      r3,r4                 ;1508
000bde  db9c              BLT      |L1.2842|
                  |L1.3040|
;;;1542   			   
;;;1543        		}
;;;1544        	}
;;;1545      	}
;;;1546   #endif
;;;1547   
;;;1548   #ifdef GLADKOV
;;;1549   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1550   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1551   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1552   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1553   inv[0]._flags_tm=bps[4]._buff[7];
;;;1554   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1555   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1556   inv[0]._cnt=0;    
;;;1557   
;;;1558   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1559   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1560   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1561   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1562   inv[1]._flags_tm=bps[21]._buff[7];
;;;1563   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1564   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1565   inv[1]._cnt=0;    
;;;1566   #endif
;;;1567   
;;;1568   /*
;;;1569   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1570   	{
;;;1571   	lakb[0]._battCommState=0;
;;;1572   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1573   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1574   	
;;;1575   	if(lakb[0]._battCommState==0)
;;;1576   		{	
;;;1577   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1578   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1579   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1580   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1581   		}
;;;1582   	}
;;;1583   */
;;;1584   
;;;1585   #ifdef UKU_TELECORE2015
;;;1586   
;;;1587   	if(BAT_TYPE==2)
;;;1588   		{
;;;1589   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1590   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1591   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1592   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1593   		
;;;1594   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1595   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1596   	
;;;1597   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1598   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1599   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1600   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1601   	
;;;1602   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1603   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1604   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1605   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1606   	
;;;1607   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1608   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1609   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1610   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1611   	
;;;1612   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1613   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1614   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1615   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1616   	
;;;1617   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1618   	
;;;1619   	
;;;1620   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1621   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1622   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1623   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1624   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1625   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1626   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1627   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1628   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1629   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1630   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1631   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1632   	
;;;1633   		if(lakb[i]._rat_cap==0)
;;;1634   			{
;;;1635   			if(lakb[i]._isOnCnt)
;;;1636   				{
;;;1637   				lakb[i]._isOnCnt--;
;;;1638   				if(lakb[i]._isOnCnt==0)
;;;1639   					{
;;;1640   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1641   					}
;;;1642   				}
;;;1643   			}
;;;1644   		else 
;;;1645   			{
;;;1646   			if(lakb[i]._isOnCnt<50)
;;;1647   				{
;;;1648   				lakb[i]._isOnCnt++;
;;;1649   				if(lakb[i]._isOnCnt==50)
;;;1650   					{
;;;1651   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1652   					}
;;;1653   				}
;;;1654   			}
;;;1655   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;1656   		}
;;;1657   	else if(BAT_TYPE==3)
;;;1658   		{
;;;1659   		//short numOfPacks;
;;;1660   		//short numOfCells, numOfTemperCells, baseOfData;
;;;1661   		
;;;1662   		#ifndef UKU_TELECORE2016
;;;1663   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;1664   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;1665   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;1666   		if(numOfPacks)numOfPacks-=1;
;;;1667   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;1668   		plazma_numOfCells=numOfCells;
;;;1669   		plazma_numOfTemperCells=numOfTemperCells;
;;;1670   		plazma_numOfPacks=numOfPacks;
;;;1671   
;;;1672   
;;;1673   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;1674   
;;;1675   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;1676   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;1677   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;1678   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;1679   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;1680   							);	  
;;;1681   
;;;1682   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;1683   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;1684   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;1685   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;1686   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;1687   							)/10;
;;;1688   
;;;1689   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;1690   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;1691   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;1692   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;1693   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;1694   							)-2730;
;;;1695   
;;;1696   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;1697   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;1698   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;1699   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;1700   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;1701   							)/10;
;;;1702   
;;;1703   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;1704   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;1705   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;1706   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;1707   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;1708   							)/10;
;;;1709   		#endif
;;;1710   		
;;;1711   		#ifdef UKU_TELECORE2016
;;;1712   		{
;;;1713   		char i;
;;;1714   		
;;;1715   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;1716   			{
;;;1717   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;1718   			}
;;;1719   		}
;;;1720   		#endif
;;;1721   		
;;;1722   										  
;;;1723   		}
;;;1724   	
;;;1725   if(sacredSunSilentCnt<3) 
;;;1726   	{
;;;1727       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;1728       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;1729      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;1730   	}
;;;1731   else 
;;;1732   	{
;;;1733       	//bat[0]._Ub=0;
;;;1734       	//bat[0]._Tb=0;
;;;1735      	//bat[0]._Ib=0;
;;;1736   	}
;;;1737   
;;;1738   if(BAT_TYPE==1)
;;;1739   	{
;;;1740   	char i;
;;;1741   	for(i=0;i<1;i++)
;;;1742   		{
;;;1743   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1744   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1745   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1746   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;1747   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;1748   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1749   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;1750   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1751   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;1752   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;1753   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1754   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;1755   		lakb[i]._flags1= lakb_damp[i][34];
;;;1756   		lakb[i]._flags2= lakb_damp[i][35];
;;;1757   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;1758   
;;;1759   /*		if(lakb[i]._rat_cap==0)
;;;1760   			{
;;;1761   			if(lakb[i]._isOnCnt)
;;;1762   				{
;;;1763   				lakb[i]._isOnCnt--;
;;;1764   				if(lakb[i]._isOnCnt==0)
;;;1765   					{
;;;1766   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1767   					}
;;;1768   				}
;;;1769   			}
;;;1770   		else 
;;;1771   			{
;;;1772   			if(lakb[i]._isOnCnt<50)
;;;1773   				{
;;;1774   				lakb[i]._isOnCnt++;
;;;1775   				if(lakb[i]._isOnCnt==50)
;;;1776   					{
;;;1777   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1778   					}
;;;1779   				}
;;;1780   			} */
;;;1781   		gran(&lakb[i]._isOnCnt,0,50);
;;;1782   	 	}
;;;1783   
;;;1784   	if(lakb_damp[0][41]==100)
;;;1785   		{
;;;1786   		li_bat._485Error=1;
;;;1787   		}
;;;1788   	if(lakb_damp[0][41]==0)
;;;1789   		{
;;;1790   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;1791   		li_bat._485Error=0;
;;;1792   		}
;;;1793   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;1794   
;;;1795   
;;;1796   	}
;;;1797   
;;;1798   
;;;1799   #endif
;;;1800   
;;;1801   		#ifdef UKU_TELECORE2017
;;;1802   		{
;;;1803   		char i;
;;;1804   		
;;;1805   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;1806   			{
;;;1807   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;1808   			}
;;;1809   		}
;;;1810   		#endif
;;;1811   #ifdef UKU_TELECORE2015
;;;1812   //вычисление параметров работы батареи
;;;1813   //TODO дописать дл€ всех батарей все параметры и при отцепке батарей
;;;1814   li_bat._batStat=bsOK;
;;;1815   if(BAT_TYPE==1) //COSLIGHT
;;;1816   	{
;;;1817   	if(li_bat._batStat==bsOK)
;;;1818   		{
;;;1819   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;1820   
;;;1821   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;1822   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;1823   	
;;;1824   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;1825   		li_bat._soc=lakb[0]._s_o_c;
;;;1826   		li_bat._soh=lakb[0]._s_o_h;
;;;1827   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;1828   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;1829   		li_bat._rbt=lakb[0]._r_b_t;
;;;1830   		}
;;;1831   	else 
;;;1832   		{
;;;1833   		li_bat._Ub=bat[0]._Ub;
;;;1834   		li_bat._Ib=bat[0]._Ib/10;
;;;1835   		li_bat._Tb=bat[0]._Tb;
;;;1836   		}
;;;1837   
;;;1838   	if((li_bat._485Error)||(li_bat._canError))
;;;1839   		{
;;;1840   		li_bat._batStat=bsOFF;
;;;1841   		}
;;;1842   	else li_bat._batStat=bsOK;
;;;1843   	}
;;;1844   else if(BAT_TYPE==2) //SACRED SUN
;;;1845   	{
;;;1846   	}
;;;1847   else if(BAT_TYPE==3) //ZTT
;;;1848   	{
;;;1849   	if(li_bat._batStat==bsOK)
;;;1850   		{
;;;1851   
;;;1852   		}
;;;1853   	}
;;;1854   #endif
;;;1855   
;;;1856   
;;;1857   /*
;;;1858   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;1859   	{
;;;1860   
;;;1861   
;;;1862   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;1863   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;1864   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;1865   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;1866   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;1867   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;1868   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;1869   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;1870   
;;;1871   	tempSS=0;
;;;1872   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;1873   
;;;1874   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;1875   
;;;1876   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;1877   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;1878   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;1879   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;1880   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;1881   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;1882   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;1883   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;1884   
;;;1885   	tempSS=0;
;;;1886   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;1887   
;;;1888   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;1889   
;;;1890   
;;;1891   	}*/
;;;1892   
;;;1893   
;;;1894   
;;;1895   }
000be0  e8bd8ffe          POP      {r1-r11,pc}
;;;1896   
                          ENDP

                  adc_init PROC
;;;1899   //-----------------------------------------------
;;;1900   void adc_init(void)
000be4  4856              LDR      r0,|L1.3392|
;;;1901   {
;;;1902   
;;;1903   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
000be6  6841              LDR      r1,[r0,#4]
000be8  f4212140          BIC      r1,r1,#0xc0000
000bec  f4412180          ORR      r1,r1,#0x40000
000bf0  6041              STR      r1,[r0,#4]
;;;1904   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
000bf2  6841              LDR      r1,[r0,#4]
000bf4  f4213140          BIC      r1,r1,#0x30000
000bf8  f4413180          ORR      r1,r1,#0x10000
000bfc  6041              STR      r1,[r0,#4]
;;;1905   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
000bfe  6841              LDR      r1,[r0,#4]
000c00  f4214140          BIC      r1,r1,#0xc000
000c04  f4414180          ORR      r1,r1,#0x4000
000c08  6041              STR      r1,[r0,#4]
;;;1906   
;;;1907   
;;;1908   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000c0a  6c41              LDR      r1,[r0,#0x44]
000c0c  f4212140          BIC      r1,r1,#0xc0000
000c10  f4412100          ORR      r1,r1,#0x80000
000c14  6441              STR      r1,[r0,#0x44]
;;;1909   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000c16  6c41              LDR      r1,[r0,#0x44]
000c18  f4213140          BIC      r1,r1,#0x30000
000c1c  f4413100          ORR      r1,r1,#0x20000
000c20  6441              STR      r1,[r0,#0x44]
;;;1910   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
000c22  6c41              LDR      r1,[r0,#0x44]
000c24  f4214140          BIC      r1,r1,#0xc000
000c28  f4414100          ORR      r1,r1,#0x8000
000c2c  6441              STR      r1,[r0,#0x44]
;;;1911   
;;;1912   SET_REG(LPC_ADC->ADCR,0,24,3);
000c2e  4845              LDR      r0,|L1.3396|
000c30  6801              LDR      r1,[r0,#0]
000c32  f02161e0          BIC      r1,r1,#0x7000000
000c36  6001              STR      r1,[r0,#0]
;;;1913   
;;;1914   SET_REG(LPC_ADC->ADCR,1,21,1);
000c38  6801              LDR      r1,[r0,#0]
000c3a  f4411100          ORR      r1,r1,#0x200000
000c3e  6001              STR      r1,[r0,#0]
;;;1915   SET_REG(LPC_ADC->ADCR,0,16,1);
000c40  6801              LDR      r1,[r0,#0]
000c42  f4213180          BIC      r1,r1,#0x10000
000c46  6001              STR      r1,[r0,#0]
;;;1916   SET_REG(LPC_ADC->ADCR,1,8,8);
000c48  6801              LDR      r1,[r0,#0]
000c4a  f421417f          BIC      r1,r1,#0xff00
000c4e  f4417180          ORR      r1,r1,#0x100
000c52  6001              STR      r1,[r0,#0]
;;;1917   
;;;1918   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;1919   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;1920   	
;;;1921   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;1922        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;1923        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;1924   
;;;1925   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
000c54  f44f7180          MOV      r1,#0x100
000c58  60c1              STR      r1,[r0,#0xc]
000c5a  483b              LDR      r0,|L1.3400|
000c5c  f44f0180          MOV      r1,#0x400000
000c60  6001              STR      r1,[r0,#0]
;;;1926   
;;;1927   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;1928   
;;;1929   
;;;1930   }
000c62  4770              BX       lr
;;;1931   
                          ENDP

                  adc_drv7 PROC
;;;1932   //-----------------------------------------------
;;;1933   void adc_drv7(void) //(Uсети - посто€нка)
000c64  e92d41f0          PUSH     {r4-r8,lr}
;;;1934   {
;;;1935   //int temp_S;
;;;1936   //char i;
;;;1937   //signed short temp_SS;
;;;1938   
;;;1939   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
000c68  4c30              LDR      r4,|L1.3372|
000c6a  3472              ADDS     r4,r4,#0x72
000c6c  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000c6e  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000c70  1a40              SUBS     r0,r0,r1
000c72  b200              SXTH     r0,r0
000c74  f7fffffe          BL       abs_pal
000c78  1da6              ADDS     r6,r4,#6
000c7a  8030              STRH     r0,[r6,#0]
;;;1940   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
000c7c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000c7e  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000c80  1a40              SUBS     r0,r0,r1
000c82  b200              SXTH     r0,r0
000c84  f7fffffe          BL       abs_pal
000c88  8070              STRH     r0,[r6,#2]
;;;1941   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
000c8a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000c8c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000c8e  1a40              SUBS     r0,r0,r1
000c90  b200              SXTH     r0,r0
000c92  f7fffffe          BL       abs_pal
000c96  80b0              STRH     r0,[r6,#4]
;;;1942   
;;;1943   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;1944   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;1945   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;1946   
;;;1947   
;;;1948   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000c98  f44f7196          MOV      r1,#0x12c
;;;1949   	{
;;;1950   	adc_result=adc_self_ch_buff[2];
000c9c  4d23              LDR      r5,|L1.3372|
000c9e  4288              CMP      r0,r1                 ;1948
000ca0  da02              BGE      |L1.3240|
000ca2  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000ca4  8568              STRH     r0,[r5,#0x2a]
000ca6  e00c              B        |L1.3266|
                  |L1.3240|
;;;1951   	} 
;;;1952   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000ca8  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
000cac  4288              CMP      r0,r1
000cae  da02              BGE      |L1.3254|
;;;1953   	{
;;;1954   	adc_result=adc_self_ch_buff[1];
000cb0  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000cb2  8568              STRH     r0,[r5,#0x2a]
000cb4  e005              B        |L1.3266|
                  |L1.3254|
;;;1955   	}
;;;1956   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000cb6  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
000cba  4288              CMP      r0,r1
000cbc  da01              BGE      |L1.3266|
;;;1957   	{
;;;1958   	adc_result=adc_self_ch_buff[0];
000cbe  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
000cc0  8568              STRH     r0,[r5,#0x2a]
                  |L1.3266|
;;;1959   	}
;;;1960       //adc_result=92;
;;;1961   
;;;1962   if(adc_ch_net)
000cc2  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
000cc4  2600              MOVS     r6,#0
000cc6  b32f              CBZ      r7,|L1.3348|
;;;1963   	{
;;;1964   
;;;1965   	main_power_buffer[0]+=(long)(adc_result);
000cc8  4820              LDR      r0,|L1.3404|
000cca  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
000cce  6802              LDR      r2,[r0,#0]  ; main_power_buffer
000cd0  440a              ADD      r2,r2,r1
000cd2  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;1966   	main_power_buffer[1]+=(long)(adc_result);
000cd4  6842              LDR      r2,[r0,#4]  ; main_power_buffer
000cd6  440a              ADD      r2,r2,r1
000cd8  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;1967   	main_power_buffer[2]+=(long)(adc_result);
000cda  6882              LDR      r2,[r0,#8]  ; main_power_buffer
000cdc  440a              ADD      r2,r2,r1
000cde  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;1968   	main_power_buffer[3]+=(long)(adc_result);
000ce0  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
000ce2  4411              ADD      r1,r1,r2
000ce4  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;1969   
;;;1970   	adc_net_buff_cnt++;
000ce6  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
000ce8  f1010101          ADD      r1,r1,#1
000cec  b209              SXTH     r1,r1
000cee  8669              STRH     r1,[r5,#0x32]
;;;1971   	if(adc_net_buff_cnt>=0x1000)
000cf0  f5b15f80          CMP      r1,#0x1000
000cf4  db00              BLT      |L1.3320|
;;;1972   		{
;;;1973   		adc_net_buff_cnt=0;
000cf6  866e              STRH     r6,[r5,#0x32]
                  |L1.3320|
;;;1974   		}
;;;1975   	if((adc_net_buff_cnt&0x03ff)==0)
000cf8  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
000cfc  058a              LSLS     r2,r1,#22
000cfe  d14d              BNE      |L1.3484|
;;;1976   		{
;;;1977   		#ifdef UKU_220
;;;1978   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;1979   		#else
;;;1980   		#ifdef UKU_220_V2
;;;1981   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;1982   		#else
;;;1983   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
000d00  ea4f21a1          ASR      r1,r1,#10
000d04  f8502021          LDR      r2,[r0,r1,LSL #2]
000d08  ea4f2222          ASR      r2,r2,#8
000d0c  852a              STRH     r2,[r5,#0x28]
;;;1984   		#endif
;;;1985   		#endif
;;;1986   		main_power_buffer[adc_net_buff_cnt>>10]=0;
000d0e  f8406021          STR      r6,[r0,r1,LSL #2]
000d12  e043              B        |L1.3484|
                  |L1.3348|
000d14  e01c              B        |L1.3408|
000d16  0000              DCW      0x0000
                  |L1.3352|
                          DCD      ibt
                  |L1.3356|
                          DCD      t_box
                  |L1.3360|
                          DCD      t_ext_can_nd
                  |L1.3364|
                          DCD      t_ext_can
                  |L1.3368|
                          DCD      BAT_IS_ON
                  |L1.3372|
                          DCD      ||area_number.26||
                  |L1.3376|
                          DCD      load_I
                  |L1.3380|
                          DCD      Isumm
                  |L1.3384|
                          DCD      NUMINV
                  |L1.3388|
                          DCD      inv
                  |L1.3392|
                          DCD      0x4002c000
                  |L1.3396|
                          DCD      0x40034000
                  |L1.3400|
                          DCD      0xe000e100
                  |L1.3404|
                          DCD      ||.bss||+0x420
                  |L1.3408|
;;;1987   		}
;;;1988   
;;;1989   
;;;1990   	} 
;;;1991   else if(!adc_ch_net)
;;;1992   	{
;;;1993   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
000d50  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
000d54  48ff              LDR      r0,|L1.4436|
000d56  792c              LDRB     r4,[r5,#4]  ; adc_ch
000d58  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
000d5a  eb001384          ADD      r3,r0,r4,LSL #6
000d5e  f8431022          STR      r1,[r3,r2,LSL #2]
;;;1994   	
;;;1995   	if((adc_ch_cnt&0x03)==0)
000d62  0790              LSLS     r0,r2,#30
000d64  d10d              BNE      |L1.3458|
;;;1996   		{
;;;1997   		long temp_L;
;;;1998   		char i;
;;;1999   		temp_L=0;
000d66  4601              MOV      r1,r0
                  |L1.3432|
;;;2000   		for(i=0;i<16;i++)
;;;2001   			{
;;;2002   			temp_L+=adc_buff[adc_ch][i];
000d68  f853c020          LDR      r12,[r3,r0,LSL #2]
000d6c  4461              ADD      r1,r1,r12
000d6e  f1000001          ADD      r0,r0,#1              ;2000
000d72  b2c0              UXTB     r0,r0                 ;2000
000d74  2810              CMP      r0,#0x10              ;2000
000d76  d3f7              BCC      |L1.3432|
;;;2003   			}
;;;2004   		adc_buff_[adc_ch]= (short)(temp_L>>4);
000d78  ea4f1021          ASR      r0,r1,#4
000d7c  49f6              LDR      r1,|L1.4440|
000d7e  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.3458|
;;;2005   
;;;2006   		//adc_buff_[3]=346;
;;;2007   		}
;;;2008   	if(++adc_ch>=16) 
000d82  1c64              ADDS     r4,r4,#1
000d84  b2e0              UXTB     r0,r4
000d86  7128              STRB     r0,[r5,#4]
000d88  2810              CMP      r0,#0x10
000d8a  d307              BCC      |L1.3484|
;;;2009   		{
;;;2010   		adc_ch=0;
000d8c  712e              STRB     r6,[r5,#4]
;;;2011   		adc_ch_cnt++;
000d8e  f1020201          ADD      r2,r2,#1
000d92  b2d0              UXTB     r0,r2
000d94  7168              STRB     r0,[r5,#5]
;;;2012   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
000d96  2810              CMP      r0,#0x10
000d98  d300              BCC      |L1.3484|
000d9a  716e              STRB     r6,[r5,#5]
                  |L1.3484|
;;;2013   		}
;;;2014   	}
;;;2015   
;;;2016   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2017   
;;;2018   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2019   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2020   /*
;;;2021   	{
;;;2022   	if((adc_cnt1&0x03)==0)
;;;2023   		{
;;;2024   		temp_S=0;
;;;2025   		for(i=0;i<16;i++)
;;;2026   			{
;;;2027   			temp_S+=adc_buff[adc_ch][i];
;;;2028   			} 
;;;2029            	adc_buff_[adc_ch]=temp_S>>4;
;;;2030             }
;;;2031   	}*/
;;;2032   
;;;2033   
;;;2034   		  
;;;2035   
;;;2036   adc_self_ch_cnt=0;
000d9c  70ae              STRB     r6,[r5,#2]
;;;2037   
;;;2038   adc_ch_net++;
000d9e  f1070701          ADD      r7,r7,#1
;;;2039   adc_ch_net&=1;
000da2  f0070001          AND      r0,r7,#1
000da6  70e8              STRB     r0,[r5,#3]
;;;2040   
;;;2041   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2042   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2043   
;;;2044   if(adc_ch_net)
;;;2045   	{
;;;2046   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2047   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2048   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
000da8  4aec              LDR      r2,|L1.4444|
000daa  b130              CBZ      r0,|L1.3514|
000dac  6810              LDR      r0,[r2,#0]
000dae  f02000ff          BIC      r0,r0,#0xff
000db2  f1000004          ADD      r0,r0,#4
000db6  6010              STR      r0,[r2,#0]
000db8  e03d              B        |L1.3638|
                  |L1.3514|
;;;2049   	}
;;;2050   else
;;;2051   	{
;;;2052   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2053   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2054   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000dba  7929              LDRB     r1,[r5,#4]  ; adc_ch
000dbc  0708              LSLS     r0,r1,#28
000dbe  d406              BMI      |L1.3534|
000dc0  6810              LDR      r0,[r2,#0]
000dc2  f02000ff          BIC      r0,r0,#0xff
000dc6  f1000001          ADD      r0,r0,#1
000dca  6010              STR      r0,[r2,#0]
000dcc  e005              B        |L1.3546|
                  |L1.3534|
;;;2055   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
000dce  6810              LDR      r0,[r2,#0]
000dd0  f02000ff          BIC      r0,r0,#0xff
000dd4  f1000002          ADD      r0,r0,#2
000dd8  6010              STR      r0,[r2,#0]
                  |L1.3546|
;;;2056   
;;;2057   
;;;2058   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
000dda  48e1              LDR      r0,|L1.4448|
000ddc  6803              LDR      r3,[r0,#0]
000dde  f0435380          ORR      r3,r3,#0x10000000
000de2  6003              STR      r3,[r0,#0]
;;;2059   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
000de4  6a03              LDR      r3,[r0,#0x20]
000de6  f0434380          ORR      r3,r3,#0x40000000
000dea  6203              STR      r3,[r0,#0x20]
;;;2060   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000dec  6e03              LDR      r3,[r0,#0x60]
000dee  f0436380          ORR      r3,r3,#0x4000000
000df2  6603              STR      r3,[r0,#0x60]
;;;2061   
;;;2062   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
000df4  07cb              LSLS     r3,r1,#31
000df6  d00a              BEQ      |L1.3598|
;;;2063   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
000df8  6943              LDR      r3,[r0,#0x14]
000dfa  f0435380          ORR      r3,r3,#0x10000000
000dfe  6143              STR      r3,[r0,#0x14]
                  |L1.3584|
;;;2064   
;;;2065   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000e00  078b              LSLS     r3,r1,#30
000e02  d409              BMI      |L1.3608|
000e04  6b43              LDR      r3,[r0,#0x34]
000e06  f0234380          BIC      r3,r3,#0x40000000
000e0a  6343              STR      r3,[r0,#0x34]
000e0c  e008              B        |L1.3616|
                  |L1.3598|
000e0e  6943              LDR      r3,[r0,#0x14]         ;2062
000e10  f0235380          BIC      r3,r3,#0x10000000     ;2062
000e14  6143              STR      r3,[r0,#0x14]         ;2062
000e16  e7f3              B        |L1.3584|
                  |L1.3608|
;;;2066   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
000e18  6b43              LDR      r3,[r0,#0x34]
000e1a  f0434380          ORR      r3,r3,#0x40000000
000e1e  6343              STR      r3,[r0,#0x34]
                  |L1.3616|
;;;2067   
;;;2068   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
000e20  0749              LSLS     r1,r1,#29
000e22  d404              BMI      |L1.3630|
000e24  6f41              LDR      r1,[r0,#0x74]
000e26  f0216180          BIC      r1,r1,#0x4000000
000e2a  6741              STR      r1,[r0,#0x74]
000e2c  e003              B        |L1.3638|
                  |L1.3630|
;;;2069   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
000e2e  6f41              LDR      r1,[r0,#0x74]
000e30  f0416180          ORR      r1,r1,#0x4000000
000e34  6741              STR      r1,[r0,#0x74]
                  |L1.3638|
;;;2070   	}
;;;2071   	
;;;2072   
;;;2073   
;;;2074   
;;;2075   LPC_ADC->ADCR |=  (1<<24);
000e36  6810              LDR      r0,[r2,#0]
000e38  f0407080          ORR      r0,r0,#0x1000000
000e3c  6010              STR      r0,[r2,#0]
;;;2076   
;;;2077   }
000e3e  e8bd81f0          POP      {r4-r8,pc}
;;;2078   
                          ENDP

                  avg_hndl PROC
;;;2335   //-----------------------------------------------
;;;2336   void avg_hndl(void)
000e42  e92d43f0          PUSH     {r4-r9,lr}
;;;2337   { 
;;;2338   char i;
;;;2339   
;;;2340   if(bAVG_BLOCK)return;
000e46  4fc7              LDR      r7,|L1.4452|
000e48  7bf8              LDRB     r0,[r7,#0xf]  ; bAVG_BLOCK
000e4a  2800              CMP      r0,#0
000e4c  d105              BNE      |L1.3674|
;;;2341   //#define AVGCNTMAX	5
;;;2342   if(avg_main_cnt)
000e4e  f9b70022          LDRSH    r0,[r7,#0x22]  ; avg_main_cnt
000e52  b120              CBZ      r0,|L1.3678|
;;;2343   	{
;;;2344   	avg_main_cnt--;
000e54  f1a00001          SUB      r0,r0,#1
000e58  8478              STRH     r0,[r7,#0x22]
                  |L1.3674|
;;;2345   	return;
;;;2346   	}                 
;;;2347   
;;;2348   if(avg_cnt_<10)
;;;2349   	{
;;;2350   	avg_cnt_++;
;;;2351   	return;
;;;2352   	}   
;;;2353   avg_cnt_=0;
;;;2354   avg_num=0;
;;;2355   
;;;2356   if(bAVG_DIR)bAVG_DIR=0;
;;;2357   else bAVG_DIR=1;
;;;2358   
;;;2359   for(i=0;i<NUMIST;i++)
;;;2360   	{
;;;2361   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
;;;2362   	}
;;;2363   
;;;2364   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2365   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2366   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2367   
;;;2368   	
;;;2369   if(avg_num<2)
;;;2370   	{
;;;2371   	return;
;;;2372   	}
;;;2373   	
;;;2374   else
;;;2375   	{
;;;2376   	i_avg_min=5000;
;;;2377   	i_avg_max=0;
;;;2378   	i_avg_summ=0;
;;;2379   	for(i=0;i<NUMIST;i++)
;;;2380   		{
;;;2381   		if(bps[i]._state==bsWRK)
;;;2382   			{
;;;2383   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
;;;2384   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
;;;2385   			
;;;2386   			i_avg_summ+=bps[i]._Ii;
;;;2387   			}
;;;2388   		}
;;;2389   	i_avg=i_avg_summ/avg_num;	
;;;2390   	
;;;2391   	if(i_avg_min==0)i_avg_min=1;
;;;2392   
;;;2393   	avg=i_avg_max;
;;;2394   	avg*=100;
;;;2395   	avg/=i_avg_min;
;;;2396   
;;;2397   	if(avg>160) bAVG=1;
;;;2398   	if(avg<120) bAVG=0;
;;;2399   
;;;2400   	if(bAVG==1)
;;;2401   		{
;;;2402   		for(i=0;i<NUMIST;i++)
;;;2403   			{
;;;2404   			if(bps[i]._state==bsWRK)
;;;2405   				{
;;;2406   				signed long tempSL;
;;;2407   				tempSL=0;
;;;2408   				tempSL=(signed long)bps[i]._Ii;
;;;2409   				tempSL*=100L;
;;;2410   				if(i_avg==0) i_avg=1;
;;;2411   				tempSL/=(signed long)i_avg;
;;;2412   				bps[i]._avg=(signed short)tempSL;
;;;2413   
;;;2414   				if((bps[i]._Ii>i_avg)&&(bps[i]._avg>120)&&(!bAVG_DIR))bps[i]._x_--;
;;;2415   				if((bps[i]._Ii<i_avg)&&(bps[i]._avg<80)&&(bAVG_DIR))bps[i]._x_++;
;;;2416   			
;;;2417   				if(bps[i]._x_<-50)bps[i]._x_=-50;
;;;2418   				if(bps[i]._x_>50)bps[i]._x_=50;	
;;;2419   				}
;;;2420   			}		
;;;2421   		}			
;;;2422   	}   	 
;;;2423   
;;;2424   
;;;2425   avg_hndl_end:
;;;2426   __nop();  
;;;2427   }
000e5a  e8bd83f0          POP      {r4-r9,pc}
                  |L1.3678|
000e5e  7b78              LDRB     r0,[r7,#0xd]          ;2348  ; avg_cnt_
000e60  280a              CMP      r0,#0xa               ;2348
000e62  d203              BCS      |L1.3692|
000e64  f1000001          ADD      r0,r0,#1              ;2350
000e68  7378              STRB     r0,[r7,#0xd]          ;2350
000e6a  e7f6              B        |L1.3674|
                  |L1.3692|
000e6c  f04f0200          MOV      r2,#0                 ;2353
000e70  737a              STRB     r2,[r7,#0xd]          ;2353
000e72  73ba              STRB     r2,[r7,#0xe]          ;2354
000e74  7c38              LDRB     r0,[r7,#0x10]         ;2356  ; bAVG_DIR
000e76  f04f0601          MOV      r6,#1                 ;2357
000e7a  b108              CBZ      r0,|L1.3712|
000e7c  743a              STRB     r2,[r7,#0x10]         ;2356
000e7e  e000              B        |L1.3714|
                  |L1.3712|
000e80  743e              STRB     r6,[r7,#0x10]         ;2357
                  |L1.3714|
000e82  f04f0000          MOV      r0,#0                 ;2359
000e86  49b9              LDR      r1,|L1.4460|
000e88  4db7              LDR      r5,|L1.4456|
000e8a  f9b13000          LDRSH    r3,[r1,#0]            ;2359
000e8e  e012              B        |L1.3766|
                  |L1.3728|
000e90  eb000180          ADD      r1,r0,r0,LSL #2       ;2361
000e94  eb0101c0          ADD      r1,r1,r0,LSL #3       ;2361
000e98  eb0501c1          ADD      r1,r5,r1,LSL #3       ;2361
000e9c  788c              LDRB     r4,[r1,#2]            ;2361
000e9e  2c01              CMP      r4,#1                 ;2361
000ea0  d106              BNE      |L1.3760|
000ea2  78c9              LDRB     r1,[r1,#3]            ;2361
000ea4  2914              CMP      r1,#0x14              ;2361
000ea6  d203              BCS      |L1.3760|
000ea8  7bb9              LDRB     r1,[r7,#0xe]          ;2361  ; avg_num
000eaa  f1010101          ADD      r1,r1,#1              ;2361
000eae  73b9              STRB     r1,[r7,#0xe]          ;2361
                  |L1.3760|
000eb0  f1000001          ADD      r0,r0,#1              ;2359
000eb4  b2c0              UXTB     r0,r0                 ;2359
                  |L1.3766|
000eb6  4298              CMP      r0,r3                 ;2359
000eb8  dbea              BLT      |L1.3728|
000eba  7bbc              LDRB     r4,[r7,#0xe]          ;2369  ; avg_num
000ebc  2c02              CMP      r4,#2                 ;2369
000ebe  d3cc              BCC      |L1.3674|
000ec0  f2413088          MOV      r0,#0x1388            ;2376
000ec4  65b8              STR      r0,[r7,#0x58]         ;2376  ; i_avg_min
000ec6  657a              STR      r2,[r7,#0x54]         ;2377  ; i_avg_max
000ec8  65fa              STR      r2,[r7,#0x5c]         ;2378  ; i_avg_summ
000eca  f04f0100          MOV      r1,#0                 ;2379
000ece  e01c              B        |L1.3850|
                  |L1.3792|
000ed0  eb010081          ADD      r0,r1,r1,LSL #2       ;2381
000ed4  eb0000c1          ADD      r0,r0,r1,LSL #3       ;2381
000ed8  eb0500c0          ADD      r0,r5,r0,LSL #3       ;2381
000edc  f890c002          LDRB     r12,[r0,#2]           ;2381
000ee0  f1bc0f01          CMP      r12,#1                ;2381
000ee4  d10e              BNE      |L1.3844|
000ee6  6a40              LDR      r0,[r0,#0x24]         ;2383
000ee8  f8d7c054          LDR      r12,[r7,#0x54]        ;2383  ; i_avg_max
000eec  4560              CMP      r0,r12                ;2383
000eee  dd00              BLE      |L1.3826|
000ef0  6578              STR      r0,[r7,#0x54]         ;2383  ; i_avg_max
                  |L1.3826|
000ef2  f8d7c058          LDR      r12,[r7,#0x58]        ;2384  ; i_avg_min
000ef6  4560              CMP      r0,r12                ;2384
000ef8  da00              BGE      |L1.3836|
000efa  65b8              STR      r0,[r7,#0x58]         ;2384  ; i_avg_min
                  |L1.3836|
000efc  f8d7c05c          LDR      r12,[r7,#0x5c]        ;2386  ; i_avg_summ
000f00  4460              ADD      r0,r0,r12             ;2386
000f02  65f8              STR      r0,[r7,#0x5c]         ;2386  ; i_avg_summ
                  |L1.3844|
000f04  f1010101          ADD      r1,r1,#1              ;2379
000f08  b2c9              UXTB     r1,r1                 ;2379
                  |L1.3850|
000f0a  4299              CMP      r1,r3                 ;2379
000f0c  dbe0              BLT      |L1.3792|
000f0e  6df8              LDR      r0,[r7,#0x5c]         ;2389  ; i_avg_summ
000f10  fb90f0f4          SDIV     r0,r0,r4              ;2389
000f14  6638              STR      r0,[r7,#0x60]         ;2389  ; i_avg
000f16  6db8              LDR      r0,[r7,#0x58]         ;2391  ; i_avg_min
000f18  b900              CBNZ     r0,|L1.3868|
000f1a  65be              STR      r6,[r7,#0x58]         ;2391  ; i_avg_min
                  |L1.3868|
000f1c  6d78              LDR      r0,[r7,#0x54]         ;2393  ; i_avg_max
000f1e  f04f0164          MOV      r1,#0x64              ;2394
000f22  fb00f001          MUL      r0,r0,r1              ;2394
000f26  6db9              LDR      r1,[r7,#0x58]         ;2395  ; i_avg_min
000f28  fb90f0f1          SDIV     r0,r0,r1              ;2395
000f2c  6678              STR      r0,[r7,#0x64]         ;2395  ; avg
000f2e  28a0              CMP      r0,#0xa0              ;2397
000f30  dd00              BLE      |L1.3892|
000f32  733e              STRB     r6,[r7,#0xc]          ;2397
                  |L1.3892|
000f34  2878              CMP      r0,#0x78              ;2398
000f36  da00              BGE      |L1.3898|
000f38  733a              STRB     r2,[r7,#0xc]          ;2398
                  |L1.3898|
000f3a  7b38              LDRB     r0,[r7,#0xc]          ;2400  ; bAVG
000f3c  2801              CMP      r0,#1                 ;2400
000f3e  d14c              BNE      |L1.4058|
000f40  f04f0100          MOV      r1,#0                 ;2402
000f44  f06f0831          MVN      r8,#0x31              ;2417
000f48  e045              B        |L1.4054|
                  |L1.3914|
000f4a  eb010081          ADD      r0,r1,r1,LSL #2       ;2404
000f4e  eb0000c1          ADD      r0,r0,r1,LSL #3       ;2404
000f52  eb0500c0          ADD      r0,r5,r0,LSL #3       ;2404
000f56  7882              LDRB     r2,[r0,#2]            ;2404
000f58  2a01              CMP      r2,#1                 ;2404
000f5a  d139              BNE      |L1.4048|
000f5c  6a44              LDR      r4,[r0,#0x24]         ;2408
000f5e  f04f0264          MOV      r2,#0x64              ;2409
000f62  fb04fc02          MUL      r12,r4,r2             ;2409
000f66  6e3a              LDR      r2,[r7,#0x60]         ;2410  ; i_avg
000f68  b902              CBNZ     r2,|L1.3948|
000f6a  663e              STR      r6,[r7,#0x60]         ;2410  ; i_avg
                  |L1.3948|
000f6c  6e3a              LDR      r2,[r7,#0x60]         ;2411  ; i_avg
000f6e  fb9cfcf2          SDIV     r12,r12,r2            ;2411
000f72  fa0ffc8c          SXTH     r12,r12               ;2412
000f76  f8a0c062          STRH     r12,[r0,#0x62]        ;2412
000f7a  4294              CMP      r4,r2                 ;2414
000f7c  dd0d              BLE      |L1.3994|
000f7e  f1bc0f78          CMP      r12,#0x78             ;2414
000f82  dd0a              BLE      |L1.3994|
000f84  f8979010          LDRB     r9,[r7,#0x10]         ;2414  ; bAVG_DIR
000f88  f1b90f00          CMP      r9,#0                 ;2414
000f8c  d105              BNE      |L1.3994|
000f8e  f8b09054          LDRH     r9,[r0,#0x54]         ;2414
000f92  f1a90901          SUB      r9,r9,#1              ;2414
000f96  f8a09054          STRH     r9,[r0,#0x54]         ;2414
                  |L1.3994|
000f9a  4294              CMP      r4,r2                 ;2415
000f9c  da0a              BGE      |L1.4020|
000f9e  f1bc0f50          CMP      r12,#0x50             ;2415
000fa2  da07              BGE      |L1.4020|
000fa4  7c3a              LDRB     r2,[r7,#0x10]         ;2415  ; bAVG_DIR
000fa6  b12a              CBZ      r2,|L1.4020|
000fa8  f8b02054          LDRH     r2,[r0,#0x54]         ;2415
000fac  f1020201          ADD      r2,r2,#1              ;2415
000fb0  f8a02054          STRH     r2,[r0,#0x54]         ;2415
                  |L1.4020|
000fb4  f9b02054          LDRSH    r2,[r0,#0x54]         ;2417
000fb8  4542              CMP      r2,r8                 ;2417
000fba  da01              BGE      |L1.4032|
000fbc  f8a08054          STRH     r8,[r0,#0x54]         ;2417
                  |L1.4032|
000fc0  f9b02054          LDRSH    r2,[r0,#0x54]         ;2418
000fc4  2a32              CMP      r2,#0x32              ;2418
000fc6  dd03              BLE      |L1.4048|
000fc8  f04f0232          MOV      r2,#0x32              ;2418
000fcc  f8a02054          STRH     r2,[r0,#0x54]         ;2418
                  |L1.4048|
000fd0  f1010101          ADD      r1,r1,#1              ;2402
000fd4  b2c9              UXTB     r1,r1                 ;2402
                  |L1.4054|
000fd6  4299              CMP      r1,r3                 ;2402
000fd8  dbb7              BLT      |L1.3914|
                  |L1.4058|
000fda  bf00              NOP                            ;2426
                  |L1.4060|
000fdc  e73d              B        |L1.3674|
;;;2428   
                          ENDP

                  u_out_reg_hndl PROC
;;;2429   //-----------------------------------------------
;;;2430   void u_out_reg_hndl(void)
000fde  b510              PUSH     {r4,lr}
;;;2431   { 
;;;2432   char i;
;;;2433   
;;;2434   if(u_out_reg_main_cnt)
000fe0  4960              LDR      r1,|L1.4452|
000fe2  f9b10024          LDRSH    r0,[r1,#0x24]  ; u_out_reg_main_cnt
000fe6  b118              CBZ      r0,|L1.4080|
;;;2435   	{
;;;2436   	u_out_reg_main_cnt--;
000fe8  f1a00001          SUB      r0,r0,#1
000fec  8488              STRH     r0,[r1,#0x24]
                  |L1.4078|
;;;2437   	return;
;;;2438   	}                 
;;;2439   u_out_reg_main_cnt=5;
;;;2440   
;;;2441   if(out_U<(UOUT-5))
;;;2442   	{
;;;2443   	//if(UOUT_<UOUT)UOUT_=UOUT;
;;;2444   	UOUT_++;
;;;2445   	if(UOUT_>(UOUT+50))UOUT_=UOUT+50;
;;;2446   	}
;;;2447   else if(out_U>(UOUT+5))
;;;2448   	{
;;;2449   	//if(UOUT_>UOUT)UOUT_=UOUT;
;;;2450   	UOUT_--;
;;;2451   	if(UOUT_<(UOUT-50))UOUT_=UOUT-50;
;;;2452   	}
;;;2453   }
000fee  bd10              POP      {r4,pc}
                  |L1.4080|
000ff0  f04f0005          MOV      r0,#5                 ;2439
000ff4  8488              STRH     r0,[r1,#0x24]         ;2439
000ff6  485e              LDR      r0,|L1.4464|
000ff8  4b5f              LDR      r3,|L1.4472|
000ffa  f9b02000          LDRSH    r2,[r0,#0]            ;2441  ; out_U
000ffe  485d              LDR      r0,|L1.4468|
001000  f9b31000          LDRSH    r1,[r3,#0]            ;2444
001004  f9b00000          LDRSH    r0,[r0,#0]            ;2441  ; UOUT
001008  f1a00405          SUB      r4,r0,#5              ;2441
00100c  42a2              CMP      r2,r4                 ;2441
00100e  da09              BGE      |L1.4132|
001010  f1010101          ADD      r1,r1,#1              ;2444
001014  b209              SXTH     r1,r1                 ;2444
001016  8019              STRH     r1,[r3,#0]            ;2444
001018  f1000032          ADD      r0,r0,#0x32           ;2445
00101c  4281              CMP      r1,r0                 ;2445
00101e  dde6              BLE      |L1.4078|
001020  8018              STRH     r0,[r3,#0]            ;2445
                  |L1.4130|
001022  bd10              POP      {r4,pc}
                  |L1.4132|
001024  1d44              ADDS     r4,r0,#5              ;2447
001026  42a2              CMP      r2,r4                 ;2447
001028  ddfb              BLE      |L1.4130|
00102a  f1a10101          SUB      r1,r1,#1              ;2450
00102e  b209              SXTH     r1,r1                 ;2450
001030  8019              STRH     r1,[r3,#0]            ;2450
001032  f1a00032          SUB      r0,r0,#0x32           ;2451
001036  4281              CMP      r1,r0                 ;2451
001038  daf3              BGE      |L1.4130|
00103a  8018              STRH     r0,[r3,#0]            ;2451
00103c  bd10              POP      {r4,pc}
;;;2454   
                          ENDP

                  rele_av_hndl PROC
;;;2467   //-----------------------------------------------
;;;2468   void rele_av_hndl(void)
00103e  b570              PUSH     {r4-r6,lr}
;;;2469   {
;;;2470   char i,i1,i2;
;;;2471   
;;;2472   i1=0;
001040  f04f0300          MOV      r3,#0
;;;2473   i2=0;
001044  461a              MOV      r2,r3
;;;2474   
;;;2475   for(i=0;i<NUMIST;i++)
001046  4610              MOV      r0,r2
001048  4948              LDR      r1,|L1.4460|
;;;2476   	{
;;;2477   	if(bps[i]._av&0x0f)i1=1;
00104a  4d47              LDR      r5,|L1.4456|
00104c  f9b14000          LDRSH    r4,[r1,#0]            ;2475
001050  e011              B        |L1.4214|
                  |L1.4178|
001052  eb000180          ADD      r1,r0,r0,LSL #2
001056  eb0101c0          ADD      r1,r1,r0,LSL #3
00105a  eb0501c1          ADD      r1,r5,r1,LSL #3
00105e  7849              LDRB     r1,[r1,#1]
001060  070e              LSLS     r6,r1,#28
001062  d001              BEQ      |L1.4200|
001064  f04f0301          MOV      r3,#1
                  |L1.4200|
;;;2478   	if(bps[i]._av&0x10)i2=1;
001068  06c9              LSLS     r1,r1,#27
00106a  d501              BPL      |L1.4208|
00106c  f04f0201          MOV      r2,#1
                  |L1.4208|
001070  f1000001          ADD      r0,r0,#1              ;2475
001074  b2c0              UXTB     r0,r0                 ;2475
                  |L1.4214|
001076  42a0              CMP      r0,r4                 ;2475
001078  dbeb              BLT      |L1.4178|
;;;2479   	}
;;;2480   
;;;2481   if(i1)					avar_vd_stat|=(1<<0);
00107a  4940              LDR      r1,|L1.4476|
00107c  f9b10000          LDRSH    r0,[r1,#0]
001080  b11b              CBZ      r3,|L1.4234|
001082  f0400001          ORR      r0,r0,#1
001086  8008              STRH     r0,[r1,#0]
001088  e002              B        |L1.4240|
                  |L1.4234|
;;;2482   else 					avar_vd_stat&=~(1<<0);
00108a  f0200001          BIC      r0,r0,#1
00108e  8008              STRH     r0,[r1,#0]
                  |L1.4240|
;;;2483   if(overloadAvar==0) 	avar_vd_stat&=~(1<<1);
001090  483b              LDR      r0,|L1.4480|
001092  7800              LDRB     r0,[r0,#0]  ; overloadAvar
001094  b110              CBZ      r0,|L1.4252|
;;;2484   else if(overloadAvar==1)avar_vd_stat|=(1<<1);
001096  2801              CMP      r0,#1
001098  d005              BEQ      |L1.4262|
00109a  e008              B        |L1.4270|
                  |L1.4252|
00109c  8808              LDRH     r0,[r1,#0]            ;2483  ; avar_vd_stat
00109e  f0200002          BIC      r0,r0,#2              ;2483
0010a2  8008              STRH     r0,[r1,#0]            ;2483
0010a4  e003              B        |L1.4270|
                  |L1.4262|
0010a6  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
0010a8  f0400002          ORR      r0,r0,#2
0010ac  8008              STRH     r0,[r1,#0]
                  |L1.4270|
;;;2485   
;;;2486   if(sysTAvar==0) 		avar_vd_stat&=~(1<<2);
0010ae  4835              LDR      r0,|L1.4484|
0010b0  7800              LDRB     r0,[r0,#0]  ; sysTAvar
0010b2  b110              CBZ      r0,|L1.4282|
;;;2487   else if(sysTAvar==1)	avar_vd_stat|=(1<<2);
0010b4  2801              CMP      r0,#1
0010b6  d005              BEQ      |L1.4292|
0010b8  e008              B        |L1.4300|
                  |L1.4282|
0010ba  8808              LDRH     r0,[r1,#0]            ;2486  ; avar_vd_stat
0010bc  f0200004          BIC      r0,r0,#4              ;2486
0010c0  8008              STRH     r0,[r1,#0]            ;2486
0010c2  e003              B        |L1.4300|
                  |L1.4292|
0010c4  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
0010c6  f0400004          ORR      r0,r0,#4
0010ca  8008              STRH     r0,[r1,#0]
                  |L1.4300|
;;;2488   
;;;2489   if(uOutAvar==0) 		avar_vd_stat&=~((1<<3)|(1<<4));
0010cc  482e              LDR      r0,|L1.4488|
0010ce  7800              LDRB     r0,[r0,#0]  ; uOutAvar
0010d0  b120              CBZ      r0,|L1.4316|
;;;2490   else if(uOutAvar==1)	avar_vd_stat|=(1<<4);
0010d2  2801              CMP      r0,#1
0010d4  d007              BEQ      |L1.4326|
;;;2491   else if(uOutAvar==2)	avar_vd_stat|=(1<<3);
0010d6  2802              CMP      r0,#2
0010d8  d00a              BEQ      |L1.4336|
0010da  e00d              B        |L1.4344|
                  |L1.4316|
0010dc  8808              LDRH     r0,[r1,#0]            ;2489  ; avar_vd_stat
0010de  f0200018          BIC      r0,r0,#0x18           ;2489
0010e2  8008              STRH     r0,[r1,#0]            ;2489
0010e4  e008              B        |L1.4344|
                  |L1.4326|
0010e6  8808              LDRH     r0,[r1,#0]            ;2490  ; avar_vd_stat
0010e8  f0400010          ORR      r0,r0,#0x10           ;2490
0010ec  8008              STRH     r0,[r1,#0]            ;2490
0010ee  e003              B        |L1.4344|
                  |L1.4336|
0010f0  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
0010f2  f0400008          ORR      r0,r0,#8
0010f6  8008              STRH     r0,[r1,#0]
                  |L1.4344|
;;;2492   if(uInAvar==0) 			avar_vd_stat&=~((1<<5)|(1<<6));
0010f8  4824              LDR      r0,|L1.4492|
0010fa  7800              LDRB     r0,[r0,#0]  ; uInAvar
0010fc  b120              CBZ      r0,|L1.4360|
;;;2493   else if(uInAvar==1)		avar_vd_stat|=(1<<6);
0010fe  2801              CMP      r0,#1
001100  d007              BEQ      |L1.4370|
;;;2494   else if(uInAvar==2)		avar_vd_stat|=(1<<5);
001102  2802              CMP      r0,#2
001104  d00a              BEQ      |L1.4380|
001106  e00d              B        |L1.4388|
                  |L1.4360|
001108  8808              LDRH     r0,[r1,#0]            ;2492  ; avar_vd_stat
00110a  f0200060          BIC      r0,r0,#0x60           ;2492
00110e  8008              STRH     r0,[r1,#0]            ;2492
001110  e008              B        |L1.4388|
                  |L1.4370|
001112  8808              LDRH     r0,[r1,#0]            ;2493  ; avar_vd_stat
001114  f0400040          ORR      r0,r0,#0x40           ;2493
001118  8008              STRH     r0,[r1,#0]            ;2493
00111a  e003              B        |L1.4388|
                  |L1.4380|
00111c  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
00111e  f0400020          ORR      r0,r0,#0x20
001122  8008              STRH     r0,[r1,#0]
                  |L1.4388|
;;;2495   
;;;2496   if(i2)					avar_vd_stat|=(1<<7);
001124  b122              CBZ      r2,|L1.4400|
001126  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
001128  f0400080          ORR      r0,r0,#0x80
00112c  8008              STRH     r0,[r1,#0]
00112e  e003              B        |L1.4408|
                  |L1.4400|
;;;2497   else 					avar_vd_stat&=~(1<<7);
001130  8808              LDRH     r0,[r1,#0]  ; avar_vd_stat
001132  f0200080          BIC      r0,r0,#0x80
001136  8008              STRH     r0,[r1,#0]
                  |L1.4408|
;;;2498   
;;;2499   
;;;2500   for (i=0;i<4;i++)
001138  f04f0000          MOV      r0,#0
00113c  f9b14000          LDRSH    r4,[r1,#0]            ;2481
;;;2501   	{
;;;2502   	if(avar_vd_stat&RELE_SET_MASK[i])rele_av_flags|=(1<<i);
001140  4d13              LDR      r5,|L1.4496|
001142  4914              LDR      r1,|L1.4500|
001144  f04f0601          MOV      r6,#1                 ;2477
                  |L1.4424|
001148  f9352010          LDRSH    r2,[r5,r0,LSL #1]
00114c  4222              TST      r2,r4
00114e  d02a              BEQ      |L1.4518|
001150  e022              B        |L1.4504|
001152  0000              DCW      0x0000
                  |L1.4436|
                          DCD      ||.bss||
                  |L1.4440|
                          DCD      ||.bss||+0x400
                  |L1.4444|
                          DCD      0x40034000
                  |L1.4448|
                          DCD      0x2009c000
                  |L1.4452|
                          DCD      ||area_number.26||
                  |L1.4456|
                          DCD      bps
                  |L1.4460|
                          DCD      NUMIST
                  |L1.4464|
                          DCD      out_U
                  |L1.4468|
                          DCD      UOUT
                  |L1.4472|
                          DCD      UOUT_
                  |L1.4476|
                          DCD      avar_vd_stat
                  |L1.4480|
                          DCD      overloadAvar
                  |L1.4484|
                          DCD      sysTAvar
                  |L1.4488|
                          DCD      uOutAvar
                  |L1.4492|
                          DCD      uInAvar
                  |L1.4496|
                          DCD      RELE_SET_MASK
                  |L1.4500|
                          DCD      rele_av_flags
                  |L1.4504|
001198  880a              LDRH     r2,[r1,#0]  ; rele_av_flags
00119a  fa06f300          LSL      r3,r6,r0
00119e  ea430302          ORR      r3,r3,r2
0011a2  800b              STRH     r3,[r1,#0]
0011a4  e005              B        |L1.4530|
                  |L1.4518|
;;;2503   	else rele_av_flags&=~(1<<i);
0011a6  880a              LDRH     r2,[r1,#0]  ; rele_av_flags
0011a8  fa06f300          LSL      r3,r6,r0
0011ac  ea220203          BIC      r2,r2,r3
0011b0  800a              STRH     r2,[r1,#0]
                  |L1.4530|
0011b2  f1000001          ADD      r0,r0,#1              ;2500
0011b6  b2c0              UXTB     r0,r0                 ;2500
0011b8  2804              CMP      r0,#4                 ;2500
0011ba  d3c5              BCC      |L1.4424|
;;;2504   	} 
;;;2505   }
0011bc  bd70              POP      {r4-r6,pc}
;;;2506   
                          ENDP

                  rele_hndl PROC
;;;2507   //*************-----------------------------------------------
;;;2508   void rele_hndl(void)
0011be  b570              PUSH     {r4-r6,lr}
;;;2509   {
;;;2510   //static char cnt_rel_sam;
;;;2511   //char temp;
;;;2512   
;;;2513   //temp=0;
;;;2514   
;;;2515   
;;;2516   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
0011c0  48fe              LDR      r0,|L1.5564|
0011c2  6801              LDR      r1,[r0,#0]
0011c4  4afe              LDR      r2,|L1.5568|
0011c6  ea010102          AND      r1,r1,r2
0011ca  6001              STR      r1,[r0,#0]
;;;2517   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
0011cc  4cfd              LDR      r4,|L1.5572|
0011ce  6821              LDR      r1,[r4,#0]
0011d0  f441717c          ORR      r1,r1,#0x3f0
0011d4  6021              STR      r1,[r4,#0]
;;;2518   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0011d6  69c1              LDR      r1,[r0,#0x1c]
0011d8  f4212140          BIC      r1,r1,#0xc0000
0011dc  61c1              STR      r1,[r0,#0x1c]
;;;2519   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0011de  6e21              LDR      r1,[r4,#0x60]
0011e0  f0417100          ORR      r1,r1,#0x2000000
0011e4  6621              STR      r1,[r4,#0x60]
;;;2520   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0011e6  6841              LDR      r1,[r0,#4]
0011e8  f0216140          BIC      r1,r1,#0xc000000
0011ec  6041              STR      r1,[r0,#4]
;;;2521   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0011ee  6820              LDR      r0,[r4,#0]
0011f0  f0405000          ORR      r0,r0,#0x20000000
0011f4  6020              STR      r0,[r4,#0]
;;;2522   
;;;2523   
;;;2524   
;;;2525   
;;;2526   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_1))
0011f6  f04f00d2          MOV      r0,#0xd2
0011fa  f7fffffe          BL       mess_find_unvol
;;;2527   	{
;;;2528   	if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;2529   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;2530   	}
;;;2531   else if(!(rele_av_flags&(1<<0))) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
0011fe  4ef2              LDR      r6,|L1.5576|
001200  4df2              LDR      r5,|L1.5580|
001202  b110              CBZ      r0,|L1.4618|
001204  6828              LDR      r0,[r5,#0]            ;2526  ; mess_data
001206  2865              CMP      r0,#0x65              ;2526
001208  d015              BEQ      |L1.4662|
                  |L1.4618|
00120a  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
00120c  07c0              LSLS     r0,r0,#31
00120e  d01e              BEQ      |L1.4686|
;;;2532   else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001210  6fa0              LDR      r0,[r4,#0x78]
001212  f0407000          ORR      r0,r0,#0x2000000
001216  67a0              STR      r0,[r4,#0x78]
                  |L1.4632|
;;;2533   
;;;2534   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_2))
001218  20d2              MOVS     r0,#0xd2
00121a  f7fffffe          BL       mess_find_unvol
00121e  b110              CBZ      r0,|L1.4646|
001220  6828              LDR      r0,[r5,#0]  ; mess_data
001222  2866              CMP      r0,#0x66
001224  d018              BEQ      |L1.4696|
                  |L1.4646|
;;;2535   	{
;;;2536   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;2537   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;2538   	}
;;;2539   else if(!(rele_av_flags&(1<<1))) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001226  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
001228  0780              LSLS     r0,r0,#30
00122a  d424              BMI      |L1.4726|
00122c  69e0              LDR      r0,[r4,#0x1c]
00122e  f0400080          ORR      r0,r0,#0x80
001232  61e0              STR      r0,[r4,#0x1c]
001234  e023              B        |L1.4734|
                  |L1.4662|
001236  6868              LDR      r0,[r5,#4]            ;2528  ; mess_data
001238  b120              CBZ      r0,|L1.4676|
00123a  6fa0              LDR      r0,[r4,#0x78]         ;2529
00123c  f0407000          ORR      r0,r0,#0x2000000      ;2529
001240  67a0              STR      r0,[r4,#0x78]         ;2529
001242  e7e9              B        |L1.4632|
                  |L1.4676|
001244  6fe0              LDR      r0,[r4,#0x7c]         ;2528
001246  f0407000          ORR      r0,r0,#0x2000000      ;2528
00124a  67e0              STR      r0,[r4,#0x7c]         ;2528
00124c  e7e4              B        |L1.4632|
                  |L1.4686|
00124e  6fe0              LDR      r0,[r4,#0x7c]         ;2531
001250  f0407000          ORR      r0,r0,#0x2000000      ;2531
001254  67e0              STR      r0,[r4,#0x7c]         ;2531
001256  e7df              B        |L1.4632|
                  |L1.4696|
001258  6868              LDR      r0,[r5,#4]            ;2536  ; mess_data
00125a  b110              CBZ      r0,|L1.4706|
00125c  2801              CMP      r0,#1                 ;2537
00125e  d005              BEQ      |L1.4716|
001260  e00d              B        |L1.4734|
                  |L1.4706|
001262  69e0              LDR      r0,[r4,#0x1c]         ;2536
001264  f0400080          ORR      r0,r0,#0x80           ;2536
001268  61e0              STR      r0,[r4,#0x1c]         ;2536
00126a  e008              B        |L1.4734|
                  |L1.4716|
00126c  69a0              LDR      r0,[r4,#0x18]         ;2537
00126e  f0400080          ORR      r0,r0,#0x80           ;2537
001272  61a0              STR      r0,[r4,#0x18]         ;2537
001274  e003              B        |L1.4734|
                  |L1.4726|
;;;2540   else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001276  69a0              LDR      r0,[r4,#0x18]
001278  f0400080          ORR      r0,r0,#0x80
00127c  61a0              STR      r0,[r4,#0x18]
                  |L1.4734|
;;;2541   
;;;2542   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_3))
00127e  20d2              MOVS     r0,#0xd2
001280  f7fffffe          BL       mess_find_unvol
001284  b110              CBZ      r0,|L1.4748|
001286  6828              LDR      r0,[r5,#0]  ; mess_data
001288  2867              CMP      r0,#0x67
00128a  d007              BEQ      |L1.4764|
                  |L1.4748|
;;;2543   	{
;;;2544   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;2545   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;2546       }
;;;2547   else if(!(rele_av_flags&(1<<2))) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
00128c  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
00128e  0740              LSLS     r0,r0,#29
001290  d413              BMI      |L1.4794|
001292  69e0              LDR      r0,[r4,#0x1c]
001294  f0400010          ORR      r0,r0,#0x10
001298  61e0              STR      r0,[r4,#0x1c]
00129a  e012              B        |L1.4802|
                  |L1.4764|
00129c  6868              LDR      r0,[r5,#4]            ;2544  ; mess_data
00129e  b110              CBZ      r0,|L1.4774|
0012a0  2801              CMP      r0,#1                 ;2545
0012a2  d005              BEQ      |L1.4784|
0012a4  e00d              B        |L1.4802|
                  |L1.4774|
0012a6  69e0              LDR      r0,[r4,#0x1c]         ;2544
0012a8  f0400010          ORR      r0,r0,#0x10           ;2544
0012ac  61e0              STR      r0,[r4,#0x1c]         ;2544
0012ae  e008              B        |L1.4802|
                  |L1.4784|
0012b0  69a0              LDR      r0,[r4,#0x18]         ;2545
0012b2  f0400010          ORR      r0,r0,#0x10           ;2545
0012b6  61a0              STR      r0,[r4,#0x18]         ;2545
0012b8  e003              B        |L1.4802|
                  |L1.4794|
;;;2548   else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
0012ba  69a0              LDR      r0,[r4,#0x18]
0012bc  f0400010          ORR      r0,r0,#0x10
0012c0  61a0              STR      r0,[r4,#0x18]
                  |L1.4802|
;;;2549   
;;;2550   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_4))	 
0012c2  20d2              MOVS     r0,#0xd2
0012c4  f7fffffe          BL       mess_find_unvol
0012c8  b110              CBZ      r0,|L1.4816|
0012ca  6828              LDR      r0,[r5,#0]  ; mess_data
0012cc  2868              CMP      r0,#0x68
0012ce  d007              BEQ      |L1.4832|
                  |L1.4816|
;;;2551   	{
;;;2552   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;2553   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;2554   	}
;;;2555   else if(!(rele_av_flags&(1<<3))) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
0012d0  8830              LDRH     r0,[r6,#0]  ; rele_av_flags
0012d2  0700              LSLS     r0,r0,#28
0012d4  d412              BMI      |L1.4860|
0012d6  69e0              LDR      r0,[r4,#0x1c]
0012d8  f4407000          ORR      r0,r0,#0x200
0012dc  61e0              STR      r0,[r4,#0x1c]
                  |L1.4830|
;;;2556   else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;2557   
;;;2558   }
0012de  bd70              POP      {r4-r6,pc}
                  |L1.4832|
0012e0  6868              LDR      r0,[r5,#4]            ;2552  ; mess_data
0012e2  b130              CBZ      r0,|L1.4850|
0012e4  2801              CMP      r0,#1                 ;2553
0012e6  d1fa              BNE      |L1.4830|
0012e8  69a0              LDR      r0,[r4,#0x18]         ;2553
0012ea  f4407000          ORR      r0,r0,#0x200          ;2553
0012ee  61a0              STR      r0,[r4,#0x18]         ;2553
0012f0  bd70              POP      {r4-r6,pc}
                  |L1.4850|
0012f2  69e0              LDR      r0,[r4,#0x1c]         ;2552
0012f4  f4407000          ORR      r0,r0,#0x200          ;2552
0012f8  61e0              STR      r0,[r4,#0x1c]         ;2552
0012fa  bd70              POP      {r4-r6,pc}
                  |L1.4860|
0012fc  69a0              LDR      r0,[r4,#0x18]         ;2556
0012fe  f4407000          ORR      r0,r0,#0x200          ;2556
001302  61a0              STR      r0,[r4,#0x18]         ;2556
001304  bd70              POP      {r4-r6,pc}
;;;2559   
                          ENDP

                  bps_hndl PROC
;;;2560   //-----------------------------------------------
;;;2561   void bps_hndl(void)
001306  e92d5ff0          PUSH     {r4-r12,lr}
;;;2562   {
;;;2563   char ptr__,i;
;;;2564   unsigned short tempUS;
;;;2565   
;;;2566   if(sh_cnt0<10)
00130a  4eb1              LDR      r6,|L1.5584|
;;;2567   	{
;;;2568   	sh_cnt0++;
;;;2569   	if(sh_cnt0>=10)
;;;2570   		{
;;;2571   		sh_cnt0=0;
00130c  2700              MOVS     r7,#0
;;;2572   		b1Hz_sh=1;
00130e  f04f0a01          MOV      r10,#1
001312  7d30              LDRB     r0,[r6,#0x14]         ;2566  ; sh_cnt0
001314  280a              CMP      r0,#0xa               ;2566
001316  d208              BCS      |L1.4906|
001318  f1000001          ADD      r0,r0,#1              ;2568
00131c  b2c0              UXTB     r0,r0                 ;2568
00131e  7530              STRB     r0,[r6,#0x14]         ;2568
001320  280a              CMP      r0,#0xa               ;2569
001322  d302              BCC      |L1.4906|
001324  7537              STRB     r7,[r6,#0x14]         ;2571
001326  f886a015          STRB     r10,[r6,#0x15]
                  |L1.4906|
;;;2573   		}
;;;2574   	}
;;;2575   
;;;2576   /*if(sh_cnt1<5)
;;;2577   	{
;;;2578   	sh_cnt1++;
;;;2579   	if(sh_cnt1==5)
;;;2580   		{
;;;2581   		sh_cnt1=0;
;;;2582   		b2Hz_sh=1;
;;;2583   		}
;;;2584   	} */
;;;2585   
;;;2586   
;;;2587   /*
;;;2588   if(mess_find(MESS_SRC_ON_OFF))
;;;2589   	{
;;;2590   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;2591   		{
;;;2592   		char i;
;;;2593   		for(i=0;i<NUMIST;i++)
;;;2594   			{
;;;2595   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;2596   			}
;;;2597   		
;;;2598   		}
;;;2599   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;2600   		{
;;;2601   		char i;
;;;2602   		for(i=0;i<NUMIST;i++)
;;;2603   			{
;;;2604   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;2605   			}
;;;2606   		
;;;2607   		}
;;;2608   	}
;;;2609   	
;;;2610   else if(mess_find(_MESS_SRC_MASK_ON))
;;;2611   	{				
;;;2612   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;2613   		{
;;;2614   		char i;
;;;2615   		for(i=0;i<NUMIST;i++)
;;;2616   			{
;;;2617   			if(mess_data[1]&(1<<i))
;;;2618   				{
;;;2619   				src[i]._ist_blok_cnt=0;
;;;2620   				src[i]._flags_tu=2;
;;;2621   				}
;;;2622   			}
;;;2623   		
;;;2624   		}				
;;;2625   	}*/
;;;2626   
;;;2627   
;;;2628   
;;;2629   /*else*/ 
;;;2630   bps_on_mask=0;
00132a  f8a67044          STRH     r7,[r6,#0x44]
;;;2631   bps_off_mask=0;
00132e  f8a67046          STRH     r7,[r6,#0x46]
;;;2632   
;;;2633   if(mess_find_unvol(MESS2BPS_HNDL))
001332  20cd              MOVS     r0,#0xcd
001334  f7fffffe          BL       mess_find_unvol
;;;2634   	{
;;;2635   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;2636   		{
;;;2637   		bps_off_mask=0xffff;
;;;2638   		}
;;;2639   
;;;2640   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;2641   		{
;;;2642   		bps_off_mask=mess_data[1];
;;;2643   		}
;;;2644   
;;;2645   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;2646   		{
;;;2647   		bps_on_mask=mess_data[1];
;;;2648   		}
;;;2649   
;;;2650   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;2651   		{
;;;2652   		bps_on_mask=0xffff;
;;;2653   		}
;;;2654   
;;;2655   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;2656   		{
;;;2657   		bps_on_mask=mess_data[1];
;;;2658   		bps_off_mask=~(mess_data[1]);
;;;2659   		}
;;;2660   
;;;2661   
;;;2662   	for(i=0;i<=NUMIST;i++)
;;;2663   		{
;;;2664   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001338  f8df8298          LDR      r8,|L1.5588|
00133c  f8dfb298          LDR      r11,|L1.5592|
001340  b3a0              CBZ      r0,|L1.5036|
001342  49a2              LDR      r1,|L1.5580|
001344  f64f73ff          MOV      r3,#0xffff            ;2637
001348  6808              LDR      r0,[r1,#0]            ;2635  ; mess_data
00134a  28ce              CMP      r0,#0xce              ;2635
00134c  d101              BNE      |L1.4946|
00134e  f8a63046          STRH     r3,[r6,#0x46]         ;2637
                  |L1.4946|
001352  28cf              CMP      r0,#0xcf              ;2640
001354  d102              BNE      |L1.4956|
001356  684a              LDR      r2,[r1,#4]            ;2642  ; mess_data
001358  f8a62046          STRH     r2,[r6,#0x46]         ;2642
                  |L1.4956|
00135c  28d1              CMP      r0,#0xd1              ;2645
00135e  d102              BNE      |L1.4966|
001360  684a              LDR      r2,[r1,#4]            ;2647  ; mess_data
001362  f8a62044          STRH     r2,[r6,#0x44]         ;2647
                  |L1.4966|
001366  28d2              CMP      r0,#0xd2              ;2650
001368  d101              BNE      |L1.4974|
00136a  f8a63044          STRH     r3,[r6,#0x44]         ;2652
                  |L1.4974|
00136e  28d0              CMP      r0,#0xd0              ;2655
001370  d106              BNE      |L1.4992|
001372  6848              LDR      r0,[r1,#4]            ;2657  ; mess_data
001374  f8a60044          STRH     r0,[r6,#0x44]         ;2657
001378  ea6f0000          MVN      r0,r0                 ;2658
00137c  f8a60046          STRH     r0,[r6,#0x46]         ;2658
                  |L1.4992|
001380  f04f0400          MOV      r4,#0                 ;2662
001384  e037              B        |L1.5110|
                  |L1.4998|
001386  f8b60046          LDRH     r0,[r6,#0x46]  ; bps_off_mask
00138a  fa0af904          LSL      r9,r10,r4
00138e  ea190f00          TST      r9,r0
001392  d00c              BEQ      |L1.5038|
001394  eb040084          ADD      r0,r4,r4,LSL #2
001398  eb0000c4          ADD      r0,r0,r4,LSL #3
00139c  eb0800c0          ADD      r0,r8,r0,LSL #3
0013a0  f8301f44          LDRH     r1,[r0,#0x44]!
0013a4  f1010101          ADD      r1,r1,#1
0013a8  8001              STRH     r1,[r0,#0]
0013aa  e008              B        |L1.5054|
                  |L1.5036|
0013ac  e028              B        |L1.5120|
                  |L1.5038|
;;;2665   		else bps[i]._blok_cnt=0;
0013ae  eb040084          ADD      r0,r4,r4,LSL #2
0013b2  eb0000c4          ADD      r0,r0,r4,LSL #3
0013b6  eb0800c0          ADD      r0,r8,r0,LSL #3
0013ba  f8a07044          STRH     r7,[r0,#0x44]
                  |L1.5054|
;;;2666   		gran(&bps[i]._blok_cnt,0,50);
0013be  eb040084          ADD      r0,r4,r4,LSL #2
0013c2  eb0000c4          ADD      r0,r0,r4,LSL #3
0013c6  eb0805c0          ADD      r5,r8,r0,LSL #3
0013ca  f1050044          ADD      r0,r5,#0x44
0013ce  2232              MOVS     r2,#0x32
0013d0  2100              MOVS     r1,#0
0013d2  f7fffffe          BL       gran
;;;2667   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
0013d6  f9b50044          LDRSH    r0,[r5,#0x44]
0013da  2814              CMP      r0,#0x14
0013dc  dd01              BLE      |L1.5090|
0013de  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.5090|
;;;2668   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
0013e2  f8b60044          LDRH     r0,[r6,#0x44]  ; bps_on_mask
0013e6  ea190f00          TST      r9,r0
0013ea  d001              BEQ      |L1.5104|
0013ec  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.5104|
0013f0  f1040401          ADD      r4,r4,#1              ;2662
0013f4  b2e4              UXTB     r4,r4                 ;2662
                  |L1.5110|
0013f6  f9bb0000          LDRSH    r0,[r11,#0]           ;2662  ; NUMIST
0013fa  4284              CMP      r4,r0                 ;2662
0013fc  ddc3              BLE      |L1.4998|
0013fe  e08a              B        |L1.5398|
                  |L1.5120|
;;;2669   	     }
;;;2670   
;;;2671   	
;;;2672   /*
;;;2673   
;;;2674   	if(bps_all_off_cnt>20)
;;;2675   		{
;;;2676   		for(i=0;i<=NUMIST;i++)
;;;2677   			{
;;;2678   	     	bps[i]._flags_tu=1;
;;;2679   	     	}
;;;2680   		}
;;;2681   	else if(bps_mask_off_cnt>20)
;;;2682   		{
;;;2683   		for(i=0;i<=NUMIST;i++)
;;;2684   			{
;;;2685   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;2686   	     	}
;;;2687   		}	
;;;2688   		
;;;2689   	else if(bps_mask_on_off_cnt>20)
;;;2690   		{
;;;2691   		for(i=0;i<=NUMIST;i++)
;;;2692   			{
;;;2693   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;2694   			else bps[i]._flags_tu=0;
;;;2695   	     	}
;;;2696   		}
;;;2697   		
;;;2698   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;2699   		{
;;;2700   		for(i=0;i<=NUMIST;i++)
;;;2701   			{
;;;2702   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;2703   	     	}
;;;2704   		}
;;;2705   */										
;;;2706   	}
;;;2707   
;;;2708   
;;;2709   else if(b1Hz_sh)
001400  7d70              LDRB     r0,[r6,#0x15]  ; b1Hz_sh
001402  b3f0              CBZ      r0,|L1.5250|
;;;2710   	{
;;;2711   	ptr__=0;
001404  f04f0400          MOV      r4,#0
;;;2712        for(i=0;i<=NUMIST;i++)
001408  4621              MOV      r1,r4
00140a  f9bb0000          LDRSH    r0,[r11,#0]           ;2662
00140e  e00a              B        |L1.5158|
                  |L1.5136|
;;;2713   		{
;;;2714   	    bps[i]._flags_tu=1;
001410  eb010281          ADD      r2,r1,r1,LSL #2
001414  eb0202c1          ADD      r2,r2,r1,LSL #3
001418  eb0802c2          ADD      r2,r8,r2,LSL #3
00141c  f882a02c          STRB     r10,[r2,#0x2c]
001420  f1010101          ADD      r1,r1,#1              ;2712
001424  b2c9              UXTB     r1,r1                 ;2712
                  |L1.5158|
001426  4281              CMP      r1,r0                 ;2712
001428  ddf2              BLE      |L1.5136|
;;;2715   	    }	
;;;2716     	     
;;;2717     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
00142a  f04f0100          MOV      r1,#0
00142e  e022              B        |L1.5238|
                  |L1.5168|
;;;2718     		{
;;;2719   		char ii,iii;
;;;2720   
;;;2721   		ii=(char)NUMIST;
001430  b2c2              UXTB     r2,r0
;;;2722   		//if(ii<0)ii=0;
;;;2723   		if(ii>32)ii=32;
001432  2a20              CMP      r2,#0x20
001434  d901              BLS      |L1.5178|
001436  f04f0220          MOV      r2,#0x20
                  |L1.5178|
;;;2724   		iii=numOfForvardBps;
00143a  7eb3              LDRB     r3,[r6,#0x1a]  ; numOfForvardBps
;;;2725   		//if(iii<0)iii=0;
;;;2726   		if(iii>=NUMIST)iii=0;
00143c  4283              CMP      r3,r0
00143e  db01              BLT      |L1.5188|
001440  f04f0300          MOV      r3,#0
                  |L1.5188|
;;;2727   		iii+=i;
001444  440b              ADD      r3,r3,r1
001446  b2db              UXTB     r3,r3
;;;2728   		iii=iii%ii;
001448  fbb3f5f2          UDIV     r5,r3,r2
00144c  fb023215          MLS      r2,r2,r5,r3
;;;2729   		
;;;2730     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
001450  eb020382          ADD      r3,r2,r2,LSL #2
001454  eb0302c2          ADD      r2,r3,r2,LSL #3
001458  eb0802c2          ADD      r2,r8,r2,LSL #3
00145c  7893              LDRB     r3,[r2,#2]
00145e  2b02              CMP      r3,#2
001460  d001              BEQ      |L1.5222|
001462  2b01              CMP      r3,#1
001464  d104              BNE      |L1.5232|
                  |L1.5222|
;;;2731     	         	{
;;;2732     	         	bps[iii]._flags_tu=0;
001466  f882702c          STRB     r7,[r2,#0x2c]
;;;2733     	         	ptr__++;
00146a  f1040401          ADD      r4,r4,#1
00146e  b2e4              UXTB     r4,r4
                  |L1.5232|
001470  f1010101          ADD      r1,r1,#1              ;2717
001474  b2c9              UXTB     r1,r1                 ;2717
                  |L1.5238|
001476  4281              CMP      r1,r0                 ;2717
001478  da06              BGE      |L1.5256|
00147a  4a58              LDR      r2,|L1.5596|
00147c  f9b22000          LDRSH    r2,[r2,#0]            ;2717  ; num_necc
001480  e000              B        |L1.5252|
                  |L1.5250|
001482  e048              B        |L1.5398|
                  |L1.5252|
001484  4294              CMP      r4,r2                 ;2717
001486  dbd3              BLT      |L1.5168|
                  |L1.5256|
;;;2734     	         	}
;;;2735   			
;;;2736     	     }
;;;2737   	bps[numOfForvardBps_old]._flags_tu=0;
001488  7ef1              LDRB     r1,[r6,#0x1b]  ; numOfForvardBps_old
00148a  eb010281          ADD      r2,r1,r1,LSL #2
00148e  eb0201c1          ADD      r1,r2,r1,LSL #3
001492  eb0801c1          ADD      r1,r8,r1,LSL #3
001496  f881702c          STRB     r7,[r1,#0x2c]
;;;2738   
;;;2739   	if(main_1Hz_cnt<60)
00149a  4951              LDR      r1,|L1.5600|
00149c  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
0014a0  293c              CMP      r1,#0x3c
0014a2  da0f              BGE      |L1.5316|
;;;2740   		{
;;;2741        	for(i=0;i<=NUMIST;i++)
0014a4  f04f0100          MOV      r1,#0
0014a8  e00a              B        |L1.5312|
                  |L1.5290|
;;;2742   			{
;;;2743   	     	bps[i]._flags_tu=0;
0014aa  eb010281          ADD      r2,r1,r1,LSL #2
0014ae  eb0202c1          ADD      r2,r2,r1,LSL #3
0014b2  eb0802c2          ADD      r2,r8,r2,LSL #3
0014b6  f882702c          STRB     r7,[r2,#0x2c]
0014ba  f1010101          ADD      r1,r1,#1              ;2741
0014be  b2c9              UXTB     r1,r1                 ;2741
                  |L1.5312|
0014c0  4281              CMP      r1,r0                 ;2741
0014c2  ddf2              BLE      |L1.5290|
                  |L1.5316|
;;;2744   	     	}	
;;;2745   		}
;;;2746   	if(ipsBlckStat)
0014c4  4947              LDR      r1,|L1.5604|
0014c6  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0014c8  b179              CBZ      r1,|L1.5354|
;;;2747   		{
;;;2748        	for(i=0;i<=NUMIST;i++)
0014ca  f04f0100          MOV      r1,#0
0014ce  e00a              B        |L1.5350|
                  |L1.5328|
;;;2749   			{
;;;2750   	     	bps[i]._flags_tu=1;
0014d0  eb010281          ADD      r2,r1,r1,LSL #2
0014d4  eb0202c1          ADD      r2,r2,r1,LSL #3
0014d8  eb0802c2          ADD      r2,r8,r2,LSL #3
0014dc  f882a02c          STRB     r10,[r2,#0x2c]
0014e0  f1010101          ADD      r1,r1,#1              ;2748
0014e4  b2c9              UXTB     r1,r1                 ;2748
                  |L1.5350|
0014e6  4281              CMP      r1,r0                 ;2748
0014e8  ddf2              BLE      |L1.5328|
                  |L1.5354|
;;;2751   	     	}
;;;2752   		}
;;;2753   
;;;2754        for(i=0;i<=NUMIST;i++)
0014ea  f04f0100          MOV      r1,#0
;;;2755   		{
;;;2756   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0014ee  f06f0331          MVN      r3,#0x31
0014f2  e00e              B        |L1.5394|
                  |L1.5364|
0014f4  eb010281          ADD      r2,r1,r1,LSL #2
0014f8  eb0202c1          ADD      r2,r2,r1,LSL #3
0014fc  eb0802c2          ADD      r2,r8,r2,LSL #3
001500  f892402c          LDRB     r4,[r2,#0x2c]
001504  2c01              CMP      r4,#1
001506  d101              BNE      |L1.5388|
001508  f8a23054          STRH     r3,[r2,#0x54]
                  |L1.5388|
00150c  f1010101          ADD      r1,r1,#1              ;2754
001510  b2c9              UXTB     r1,r1                 ;2754
                  |L1.5394|
001512  4281              CMP      r1,r0                 ;2754
001514  ddee              BLE      |L1.5364|
                  |L1.5398|
;;;2757   	   	}	
;;;2758   		 
;;;2759     	}
;;;2760   
;;;2761   
;;;2762   for(i=0;i<NUMIST;i++)
001516  f04f0000          MOV      r0,#0
;;;2763        {
;;;2764        if(bps[i]._ist_blok_host_cnt!=0)
;;;2765           {
;;;2766           bps[i]._flags_tu=99;
00151a  f04f0463          MOV      r4,#0x63
00151e  f9bb3000          LDRSH    r3,[r11,#0]           ;2662
001522  e00f              B        |L1.5444|
                  |L1.5412|
001524  eb000180          ADD      r1,r0,r0,LSL #2       ;2764
001528  eb0101c0          ADD      r1,r1,r0,LSL #3       ;2764
00152c  eb0801c1          ADD      r1,r8,r1,LSL #3       ;2764
001530  6c0a              LDR      r2,[r1,#0x40]         ;2764
001532  b122              CBZ      r2,|L1.5438|
001534  f881402c          STRB     r4,[r1,#0x2c]
;;;2767   		bps[i]._ist_blok_host_cnt--;
001538  f1a20201          SUB      r2,r2,#1
00153c  640a              STR      r2,[r1,#0x40]
                  |L1.5438|
00153e  f1000001          ADD      r0,r0,#1              ;2762
001542  b2c0              UXTB     r0,r0                 ;2762
                  |L1.5444|
001544  4298              CMP      r0,r3                 ;2762
001546  dbed              BLT      |L1.5412|
;;;2768           }
;;;2769        }
;;;2770   
;;;2771   
;;;2772   
;;;2773   
;;;2774   b1Hz_sh=0;
001548  7577              STRB     r7,[r6,#0x15]
;;;2775   
;;;2776   
;;;2777   num_of_wrks_bps=0;
00154a  7477              STRB     r7,[r6,#0x11]
;;;2778   tempUS=0;
00154c  f04f0100          MOV      r1,#0
;;;2779   for(i=0;i<NUMIST;i++)
001550  4608              MOV      r0,r1
001552  e013              B        |L1.5500|
                  |L1.5460|
;;;2780   	{
;;;2781   	if(bps[i]._state==bsWRK)
001554  eb000280          ADD      r2,r0,r0,LSL #2
001558  eb0202c0          ADD      r2,r2,r0,LSL #3
00155c  eb0802c2          ADD      r2,r8,r2,LSL #3
001560  7894              LDRB     r4,[r2,#2]
001562  2c01              CMP      r4,#1
001564  d107              BNE      |L1.5494|
;;;2782   		{
;;;2783   		num_of_wrks_bps++;
001566  7c74              LDRB     r4,[r6,#0x11]  ; num_of_wrks_bps
001568  f1040401          ADD      r4,r4,#1
00156c  7474              STRB     r4,[r6,#0x11]
;;;2784   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
00156e  69d2              LDR      r2,[r2,#0x1c]
001570  428a              CMP      r2,r1
001572  dd00              BLE      |L1.5494|
001574  b291              UXTH     r1,r2
                  |L1.5494|
001576  f1000001          ADD      r0,r0,#1              ;2779
00157a  b2c0              UXTB     r0,r0                 ;2779
                  |L1.5500|
00157c  4298              CMP      r0,r3                 ;2779
00157e  dbe9              BLT      |L1.5460|
;;;2785   		}
;;;2786   	}
;;;2787   Ubpsmax=tempUS;
001580  87b1              STRH     r1,[r6,#0x3c]
;;;2788   
;;;2789   //bPARALLEL_ENOUG=0;
;;;2790   //bPARALLEL_NOT_ENOUG=1;
;;;2791   /*
;;;2792   for(i=0;i<NUMIST;i++)
;;;2793   	{
;;;2794   	if(bps[i]._Ti>=TSIGN)
;;;2795   		{
;;;2796   		bPARALLEL_ENOUG=1;
;;;2797   		}
;;;2798   	if(bps[i]._Ti>=(TSIGN-5))
;;;2799   		{
;;;2800   		bPARALLEL_NOT_ENOUG=0;
;;;2801   		}
;;;2802   	}
;;;2803   
;;;2804   if(bPARALLEL_ENOUG==1)
;;;2805   	{
;;;2806   	bPARALLEL=1;
;;;2807   	}
;;;2808   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
;;;2809   	{
;;;2810   	bPARALLEL=0;
;;;2811   	}*/
;;;2812   }
001582  e8bd9ff0          POP      {r4-r12,pc}
;;;2813   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;2820   //-----------------------------------------------
;;;2821   void powerAntiAliasingHndl(void)
001586  b570              PUSH     {r4-r6,lr}
;;;2822   {
;;;2823   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
001588  230a              MOVS     r3,#0xa
00158a  4c18              LDR      r4,|L1.5612|
00158c  4816              LDR      r0,|L1.5608|
;;;2824   	{
;;;2825   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;2826   	if(powerSummaryCnt>=10)
;;;2827   		{
;;;2828   		power_summary=power_summary_tempo;
;;;2829   		}
;;;2830   	}
;;;2831   else powerSummaryCnt=0;
00158e  2500              MOVS     r5,#0
001590  6822              LDR      r2,[r4,#0]            ;2823  ; power_summary_tempo_old
001592  6800              LDR      r0,[r0,#0]            ;2823  ; power_summary_tempo
001594  fbb2f6f3          UDIV     r6,r2,r3              ;2823
001598  fbb0f1f3          UDIV     r1,r0,r3              ;2823
00159c  4a14              LDR      r2,|L1.5616|
00159e  42b1              CMP      r1,r6                 ;2823
0015a0  d12a              BNE      |L1.5624|
0015a2  7811              LDRB     r1,[r2,#0]            ;2825  ; powerSummaryCnt
0015a4  290f              CMP      r1,#0xf               ;2825
0015a6  d202              BCS      |L1.5550|
0015a8  f1010101          ADD      r1,r1,#1              ;2825
0015ac  7011              STRB     r1,[r2,#0]            ;2825
                  |L1.5550|
0015ae  7811              LDRB     r1,[r2,#0]            ;2826  ; powerSummaryCnt
0015b0  290a              CMP      r1,#0xa               ;2826
0015b2  d322              BCC      |L1.5626|
0015b4  490f              LDR      r1,|L1.5620|
0015b6  6008              STR      r0,[r1,#0]            ;2828  ; power_summary
0015b8  e01f              B        |L1.5626|
0015ba  0000              DCW      0x0000
                  |L1.5564|
                          DCD      0x4002c000
                  |L1.5568|
                          DCD      0xfff000ff
                  |L1.5572|
                          DCD      0x2009c000
                  |L1.5576|
                          DCD      rele_av_flags
                  |L1.5580|
                          DCD      mess_data
                  |L1.5584|
                          DCD      ||area_number.26||
                  |L1.5588|
                          DCD      bps
                  |L1.5592|
                          DCD      NUMIST
                  |L1.5596|
                          DCD      num_necc
                  |L1.5600|
                          DCD      main_1Hz_cnt
                  |L1.5604|
                          DCD      ipsBlckStat
                  |L1.5608|
                          DCD      power_summary_tempo
                  |L1.5612|
                          DCD      power_summary_tempo_old
                  |L1.5616|
                          DCD      powerSummaryCnt
                  |L1.5620|
                          DCD      power_summary
                  |L1.5624|
0015f8  7015              STRB     r5,[r2,#0]
                  |L1.5626|
;;;2832   power_summary_tempo_old=power_summary_tempo;
0015fa  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;2833   
;;;2834   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
0015fc  48ff              LDR      r0,|L1.6652|
0015fe  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
001602  fbb0f1f3          UDIV     r1,r0,r3
001606  4cfe              LDR      r4,|L1.6656|
001608  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00160c  fbb2f3f3          UDIV     r3,r2,r3
;;;2835   	{
;;;2836   	if(powerCurrentCnt<15)powerCurrentCnt++;
001610  4afc              LDR      r2,|L1.6660|
001612  4299              CMP      r1,r3                 ;2834
001614  d10b              BNE      |L1.5678|
001616  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
001618  290f              CMP      r1,#0xf
00161a  d202              BCS      |L1.5666|
00161c  f1010101          ADD      r1,r1,#1
001620  7011              STRB     r1,[r2,#0]
                  |L1.5666|
;;;2837   	if(powerCurrentCnt>=10)
001622  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
001624  290a              CMP      r1,#0xa
001626  d303              BCC      |L1.5680|
;;;2838   		{
;;;2839   		power_current=power_current_tempo;
001628  49f7              LDR      r1,|L1.6664|
00162a  8008              STRH     r0,[r1,#0]
00162c  e000              B        |L1.5680|
                  |L1.5678|
;;;2840   		}
;;;2841   	}
;;;2842   else powerCurrentCnt=0;
00162e  7015              STRB     r5,[r2,#0]
                  |L1.5680|
;;;2843   power_current_tempo_old=power_current_tempo;
001630  8020              STRH     r0,[r4,#0]
;;;2844   }
001632  bd70              POP      {r4-r6,pc}
;;;2845   
                          ENDP

                  ips_current_average_hndl PROC
;;;2846   //-----------------------------------------------
;;;2847   void ips_current_average_hndl(void)
001634  e92d43f0          PUSH     {r4-r9,lr}
;;;2848   {
001638  b085              SUB      sp,sp,#0x14
;;;2849   if(++ica_timer_cnt>=10)
00163a  4cf4              LDR      r4,|L1.6668|
;;;2850   	{
;;;2851   	ica_timer_cnt=0;
;;;2852   	ica_plazma[0]++;
;;;2853   
;;;2854   	ica_my_current=bps_I;
;;;2855   
;;;2856   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
00163c  4ef4              LDR      r6,|L1.6672|
00163e  2500              MOVS     r5,#0                 ;2851
001640  7820              LDRB     r0,[r4,#0]            ;2849  ; ica_timer_cnt
001642  1c40              ADDS     r0,r0,#1              ;2849
001644  b2c0              UXTB     r0,r0                 ;2849
001646  7020              STRB     r0,[r4,#0]            ;2849
001648  280a              CMP      r0,#0xa               ;2849
00164a  d340              BCC      |L1.5838|
00164c  7025              STRB     r5,[r4,#0]            ;2851
00164e  f8dfc3c4          LDR      r12,|L1.6676|
001652  f89c0000          LDRB     r0,[r12,#0]           ;2852  ; ica_plazma
001656  f1000001          ADD      r0,r0,#1              ;2852
00165a  f88c0000          STRB     r0,[r12,#0]           ;2852
00165e  48ee              LDR      r0,|L1.6680|
001660  49ee              LDR      r1,|L1.6684|
001662  f9b00000          LDRSH    r0,[r0,#0]            ;2854  ; bps_I
001666  8008              STRH     r0,[r1,#0]            ;2854
001668  49ed              LDR      r1,|L1.6688|
;;;2857   		{
;;;2858   		ica_plazma[1]++;
;;;2859   		ica_u_necc--;
00166a  f8df83b8          LDR      r8,|L1.6692|
00166e  4662              MOV      r2,r12                ;2852
001670  4637              MOV      r7,r6                 ;2856
001672  f9b11000          LDRSH    r1,[r1,#0]            ;2856  ; ica_your_current
001676  7852              LDRB     r2,[r2,#1]            ;2858
001678  f9b83000          LDRSH    r3,[r8,#0]
00167c  f9b77000          LDRSH    r7,[r7,#0]            ;2856
001680  4288              CMP      r0,r1                 ;2856
001682  dd06              BLE      |L1.5778|
001684  eba00901          SUB      r9,r0,r1              ;2856
001688  f1b90f0a          CMP      r9,#0xa               ;2856
00168c  db01              BLT      |L1.5778|
00168e  2f01              CMP      r7,#1                 ;2856
001690  d007              BEQ      |L1.5794|
                  |L1.5778|
;;;2860   		}
;;;2861   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
001692  4288              CMP      r0,r1
001694  da16              BGE      |L1.5828|
001696  1a08              SUBS     r0,r1,r0
001698  280a              CMP      r0,#0xa
00169a  db13              BLT      |L1.5828|
00169c  2f01              CMP      r7,#1
00169e  d009              BEQ      |L1.5812|
0016a0  e010              B        |L1.5828|
                  |L1.5794|
0016a2  f1020201          ADD      r2,r2,#1              ;2858
0016a6  f88c2001          STRB     r2,[r12,#1]           ;2858
0016aa  f1a30301          SUB      r3,r3,#1              ;2859
0016ae  f8a83000          STRH     r3,[r8,#0]            ;2859
0016b2  e007              B        |L1.5828|
                  |L1.5812|
;;;2862   		{
;;;2863   		ica_plazma[1]--;
0016b4  f1a20201          SUB      r2,r2,#1
0016b8  f88c2001          STRB     r2,[r12,#1]
;;;2864   		ica_u_necc++;
0016bc  f1030301          ADD      r3,r3,#1
0016c0  f8a83000          STRH     r3,[r8,#0]
                  |L1.5828|
;;;2865   		}
;;;2866   	gran(&ica_u_necc,-20,20);
0016c4  2214              MOVS     r2,#0x14
0016c6  4251              RSBS     r1,r2,#0
0016c8  48d6              LDR      r0,|L1.6692|
0016ca  f7fffffe          BL       gran
                  |L1.5838|
;;;2867   	}
;;;2868   
;;;2869   if((ica_timer_cnt==8)&&(ICA_EN==1))
0016ce  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;2870   	{
;;;2871   	char modbus_buff[20],i;
;;;2872   	short crc_temp;
;;;2873   
;;;2874   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
0016d0  f8df8354          LDR      r8,|L1.6696|
;;;2875   	modbus_buff[1] = 4;
;;;2876   	modbus_buff[2] = 0;
;;;2877   	modbus_buff[3] = 2;
;;;2878   	modbus_buff[4] = 0;	
;;;2879   	modbus_buff[5] = 1;
;;;2880   
;;;2881   	crc_temp= CRC16_2(modbus_buff,6);
;;;2882   
;;;2883   	modbus_buff[6]= (char)crc_temp;
;;;2884   	modbus_buff[7]= (char)(crc_temp>>8);
;;;2885   
;;;2886   	if(ICA_CH==0)
0016d4  4fd5              LDR      r7,|L1.6700|
0016d6  2808              CMP      r0,#8                 ;2869
0016d8  d125              BNE      |L1.5926|
0016da  8830              LDRH     r0,[r6,#0]            ;2869  ; ICA_EN
0016dc  2801              CMP      r0,#1                 ;2869
0016de  d122              BNE      |L1.5926|
0016e0  f8b80000          LDRH     r0,[r8,#0]            ;2874  ; ICA_MODBUS_ADDRESS
0016e4  f88d0000          STRB     r0,[sp,#0]            ;2874
0016e8  f04f0004          MOV      r0,#4                 ;2875
0016ec  f88d0001          STRB     r0,[sp,#1]            ;2875
0016f0  f88d5002          STRB     r5,[sp,#2]            ;2876
0016f4  f04f0002          MOV      r0,#2                 ;2877
0016f8  f88d0003          STRB     r0,[sp,#3]            ;2877
0016fc  f88d5004          STRB     r5,[sp,#4]            ;2878
001700  f04f0001          MOV      r0,#1                 ;2879
001704  f88d0005          STRB     r0,[sp,#5]            ;2879
001708  f04f0106          MOV      r1,#6                 ;2881
00170c  4668              MOV      r0,sp                 ;2881
00170e  f7fffffe          BL       CRC16_2
001712  f88d0006          STRB     r0,[sp,#6]            ;2883
001716  ea4f2020          ASR      r0,r0,#8              ;2884
00171a  f88d0007          STRB     r0,[sp,#7]            ;2884
00171e  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
001722  b3e8              CBZ      r0,|L1.6048|
;;;2887   		{
;;;2888   		for (i=0;i<8;i++)
;;;2889   			{
;;;2890   			putchar_sc16is700(modbus_buff[i]);
;;;2891   			}
;;;2892   		}
;;;2893   	else if(ICA_CH==1)
001724  2801              CMP      r0,#1
                  |L1.5926|
;;;2894   		{
;;;2895   	/*	static U8 rem_IP[4];
;;;2896   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
;;;2897   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
;;;2898   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
;;;2899   		rem_IP[3]=ICA_MODBUS_TCP_IP4;*/
;;;2900     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;2901     		if (tcp_soc_avg != 0) 
;;;2902   			{
;;;2903       		
;;;2904   			//tcp_connect_stat=0;
;;;2905       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;2906   			/*while(!tcp_connect_stat)
;;;2907   				{
;;;2908   				}*/
;;;2909   			//delay_us(500);
;;;2910   			//tcp_close(tcp_soc_avg);
;;;2911   
;;;2912   			}
;;;2913   		}
;;;2914   	}
;;;2915   
;;;2916   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;2917   	{
;;;2918   	//if(tcp_connect_stat)
;;;2919   		{
;;;2920   		//tcp_close(tcp_soc_avg);
;;;2921   		//tcp_connect_stat=3;
;;;2922   		}
;;;2923   	}
;;;2924   
;;;2925   if((main_kb_cnt==(TBAT*60)-21)&&(ICA_EN==1))
001726  48c2              LDR      r0,|L1.6704|
001728  f06f0214          MVN      r2,#0x14
00172c  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
001730  ebc01100          RSB      r1,r0,r0,LSL #4
001734  eb020181          ADD      r1,r2,r1,LSL #2
001738  4abe              LDR      r2,|L1.6708|
00173a  f9b22042          LDRSH    r2,[r2,#0x42]  ; main_kb_cnt
00173e  4291              CMP      r1,r2
001740  d134              BNE      |L1.6060|
001742  8831              LDRH     r1,[r6,#0]  ; ICA_EN
001744  2901              CMP      r1,#1
001746  d131              BNE      |L1.6060|
;;;2926   	{
;;;2927   	char modbus_buff[20],i;
;;;2928   	short crc_temp;
;;;2929   
;;;2930   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
001748  f8b81000          LDRH     r1,[r8,#0]  ; ICA_MODBUS_ADDRESS
00174c  f88d1000          STRB     r1,[sp,#0]
;;;2931   	modbus_buff[1] = 6;
001750  f04f0106          MOV      r1,#6
001754  f88d1001          STRB     r1,[sp,#1]
;;;2932   	modbus_buff[2] = 0;
001758  f88d5002          STRB     r5,[sp,#2]
;;;2933   	modbus_buff[3] = 30;
00175c  f04f011e          MOV      r1,#0x1e
001760  f88d1003          STRB     r1,[sp,#3]
;;;2934   	modbus_buff[4] = (char)(TBAT/256);	
001764  ea4f71e0          ASR      r1,r0,#31
001768  eb006111          ADD      r1,r0,r1,LSR #24
00176c  ea4f2221          ASR      r2,r1,#8
001770  f88d2004          STRB     r2,[sp,#4]
;;;2935   	modbus_buff[5] = (char)(TBAT%256);
001774  f88d0005          STRB     r0,[sp,#5]
;;;2936   
;;;2937   	crc_temp= CRC16_2(modbus_buff,6);
001778  f04f0106          MOV      r1,#6
00177c  4668              MOV      r0,sp
00177e  f7fffffe          BL       CRC16_2
;;;2938   
;;;2939   	modbus_buff[6]= (char)crc_temp;
001782  f88d0006          STRB     r0,[sp,#6]
;;;2940   	modbus_buff[7]= (char)(crc_temp>>8);
001786  ea4f2020          ASR      r0,r0,#8
00178a  f88d0007          STRB     r0,[sp,#7]
;;;2941   
;;;2942   	if(ICA_CH==0)
00178e  8838              LDRH     r0,[r7,#0]  ; ICA_CH
001790  2800              CMP      r0,#0
001792  d10b              BNE      |L1.6060|
;;;2943   		{
;;;2944   		for (i=0;i<8;i++)
001794  4604              MOV      r4,r0
001796  466d              MOV      r5,sp                 ;2927
                  |L1.6040|
;;;2945   			{
;;;2946   			putchar_sc16is700(modbus_buff[i]);
001798  5d28              LDRB     r0,[r5,r4]
00179a  f7fffffe          BL       putchar_sc16is700
00179e  e000              B        |L1.6050|
                  |L1.6048|
0017a0  e006              B        |L1.6064|
                  |L1.6050|
0017a2  f1040401          ADD      r4,r4,#1              ;2944
0017a6  b2e4              UXTB     r4,r4                 ;2944
0017a8  2c08              CMP      r4,#8                 ;2944
0017aa  d3f5              BCC      |L1.6040|
                  |L1.6060|
;;;2947   			}
;;;2948   		}
;;;2949   	}
;;;2950   
;;;2951   }
0017ac  b005              ADD      sp,sp,#0x14
0017ae  e415              B        |L1.4060|
                  |L1.6064|
0017b0  f04f0400          MOV      r4,#0                 ;2888
0017b4  46e9              MOV      r9,sp                 ;2871
                  |L1.6070|
0017b6  f8190004          LDRB     r0,[r9,r4]            ;2890
0017ba  f7fffffe          BL       putchar_sc16is700
0017be  f1040401          ADD      r4,r4,#1              ;2888
0017c2  b2e4              UXTB     r4,r4                 ;2888
0017c4  2c08              CMP      r4,#8                 ;2888
0017c6  d3f6              BCC      |L1.6070|
0017c8  e7ad              B        |L1.5926|
;;;2952   
                          ENDP

                  bps_drv PROC
;;;3050   //-----------------------------------------------
;;;3051   void bps_drv(char in)
0017ca  e92d41f0          PUSH     {r4-r8,lr}
;;;3052   {
0017ce  4606              MOV      r6,r0
;;;3053   char temp;
;;;3054   
;;;3055   if (bps[in]._device!=dSRC) return;
0017d0  eb060086          ADD      r0,r6,r6,LSL #2
0017d4  4998              LDR      r1,|L1.6712|
0017d6  eb0000c6          ADD      r0,r0,r6,LSL #3
0017da  f8112030          LDRB     r2,[r1,r0,LSL #3]
0017de  2a03              CMP      r2,#3
0017e0  d177              BNE      |L1.6354|
;;;3056   temp=bps[in]._flags_tm;
0017e2  eb0104c0          ADD      r4,r1,r0,LSL #3
0017e6  f8945046          LDRB     r5,[r4,#0x46]
;;;3057   if(temp&(1<<AV_T))
0017ea  07a8              LSLS     r0,r5,#30
0017ec  d517              BPL      |L1.6174|
;;;3058   	{
;;;3059   	if(bps[in]._temp_av_cnt<1200) 
0017ee  f9b4104a          LDRSH    r1,[r4,#0x4a]
0017f2  f44f6096          MOV      r0,#0x4b0
0017f6  4281              CMP      r1,r0
0017f8  da22              BGE      |L1.6208|
;;;3060   		{
;;;3061   		bps[in]._temp_av_cnt++;
0017fa  f1010101          ADD      r1,r1,#1
0017fe  b209              SXTH     r1,r1
001800  f8a4104a          STRH     r1,[r4,#0x4a]
;;;3062   		if(bps[in]._temp_av_cnt>=1200)
001804  4281              CMP      r1,r0
001806  db1b              BLT      |L1.6208|
;;;3063   			{
;;;3064   			bps[in]._temp_av_cnt=1200;
001808  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3065   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
00180c  7860              LDRB     r0,[r4,#1]
00180e  07c0              LSLS     r0,r0,#31
001810  d116              BNE      |L1.6208|
001812  2201              MOVS     r2,#1
001814  2100              MOVS     r1,#0
001816  4630              MOV      r0,r6
001818  f7fffffe          BL       avar_bps_hndl
00181c  e010              B        |L1.6208|
                  |L1.6174|
;;;3066   			}
;;;3067   		}
;;;3068   	}
;;;3069   
;;;3070   else if(!(temp&(1<<AV_T)))
;;;3071   	{
;;;3072   	if(bps[in]._temp_av_cnt) 
00181e  f9b4104a          LDRSH    r1,[r4,#0x4a]
001822  b169              CBZ      r1,|L1.6208|
;;;3073   		{
;;;3074   		bps[in]._temp_av_cnt--;
001824  f1a10101          SUB      r1,r1,#1
001828  b208              SXTH     r0,r1
00182a  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3075   		if(!bps[in]._temp_av_cnt)
00182e  b938              CBNZ     r0,|L1.6208|
;;;3076   			{
;;;3077   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
001830  7860              LDRB     r0,[r4,#1]
001832  07c0              LSLS     r0,r0,#31
001834  d004              BEQ      |L1.6208|
001836  2200              MOVS     r2,#0
001838  4611              MOV      r1,r2
00183a  4630              MOV      r0,r6
00183c  f7fffffe          BL       avar_bps_hndl
                  |L1.6208|
;;;3078   			}
;;;3079   		} 	
;;;3080   
;;;3081   	}
;;;3082   
;;;3083   if((temp&(1<<AVUMAX)))
001840  0729              LSLS     r1,r5,#28
;;;3084   	{
;;;3085   	if(bps[in]._umax_av_cnt<10) 
;;;3086   		{
;;;3087   		bps[in]._umax_av_cnt++;
;;;3088   		if(bps[in]._umax_av_cnt>=10)
;;;3089   			{ 
;;;3090   			bps[in]._umax_av_cnt=10;
001842  f04f070a          MOV      r7,#0xa
001846  f04f0000          MOV      r0,#0                 ;3065
00184a  d515              BPL      |L1.6264|
00184c  f9b4004c          LDRSH    r0,[r4,#0x4c]         ;3085
001850  280a              CMP      r0,#0xa               ;3085
001852  da26              BGE      |L1.6306|
001854  f1000001          ADD      r0,r0,#1              ;3087
001858  b200              SXTH     r0,r0                 ;3087
00185a  f8a4004c          STRH     r0,[r4,#0x4c]         ;3087
00185e  280a              CMP      r0,#0xa               ;3088
001860  db1f              BLT      |L1.6306|
001862  f8a4704c          STRH     r7,[r4,#0x4c]
;;;3091   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
001866  7860              LDRB     r0,[r4,#1]
001868  0780              LSLS     r0,r0,#30
00186a  d41a              BMI      |L1.6306|
00186c  2201              MOVS     r2,#1
00186e  4611              MOV      r1,r2
001870  4630              MOV      r0,r6
001872  f7fffffe          BL       avar_bps_hndl
001876  e014              B        |L1.6306|
                  |L1.6264|
;;;3092   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;3093   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3094   				{
;;;3095   				apv_cnt[in,0]=APV_INIT;
;;;3096   				apv_cnt[in,1]=APV_INIT;
;;;3097   				apv_cnt[in,2]=APV_INIT;
;;;3098   				apv_flags[in]=afOFF;
;;;3099   				}				*/
;;;3100   						
;;;3101   			}
;;;3102   		} 
;;;3103   	}		
;;;3104   else if(!(temp&(1<<AVUMAX)))
;;;3105   	{
;;;3106   	if(bps[in]._umax_av_cnt>0) 
001878  f9b4104c          LDRSH    r1,[r4,#0x4c]
00187c  2900              CMP      r1,#0
00187e  dd0d              BLE      |L1.6300|
;;;3107   		{
;;;3108   		bps[in]._umax_av_cnt--;
001880  f1a10101          SUB      r1,r1,#1
001884  b208              SXTH     r0,r1
001886  f8a4004c          STRH     r0,[r4,#0x4c]
;;;3109   		if(bps[in]._umax_av_cnt==0)
00188a  b950              CBNZ     r0,|L1.6306|
;;;3110   			{
;;;3111   			bps[in]._umax_av_cnt=0;
;;;3112   			avar_bps_hndl(in,1,0);
00188c  f04f0200          MOV      r2,#0
001890  f04f0101          MOV      r1,#1
001894  4630              MOV      r0,r6
001896  f7fffffe          BL       avar_bps_hndl
00189a  e002              B        |L1.6306|
                  |L1.6300|
;;;3113   	 //		apv_cnt[in,0]=0;
;;;3114   	//		apv_cnt[in,1]=0;
;;;3115   	 //		apv_cnt[in,2]=0;			
;;;3116   			}
;;;3117   		}
;;;3118   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00189c  da01              BGE      |L1.6306|
00189e  f8a4004c          STRH     r0,[r4,#0x4c]
                  |L1.6306|
;;;3119   	}
;;;3120   
;;;3121   if(temp&(1<<AVUMIN))
0018a2  06e8              LSLS     r0,r5,#27
0018a4  d516              BPL      |L1.6356|
;;;3122   	{
;;;3123   	if(bps[in]._umin_av_cnt<10) 
0018a6  f9b4004e          LDRSH    r0,[r4,#0x4e]
0018aa  280a              CMP      r0,#0xa
0018ac  da20              BGE      |L1.6384|
;;;3124   		{
;;;3125   		bps[in]._umin_av_cnt++;
0018ae  f1000001          ADD      r0,r0,#1
0018b2  b200              SXTH     r0,r0
0018b4  f8a4004e          STRH     r0,[r4,#0x4e]
;;;3126   		if(bps[in]._umin_av_cnt>=10)
0018b8  280a              CMP      r0,#0xa
0018ba  db19              BLT      |L1.6384|
;;;3127   			{ 
;;;3128   			bps[in]._umin_av_cnt=10;
0018bc  f8a4704e          STRH     r7,[r4,#0x4e]
;;;3129   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
0018c0  7860              LDRB     r0,[r4,#1]
0018c2  0740              LSLS     r0,r0,#29
0018c4  d414              BMI      |L1.6384|
0018c6  2201              MOVS     r2,#1
0018c8  2102              MOVS     r1,#2
0018ca  4630              MOV      r0,r6
0018cc  f7fffffe          BL       avar_bps_hndl
0018d0  e00e              B        |L1.6384|
                  |L1.6354|
0018d2  e046              B        |L1.6498|
                  |L1.6356|
;;;3130   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;3131   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3132   				{
;;;3133   				apv_cnt[in,0]=APV_INIT;
;;;3134   				apv_cnt[in,1]=APV_INIT;
;;;3135   				apv_cnt[in,2]=APV_INIT;
;;;3136   				apv_flags[in]=afOFF;
;;;3137   				}*/				
;;;3138   			}
;;;3139   		} 
;;;3140   	}	
;;;3141   	
;;;3142   else if(!(temp&(1<<AVUMIN)))
;;;3143   	{
;;;3144   	if(bps[in]._umin_av_cnt) 
0018d4  f9b4004e          LDRSH    r0,[r4,#0x4e]
0018d8  b150              CBZ      r0,|L1.6384|
;;;3145   		{
;;;3146   		bps[in]._umin_av_cnt--;
0018da  f1a00001          SUB      r0,r0,#1
0018de  b201              SXTH     r1,r0
0018e0  f8a4104e          STRH     r1,[r4,#0x4e]
;;;3147   		if(bps[in]._umin_av_cnt==0)
0018e4  b921              CBNZ     r1,|L1.6384|
;;;3148   			{
;;;3149   			bps[in]._umin_av_cnt=0;
;;;3150   			avar_bps_hndl(in,2,0);
0018e6  2200              MOVS     r2,#0
0018e8  2102              MOVS     r1,#2
0018ea  4630              MOV      r0,r6
0018ec  f7fffffe          BL       avar_bps_hndl
                  |L1.6384|
;;;3151   		//	apv_cnt[in,0]=0;
;;;3152   		//	apv_cnt[in,1]=0;
;;;3153   		//	apv_cnt[in,2]=0;
;;;3154   			}
;;;3155   		}
;;;3156   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;3157   	}
;;;3158   
;;;3159   //bps[in]._state=bsOFF;
;;;3160   
;;;3161   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0018f0  7860              LDRB     r0,[r4,#1]
0018f2  0700              LSLS     r0,r0,#28
0018f4  d003              BEQ      |L1.6398|
0018f6  f04f0004          MOV      r0,#4
0018fa  70a0              STRB     r0,[r4,#2]
0018fc  e017              B        |L1.6446|
                  |L1.6398|
;;;3162   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0018fe  484f              LDR      r0,|L1.6716|
001900  7800              LDRB     r0,[r0,#0]  ; net_av
001902  b130              CBZ      r0,|L1.6418|
001904  78e0              LDRB     r0,[r4,#3]
001906  2814              CMP      r0,#0x14
001908  d903              BLS      |L1.6418|
;;;3163   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
00190a  f04f0005          MOV      r0,#5
00190e  70a0              STRB     r0,[r4,#2]
001910  e00d              B        |L1.6446|
                  |L1.6418|
;;;3164   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
001912  f8940046          LDRB     r0,[r4,#0x46]
001916  0680              LSLS     r0,r0,#26
001918  d503              BPL      |L1.6434|
00191a  f04f0002          MOV      r0,#2
00191e  70a0              STRB     r0,[r4,#2]
001920  e005              B        |L1.6446|
                  |L1.6434|
;;;3165   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
001922  78e0              LDRB     r0,[r4,#3]
001924  2814              CMP      r0,#0x14
001926  d202              BCS      |L1.6446|
001928  f04f0001          MOV      r0,#1
00192c  70a0              STRB     r0,[r4,#2]
                  |L1.6446|
;;;3166   
;;;3167   
;;;3168   
;;;3169   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;3170   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;3171   //else bps[0]._state=ssNOT;
;;;3172   
;;;3173   //bps[in]._is_ready=0;
;;;3174   //bps[in]._is_wrk=0;
;;;3175   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;3176   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напр€жение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;3177   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напр€жение
;;;3178   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;3179   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;3180   //	{
;;;3181   //	bps[in]._flags_bp='B';// заблокирован
;;;3182   //	bps[in]._is_ready=1;
;;;3183   //	}
;;;3184   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;3185   //     {
;;;3186   //     bps[in]._flags_bp='W';// работает
;;;3187   //     bps[in]._is_ready=1;
;;;3188   //     bps[in]._is_wrk=1;
;;;3189        
;;;3190   //     }
;;;3191   //else bps[in]._is_ready=1;     
;;;3192   
;;;3193   
;;;3194   
;;;3195   
;;;3196   
;;;3197   /*
;;;3198   bps[in]._flags_tu&=BIN8(11111110);
;;;3199   if(bps[in]._ist_blok_cnt)
;;;3200   	{
;;;3201   	bps[in]._ist_blok_cnt--;
;;;3202   	bps[in]._flags_tu|=BIN8(1);
;;;3203   	}
;;;3204   
;;;3205   	   */ 
;;;3206   
;;;3207   //ѕересброс Ѕѕ—а при потере св€зи
;;;3208   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
00192e  78e0              LDRB     r0,[r4,#3]
001930  280a              CMP      r0,#0xa
001932  d306              BCC      |L1.6466|
001934  f894002c          LDRB     r0,[r4,#0x2c]
001938  f0400080          ORR      r0,r0,#0x80
00193c  f884002c          STRB     r0,[r4,#0x2c]
001940  e005              B        |L1.6478|
                  |L1.6466|
;;;3209   else bps[in]._flags_tu&=BIN8(1111111);
001942  f894002c          LDRB     r0,[r4,#0x2c]
001946  f000007f          AND      r0,r0,#0x7f
00194a  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.6478|
;;;3210   	
;;;3211   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
00194e  4939              LDR      r1,|L1.6708|
001950  f9b40054          LDRSH    r0,[r4,#0x54]
001954  f9b1101e          LDRSH    r1,[r1,#0x1e]  ; cntrl_stat
001958  4408              ADD      r0,r0,r1
00195a  6360              STR      r0,[r4,#0x34]
;;;3212   bps[in]._vol_i=1000; 
00195c  f44f707a          MOV      r0,#0x3e8
001960  63a0              STR      r0,[r4,#0x38]
                  |L1.6498|
;;;3213   }
001962  e8bd81f0          POP      {r4-r8,pc}
;;;3214   
                          ENDP

                  avt_hndl PROC
;;;3215   //-----------------------------------------------
;;;3216   void avt_hndl(void)
001966  b570              PUSH     {r4-r6,lr}
;;;3217   {
;;;3218   char i;
;;;3219   for(i=0;i<12;i++)
001968  f04f0000          MOV      r0,#0
;;;3220   	{
;;;3221   	if(eb2_data_short[6]&(1<<i))
00196c  4934              LDR      r1,|L1.6720|
;;;3222   		{
;;;3223   		avt_stat[i]=avtON;
00196e  4d35              LDR      r5,|L1.6724|
001970  f04f0401          MOV      r4,#1                 ;3221
001974  f9b1200c          LDRSH    r2,[r1,#0xc]          ;3221
001978  4603              MOV      r3,r0                 ;3219
                  |L1.6522|
00197a  fa04f100          LSL      r1,r4,r0              ;3221
00197e  420a              TST      r2,r1                 ;3221
001980  d001              BEQ      |L1.6534|
001982  542c              STRB     r4,[r5,r0]
001984  e000              B        |L1.6536|
                  |L1.6534|
;;;3224   		}
;;;3225   	else avt_stat[i]=avtOFF;
001986  542b              STRB     r3,[r5,r0]
                  |L1.6536|
001988  f1000001          ADD      r0,r0,#1              ;3219
00198c  b2c0              UXTB     r0,r0                 ;3219
00198e  280c              CMP      r0,#0xc               ;3219
001990  d3f3              BCC      |L1.6522|
;;;3226   	}
;;;3227   
;;;3228   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
001992  4e2d              LDR      r6,|L1.6728|
001994  7828              LDRB     r0,[r5,#0]  ; avt_stat
001996  4c2d              LDR      r4,|L1.6732|
001998  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
00199a  4281              CMP      r1,r0
00199c  d00b              BEQ      |L1.6582|
00199e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0019a2  2901              CMP      r1,#1
0019a4  db07              BLT      |L1.6582|
;;;3229   	{
;;;3230   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
0019a6  2801              CMP      r0,#1
0019a8  d070              BEQ      |L1.6796|
;;;3231   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
0019aa  2300              MOVS     r3,#0
0019ac  2201              MOVS     r2,#1
0019ae  210b              MOVS     r1,#0xb
0019b0  a027              ADR      r0,|L1.6736|
0019b2  f7fffffe          BL       snmp_trap_send
                  |L1.6582|
;;;3232   	}
;;;3233   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
0019b6  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
0019b8  7868              LDRB     r0,[r5,#1]  ; avt_stat
0019ba  4281              CMP      r1,r0
0019bc  d00b              BEQ      |L1.6614|
0019be  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0019c2  2902              CMP      r1,#2
0019c4  db07              BLT      |L1.6614|
;;;3234   	{
;;;3235   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
0019c6  2801              CMP      r0,#1
0019c8  d07e              BEQ      |L1.6856|
;;;3236   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
0019ca  2300              MOVS     r3,#0
0019cc  2202              MOVS     r2,#2
0019ce  210b              MOVS     r1,#0xb
0019d0  a024              ADR      r0,|L1.6756|
0019d2  f7fffffe          BL       snmp_trap_send
                  |L1.6614|
;;;3237   	}
;;;3238   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
0019d6  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
0019d8  78a8              LDRB     r0,[r5,#2]  ; avt_stat
0019da  4281              CMP      r1,r0
0019dc  d00b              BEQ      |L1.6646|
0019de  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0019e2  2903              CMP      r1,#3
0019e4  db07              BLT      |L1.6646|
;;;3239   	{
;;;3240   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
0019e6  2801              CMP      r0,#1
0019e8  d06f              BEQ      |L1.6858|
;;;3241   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
0019ea  2300              MOVS     r3,#0
0019ec  2203              MOVS     r2,#3
0019ee  210b              MOVS     r1,#0xb
0019f0  a021              ADR      r0,|L1.6776|
0019f2  f7fffffe          BL       snmp_trap_send
                  |L1.6646|
;;;3242   	}
;;;3243   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0019f6  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0019f8  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0019fa  e048              B        |L1.6798|
                  |L1.6652|
                          DCD      power_current_tempo
                  |L1.6656|
                          DCD      power_current_tempo_old
                  |L1.6660|
                          DCD      powerCurrentCnt
                  |L1.6664|
                          DCD      power_current
                  |L1.6668|
                          DCD      ica_timer_cnt
                  |L1.6672|
                          DCD      ICA_EN
                  |L1.6676|
                          DCD      ica_plazma
                  |L1.6680|
                          DCD      bps_I
                  |L1.6684|
                          DCD      ica_my_current
                  |L1.6688|
                          DCD      ica_your_current
                  |L1.6692|
                          DCD      ica_u_necc
                  |L1.6696|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.6700|
                          DCD      ICA_CH
                  |L1.6704|
                          DCD      TBAT
                  |L1.6708|
                          DCD      ||area_number.26||
                  |L1.6712|
                          DCD      bps
                  |L1.6716|
                          DCD      net_av
                  |L1.6720|
                          DCD      eb2_data_short
                  |L1.6724|
                          DCD      avt_stat
                  |L1.6728|
                          DCD      avt_stat_old
                  |L1.6732|
                          DCD      NUMAVT
                  |L1.6736|
001a50  4176746f          DCB      "Avtomat #1 is OFF",0
001a54  6d617420
001a58  23312069
001a5c  73204f46
001a60  4600    
001a62  00                DCB      0
001a63  00                DCB      0
                  |L1.6756|
001a64  4176746f          DCB      "Avtomat #2 is OFF",0
001a68  6d617420
001a6c  23322069
001a70  73204f46
001a74  4600    
001a76  00                DCB      0
001a77  00                DCB      0
                  |L1.6776|
001a78  4176746f          DCB      "Avtomat #3 is OFF",0
001a7c  6d617420
001a80  23332069
001a84  73204f46
001a88  4600    
001a8a  00                DCB      0
001a8b  00                DCB      0
                  |L1.6796|
001a8c  e06a              B        |L1.7012|
                  |L1.6798|
001a8e  4281              CMP      r1,r0
001a90  d00b              BEQ      |L1.6826|
001a92  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001a96  2904              CMP      r1,#4
001a98  db07              BLT      |L1.6826|
;;;3244   	{
;;;3245   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
001a9a  2801              CMP      r0,#1
001a9c  d078              BEQ      |L1.7056|
;;;3246   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
001a9e  2300              MOVS     r3,#0
001aa0  2204              MOVS     r2,#4
001aa2  210b              MOVS     r1,#0xb
001aa4  a0ff              ADR      r0,|L1.7844|
001aa6  f7fffffe          BL       snmp_trap_send
                  |L1.6826|
;;;3247   	}
;;;3248   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
001aaa  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
001aac  7928              LDRB     r0,[r5,#4]  ; avt_stat
001aae  4281              CMP      r1,r0
001ab0  d00e              BEQ      |L1.6864|
001ab2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001ab6  2905              CMP      r1,#5
001ab8  db0a              BLT      |L1.6864|
;;;3249   	{
;;;3250   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
001aba  2801              CMP      r0,#1
001abc  d070              BEQ      |L1.7072|
;;;3251   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
001abe  2300              MOVS     r3,#0
001ac0  2205              MOVS     r2,#5
001ac2  210b              MOVS     r1,#0xb
001ac4  a0fc              ADR      r0,|L1.7864|
001ac6  e001              B        |L1.6860|
                  |L1.6856|
001ac8  e053              B        |L1.7026|
                  |L1.6858|
001aca  e05a              B        |L1.7042|
                  |L1.6860|
001acc  f7fffffe          BL       snmp_trap_send
                  |L1.6864|
;;;3252   	}
;;;3253   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
001ad0  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
001ad2  7968              LDRB     r0,[r5,#5]  ; avt_stat
001ad4  4281              CMP      r1,r0
001ad6  d00b              BEQ      |L1.6896|
001ad8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001adc  2906              CMP      r1,#6
001ade  db07              BLT      |L1.6896|
;;;3254   	{
;;;3255   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
001ae0  2801              CMP      r0,#1
001ae2  d064              BEQ      |L1.7086|
;;;3256   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
001ae4  2300              MOVS     r3,#0
001ae6  2206              MOVS     r2,#6
001ae8  210b              MOVS     r1,#0xb
001aea  a0f8              ADR      r0,|L1.7884|
001aec  f7fffffe          BL       snmp_trap_send
                  |L1.6896|
;;;3257   	}
;;;3258   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
001af0  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
001af2  79a8              LDRB     r0,[r5,#6]  ; avt_stat
001af4  4281              CMP      r1,r0
001af6  d00b              BEQ      |L1.6928|
001af8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001afc  2907              CMP      r1,#7
001afe  db07              BLT      |L1.6928|
;;;3259   	{
;;;3260   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
001b00  2801              CMP      r0,#1
001b02  d05b              BEQ      |L1.7100|
;;;3261   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
001b04  2300              MOVS     r3,#0
001b06  2207              MOVS     r2,#7
001b08  210b              MOVS     r1,#0xb
001b0a  a0f5              ADR      r0,|L1.7904|
001b0c  f7fffffe          BL       snmp_trap_send
                  |L1.6928|
;;;3262   	}
;;;3263   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
001b10  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
001b12  79e8              LDRB     r0,[r5,#7]  ; avt_stat
001b14  4281              CMP      r1,r0
001b16  d00b              BEQ      |L1.6960|
001b18  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001b1c  2908              CMP      r1,#8
001b1e  db07              BLT      |L1.6960|
;;;3264   	{
;;;3265   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
001b20  2801              CMP      r0,#1
001b22  d052              BEQ      |L1.7114|
;;;3266   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
001b24  2300              MOVS     r3,#0
001b26  2208              MOVS     r2,#8
001b28  210b              MOVS     r1,#0xb
001b2a  a0f2              ADR      r0,|L1.7924|
001b2c  f7fffffe          BL       snmp_trap_send
                  |L1.6960|
;;;3267   	}
;;;3268   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
001b30  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
001b32  7a28              LDRB     r0,[r5,#8]  ; avt_stat
001b34  4281              CMP      r1,r0
001b36  d00b              BEQ      |L1.6992|
001b38  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
001b3c  2909              CMP      r1,#9
001b3e  db07              BLT      |L1.6992|
;;;3269   	{
;;;3270   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
001b40  2801              CMP      r0,#1
001b42  d049              BEQ      |L1.7128|
;;;3271   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
001b44  2300              MOVS     r3,#0
001b46  2209              MOVS     r2,#9
001b48  210b              MOVS     r1,#0xb
001b4a  a0ef              ADR      r0,|L1.7944|
001b4c  f7fffffe          BL       snmp_trap_send
                  |L1.6992|
;;;3272   	}
;;;3273   
;;;3274   for(i=0;i<12;i++)
001b50  f04f0000          MOV      r0,#0
                  |L1.6996|
;;;3275   	{
;;;3276   	avt_stat_old[i]=avt_stat[i];
001b54  5c29              LDRB     r1,[r5,r0]
001b56  5431              STRB     r1,[r6,r0]
001b58  f1000001          ADD      r0,r0,#1              ;3274
001b5c  b2c0              UXTB     r0,r0                 ;3274
001b5e  280c              CMP      r0,#0xc               ;3274
001b60  d3f8              BCC      |L1.6996|
;;;3277   	}
;;;3278   }
001b62  bd70              POP      {r4-r6,pc}
                  |L1.7012|
001b64  2301              MOVS     r3,#1                 ;3230
001b66  461a              MOV      r2,r3                 ;3230
001b68  210b              MOVS     r1,#0xb               ;3230
001b6a  a0ec              ADR      r0,|L1.7964|
001b6c  f7fffffe          BL       snmp_trap_send
001b70  e721              B        |L1.6582|
                  |L1.7026|
001b72  2301              MOVS     r3,#1                 ;3235
001b74  2202              MOVS     r2,#2                 ;3235
001b76  210b              MOVS     r1,#0xb               ;3235
001b78  a0ed              ADR      r0,|L1.7984|
001b7a  f7fffffe          BL       snmp_trap_send
001b7e  e72a              B        |L1.6614|
001b80  e006              B        |L1.7056|
                  |L1.7042|
001b82  2301              MOVS     r3,#1                 ;3240
001b84  2203              MOVS     r2,#3                 ;3240
001b86  210b              MOVS     r1,#0xb               ;3240
001b88  a0ee              ADR      r0,|L1.8004|
001b8a  f7fffffe          BL       snmp_trap_send
001b8e  e732              B        |L1.6646|
                  |L1.7056|
001b90  2301              MOVS     r3,#1                 ;3245
001b92  2204              MOVS     r2,#4                 ;3245
001b94  210b              MOVS     r1,#0xb               ;3245
001b96  a0f0              ADR      r0,|L1.8024|
001b98  f7fffffe          BL       snmp_trap_send
001b9c  e785              B        |L1.6826|
001b9e  e7ff              B        |L1.7072|
                  |L1.7072|
001ba0  2301              MOVS     r3,#1                 ;3250
001ba2  2205              MOVS     r2,#5                 ;3250
001ba4  210b              MOVS     r1,#0xb               ;3250
001ba6  a0f1              ADR      r0,|L1.8044|
001ba8  f7fffffe          BL       snmp_trap_send
001bac  e790              B        |L1.6864|
                  |L1.7086|
001bae  2301              MOVS     r3,#1                 ;3255
001bb0  2206              MOVS     r2,#6                 ;3255
001bb2  210b              MOVS     r1,#0xb               ;3255
001bb4  a0f2              ADR      r0,|L1.8064|
001bb6  f7fffffe          BL       snmp_trap_send
001bba  e799              B        |L1.6896|
                  |L1.7100|
001bbc  2301              MOVS     r3,#1                 ;3260
001bbe  2207              MOVS     r2,#7                 ;3260
001bc0  210b              MOVS     r1,#0xb               ;3260
001bc2  a0f4              ADR      r0,|L1.8084|
001bc4  f7fffffe          BL       snmp_trap_send
001bc8  e7a2              B        |L1.6928|
                  |L1.7114|
001bca  2301              MOVS     r3,#1                 ;3265
001bcc  2208              MOVS     r2,#8                 ;3265
001bce  210b              MOVS     r1,#0xb               ;3265
001bd0  a0f5              ADR      r0,|L1.8104|
001bd2  f7fffffe          BL       snmp_trap_send
001bd6  e7ab              B        |L1.6960|
                  |L1.7128|
001bd8  2301              MOVS     r3,#1                 ;3270
001bda  2209              MOVS     r2,#9                 ;3270
001bdc  210b              MOVS     r1,#0xb               ;3270
001bde  a0f7              ADR      r0,|L1.8124|
001be0  f7fffffe          BL       snmp_trap_send
001be4  e7b4              B        |L1.6992|
;;;3279   
                          ENDP

                  overload_hndl PROC
;;;4020   //-----------------------------------------------
;;;4021   void overload_hndl(void)
001be6  b430              PUSH     {r4,r5}
;;;4022   {
;;;4023   
;;;4024   if(main_1Hz_cnt<30)return;
001be8  48f9              LDR      r0,|L1.8144|
001bea  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001bee  281e              CMP      r0,#0x1e
001bf0  db2e              BLT      |L1.7248|
;;;4025   
;;;4026   if((out_U<UOUT)&&((UOUT-out_U)>50))
001bf2  48f8              LDR      r0,|L1.8148|
;;;4027   	{
;;;4028   	if(overloadHndlCnt<(TZAS*10))
001bf4  4bf9              LDR      r3,|L1.8156|
001bf6  f9b02000          LDRSH    r2,[r0,#0]            ;4026  ; out_U
001bfa  48f7              LDR      r0,|L1.8152|
001bfc  f9b01000          LDRSH    r1,[r0,#0]            ;4026  ; UOUT
001c00  f9b30000          LDRSH    r0,[r3,#0]
001c04  428a              CMP      r2,r1                 ;4026
001c06  da15              BGE      |L1.7220|
001c08  1a8c              SUBS     r4,r1,r2              ;4026
001c0a  2c32              CMP      r4,#0x32              ;4026
001c0c  dd12              BLE      |L1.7220|
001c0e  49f4              LDR      r1,|L1.8160|
001c10  f9b11000          LDRSH    r1,[r1,#0]  ; TZAS
001c14  eb010181          ADD      r1,r1,r1,LSL #2
001c18  ebb00f41          CMP      r0,r1,LSL #1
001c1c  da18              BGE      |L1.7248|
;;;4029   		{
;;;4030   		overloadHndlCnt++;
001c1e  f1000001          ADD      r0,r0,#1
001c22  b200              SXTH     r0,r0
001c24  8018              STRH     r0,[r3,#0]
;;;4031   		if(overloadHndlCnt==(TZAS*10))
001c26  ebb00f41          CMP      r0,r1,LSL #1
001c2a  d111              BNE      |L1.7248|
;;;4032   			{
;;;4033   			avar_overload_hndl(1);
001c2c  bc30              POP      {r4,r5}
001c2e  2001              MOVS     r0,#1
001c30  f7ffbffe          B.W      avar_overload_hndl
                  |L1.7220|
;;;4034   			}
;;;4035   		}
;;;4036   	}
;;;4037   else if(out_U>(UOUT-20))
001c34  3914              SUBS     r1,r1,#0x14
001c36  428a              CMP      r2,r1
001c38  dd0a              BLE      |L1.7248|
;;;4038   	{
;;;4039   	if(overloadHndlCnt)
001c3a  2800              CMP      r0,#0
001c3c  d008              BEQ      |L1.7248|
;;;4040   		{
;;;4041   		overloadHndlCnt--;
001c3e  f1a00001          SUB      r0,r0,#1
001c42  b200              SXTH     r0,r0
001c44  8018              STRH     r0,[r3,#0]
;;;4042   		if(overloadHndlCnt==0)
001c46  2800              CMP      r0,#0
001c48  d102              BNE      |L1.7248|
;;;4043   			{
;;;4044   			avar_overload_hndl(0);
001c4a  bc30              POP      {r4,r5}
001c4c  f7ffbffe          B.W      avar_overload_hndl
                  |L1.7248|
;;;4045   			}
;;;4046   		}
;;;4047   	}
;;;4048   
;;;4049   }
001c50  bc30              POP      {r4,r5}
001c52  4770              BX       lr
;;;4050   
                          ENDP

                  u_avar_hndl PROC
;;;4051   //-----------------------------------------------
;;;4052   void u_avar_hndl(void)
001c54  e92d41f0          PUSH     {r4-r8,lr}
;;;4053   {
;;;4054   
;;;4055   if(main_1Hz_cnt<10)return;
001c58  48dd              LDR      r0,|L1.8144|
001c5a  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001c5e  280a              CMP      r0,#0xa
001c60  db7d              BLT      |L1.7518|
;;;4056   
;;;4057   if(out_U>UOUTMAX)
001c62  4edc              LDR      r6,|L1.8148|
001c64  48df              LDR      r0,|L1.8164|
;;;4058   	{
;;;4059   	if(uAvarHndlOutUMaxCnt<(10*TZAS))
001c66  4fe0              LDR      r7,|L1.8168|
001c68  f9b61000          LDRSH    r1,[r6,#0]            ;4057  ; out_U
001c6c  f9b02000          LDRSH    r2,[r0,#0]            ;4057  ; UOUTMAX
001c70  f9b70000          LDRSH    r0,[r7,#0]
001c74  2500              MOVS     r5,#0
001c76  4cda              LDR      r4,|L1.8160|
001c78  4291              CMP      r1,r2                 ;4057
001c7a  dd17              BLE      |L1.7340|
001c7c  f9b42000          LDRSH    r2,[r4,#0]  ; TZAS
001c80  eb020382          ADD      r3,r2,r2,LSL #2
001c84  ebb00f43          CMP      r0,r3,LSL #1
001c88  da0a              BGE      |L1.7328|
;;;4060   		{
;;;4061   		uAvarHndlOutUMaxCnt++;
001c8a  f1000001          ADD      r0,r0,#1
001c8e  b200              SXTH     r0,r0
001c90  8038              STRH     r0,[r7,#0]
;;;4062   		if(uAvarHndlOutUMaxCnt>=(10*TZAS))
001c92  ebb00f43          CMP      r0,r3,LSL #1
001c96  db15              BLT      |L1.7364|
;;;4063   			{
;;;4064   			avar_u_out_hndl(1,out_U);
001c98  2001              MOVS     r0,#1
001c9a  f7fffffe          BL       avar_u_out_hndl
001c9e  e011              B        |L1.7364|
                  |L1.7328|
;;;4065   			}
;;;4066   		}
;;;4067   	else uAvarHndlOutUMaxCnt=(10*TZAS);
001ca0  eb020082          ADD      r0,r2,r2,LSL #2
001ca4  ea4f0040          LSL      r0,r0,#1
001ca8  8038              STRH     r0,[r7,#0]
001caa  e00b              B        |L1.7364|
                  |L1.7340|
;;;4068   	}
;;;4069   else 
;;;4070   	{
;;;4071   	if(uAvarHndlOutUMaxCnt>0)
001cac  2800              CMP      r0,#0
001cae  dd08              BLE      |L1.7362|
;;;4072   		{
;;;4073   		uAvarHndlOutUMaxCnt--;
001cb0  f1a00001          SUB      r0,r0,#1
001cb4  b200              SXTH     r0,r0
001cb6  8038              STRH     r0,[r7,#0]
;;;4074   		if(uAvarHndlOutUMaxCnt==0)
001cb8  b920              CBNZ     r0,|L1.7364|
;;;4075   			{
;;;4076   			avar_u_out_hndl(0,out_U);
001cba  2000              MOVS     r0,#0
001cbc  f7fffffe          BL       avar_u_out_hndl
001cc0  e000              B        |L1.7364|
                  |L1.7362|
;;;4077   			}
;;;4078   		}
;;;4079   	else uAvarHndlOutUMaxCnt=0;
001cc2  803d              STRH     r5,[r7,#0]
                  |L1.7364|
;;;4080   	}
;;;4081   
;;;4082   if(out_U<UOUTMIN)
001cc4  48c9              LDR      r0,|L1.8172|
001cc6  f9b61000          LDRSH    r1,[r6,#0]  ; out_U
;;;4083   	{
;;;4084   	if(uAvarHndlOutUMinCnt<(10*TZAS))
001cca  4ec9              LDR      r6,|L1.8176|
001ccc  f9b00000          LDRSH    r0,[r0,#0]            ;4082  ; UOUTMIN
001cd0  4281              CMP      r1,r0                 ;4082
001cd2  da19              BGE      |L1.7432|
001cd4  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001cd8  f9b62000          LDRSH    r2,[r6,#0]  ; uAvarHndlOutUMinCnt
001cdc  eb000380          ADD      r3,r0,r0,LSL #2
001ce0  ebb20f43          CMP      r2,r3,LSL #1
001ce4  da0a              BGE      |L1.7420|
;;;4085   		{
;;;4086   		uAvarHndlOutUMinCnt++;
001ce6  f1020201          ADD      r2,r2,#1
001cea  b210              SXTH     r0,r2
001cec  8030              STRH     r0,[r6,#0]
;;;4087   		if(uAvarHndlOutUMinCnt>=(10*TZAS))
001cee  ebb00f43          CMP      r0,r3,LSL #1
001cf2  db17              BLT      |L1.7460|
;;;4088   			{
;;;4089   			avar_u_out_hndl(2,out_U);
001cf4  2002              MOVS     r0,#2
001cf6  f7fffffe          BL       avar_u_out_hndl
001cfa  e013              B        |L1.7460|
                  |L1.7420|
;;;4090   			}
;;;4091   		}
;;;4092   	else uAvarHndlOutUMinCnt=(10*TZAS);
001cfc  eb000080          ADD      r0,r0,r0,LSL #2
001d00  ea4f0040          LSL      r0,r0,#1
001d04  8030              STRH     r0,[r6,#0]
001d06  e00d              B        |L1.7460|
                  |L1.7432|
;;;4093   	}
;;;4094   else 
;;;4095   	{
;;;4096   	if(uAvarHndlOutUMinCnt>0)
001d08  f9b60000          LDRSH    r0,[r6,#0]  ; uAvarHndlOutUMinCnt
001d0c  2800              CMP      r0,#0
001d0e  dd08              BLE      |L1.7458|
;;;4097   		{
;;;4098   		uAvarHndlOutUMinCnt--;
001d10  f1a00001          SUB      r0,r0,#1
001d14  b200              SXTH     r0,r0
001d16  8030              STRH     r0,[r6,#0]
;;;4099   		if(uAvarHndlOutUMinCnt==0)
001d18  b920              CBNZ     r0,|L1.7460|
;;;4100   			{
;;;4101   			avar_u_out_hndl(0,out_U);
001d1a  2000              MOVS     r0,#0
001d1c  f7fffffe          BL       avar_u_out_hndl
001d20  e000              B        |L1.7460|
                  |L1.7458|
;;;4102   			}
;;;4103   		}
;;;4104   	else uAvarHndlOutUMinCnt=0;
001d22  8035              STRH     r5,[r6,#0]
                  |L1.7460|
;;;4105   	}
;;;4106   
;;;4107   if(in_U>UINMAX)
001d24  4eb3              LDR      r6,|L1.8180|
001d26  48b4              LDR      r0,|L1.8184|
;;;4108   	{
;;;4109   	if(uAvarHndlInUMaxCnt<(10*TZAS))
001d28  4fb4              LDR      r7,|L1.8188|
001d2a  f9b61000          LDRSH    r1,[r6,#0]            ;4107  ; in_U
001d2e  f9b00000          LDRSH    r0,[r0,#0]            ;4107  ; UINMAX
001d32  4281              CMP      r1,r0                 ;4107
001d34  dd1a              BLE      |L1.7532|
001d36  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001d3a  f9b72000          LDRSH    r2,[r7,#0]  ; uAvarHndlInUMaxCnt
001d3e  eb000380          ADD      r3,r0,r0,LSL #2
001d42  ebb20f43          CMP      r2,r3,LSL #1
001d46  da0b              BGE      |L1.7520|
;;;4110   		{
;;;4111   		uAvarHndlInUMaxCnt++;
001d48  f1020201          ADD      r2,r2,#1
001d4c  b210              SXTH     r0,r2
001d4e  8038              STRH     r0,[r7,#0]
;;;4112   		if(uAvarHndlInUMaxCnt>=(10*TZAS))
001d50  ebb00f43          CMP      r0,r3,LSL #1
001d54  db18              BLT      |L1.7560|
;;;4113   			{
;;;4114   			avar_u_in_hndl(1,in_U);
001d56  2001              MOVS     r0,#1
001d58  f7fffffe          BL       avar_u_in_hndl
001d5c  e014              B        |L1.7560|
                  |L1.7518|
001d5e  e035              B        |L1.7628|
                  |L1.7520|
;;;4115   			}
;;;4116   		}
;;;4117   	else uAvarHndlInUMaxCnt=(10*TZAS);
001d60  eb000080          ADD      r0,r0,r0,LSL #2
001d64  ea4f0040          LSL      r0,r0,#1
001d68  8038              STRH     r0,[r7,#0]
001d6a  e00d              B        |L1.7560|
                  |L1.7532|
;;;4118   	}
;;;4119   else 
;;;4120   	{
;;;4121   	if(uAvarHndlInUMaxCnt>0)
001d6c  f9b70000          LDRSH    r0,[r7,#0]  ; uAvarHndlInUMaxCnt
001d70  2800              CMP      r0,#0
001d72  dd08              BLE      |L1.7558|
;;;4122   		{
;;;4123   		uAvarHndlInUMaxCnt--;
001d74  f1a00001          SUB      r0,r0,#1
001d78  b200              SXTH     r0,r0
001d7a  8038              STRH     r0,[r7,#0]
;;;4124   		if(uAvarHndlInUMaxCnt==0)
001d7c  b920              CBNZ     r0,|L1.7560|
;;;4125   			{
;;;4126   			avar_u_in_hndl(0,in_U);
001d7e  2000              MOVS     r0,#0
001d80  f7fffffe          BL       avar_u_in_hndl
001d84  e000              B        |L1.7560|
                  |L1.7558|
;;;4127   			}
;;;4128   		}
;;;4129   	else uAvarHndlInUMaxCnt=0;
001d86  803d              STRH     r5,[r7,#0]
                  |L1.7560|
;;;4130   	}
;;;4131   
;;;4132   if(in_U<UINMIN)
001d88  489d              LDR      r0,|L1.8192|
001d8a  f9b61000          LDRSH    r1,[r6,#0]  ; in_U
;;;4133   	{
;;;4134   	if(uAvarHndlInUMinCnt<(10*TZAS))
001d8e  4e9d              LDR      r6,|L1.8196|
001d90  f9b00000          LDRSH    r0,[r0,#0]            ;4132  ; UINMIN
001d94  4281              CMP      r1,r0                 ;4132
001d96  da1a              BGE      |L1.7630|
001d98  f9b40000          LDRSH    r0,[r4,#0]  ; TZAS
001d9c  f9b62000          LDRSH    r2,[r6,#0]  ; uAvarHndlInUMinCnt
001da0  eb000380          ADD      r3,r0,r0,LSL #2
001da4  ebb20f43          CMP      r2,r3,LSL #1
001da8  da0b              BGE      |L1.7618|
;;;4135   		{
;;;4136   		uAvarHndlInUMinCnt++;
001daa  f1020201          ADD      r2,r2,#1
001dae  b210              SXTH     r0,r2
001db0  8030              STRH     r0,[r6,#0]
;;;4137   		if(uAvarHndlInUMinCnt>=(10*TZAS))
001db2  ebb00f43          CMP      r0,r3,LSL #1
001db6  db09              BLT      |L1.7628|
;;;4138   			{
;;;4139   			avar_u_in_hndl(2,in_U);
001db8  e8bd41f0          POP      {r4-r8,lr}
001dbc  2002              MOVS     r0,#2
001dbe  f7ffbffe          B.W      avar_u_in_hndl
                  |L1.7618|
;;;4140   			}
;;;4141   		}
;;;4142   	else uAvarHndlInUMinCnt=(10*TZAS);
001dc2  eb000080          ADD      r0,r0,r0,LSL #2
001dc6  ea4f0040          LSL      r0,r0,#1
001dca  8030              STRH     r0,[r6,#0]
                  |L1.7628|
;;;4143   	}
;;;4144   else 
;;;4145   	{
;;;4146   	if(uAvarHndlInUMinCnt>0)
;;;4147   		{
;;;4148   		uAvarHndlInUMinCnt--;
;;;4149   		if(uAvarHndlInUMinCnt==0)
;;;4150   			{
;;;4151   			avar_u_in_hndl(0,in_U);
;;;4152   			}
;;;4153   		}
;;;4154   	else uAvarHndlInUMinCnt=0;
;;;4155   	}
;;;4156   }
001dcc  e5c9              B        |L1.6498|
                  |L1.7630|
001dce  f9b60000          LDRSH    r0,[r6,#0]            ;4146  ; uAvarHndlInUMinCnt
001dd2  2800              CMP      r0,#0                 ;4146
001dd4  dd09              BLE      |L1.7658|
001dd6  f1a00001          SUB      r0,r0,#1              ;4148
001dda  b200              SXTH     r0,r0                 ;4148
001ddc  8030              STRH     r0,[r6,#0]            ;4148
001dde  2800              CMP      r0,#0                 ;4149
001de0  d1f4              BNE      |L1.7628|
001de2  e8bd41f0          POP      {r4-r8,lr}            ;4151
001de6  f7ffbffe          B.W      avar_u_in_hndl
                  |L1.7658|
001dea  8035              STRH     r5,[r6,#0]            ;4154
001dec  e5b9              B        |L1.6498|
;;;4157   
                          ENDP

                  t_sys_avar_hndl PROC
;;;4158   //-----------------------------------------------
;;;4159   void t_sys_avar_hndl(void)
001dee  b430              PUSH     {r4,r5}
;;;4160   {
;;;4161   
;;;4162   if(main_1Hz_cnt<10)return;
001df0  4877              LDR      r0,|L1.8144|
001df2  f9b00000          LDRSH    r0,[r0,#0]  ; main_1Hz_cnt
001df6  280a              CMP      r0,#0xa
001df8  db22              BLT      |L1.7744|
;;;4163   
;;;4164   if(sys_T>TSYSMAX)
001dfa  4883              LDR      r0,|L1.8200|
;;;4165   	{
;;;4166   	if(sysTAvarHndlCnt<(10*TZAS))
001dfc  4c84              LDR      r4,|L1.8208|
001dfe  f9b01000          LDRSH    r1,[r0,#0]            ;4164  ; sys_T
001e02  4882              LDR      r0,|L1.8204|
001e04  f9b02000          LDRSH    r2,[r0,#0]            ;4164  ; TSYSMAX
001e08  f9b40000          LDRSH    r0,[r4,#0]
001e0c  4291              CMP      r1,r2                 ;4164
001e0e  dd18              BLE      |L1.7746|
001e10  4a73              LDR      r2,|L1.8160|
001e12  f9b22000          LDRSH    r2,[r2,#0]  ; TZAS
001e16  eb020382          ADD      r3,r2,r2,LSL #2
001e1a  ebb00f43          CMP      r0,r3,LSL #1
001e1e  da0a              BGE      |L1.7734|
;;;4167   		{
;;;4168   		sysTAvarHndlCnt++;
001e20  f1000001          ADD      r0,r0,#1
001e24  b200              SXTH     r0,r0
001e26  8020              STRH     r0,[r4,#0]
;;;4169   		if(sysTAvarHndlCnt>=(10*TZAS))
001e28  ebb00f43          CMP      r0,r3,LSL #1
001e2c  db08              BLT      |L1.7744|
;;;4170   			{
;;;4171   			avar_sys_t_hndl(1,sys_T);
001e2e  bc30              POP      {r4,r5}
001e30  2001              MOVS     r0,#1
001e32  f7ffbffe          B.W      avar_sys_t_hndl
                  |L1.7734|
;;;4172   			}
;;;4173   		}
;;;4174   	else sysTAvarHndlCnt=(10*TZAS);
001e36  eb020082          ADD      r0,r2,r2,LSL #2
001e3a  ea4f0040          LSL      r0,r0,#1
001e3e  8020              STRH     r0,[r4,#0]
                  |L1.7744|
;;;4175   	}
;;;4176   else 
;;;4177   	{
;;;4178   	if(sysTAvarHndlCnt>0)
;;;4179   		{
;;;4180   		sysTAvarHndlCnt--;
;;;4181   		if(sysTAvarHndlCnt==0)
;;;4182   			{
;;;4183   			avar_sys_t_hndl(0,sys_T);
;;;4184   			}
;;;4185   		}
;;;4186   	else sysTAvarHndlCnt=0;
;;;4187   	}
;;;4188   }
001e40  e706              B        |L1.7248|
                  |L1.7746|
001e42  2800              CMP      r0,#0                 ;4178
001e44  dd08              BLE      |L1.7768|
001e46  f1a00001          SUB      r0,r0,#1              ;4180
001e4a  b200              SXTH     r0,r0                 ;4180
001e4c  8020              STRH     r0,[r4,#0]            ;4180
001e4e  2800              CMP      r0,#0                 ;4181
001e50  d1f6              BNE      |L1.7744|
001e52  bc30              POP      {r4,r5}               ;4183
001e54  f7ffbffe          B.W      avar_sys_t_hndl
                  |L1.7768|
001e58  f04f0000          MOV      r0,#0                 ;4186
001e5c  8020              STRH     r0,[r4,#0]            ;4186
001e5e  e6f7              B        |L1.7248|
;;;4189   
                          ENDP

                  u_necc_hndl PROC
;;;4191   //-----------------------------------------------
;;;4192   void u_necc_hndl(void)
001e60  b538              PUSH     {r3-r5,lr}
;;;4193   {
;;;4194   signed long temp_L;
;;;4195   signed long temp_SL;
;;;4196   //signed short temp_SS;
;;;4197   
;;;4198   //char i;
;;;4199   
;;;4200   //temp_SS=0;
;;;4201   signed short t[2];
;;;4202   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4203   
;;;4204   if(!TERMOKOMPENS)
001e62  496c              LDR      r1,|L1.8212|
;;;4205   	{
;;;4206   	//u_necc=U0B;
;;;4207   	//u_necc=UB20;
;;;4208   	}
;;;4209   else
;;;4210   	{
;;;4211   	if(ND_EXT[0])t[0]=20;
;;;4212   	else t[0]=t_ext[0];
;;;4213   
;;;4214   	mat_temper=t[0];
;;;4215   			
;;;4216   /*	if(mat_temper<0)temp_SL=UB0; 
;;;4217   	else 
;;;4218   		{
;;;4219   		if(mat_temper>40)mat_temper=40; 
;;;4220   		temp_SL=(UB20-UB0)*10;
;;;4221   		temp_SL*=mat_temper;
;;;4222   		temp_SL/=200;
;;;4223   		temp_SL+=UB0;
;;;4224   		}			  */
;;;4225   	if(spc_stat==spcVZ)
;;;4226   		{
;;;4227   		//temp_SL=UVZ;
;;;4228   		}
;;;4229   	u_necc=(unsigned int)temp_SL;
001e64  4c6c              LDR      r4,|L1.8216|
001e66  8809              LDRH     r1,[r1,#0]            ;4204  ; TERMOKOMPENS
001e68  b181              CBZ      r1,|L1.7820|
001e6a  496c              LDR      r1,|L1.8220|
001e6c  7809              LDRB     r1,[r1,#0]            ;4211  ; ND_EXT
001e6e  b121              CBZ      r1,|L1.7802|
001e70  f04f0114          MOV      r1,#0x14              ;4211
001e74  f8ad1000          STRH     r1,[sp,#0]            ;4211
001e78  e003              B        |L1.7810|
                  |L1.7802|
001e7a  4969              LDR      r1,|L1.8224|
001e7c  8809              LDRH     r1,[r1,#0]            ;4212  ; t_ext
001e7e  f8ad1000          STRH     r1,[sp,#0]            ;4212
                  |L1.7810|
001e82  4a68              LDR      r2,|L1.8228|
001e84  f9bd1000          LDRSH    r1,[sp,#0]            ;4214
001e88  6011              STR      r1,[r2,#0]            ;4214  ; mat_temper
001e8a  8020              STRH     r0,[r4,#0]
                  |L1.7820|
;;;4230   	///u_necc=3456;
;;;4231   	}  
;;;4232   
;;;4233   //u_necc=2355;
;;;4234   
;;;4235   if(speedChIsOn)
001e8c  4866              LDR      r0,|L1.8232|
001e8e  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
001e90  b110              CBZ      r0,|L1.7832|
;;;4236   	{
;;;4237   	u_necc=speedChrgVolt;
001e92  4866              LDR      r0,|L1.8236|
001e94  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
001e96  8020              STRH     r0,[r4,#0]
                  |L1.7832|
;;;4238   	}
;;;4239   
;;;4240   if(mess_find_unvol(MESS2UNECC_HNDL))
001e98  20be              MOVS     r0,#0xbe
001e9a  f7fffffe          BL       mess_find_unvol
001e9e  b100              CBZ      r0,|L1.7842|
;;;4241   	{		
;;;4242   	if(mess_data[0]==PARAM_UNECC_SET)
001ea0  e0c6              B        |L1.8240|
                  |L1.7842|
001ea2  e0cb              B        |L1.8252|
                  |L1.7844|
001ea4  4176746f          DCB      "Avtomat #4 is OFF",0
001ea8  6d617420
001eac  23342069
001eb0  73204f46
001eb4  4600    
001eb6  00                DCB      0
001eb7  00                DCB      0
                  |L1.7864|
001eb8  4176746f          DCB      "Avtomat #5 is OFF",0
001ebc  6d617420
001ec0  23352069
001ec4  73204f46
001ec8  4600    
001eca  00                DCB      0
001ecb  00                DCB      0
                  |L1.7884|
001ecc  4176746f          DCB      "Avtomat #6 is OFF",0
001ed0  6d617420
001ed4  23362069
001ed8  73204f46
001edc  4600    
001ede  00                DCB      0
001edf  00                DCB      0
                  |L1.7904|
001ee0  4176746f          DCB      "Avtomat #7 is OFF",0
001ee4  6d617420
001ee8  23372069
001eec  73204f46
001ef0  4600    
001ef2  00                DCB      0
001ef3  00                DCB      0
                  |L1.7924|
001ef4  4176746f          DCB      "Avtomat #8 is OFF",0
001ef8  6d617420
001efc  23382069
001f00  73204f46
001f04  4600    
001f06  00                DCB      0
001f07  00                DCB      0
                  |L1.7944|
001f08  4176746f          DCB      "Avtomat #9 is OFF",0
001f0c  6d617420
001f10  23392069
001f14  73204f46
001f18  4600    
001f1a  00                DCB      0
001f1b  00                DCB      0
                  |L1.7964|
001f1c  4176746f          DCB      "Avtomat #1 is ON ",0
001f20  6d617420
001f24  23312069
001f28  73204f4e
001f2c  2000    
001f2e  00                DCB      0
001f2f  00                DCB      0
                  |L1.7984|
001f30  4176746f          DCB      "Avtomat #2 is ON ",0
001f34  6d617420
001f38  23322069
001f3c  73204f4e
001f40  2000    
001f42  00                DCB      0
001f43  00                DCB      0
                  |L1.8004|
001f44  4176746f          DCB      "Avtomat #3 is ON ",0
001f48  6d617420
001f4c  23332069
001f50  73204f4e
001f54  2000    
001f56  00                DCB      0
001f57  00                DCB      0
                  |L1.8024|
001f58  4176746f          DCB      "Avtomat #4 is ON ",0
001f5c  6d617420
001f60  23342069
001f64  73204f4e
001f68  2000    
001f6a  00                DCB      0
001f6b  00                DCB      0
                  |L1.8044|
001f6c  4176746f          DCB      "Avtomat #5 is ON ",0
001f70  6d617420
001f74  23352069
001f78  73204f4e
001f7c  2000    
001f7e  00                DCB      0
001f7f  00                DCB      0
                  |L1.8064|
001f80  4176746f          DCB      "Avtomat #6 is ON ",0
001f84  6d617420
001f88  23362069
001f8c  73204f4e
001f90  2000    
001f92  00                DCB      0
001f93  00                DCB      0
                  |L1.8084|
001f94  4176746f          DCB      "Avtomat #7 is ON ",0
001f98  6d617420
001f9c  23372069
001fa0  73204f4e
001fa4  2000    
001fa6  00                DCB      0
001fa7  00                DCB      0
                  |L1.8104|
001fa8  4176746f          DCB      "Avtomat #8 is ON ",0
001fac  6d617420
001fb0  23382069
001fb4  73204f4e
001fb8  2000    
001fba  00                DCB      0
001fbb  00                DCB      0
                  |L1.8124|
001fbc  4176746f          DCB      "Avtomat #9 is ON ",0
001fc0  6d617420
001fc4  23392069
001fc8  73204f4e
001fcc  2000    
001fce  00                DCB      0
001fcf  00                DCB      0
                  |L1.8144|
                          DCD      main_1Hz_cnt
                  |L1.8148|
                          DCD      out_U
                  |L1.8152|
                          DCD      UOUT
                  |L1.8156|
                          DCD      overloadHndlCnt
                  |L1.8160|
                          DCD      TZAS
                  |L1.8164|
                          DCD      UOUTMAX
                  |L1.8168|
                          DCD      uAvarHndlOutUMaxCnt
                  |L1.8172|
                          DCD      UOUTMIN
                  |L1.8176|
                          DCD      uAvarHndlOutUMinCnt
                  |L1.8180|
                          DCD      in_U
                  |L1.8184|
                          DCD      UINMAX
                  |L1.8188|
                          DCD      uAvarHndlInUMaxCnt
                  |L1.8192|
                          DCD      UINMIN
                  |L1.8196|
                          DCD      uAvarHndlInUMinCnt
                  |L1.8200|
                          DCD      sys_T
                  |L1.8204|
                          DCD      TSYSMAX
                  |L1.8208|
                          DCD      sysTAvarHndlCnt
                  |L1.8212|
                          DCD      TERMOKOMPENS
                  |L1.8216|
                          DCD      u_necc
                  |L1.8220|
                          DCD      ND_EXT
                  |L1.8224|
                          DCD      t_ext
                  |L1.8228|
                          DCD      mat_temper
                  |L1.8232|
                          DCD      speedChIsOn
                  |L1.8236|
                          DCD      speedChrgVolt
                  |L1.8240|
002030  48ff              LDR      r0,|L1.9264|
002032  6801              LDR      r1,[r0,#0]  ; mess_data
002034  29bf              CMP      r1,#0xbf
002036  d101              BNE      |L1.8252|
;;;4243   		{
;;;4244   		u_necc=mess_data[1];
002038  6840              LDR      r0,[r0,#4]  ; mess_data
00203a  8020              STRH     r0,[r4,#0]
                  |L1.8252|
;;;4245   		}		
;;;4246   	}
;;;4247   if(ICA_EN)u_necc+=ica_u_necc;
00203c  48fd              LDR      r0,|L1.9268|
00203e  8800              LDRH     r0,[r0,#0]  ; ICA_EN
002040  b120              CBZ      r0,|L1.8268|
002042  49fd              LDR      r1,|L1.9272|
002044  8820              LDRH     r0,[r4,#0]  ; u_necc
002046  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
002048  4408              ADD      r0,r0,r1
00204a  8020              STRH     r0,[r4,#0]
                  |L1.8268|
;;;4248   #endif
;;;4249   
;;;4250   
;;;4251   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;4252   
;;;4253   #ifndef UKU_TELECORE2015
;;;4254   #ifndef UKU_TELECORE2017
;;;4255   if(unh_cnt0<10)
;;;4256   	{
;;;4257   	unh_cnt0++;
;;;4258   	if(unh_cnt0>=10)
;;;4259   		{
;;;4260   		unh_cnt0=0;
;;;4261   		b1Hz_unh=1;
;;;4262   		}
;;;4263   	}
;;;4264   
;;;4265   if(unh_cnt1<5)
;;;4266   	{
;;;4267   	unh_cnt1++;
;;;4268   	if(unh_cnt1==5)
;;;4269   		{
;;;4270   		unh_cnt1=0;
;;;4271   //		b2Hz_unh=1;
;;;4272   		}
;;;4273   	} 
;;;4274   
;;;4275   
;;;4276   
;;;4277   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;4278   	{		
;;;4279   	if(mess_data[0]==PARAM_UNECC_SET)
;;;4280   		{
;;;4281   		u_necc=mess_data[1];
;;;4282   		}		
;;;4283   	}
;;;4284   
;;;4285   
;;;4286   else if(b1Hz_unh)
;;;4287   	{
;;;4288   	
;;;4289   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;4290   		{
;;;4291   		
;;;4292   		u_necc=U0B;
;;;4293   		}
;;;4294   	else 
;;;4295   		{
;;;4296   		if(BAT_TYPE==0) //если батаре€ обычна€
;;;4297   			{
;;;4298   			for(i=0;i<2;i++)
;;;4299   				{
;;;4300   				if(BAT_IS_ON[i]==bisON)
;;;4301   					{
;;;4302   					if(bat[i]._nd)t[i]=20;
;;;4303   					else t[i]=bat[i]._Tb;
;;;4304   					}
;;;4305   				else
;;;4306   					{
;;;4307   					t[i]=-20;
;;;4308   					}
;;;4309   				}
;;;4310   			if(t[0]>t[1])mat_temper=t[0];
;;;4311   			else mat_temper=t[1];
;;;4312   			
;;;4313   		
;;;4314   			if(mat_temper<0)temp_SL=UB0; 
;;;4315   			else 
;;;4316   				{
;;;4317   				if(mat_temper>40)mat_temper=40; 
;;;4318   				temp_SL=(UB20-UB0)*10;
;;;4319   				temp_SL*=mat_temper;
;;;4320   				temp_SL/=200;
;;;4321   				temp_SL+=UB0;
;;;4322   				}
;;;4323   			if(spc_stat==spcVZ)
;;;4324   				{
;;;4325   				temp_SL=UVZ;
;;;4326   				}
;;;4327   			u_necc=(unsigned int)temp_SL;
;;;4328   			}
;;;4329   		else if(BAT_TYPE==1) //если батаре€ китайска€
;;;4330   			{
;;;4331   			u_necc=U0B;
;;;4332   					
;;;4333   			u_necc=bat[0]._Ub+10;
;;;4334   
;;;4335   			
;;;4336   			if(spc_stat==spcVZ)
;;;4337   				{
;;;4338   				u_necc=UVZ;
;;;4339   				}
;;;4340   			if(u_necc>=UB0) u_necc=UB0;
;;;4341   			if(u_necc>=UB20) u_necc=UB20;
;;;4342   			}
;;;4343   		}  
;;;4344   	}
;;;4345   #endif
;;;4346   #endif
;;;4347   
;;;4348   #ifdef UKU_TELECORE2015
;;;4349   
;;;4350   if(unh_cnt0<10)
;;;4351   	{
;;;4352   	unh_cnt0++;
;;;4353   	if(unh_cnt0>=10)
;;;4354   		{
;;;4355   		unh_cnt0=0;
;;;4356   		b1Hz_unh=1;
;;;4357   		}
;;;4358   	}
;;;4359   
;;;4360   if(unh_cnt1<5)
;;;4361   	{
;;;4362   	unh_cnt1++;
;;;4363   	if(unh_cnt1==5)
;;;4364   		{
;;;4365   		unh_cnt1=0;
;;;4366   //		b2Hz_unh=1;
;;;4367   		}
;;;4368   	} 
;;;4369   
;;;4370   
;;;4371   
;;;4372   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;4373   	{		
;;;4374   	if(mess_data[0]==PARAM_UNECC_SET)
;;;4375   		{
;;;4376   		u_necc=mess_data[1];
;;;4377   		}		
;;;4378   	}
;;;4379   
;;;4380   
;;;4381   else if(b1Hz_unh)
;;;4382   	{
;;;4383   	b1Hz_unh=0;
;;;4384   
;;;4385   	if(BAT_TYPE==0)
;;;4386   		{
;;;4387   		if(bat[0]._nd)mat_temper=20;
;;;4388   		else mat_temper=bat[0]._Tb;
;;;4389   
;;;4390   			
;;;4391   		if(mat_temper<0)temp_SL=UB0; 
;;;4392   		else 
;;;4393   			{
;;;4394   			if(mat_temper>40)mat_temper=40; 
;;;4395   			temp_SL=(UB20-UB0)*10;
;;;4396   			temp_SL*=mat_temper;
;;;4397   			temp_SL/=200;
;;;4398   			temp_SL+=UB0;
;;;4399   			}
;;;4400   		if(spc_stat==spcVZ)
;;;4401   			{
;;;4402   			temp_SL=UVZ;
;;;4403   			}
;;;4404   		u_necc=(unsigned int)temp_SL;
;;;4405   	///u_necc=3456;
;;;4406   		}
;;;4407   	else if(BAT_TYPE==1)
;;;4408   		{
;;;4409   		
;;;4410   		gran(&DU_LI_BAT,1,30);
;;;4411   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;4412   		gran(&u_necc,0,UB0);
;;;4413   		gran(&u_necc,0,UB20);
;;;4414   		gran(&u_necc,0,540);		
;;;4415   
;;;4416   
;;;4417   		if(li_bat._batStat!=bsOK)
;;;4418   			{
;;;4419   			u_necc=U0B;
;;;4420   			}
;;;4421   		if(spc_stat==spcVZ)
;;;4422   			{
;;;4423   			u_necc=UVZ;
;;;4424   			}
;;;4425   		/* 
;;;4426   		u_necc=U0B;
;;;4427   		
;;;4428   
;;;4429   	
;;;4430   		u_necc=UB0;
;;;4431   		u_necc=li_bat._Ub+10;
;;;4432   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;4433   			{
;;;4434   			lakb_error_cnt++;
;;;4435   			if(lakb_error_cnt>=30)
;;;4436   				{
;;;4437   				lakb_error_cnt=30;
;;;4438   				u_necc=U0B;
;;;4439   				}
;;;4440   			}
;;;4441   		else lakb_error_cnt=0;*/
;;;4442   		}
;;;4443   	else if(BAT_TYPE==2)
;;;4444   		{
;;;4445   		u_necc=U0B;
;;;4446   		
;;;4447   		if(spc_stat==spcVZ)
;;;4448   			{
;;;4449   			u_necc=UVZ;
;;;4450   			}
;;;4451   	
;;;4452   		u_necc=UB0;
;;;4453   		}
;;;4454   
;;;4455   	else if(BAT_TYPE==3)
;;;4456   		{
;;;4457   		u_necc=U0B;
;;;4458   		
;;;4459   		if(spc_stat==spcVZ)
;;;4460   			{
;;;4461   			u_necc=UVZ;
;;;4462   			}
;;;4463   
;;;4464   		gran(&DU_LI_BAT,1,30);
;;;4465   
;;;4466   
;;;4467   		if(lakbNotErrorNum==0)
;;;4468   			{
;;;4469   			u_necc=U0B;
;;;4470   			}
;;;4471   		else 
;;;4472   			{
;;;4473   			signed short i;
;;;4474   			//signed short u_necc_max;
;;;4475   			//u_necc_max=0;
;;;4476   			char soc_flag=0;
;;;4477   
;;;4478   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;4479   				{
;;;4480   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;4481   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;4482   				}
;;;4483   
;;;4484   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;4485   			}
;;;4486   		gran(&u_necc,0,UB0);
;;;4487   		//gran(&u_necc,0,UB20);
;;;4488   		gran(&u_necc,0,540);
;;;4489   		}
;;;4490   	}
;;;4491   
;;;4492   #endif 
;;;4493   
;;;4494   #ifdef UKU_TELECORE2017
;;;4495   
;;;4496   if(unh_cnt0<10)
;;;4497   	{
;;;4498   	unh_cnt0++;
;;;4499   	if(unh_cnt0>=10)
;;;4500   		{
;;;4501   		unh_cnt0=0;
;;;4502   		b1Hz_unh=1;
;;;4503   		}
;;;4504   	}
;;;4505   
;;;4506   if(unh_cnt1<5)
;;;4507   	{
;;;4508   	unh_cnt1++;
;;;4509   	if(unh_cnt1==5)
;;;4510   		{
;;;4511   		unh_cnt1=0;
;;;4512   //		b2Hz_unh=1;
;;;4513   		}
;;;4514   	} 
;;;4515   
;;;4516   
;;;4517   
;;;4518   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;4519   	{		
;;;4520   	if(mess_data[0]==PARAM_UNECC_SET)
;;;4521   		{
;;;4522   		u_necc=mess_data[1];
;;;4523   		}		
;;;4524   	}
;;;4525   
;;;4526   
;;;4527   else if(b1Hz_unh)
;;;4528   	{
;;;4529   	b1Hz_unh=0;
;;;4530   
;;;4531   	if(BAT_TYPE==0)
;;;4532   		{
;;;4533   		if(bat[0]._nd)mat_temper=20;
;;;4534   		else mat_temper=bat[0]._Tb;
;;;4535   
;;;4536   			
;;;4537   		if(mat_temper<0)temp_SL=UB0; 
;;;4538   		else 
;;;4539   			{
;;;4540   			if(mat_temper>40)mat_temper=40; 
;;;4541   			temp_SL=(UB20-UB0)*10;
;;;4542   			temp_SL*=mat_temper;
;;;4543   			temp_SL/=200;
;;;4544   			temp_SL+=UB0;
;;;4545   			}
;;;4546   		if(spc_stat==spcVZ)
;;;4547   			{
;;;4548   			temp_SL=UVZ;
;;;4549   			}
;;;4550   		u_necc=(unsigned int)temp_SL;
;;;4551   	///u_necc=3456;
;;;4552   		}
;;;4553   	else if(BAT_TYPE==1)
;;;4554   		{
;;;4555   		
;;;4556   		gran(&DU_LI_BAT,1,30);
;;;4557   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;4558   		gran(&u_necc,0,UB0);
;;;4559   		gran(&u_necc,0,UB20);
;;;4560   		gran(&u_necc,0,540);		
;;;4561   
;;;4562   
;;;4563   		if(li_bat._batStat!=bsOK)
;;;4564   			{
;;;4565   			u_necc=U0B;
;;;4566   			}
;;;4567   		if(spc_stat==spcVZ)
;;;4568   			{
;;;4569   			u_necc=UVZ;
;;;4570   			}
;;;4571   		}
;;;4572   	else if(BAT_TYPE==2)
;;;4573   		{
;;;4574   		u_necc=U0B;
;;;4575   		
;;;4576   		if(spc_stat==spcVZ)
;;;4577   			{
;;;4578   			u_necc=UVZ;
;;;4579   			}
;;;4580   	
;;;4581   		u_necc=UB0;
;;;4582   		}
;;;4583   
;;;4584   	else if(BAT_TYPE==3)
;;;4585   		{
;;;4586   		u_necc=U0B;
;;;4587   		
;;;4588   		if(spc_stat==spcVZ)
;;;4589   			{
;;;4590   			u_necc=UVZ;
;;;4591   			}
;;;4592   
;;;4593   		gran(&DU_LI_BAT,1,30);
;;;4594   
;;;4595   
;;;4596   		if(lakbNotErrorNum==0)
;;;4597   			{
;;;4598   			u_necc=U0B;
;;;4599   			}
;;;4600   		else 
;;;4601   			{
;;;4602   			signed short i;
;;;4603   			//signed short u_necc_max;
;;;4604   			//u_necc_max=0;
;;;4605   			char soc_flag=0;
;;;4606   
;;;4607   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;4608   				{
;;;4609   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;4610   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;4611   				}
;;;4612   
;;;4613   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;4614   			}
;;;4615   		gran(&u_necc,0,UB0);
;;;4616   		//gran(&u_necc,0,UB20);
;;;4617   		gran(&u_necc,0,540);
;;;4618   		}
;;;4619   	}
;;;4620   
;;;4621   #endif 
;;;4622   //u_necc=2356;
;;;4623   #endif//gran(&u_necc,400,UMAX);
;;;4624   
;;;4625   temp_L=(signed long) u_necc;
00204c  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;4626   temp_L*=98L;
002050  f04f0162          MOV      r1,#0x62
002054  fb00f101          MUL      r1,r0,r1
;;;4627   temp_L/=100L;
002058  f04f0264          MOV      r2,#0x64
00205c  fb91f1f2          SDIV     r1,r1,r2
;;;4628   u_necc_dn=(signed short)temp_L;
002060  4bf6              LDR      r3,|L1.9276|
002062  8019              STRH     r1,[r3,#0]
;;;4629   
;;;4630   temp_L=(signed long) u_necc;
;;;4631   temp_L*=102L;
002064  f04f0166          MOV      r1,#0x66
002068  fb00f001          MUL      r0,r0,r1
;;;4632   temp_L/=100L;
00206c  fb90f0f2          SDIV     r0,r0,r2
;;;4633   u_necc_up=(signed short)temp_L;
002070  49f3              LDR      r1,|L1.9280|
002072  8008              STRH     r0,[r1,#0]
;;;4634   
;;;4635   
;;;4636   }
002074  bd38              POP      {r3-r5,pc}
;;;4637   
                          ENDP

                  num_necc_hndl PROC
;;;4639   //-----------------------------------------------
;;;4640   void num_necc_hndl(void)
002076  e92d41f0          PUSH     {r4-r8,lr}
;;;4641   {
;;;4642   
;;;4643   static short num_necc_block_cnt;
;;;4644   if(num_necc_block_cnt) num_necc_block_cnt--;
00207a  4cf2              LDR      r4,|L1.9284|
00207c  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
002080  b110              CBZ      r0,|L1.8328|
002082  f1a00001          SUB      r0,r0,#1
002086  84e0              STRH     r0,[r4,#0x26]
                  |L1.8328|
;;;4645   
;;;4646   Isumm_=Isumm;
002088  48ef              LDR      r0,|L1.9288|
00208a  4df0              LDR      r5,|L1.9292|
00208c  8800              LDRH     r0,[r0,#0]  ; Isumm
00208e  8028              STRH     r0,[r5,#0]
;;;4647   
;;;4648   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
002090  4eef              LDR      r6,|L1.9296|
002092  270a              MOVS     r7,#0xa
002094  f9b60008          LDRSH    r0,[r6,#8]  ; bat
002098  2800              CMP      r0,#0
00209a  da06              BGE      |L1.8362|
00209c  f7fffffe          BL       abs
0020a0  fb90f0f7          SDIV     r0,r0,r7
0020a4  8829              LDRH     r1,[r5,#0]  ; Isumm_
0020a6  4408              ADD      r0,r0,r1
0020a8  8028              STRH     r0,[r5,#0]
                  |L1.8362|
;;;4649   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
0020aa  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0020ae  2800              CMP      r0,#0
0020b0  da06              BGE      |L1.8384|
0020b2  f7fffffe          BL       abs
0020b6  fb90f0f7          SDIV     r0,r0,r7
0020ba  8829              LDRH     r1,[r5,#0]  ; Isumm_
0020bc  4408              ADD      r0,r0,r1
0020be  8028              STRH     r0,[r5,#0]
                  |L1.8384|
;;;4650   
;;;4651   num_necc_up=(Isumm_/((signed short)IMAX))+1;
0020c0  48e4              LDR      r0,|L1.9300|
0020c2  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0020c6  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0020ca  fb91f0f0          SDIV     r0,r1,r0
0020ce  f1000001          ADD      r0,r0,#1
0020d2  b2c0              UXTB     r0,r0
0020d4  74a0              STRB     r0,[r4,#0x12]
;;;4652   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;4653   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;4654   
;;;4655   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0020d6  4ae0              LDR      r2,|L1.9304|
0020d8  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0020dc  fb91f1f2          SDIV     r1,r1,r2
0020e0  f1010101          ADD      r1,r1,#1
0020e4  b2c9              UXTB     r1,r1
0020e6  74e1              STRB     r1,[r4,#0x13]
;;;4656   
;;;4657   if(num_necc_up>num_necc)
0020e8  4bdc              LDR      r3,|L1.9308|
;;;4658   	{
;;;4659   	num_necc=num_necc_up;
;;;4660   	num_necc_block_cnt=60;
0020ea  f04f053c          MOV      r5,#0x3c
0020ee  f9b32000          LDRSH    r2,[r3,#0]            ;4657  ; num_necc
0020f2  4290              CMP      r0,r2                 ;4657
0020f4  dd02              BLE      |L1.8444|
0020f6  8018              STRH     r0,[r3,#0]            ;4659
0020f8  84e5              STRH     r5,[r4,#0x26]
0020fa  e005              B        |L1.8456|
                  |L1.8444|
;;;4661   	}
;;;4662   else if(num_necc_down<num_necc)
0020fc  4291              CMP      r1,r2
0020fe  da03              BGE      |L1.8456|
;;;4663   	{
;;;4664   	if(!num_necc_block_cnt)
002100  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
002102  b908              CBNZ     r0,|L1.8456|
;;;4665   		{
;;;4666   		num_necc=num_necc_down;
002104  8019              STRH     r1,[r3,#0]
;;;4667   		num_necc_block_cnt=60;
002106  84e5              STRH     r5,[r4,#0x26]
                  |L1.8456|
;;;4668   		}
;;;4669   	}
;;;4670   
;;;4671   /*if(PAR)*/ num_necc=NUMIST;
002108  48d5              LDR      r0,|L1.9312|
00210a  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
00210e  801a              STRH     r2,[r3,#0]
;;;4672   
;;;4673   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4674   //if(bPARALLEL) num_necc=NUMIST;
;;;4675   #endif
;;;4676   
;;;4677   num_necc=NUMIST;
;;;4678   
;;;4679   gran(&num_necc,1,NUMIST);
002110  e8bd41f0          POP      {r4-r8,lr}
002114  2101              MOVS     r1,#1
002116  48d1              LDR      r0,|L1.9308|
002118  f7ffbffe          B.W      gran
;;;4680   
;;;4681   }
;;;4682   
                          ENDP

                  cntrl_hndl PROC
;;;4684   //-----------------------------------------------
;;;4685   void cntrl_hndl(void)
00211c  e92d47f0          PUSH     {r4-r10,lr}
;;;4686   {
;;;4687   
;;;4688   IZMAX_=IZMAX;
002120  48d0              LDR      r0,|L1.9316|
002122  f8df8320          LDR      r8,|L1.9284|
002126  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
00212a  f8a8103a          STRH     r1,[r8,#0x3a]
;;;4689   
;;;4690   //cntrl_hndl_plazma=10;
;;;4691   
;;;4692   if(speedChIsOn)IZMAX_=speedChrgCurr;
00212e  48ce              LDR      r0,|L1.9320|
002130  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
002132  b118              CBZ      r0,|L1.8508|
002134  48cd              LDR      r0,|L1.9324|
002136  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
002138  f8a8003a          STRH     r0,[r8,#0x3a]
                  |L1.8508|
;;;4693   
;;;4694   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
00213c  f9b8004e          LDRSH    r0,[r8,#0x4e]  ; cntrl_stat_blok_cnt
002140  b118              CBZ      r0,|L1.8522|
002142  f1a00001          SUB      r0,r0,#1
002146  f8a8004e          STRH     r0,[r8,#0x4e]
                  |L1.8522|
;;;4695   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
00214a  f9b80050          LDRSH    r0,[r8,#0x50]  ; cntrl_stat_blok_cnt_
00214e  b118              CBZ      r0,|L1.8536|
002150  f1a00001          SUB      r0,r0,#1
002154  f8a80050          STRH     r0,[r8,#0x50]
                  |L1.8536|
;;;4696   
;;;4697   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
002158  48bd              LDR      r0,|L1.9296|
00215a  f04f090a          MOV      r9,#0xa
00215e  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
002162  0792              LSLS     r2,r2,#30
002164  d103              BNE      |L1.8558|
002166  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
00216a  0780              LSLS     r0,r0,#30
00216c  d003              BEQ      |L1.8566|
                  |L1.8558|
00216e  fb91f0f9          SDIV     r0,r1,r9
002172  f8a8003a          STRH     r0,[r8,#0x3a]
                  |L1.8566|
;;;4698   
;;;4699   
;;;4700   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4701   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
002176  48be              LDR      r0,|L1.9328|
002178  2501              MOVS     r5,#1
00217a  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
00217e  1e49              SUBS     r1,r1,#1
002180  2905              CMP      r1,#5
002182  d300              BCC      |L1.8582|
002184  8005              STRH     r5,[r0,#0]
                  |L1.8582|
;;;4702   if(ch_cnt0<(10*REG_SPEED))
002186  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
00218a  2400              MOVS     r4,#0                 ;4692
00218c  eb000180          ADD      r1,r0,r0,LSL #2
002190  f8980007          LDRB     r0,[r8,#7]  ; ch_cnt0
002194  ebb00f41          CMP      r0,r1,LSL #1
002198  da0b              BGE      |L1.8626|
;;;4703   	{
;;;4704   	ch_cnt0++;
00219a  f1000001          ADD      r0,r0,#1
00219e  b2c0              UXTB     r0,r0
0021a0  f8880007          STRB     r0,[r8,#7]
;;;4705   	if(ch_cnt0>=10*REG_SPEED)
0021a4  ebb00f41          CMP      r0,r1,LSL #1
0021a8  db03              BLT      |L1.8626|
;;;4706   		{
;;;4707   		ch_cnt0=0;
0021aa  f8884007          STRB     r4,[r8,#7]
;;;4708   		b1Hz_ch=1;
0021ae  f8885008          STRB     r5,[r8,#8]
                  |L1.8626|
;;;4709   		}
;;;4710   	}
;;;4711   #endif
;;;4712   
;;;4713   
;;;4714   if(mess_find_unvol(MESS2CNTRL_HNDL))
0021b2  20e1              MOVS     r0,#0xe1
0021b4  f7fffffe          BL       mess_find_unvol
;;;4715   	{
;;;4716   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;4717   		{
;;;4718   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;4719   		}
;;;4720   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;4721   		{
;;;4722   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;4723   		}
;;;4724   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;4725   		{
;;;4726   		static char cntrlStatIsDownCnt;
;;;4727   		cntrl_stat--;
;;;4728   
;;;4729   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;4730   			{
;;;4731   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;4732   			}
;;;4733   		else 
;;;4734   			{
;;;4735   			cntrlStatIsDownCnt=0;
;;;4736   			}
;;;4737   
;;;4738   		}
;;;4739   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;4740   		{
;;;4741   		cntrl_stat=mess_data[1];
;;;4742   		}
;;;4743   
;;;4744   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;4745   		{
;;;4746   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4747   		if(load_U>u_necc)
0021b8  4bae              LDR      r3,|L1.9332|
;;;4748   			{
;;;4749   			cntrl_hndl_plazma=11;
;;;4750   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
0021ba  4aaf              LDR      r2,|L1.9336|
;;;4751   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;4752   			}
;;;4753   		else if(bps_U<u_necc)
;;;4754   			{
;;;4755   			cntrl_hndl_plazma=12;	
;;;4756   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;4757   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;4758   			}
;;;4759   		#endif	
;;;4760   	 	}
;;;4761   	}
;;;4762   
;;;4763   #ifdef UKU_VD
;;;4764   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
0021bc  4eaf              LDR      r6,|L1.9340|
;;;4765   	{
;;;4766   	cntrl_stat_new=cntrl_stat_old;
;;;4767   	cntrl_hndl_plazma=19;
;;;4768   	if((Ibmax/10)>(2*IZMAX_))
;;;4769   		{
;;;4770   		cntrl_hndl_plazma=20;
;;;4771             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4772   		else	cntrl_stat_new-=10;
;;;4773   		}		
;;;4774   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;4775   		{
;;;4776   		cntrl_hndl_plazma=21;
;;;4777             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4778             else	cntrl_stat_new-=3;
;;;4779   		}   
;;;4780   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;4781   		{
;;;4782   		cntrl_hndl_plazma=22;
;;;4783   		cntrl_stat_new--;
;;;4784   		}
;;;4785   		
;;;4786   	else if(bps_U<u_necc)
;;;4787   		{
;;;4788   		cntrl_hndl_plazma=23;
;;;4789   /*		if(bps_U<(u_necc-(UB0-UB20)))
;;;4790   			{
;;;4791   			cntrl_hndl_plazma=24;
;;;4792   			if(Ibmax<0)
;;;4793   				{
;;;4794   				cntrl_hndl_plazma=25;
;;;4795                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4796   				else cntrl_stat_new+=10;
;;;4797   				}
;;;4798   			else if(Ibmax<(IZMAX_*5))
;;;4799   				{
;;;4800   				cntrl_hndl_plazma=26;
;;;4801                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4802   				else	cntrl_stat_new+=2;
;;;4803   				}
;;;4804   			else if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4805   				{
;;;4806   				cntrl_hndl_plazma=27;
;;;4807   				cntrl_stat_new++;
;;;4808   				}					
;;;4809   			}	*/
;;;4810   /*		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;4811   			{
;;;4812   			cntrl_hndl_plazma=28;
;;;4813   			if(Ibmax<(IZMAX_*5))
;;;4814   				{
;;;4815   				cntrl_hndl_plazma=29;
;;;4816                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;4817   				else	cntrl_stat_new+=2;
;;;4818   				}
;;;4819   			else if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4820   				{
;;;4821   				cntrl_hndl_plazma=30;
;;;4822   				cntrl_stat_new++;
;;;4823   				}					
;;;4824   			}
;;;4825   		else if(bps_U<(u_necc-1))
;;;4826   			{
;;;4827   			cntrl_hndl_plazma=31;
;;;4828   			if(Ibmax<((IZMAX_*10)))//(Ibmax<((IZMAX_*95)/10))
;;;4829   				{
;;;4830   				cntrl_hndl_plazma=32;
;;;4831   				cntrl_stat_new++;
;;;4832   				}					
;;;4833   			}	*/					
;;;4834   		}	
;;;4835   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;4836   		{ 	
;;;4837   		cntrl_hndl_plazma=33;
;;;4838   /*		if(bps_U>(u_necc+(UB0-UB20)))
;;;4839   			{
;;;4840   			cntrl_hndl_plazma=34;
;;;4841                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4842   			else	cntrl_stat_new-=10;
;;;4843   			}
;;;4844   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;4845   			{
;;;4846   			cntrl_hndl_plazma=35;
;;;4847                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;4848   			else cntrl_stat_new-=2;
;;;4849   			}	
;;;4850   		else if(bps_U>(u_necc+1))
;;;4851   			{
;;;4852   			cntrl_hndl_plazma=36;
;;;4853   			cntrl_stat_new--;
;;;4854   			}*/					
;;;4855   		}
;;;4856   
;;;4857   	cntrl_stat_new=(short)((1000L*((long)(UOUT_-in_U)))/650L);
;;;4858   	gran(&cntrl_stat_new,10,1010);			
0021be  f24037f2          MOV      r7,#0x3f2
0021c2  2800              CMP      r0,#0                 ;4714
0021c4  d07e              BEQ      |L1.8900|
0021c6  499a              LDR      r1,|L1.9264|
0021c8  6808              LDR      r0,[r1,#0]            ;4716  ; mess_data
0021ca  2864              CMP      r0,#0x64              ;4716
0021cc  d00a              BEQ      |L1.8676|
0021ce  2869              CMP      r0,#0x69              ;4720
0021d0  d00f              BEQ      |L1.8690|
0021d2  f8dfc2ac          LDR      r12,|L1.9344|
0021d6  286e              CMP      r0,#0x6e              ;4724
0021d8  d013              BEQ      |L1.8706|
0021da  28e5              CMP      r0,#0xe5              ;4739
0021dc  d033              BEQ      |L1.8774|
0021de  28e6              CMP      r0,#0xe6              ;4744
0021e0  d035              BEQ      |L1.8782|
0021e2  e15d              B        |L1.9376|
                  |L1.8676|
0021e4  6848              LDR      r0,[r1,#4]            ;4718  ; mess_data
0021e6  f8b81020          LDRH     r1,[r8,#0x20]         ;4718  ; cntrl_stat_old
0021ea  4408              ADD      r0,r0,r1              ;4718
0021ec  f8a8001e          STRH     r0,[r8,#0x1e]         ;4718
0021f0  e156              B        |L1.9376|
                  |L1.8690|
0021f2  6848              LDR      r0,[r1,#4]            ;4722  ; mess_data
0021f4  f8b81020          LDRH     r1,[r8,#0x20]         ;4722  ; cntrl_stat_old
0021f8  eba10000          SUB      r0,r1,r0              ;4722
0021fc  f8a8001e          STRH     r0,[r8,#0x1e]         ;4722
002200  e14e              B        |L1.9376|
                  |L1.8706|
002202  f8b8001e          LDRH     r0,[r8,#0x1e]         ;4727  ; cntrl_stat
002206  f1a00001          SUB      r0,r0,#1              ;4727
00220a  b200              SXTH     r0,r0                 ;4727
00220c  f8a8001e          STRH     r0,[r8,#0x1e]         ;4727
002210  281e              CMP      r0,#0x1e              ;4729
002212  dd06              BLE      |L1.8738|
002214  499b              LDR      r1,|L1.9348|
002216  f9bc0000          LDRSH    r0,[r12,#0]           ;4729  ; load_U
00221a  f9b11000          LDRSH    r1,[r1,#0]            ;4729  ; USIGN
00221e  4288              CMP      r0,r1                 ;4729
002220  da0e              BGE      |L1.8768|
                  |L1.8738|
002222  f8980001          LDRB     r0,[r8,#1]            ;4731  ; cntrlStatIsDownCnt
002226  1c40              ADDS     r0,r0,#1              ;4731
002228  b2c0              UXTB     r0,r0                 ;4731
00222a  f8880001          STRB     r0,[r8,#1]            ;4731
00222e  28fa              CMP      r0,#0xfa              ;4731
002230  d105              BNE      |L1.8766|
002232  230a              MOVS     r3,#0xa               ;4731
002234  2200              MOVS     r2,#0                 ;4731
002236  21e7              MOVS     r1,#0xe7              ;4731
002238  20e6              MOVS     r0,#0xe6              ;4731
00223a  f7fffffe          BL       mess_send
                  |L1.8766|
00223e  e12f              B        |L1.9376|
                  |L1.8768|
002240  f8884001          STRB     r4,[r8,#1]            ;4735
002244  e12c              B        |L1.9376|
                  |L1.8774|
002246  6848              LDR      r0,[r1,#4]            ;4741  ; mess_data
002248  f8a8001e          STRH     r0,[r8,#0x1e]         ;4741
00224c  e128              B        |L1.9376|
                  |L1.8782|
00224e  f9bc1000          LDRSH    r1,[r12,#0]           ;4747  ; load_U
002252  f9b30000          LDRSH    r0,[r3,#0]            ;4747  ; u_necc
002256  4281              CMP      r1,r0                 ;4747
002258  dd1f              BLE      |L1.8858|
00225a  f04f010b          MOV      r1,#0xb               ;4749
00225e  f888101d          STRB     r1,[r8,#0x1d]         ;4749
002262  f9b21000          LDRSH    r1,[r2,#0]            ;4750  ; bps_U
002266  eba10000          SUB      r0,r1,r0              ;4750
00226a  2828              CMP      r0,#0x28              ;4750
00226c  dd08              BLE      |L1.8832|
00226e  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4750  ; cntrl_stat
002272  2800              CMP      r0,#0                 ;4750
002274  dd04              BLE      |L1.8832|
002276  f1a00005          SUB      r0,r0,#5              ;4750
00227a  f8a8001e          STRH     r0,[r8,#0x1e]         ;4750
00227e  e10f              B        |L1.9376|
                  |L1.8832|
002280  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4751  ; cntrl_stat
002284  2800              CMP      r0,#0                 ;4751
002286  d007              BEQ      |L1.8856|
002288  f8981008          LDRB     r1,[r8,#8]            ;4751  ; b1Hz_ch
00228c  2900              CMP      r1,#0                 ;4751
00228e  d003              BEQ      |L1.8856|
002290  f1a00001          SUB      r0,r0,#1              ;4751
002294  f8a8001e          STRH     r0,[r8,#0x1e]         ;4751
                  |L1.8856|
002298  e102              B        |L1.9376|
                  |L1.8858|
00229a  f9b21000          LDRSH    r1,[r2,#0]            ;4753  ; bps_U
00229e  4281              CMP      r1,r0                 ;4753
0022a0  da13              BGE      |L1.8906|
0022a2  f04f020c          MOV      r2,#0xc               ;4755
0022a6  f888201d          STRB     r2,[r8,#0x1d]         ;4755
0022aa  eba00001          SUB      r0,r0,r1              ;4756
0022ae  2828              CMP      r0,#0x28              ;4756
0022b0  dd0c              BLE      |L1.8908|
0022b2  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4756  ; cntrl_stat
0022b6  f24031f7          MOV      r1,#0x3f7             ;4756
0022ba  4288              CMP      r0,r1                 ;4756
0022bc  da06              BGE      |L1.8908|
0022be  f1000005          ADD      r0,r0,#5              ;4756
0022c2  e000              B        |L1.8902|
                  |L1.8900|
0022c4  e00f              B        |L1.8934|
                  |L1.8902|
0022c6  f8a8001e          STRH     r0,[r8,#0x1e]         ;4756
                  |L1.8906|
0022ca  e0e9              B        |L1.9376|
                  |L1.8908|
0022cc  f9b8001e          LDRSH    r0,[r8,#0x1e]         ;4757  ; cntrl_stat
0022d0  f5b07f7f          CMP      r0,#0x3fc             ;4757
0022d4  da33              BGE      |L1.9022|
0022d6  f8981008          LDRB     r1,[r8,#8]            ;4757  ; b1Hz_ch
0022da  b381              CBZ      r1,|L1.9022|
0022dc  f1000001          ADD      r0,r0,#1              ;4757
0022e0  f8a8001e          STRH     r0,[r8,#0x1e]         ;4757
0022e4  e0dc              B        |L1.9376|
                  |L1.8934|
0022e6  f8980008          LDRB     r0,[r8,#8]            ;4764  ; b1Hz_ch
0022ea  b340              CBZ      r0,|L1.9022|
0022ec  4866              LDR      r0,|L1.9352|
0022ee  8800              LDRH     r0,[r0,#0]            ;4764  ; bIBAT_SMKLBR
0022f0  b118              CBZ      r0,|L1.8954|
0022f2  f8960343          LDRB     r0,[r6,#0x343]        ;4764  ; bps
0022f6  2828              CMP      r0,#0x28              ;4764
0022f8  d921              BLS      |L1.9022|
                  |L1.8954|
0022fa  f9b80020          LDRSH    r0,[r8,#0x20]         ;4766  ; cntrl_stat_old
0022fe  f8a80036          STRH     r0,[r8,#0x36]         ;4766
002302  f04f0113          MOV      r1,#0x13              ;4767
002306  f888101d          STRB     r1,[r8,#0x1d]         ;4767
00230a  f9b8c038          LDRSH    r12,[r8,#0x38]        ;4768  ; Ibmax
00230e  f8b8103a          LDRH     r1,[r8,#0x3a]         ;4768  ; IZMAX_
002312  fb9cf9f9          SDIV     r9,r12,r9             ;4768
002316  ebb90f41          CMP      r9,r1,LSL #1          ;4768
00231a  dd11              BLE      |L1.9024|
00231c  f04f0114          MOV      r1,#0x14              ;4770
002320  f888101d          STRB     r1,[r8,#0x1d]         ;4770
002324  f8b8104e          LDRH     r1,[r8,#0x4e]         ;4771  ; cntrl_stat_blok_cnt
002328  b121              CBZ      r1,|L1.9012|
00232a  f1a00001          SUB      r0,r0,#1              ;4771
00232e  f8a80036          STRH     r0,[r8,#0x36]         ;4771
002332  e03a              B        |L1.9130|
                  |L1.9012|
002334  f1a0000a          SUB      r0,r0,#0xa            ;4772
002338  f8a80036          STRH     r0,[r8,#0x36]         ;4772
00233c  e035              B        |L1.9130|
                  |L1.9022|
00233e  e076              B        |L1.9262|
                  |L1.9024|
002340  da14              BGE      |L1.9068|
002342  ebc11a01          RSB      r10,r1,r1,LSL #4      ;4774
002346  45e2              CMP      r10,r12               ;4774
002348  da10              BGE      |L1.9068|
00234a  f04f0115          MOV      r1,#0x15              ;4776
00234e  f888101d          STRB     r1,[r8,#0x1d]         ;4776
002352  f8b8104e          LDRH     r1,[r8,#0x4e]         ;4777  ; cntrl_stat_blok_cnt
002356  b121              CBZ      r1,|L1.9058|
002358  f1a00001          SUB      r0,r0,#1              ;4777
00235c  f8a80036          STRH     r0,[r8,#0x36]         ;4777
002360  e023              B        |L1.9130|
                  |L1.9058|
002362  f1a00003          SUB      r0,r0,#3              ;4778
002366  f8a80036          STRH     r0,[r8,#0x36]         ;4778
00236a  e01e              B        |L1.9130|
                  |L1.9068|
00236c  ebc11a01          RSB      r10,r1,r1,LSL #4      ;4780
002370  45e2              CMP      r10,r12               ;4780
002372  dd0a              BLE      |L1.9098|
002374  4589              CMP      r9,r1                 ;4780
002376  dd08              BLE      |L1.9098|
002378  f04f0116          MOV      r1,#0x16              ;4782
00237c  f888101d          STRB     r1,[r8,#0x1d]         ;4782
002380  f1a00001          SUB      r0,r0,#1              ;4783
002384  f8a80036          STRH     r0,[r8,#0x36]         ;4783
002388  e00f              B        |L1.9130|
                  |L1.9098|
00238a  f9b20000          LDRSH    r0,[r2,#0]            ;4786  ; bps_U
00238e  f9b31000          LDRSH    r1,[r3,#0]            ;4786  ; u_necc
002392  4288              CMP      r0,r1                 ;4786
002394  da04              BGE      |L1.9120|
002396  f04f0017          MOV      r0,#0x17              ;4788
00239a  f888001d          STRB     r0,[r8,#0x1d]         ;4788
00239e  e004              B        |L1.9130|
                  |L1.9120|
0023a0  dd03              BLE      |L1.9130|
0023a2  f04f0021          MOV      r0,#0x21              ;4837
0023a6  f888001d          STRB     r0,[r8,#0x1d]         ;4837
                  |L1.9130|
0023aa  4838              LDR      r0,|L1.9356|
0023ac  4938              LDR      r1,|L1.9360|
0023ae  f9b00000          LDRSH    r0,[r0,#0]            ;4857  ; UOUT_
0023b2  f9b11000          LDRSH    r1,[r1,#0]            ;4857  ; in_U
0023b6  eba00001          SUB      r0,r0,r1              ;4857
0023ba  f44f717a          MOV      r1,#0x3e8             ;4857
0023be  fb00f001          MUL      r0,r0,r1              ;4857
0023c2  f240218a          MOV      r1,#0x28a             ;4857
0023c6  fb90f0f1          SDIV     r0,r0,r1              ;4857
0023ca  f8a80036          STRH     r0,[r8,#0x36]         ;4857
0023ce  481d              LDR      r0,|L1.9284|
0023d0  463a              MOV      r2,r7
0023d2  f04f010a          MOV      r1,#0xa
0023d6  f1000036          ADD      r0,r0,#0x36
0023da  f7fffffe          BL       gran
;;;4859   	cntrl_stat_old=cntrl_stat_new;
0023de  f8b80036          LDRH     r0,[r8,#0x36]  ; cntrl_stat_new
0023e2  f8a80020          STRH     r0,[r8,#0x20]
;;;4860   	cntrl_stat=cntrl_stat_new;
0023e6  f8a8001e          STRH     r0,[r8,#0x1e]
;;;4861   	cntrl_stat_buff[cntrl_stat_buff_ptr]=cntrl_stat_new;  //pwm_u_buff[pwm_u_buff_ptr]=pwm_u_;
0023ea  4a2a              LDR      r2,|L1.9364|
0023ec  f898100b          LDRB     r1,[r8,#0xb]  ; cntrl_stat_buff_ptr
0023f0  f8220011          STRH     r0,[r2,r1,LSL #1]
;;;4862   	cntrl_stat_buff_ptr++;								   //pwm_u_buff_ptr++;
0023f4  f1010101          ADD      r1,r1,#1
0023f8  b2c8              UXTB     r0,r1
0023fa  f888000b          STRB     r0,[r8,#0xb]
;;;4863   	
;;;4864   	if(cntrl_stat_buff_ptr>=16)cntrl_stat_buff_ptr=0;	//if(pwm_u_buff_ptr>=16)pwm_u_buff_ptr=0;
0023fe  2810              CMP      r0,#0x10
002400  d301              BCC      |L1.9222|
002402  f888400b          STRB     r4,[r8,#0xb]
                  |L1.9222|
;;;4865   		{
;;;4866   		char i;
;;;4867   		signed long tempSL;
;;;4868   		tempSL=0;
002406  f04f0100          MOV      r1,#0
;;;4869   		for(i=0;i<16;i++)
00240a  4608              MOV      r0,r1
                  |L1.9228|
;;;4870   			{
;;;4871   			tempSL+=(signed long)cntrl_stat_buff[i];			//tempSL+=(signed long)pwm_u_buff[i];
00240c  f9323010          LDRSH    r3,[r2,r0,LSL #1]
002410  4419              ADD      r1,r1,r3
002412  f1000001          ADD      r0,r0,#1              ;4869
002416  b2c0              UXTB     r0,r0                 ;4869
002418  2810              CMP      r0,#0x10              ;4869
00241a  d3f7              BCC      |L1.9228|
;;;4872   			}
;;;4873   		tempSL>>=4;
00241c  ea4f1021          ASR      r0,r1,#4
;;;4874   		cntrl_stat_buff_=(signed short)tempSL;
002420  b200              SXTH     r0,r0
002422  f8a8003e          STRH     r0,[r8,#0x3e]
;;;4875   		}
;;;4876   	if(NUMSK)cntrl_stat=cntrl_stat_buff_;
002426  491c              LDR      r1,|L1.9368|
002428  8809              LDRH     r1,[r1,#0]  ; NUMSK
00242a  b101              CBZ      r1,|L1.9262|
00242c  e036              B        |L1.9372|
                  |L1.9262|
00242e  e037              B        |L1.9376|
                  |L1.9264|
                          DCD      mess_data
                  |L1.9268|
                          DCD      ICA_EN
                  |L1.9272|
                          DCD      ica_u_necc
                  |L1.9276|
                          DCD      u_necc_dn
                  |L1.9280|
                          DCD      u_necc_up
                  |L1.9284|
                          DCD      ||area_number.26||
                  |L1.9288|
                          DCD      Isumm
                  |L1.9292|
                          DCD      Isumm_
                  |L1.9296|
                          DCD      bat
                  |L1.9300|
                          DCD      IMAX
                  |L1.9304|
                          DCD      IMIN
                  |L1.9308|
                          DCD      num_necc
                  |L1.9312|
                          DCD      NUMIST
                  |L1.9316|
                          DCD      IZMAX
                  |L1.9320|
                          DCD      speedChIsOn
                  |L1.9324|
                          DCD      speedChrgCurr
                  |L1.9328|
                          DCD      REG_SPEED
                  |L1.9332|
                          DCD      u_necc
                  |L1.9336|
                          DCD      bps_U
                  |L1.9340|
                          DCD      bps
                  |L1.9344|
                          DCD      load_U
                  |L1.9348|
                          DCD      USIGN
                  |L1.9352|
                          DCD      bIBAT_SMKLBR
                  |L1.9356|
                          DCD      UOUT_
                  |L1.9360|
                          DCD      in_U
                  |L1.9364|
                          DCD      ||.bss||+0x440
                  |L1.9368|
                          DCD      NUMSK
                  |L1.9372|
00249c  f8a8001e          STRH     r0,[r8,#0x1e]
                  |L1.9376|
;;;4877   
;;;4878   	}
;;;4879   
;;;4880   #endif
;;;4881   
;;;4882   iiii=0;
0024a0  f888400a          STRB     r4,[r8,#0xa]
;;;4883   for(i=0;i<NUMIST;i++)
0024a4  f8884009          STRB     r4,[r8,#9]
0024a8  48ff              LDR      r0,|L1.10408|
0024aa  f9b02000          LDRSH    r2,[r0,#0]
0024ae  e01b              B        |L1.9448|
                  |L1.9392|
;;;4884        {
;;;4885        if(bps[i]._cnt<30)iiii=1;
0024b0  eb010081          ADD      r0,r1,r1,LSL #2
0024b4  eb0000c1          ADD      r0,r0,r1,LSL #3
0024b8  eb0600c0          ADD      r0,r6,r0,LSL #3
0024bc  78c3              LDRB     r3,[r0,#3]
0024be  2b1e              CMP      r3,#0x1e
0024c0  d201              BCS      |L1.9414|
0024c2  f888500a          STRB     r5,[r8,#0xa]
                  |L1.9414|
;;;4886   
;;;4887   	 bps[i]._cntrl_stat=cntrl_stat+bps[i]._x_;
0024c6  f100002c          ADD      r0,r0,#0x2c
0024ca  f8b8c01e          LDRH     r12,[r8,#0x1e]  ; cntrl_stat
0024ce  8d03              LDRH     r3,[r0,#0x28]
0024d0  4463              ADD      r3,r3,r12
0024d2  8703              STRH     r3,[r0,#0x38]
;;;4888   	 if(bps[i]._flags_tu&0x01) bps[i]._cntrl_stat=0;
0024d4  f810392c          LDRB     r3,[r0],#-0x2c
0024d8  07db              LSLS     r3,r3,#31
0024da  d001              BEQ      |L1.9440|
0024dc  f8a04064          STRH     r4,[r0,#0x64]
                  |L1.9440|
0024e0  f1010101          ADD      r1,r1,#1              ;4883
0024e4  f8881009          STRB     r1,[r8,#9]            ;4883
                  |L1.9448|
0024e8  f8981009          LDRB     r1,[r8,#9]            ;4883  ; i
0024ec  4291              CMP      r1,r2                 ;4883
0024ee  dbdf              BLT      |L1.9392|
;;;4889        }
;;;4890   
;;;4891   if(iiii==0)
0024f0  f898000a          LDRB     r0,[r8,#0xa]  ; iiii
0024f4  b938              CBNZ     r0,|L1.9478|
;;;4892        {
;;;4893        cntrl_stat=600;	
0024f6  f44f7016          MOV      r0,#0x258
0024fa  f8a8001e          STRH     r0,[r8,#0x1e]
;;;4894        cntrl_stat_old=600;
0024fe  f8a80020          STRH     r0,[r8,#0x20]
;;;4895        cntrl_stat_new=600;
002502  f8a80036          STRH     r0,[r8,#0x36]
                  |L1.9478|
;;;4896        }
;;;4897   gran(&cntrl_stat,10,1010); 
002506  463a              MOV      r2,r7
002508  210a              MOVS     r1,#0xa
00250a  48e8              LDR      r0,|L1.10412|
00250c  f7fffffe          BL       gran
;;;4898   b1Hz_ch=0;
002510  f8884008          STRB     r4,[r8,#8]
;;;4899   }
002514  e8bd87f0          POP      {r4-r10,pc}
;;;4900   
                          ENDP

                  ext_drv PROC
;;;4902   //-----------------------------------------------
;;;4903   void ext_drv(void)
002518  e92d5ff0          PUSH     {r4-r12,lr}
;;;4904   {
;;;4905   char i;
;;;4906   
;;;4907   
;;;4908   for(i=0;i<NUMSK;i++)
00251c  f04f0000          MOV      r0,#0
002520  4ae5              LDR      r2,|L1.10424|
;;;4909   	{
;;;4910   	#ifdef UKU_MGTS
;;;4911   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;4912   	#endif
;;;4913   	#ifdef UKU_RSTKM
;;;4914   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;4915   	#endif
;;;4916   	#ifdef UKU_3U
;;;4917   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;4918   	#endif
;;;4919   	#ifdef UKU_GLONASS
;;;4920   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;4921   	#endif
;;;4922   	#ifdef UKU_KONTUR
;;;4923   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;4924   	#endif
;;;4925   	#ifdef UKU_6U
;;;4926   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;4927   	#endif
;;;4928   	#ifdef UKU_220
;;;4929   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4930   	#endif
;;;4931   	#ifdef UKU_220_V2
;;;4932   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4933   	#endif
;;;4934   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4935   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;4936   	#endif
;;;4937   	#ifdef UKU_TELECORE2015	
;;;4938   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;4939   	#endif
;;;4940   	#ifdef UKU_TELECORE2017
;;;4941   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;4942   	#endif		
;;;4943   		{
;;;4944   		if(sk_cnt[i]<10)
002522  4be3              LDR      r3,|L1.10416|
;;;4945   			{
;;;4946   			sk_cnt[i]++;
;;;4947   			if(sk_cnt[i]>=10)
;;;4948   				{
;;;4949   				sk_stat[i]=ssON;
002524  4de3              LDR      r5,|L1.10420|
002526  f04f0a01          MOV      r10,#1
;;;4950   				}
;;;4951   			}
;;;4952   		else 
;;;4953   			{
;;;4954   			sk_cnt[i]=10;
00252a  f04f0b0a          MOV      r11,#0xa
00252e  4606              MOV      r6,r0                 ;4908
002530  f9b24000          LDRSH    r4,[r2,#0]            ;4908
002534  e025              B        |L1.9602|
                  |L1.9526|
002536  49e1              LDR      r1,|L1.10428|
002538  4fe1              LDR      r7,|L1.10432|
00253a  5c09              LDRB     r1,[r1,r0]            ;4935
00253c  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;4935
002540  f5b16ffa          CMP      r1,#0x7d0             ;4935
002544  da0e              BGE      |L1.9572|
002546  5619              LDRSB    r1,[r3,r0]            ;4944
002548  290a              CMP      r1,#0xa               ;4944
00254a  da08              BGE      |L1.9566|
00254c  f1010101          ADD      r1,r1,#1              ;4946
002550  b249              SXTB     r1,r1                 ;4946
002552  5419              STRB     r1,[r3,r0]            ;4946
002554  290a              CMP      r1,#0xa               ;4947
002556  db11              BLT      |L1.9596|
002558  f805a000          STRB     r10,[r5,r0]           ;4949
00255c  e00e              B        |L1.9596|
                  |L1.9566|
00255e  f803b000          STRB     r11,[r3,r0]
002562  e00b              B        |L1.9596|
                  |L1.9572|
;;;4955   			}
;;;4956                  
;;;4957   		}
;;;4958   	else
;;;4959   		{
;;;4960   		if(sk_cnt[i]>0)
002564  5619              LDRSB    r1,[r3,r0]
002566  2900              CMP      r1,#0
002568  dd07              BLE      |L1.9594|
;;;4961   			{
;;;4962   			sk_cnt[i]--;
00256a  f1a10101          SUB      r1,r1,#1
00256e  b249              SXTB     r1,r1
002570  5419              STRB     r1,[r3,r0]
;;;4963   			if(sk_cnt[i]<=0)
002572  2900              CMP      r1,#0
002574  dc02              BGT      |L1.9596|
;;;4964   				{
;;;4965   				sk_stat[i]=ssOFF;
002576  542e              STRB     r6,[r5,r0]
002578  e000              B        |L1.9596|
                  |L1.9594|
;;;4966   				}
;;;4967   			}
;;;4968   		else 
;;;4969   			{
;;;4970   			sk_cnt[i]=0;
00257a  541e              STRB     r6,[r3,r0]
                  |L1.9596|
00257c  f1000001          ADD      r0,r0,#1              ;4908
002580  b2c0              UXTB     r0,r0                 ;4908
                  |L1.9602|
002582  42a0              CMP      r0,r4                 ;4908
002584  dbd7              BLT      |L1.9526|
;;;4971   			}
;;;4972   		}
;;;4973   	}
;;;4974   
;;;4975   for(i=0;i<NUMSK;i++)
002586  f04f0400          MOV      r4,#0
;;;4976   	{
;;;4977   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;4978   		{
;;;4979   		if(sk_av_cnt[i]<10)
00258a  f8df9338          LDR      r9,|L1.10436|
;;;4980   			{
;;;4981   			sk_av_cnt[i]++;
;;;4982   			if(sk_av_cnt[i]>=10)
;;;4983   				{
;;;4984   				sk_av_stat[i]=sasON;
00258e  4fce              LDR      r7,|L1.10440|
;;;4985   				}
;;;4986   			}
;;;4987   		else 
;;;4988   			{
;;;4989   			sk_av_cnt[i]=10;
;;;4990   			}
;;;4991   		}
;;;4992   	else
;;;4993   		{
;;;4994   		if(sk_av_cnt[i]>=0)
;;;4995   			{
;;;4996   			sk_av_cnt[i]--;
;;;4997   			if(sk_av_cnt[i]<=0)
;;;4998   				{
;;;4999   				sk_av_stat[i]=sasOFF;
;;;5000   				}
;;;5001   			}
;;;5002   		else 
;;;5003   			{
;;;5004   			sk_av_cnt[i]=0;
;;;5005   			}
;;;5006   		}
;;;5007   
;;;5008   #ifndef UKU_KONTUR
;;;5009   	if(sk_av_stat_old[i]!=sk_av_stat[i])
002590  f8df8338          LDR      r8,|L1.10444|
002594  e083              B        |L1.9886|
                  |L1.9622|
002596  48ce              LDR      r0,|L1.10448|
002598  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;4977
00259c  b910              CBNZ     r0,|L1.9636|
00259e  5d29              LDRB     r1,[r5,r4]            ;4977
0025a0  2901              CMP      r1,#1                 ;4977
0025a2  d00f              BEQ      |L1.9668|
                  |L1.9636|
0025a4  b108              CBZ      r0,|L1.9642|
0025a6  5d28              LDRB     r0,[r5,r4]            ;4977
0025a8  b160              CBZ      r0,|L1.9668|
                  |L1.9642|
0025aa  f9190004          LDRSB    r0,[r9,r4]            ;4994
0025ae  2800              CMP      r0,#0                 ;4994
0025b0  db19              BLT      |L1.9702|
0025b2  f1a00001          SUB      r0,r0,#1              ;4996
0025b6  b240              SXTB     r0,r0                 ;4996
0025b8  f8090004          STRB     r0,[r9,r4]            ;4996
0025bc  2800              CMP      r0,#0                 ;4997
0025be  dc14              BGT      |L1.9706|
0025c0  553e              STRB     r6,[r7,r4]            ;4999
0025c2  e012              B        |L1.9706|
                  |L1.9668|
0025c4  f9190004          LDRSB    r0,[r9,r4]            ;4979
0025c8  280a              CMP      r0,#0xa               ;4979
0025ca  da09              BGE      |L1.9696|
0025cc  f1000001          ADD      r0,r0,#1              ;4981
0025d0  b240              SXTB     r0,r0                 ;4981
0025d2  f8090004          STRB     r0,[r9,r4]            ;4981
0025d6  280a              CMP      r0,#0xa               ;4982
0025d8  db07              BLT      |L1.9706|
0025da  f807a004          STRB     r10,[r7,r4]           ;4984
0025de  e004              B        |L1.9706|
                  |L1.9696|
0025e0  f809b004          STRB     r11,[r9,r4]           ;4989
0025e4  e001              B        |L1.9706|
                  |L1.9702|
0025e6  f8096004          STRB     r6,[r9,r4]            ;5004
                  |L1.9706|
0025ea  f8181004          LDRB     r1,[r8,r4]
0025ee  5d38              LDRB     r0,[r7,r4]
0025f0  4281              CMP      r1,r0
0025f2  d04e              BEQ      |L1.9874|
;;;5010   		{
;;;5011   		plazma_sk++;
0025f4  4aad              LDR      r2,|L1.10412|
0025f6  3a1e              SUBS     r2,r2,#0x1e
0025f8  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
0025fa  f1010101          ADD      r1,r1,#1
0025fe  8691              STRH     r1,[r2,#0x34]
;;;5012   		if(sk_av_stat[i]==sasON)
002600  2801              CMP      r0,#1
002602  d007              BEQ      |L1.9748|
;;;5013   			{
;;;5014   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;5015   			else if(i==1)
;;;5016   				{
;;;5017   				#ifndef UKU_TELEKORE2017
;;;5018   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;5019   				#endif
;;;5020   				#ifdef UKU_TELEKORE2017
;;;5021   				snmp_trap_send("Door open",15,2,1);
;;;5022   				#endif
;;;5023   				}
;;;5024   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;5025   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5026   			}
;;;5027   		else 
;;;5028   			{
;;;5029   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
002604  b354              CBZ      r4,|L1.9820|
;;;5030   			else if(i==1)
002606  2c01              CMP      r4,#1
002608  d02f              BEQ      |L1.9834|
;;;5031   				{
;;;5032   				#ifndef UKU_TELEKORE2017
;;;5033   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;5034   				#endif
;;;5035   				#ifdef UKU_TELEKORE2017
;;;5036   				snmp_trap_send("Door open clear",15,2,0);
;;;5037   				#endif
;;;5038   				}
;;;5039   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00260a  2c02              CMP      r4,#2
00260c  d034              BEQ      |L1.9848|
;;;5040   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
00260e  2c03              CMP      r4,#3
002610  d039              BEQ      |L1.9862|
002612  e03e              B        |L1.9874|
                  |L1.9748|
002614  b134              CBZ      r4,|L1.9764|
002616  2c01              CMP      r4,#1                 ;5015
002618  d00b              BEQ      |L1.9778|
00261a  2c02              CMP      r4,#2                 ;5024
00261c  d010              BEQ      |L1.9792|
00261e  2c03              CMP      r4,#3                 ;5025
002620  d015              BEQ      |L1.9806|
002622  e036              B        |L1.9874|
                  |L1.9764|
002624  2301              MOVS     r3,#1                 ;5014
002626  461a              MOV      r2,r3                 ;5014
002628  210f              MOVS     r1,#0xf               ;5014
00262a  a0aa              ADR      r0,|L1.10452|
00262c  f7fffffe          BL       snmp_trap_send
002630  e02f              B        |L1.9874|
                  |L1.9778|
002632  2301              MOVS     r3,#1                 ;5018
002634  2202              MOVS     r2,#2                 ;5018
002636  210f              MOVS     r1,#0xf               ;5018
002638  a0a9              ADR      r0,|L1.10464|
00263a  f7fffffe          BL       snmp_trap_send
00263e  e028              B        |L1.9874|
                  |L1.9792|
002640  2301              MOVS     r3,#1                 ;5024
002642  2203              MOVS     r2,#3                 ;5024
002644  210f              MOVS     r1,#0xf               ;5024
002646  a0a9              ADR      r0,|L1.10476|
002648  f7fffffe          BL       snmp_trap_send
00264c  e021              B        |L1.9874|
                  |L1.9806|
00264e  2301              MOVS     r3,#1                 ;5025
002650  2204              MOVS     r2,#4                 ;5025
002652  210f              MOVS     r1,#0xf               ;5025
002654  a0a8              ADR      r0,|L1.10488|
002656  f7fffffe          BL       snmp_trap_send
00265a  e01a              B        |L1.9874|
                  |L1.9820|
00265c  2300              MOVS     r3,#0                 ;5029
00265e  2201              MOVS     r2,#1                 ;5029
002660  210f              MOVS     r1,#0xf               ;5029
002662  a0a8              ADR      r0,|L1.10500|
002664  f7fffffe          BL       snmp_trap_send
002668  e013              B        |L1.9874|
                  |L1.9834|
00266a  2300              MOVS     r3,#0                 ;5033
00266c  2202              MOVS     r2,#2                 ;5033
00266e  210f              MOVS     r1,#0xf               ;5033
002670  a0a9              ADR      r0,|L1.10520|
002672  f7fffffe          BL       snmp_trap_send
002676  e00c              B        |L1.9874|
                  |L1.9848|
002678  2300              MOVS     r3,#0                 ;5039
00267a  2203              MOVS     r2,#3                 ;5039
00267c  210f              MOVS     r1,#0xf               ;5039
00267e  a0ab              ADR      r0,|L1.10540|
002680  f7fffffe          BL       snmp_trap_send
002684  e005              B        |L1.9874|
                  |L1.9862|
002686  2300              MOVS     r3,#0
002688  2204              MOVS     r2,#4
00268a  210f              MOVS     r1,#0xf
00268c  a0ac              ADR      r0,|L1.10560|
00268e  f7fffffe          BL       snmp_trap_send
                  |L1.9874|
;;;5041   			}
;;;5042   	 	}
;;;5043   #endif
;;;5044   
;;;5045   #ifdef UKU_KONTUR
;;;5046   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;5047   		{
;;;5048   		plazma_sk++;
;;;5049   		if(sk_av_stat[i]==sasON)
;;;5050   			{
;;;5051   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;5052   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;5053   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;5054   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5055   			}
;;;5056   		else 
;;;5057   			{
;;;5058   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;5059   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;5060   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;5061   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;5062   			}
;;;5063   	 	}
;;;5064   #endif
;;;5065   	sk_av_stat_old[i]=sk_av_stat[i];
002692  5d38              LDRB     r0,[r7,r4]
002694  f8080004          STRB     r0,[r8,r4]
002698  f1040401          ADD      r4,r4,#1              ;4975
00269c  b2e4              UXTB     r4,r4                 ;4975
                  |L1.9886|
00269e  4886              LDR      r0,|L1.10424|
0026a0  f9b00000          LDRSH    r0,[r0,#0]            ;4975  ; NUMSK
0026a4  4284              CMP      r4,r0                 ;4975
0026a6  f6ffaf76          BLT      |L1.9622|
                  |L1.9898|
;;;5066   	}
;;;5067   }
0026aa  e8bd9ff0          POP      {r4-r12,pc}
;;;5068   
                          ENDP

                  zar_superviser_start PROC
;;;5105   //-----------------------------------------------
;;;5106   void zar_superviser_start(void)
0026ae  4aa9              LDR      r2,|L1.10580|
;;;5107   {
;;;5108   sign_U[0]=1;
0026b0  f04f0001          MOV      r0,#1
0026b4  7010              STRB     r0,[r2,#0]
;;;5109   sign_I[0]=1;
0026b6  49a8              LDR      r1,|L1.10584|
0026b8  7008              STRB     r0,[r1,#0]
;;;5110   sign_U[1]=1;
0026ba  7050              STRB     r0,[r2,#1]
;;;5111   sign_I[1]=1;
0026bc  7048              STRB     r0,[r1,#1]
;;;5112   
;;;5113   }
0026be  4770              BX       lr
;;;5114   
                          ENDP

                  zar_superviser_drv PROC
;;;5070   //-----------------------------------------------
;;;5071   void zar_superviser_drv(void)
0026c0  e92d5ff0          PUSH     {r4-r12,lr}
;;;5072   {
;;;5073   
;;;5074   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
0026c4  48a6              LDR      r0,|L1.10592|
0026c6  f8df929c          LDR      r9,|L1.10596|
0026ca  f8df8290          LDR      r8,|L1.10588|
0026ce  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
0026d2  f9b90000          LDRSH    r0,[r9,#0]
0026d6  4c75              LDR      r4,|L1.10412|
0026d8  ebc01100          RSB      r1,r0,r0,LSL #4
0026dc  3c1e              SUBS     r4,r4,#0x1e
0026de  f9b87002          LDRSH    r7,[r8,#2]  ; bat
0026e2  f06f0a1d          MVN      r10,#0x1d
0026e6  f06f0b95          MVN      r11,#0x95
0026ea  2500              MOVS     r5,#0
0026ec  4e99              LDR      r6,|L1.10580|
0026ee  f9b40042          LDRSH    r0,[r4,#0x42]
0026f2  eb0a0281          ADD      r2,r10,r1,LSL #2
0026f6  eb0b0381          ADD      r3,r11,r1,LSL #2
0026fa  4567              CMP      r7,r12
0026fc  dc05              BGT      |L1.9994|
0026fe  f8dfc268          LDR      r12,|L1.10600|
002702  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
002706  4567              CMP      r7,r12
002708  da04              BGE      |L1.10004|
                  |L1.9994|
00270a  4282              CMP      r2,r0
00270c  dd02              BLE      |L1.10004|
00270e  4283              CMP      r3,r0
002710  da00              BGE      |L1.10004|
002712  7035              STRB     r5,[r6,#0]
                  |L1.10004|
;;;5075   
;;;5076   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
002714  4f95              LDR      r7,|L1.10604|
002716  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
00271a  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
00271e  4f8e              LDR      r7,|L1.10584|
002720  ebbc0f4e          CMP      r12,lr,LSL #1
002724  dc04              BGT      |L1.10032|
002726  f1ce0e00          RSB      lr,lr,#0
00272a  ebbc0f4e          CMP      r12,lr,LSL #1
00272e  da04              BGE      |L1.10042|
                  |L1.10032|
002730  4282              CMP      r2,r0
002732  dd02              BLE      |L1.10042|
002734  4283              CMP      r3,r0
002736  da00              BGE      |L1.10042|
002738  703d              STRB     r5,[r7,#0]
                  |L1.10042|
;;;5077   																 
;;;5078   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
00273a  f06f0209          MVN      r2,#9
00273e  eb020181          ADD      r1,r2,r1,LSL #2
002742  4281              CMP      r1,r0
002744  d120              BNE      |L1.10120|
002746  7da0              LDRB     r0,[r4,#0x16]  ; spc_stat
002748  b9f0              CBNZ     r0,|L1.10120|
;;;5079   	{
;;;5080   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
00274a  7830              LDRB     r0,[r6,#0]  ; sign_U
00274c  2801              CMP      r0,#1
00274e  d11b              BNE      |L1.10120|
002750  7838              LDRB     r0,[r7,#0]  ; sign_I
002752  2801              CMP      r0,#1
002754  d118              BNE      |L1.10120|
002756  f44f70d6          MOV      r0,#0x1ac
00275a  f7fffffe          BL       lc640_read_int
00275e  4984              LDR      r1,|L1.10608|
002760  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
002764  4288              CMP      r0,r1
002766  d00f              BEQ      |L1.10120|
002768  4882              LDR      r0,|L1.10612|
00276a  8800              LDRH     r0,[r0,#0]  ; NUMBAT
00276c  b160              CBZ      r0,|L1.10120|
00276e  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
002772  07c0              LSLS     r0,r0,#31
002774  d108              BNE      |L1.10120|
;;;5081   		{
;;;5082   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
002776  f44f70d6          MOV      r0,#0x1ac
00277a  f7fffffe          BL       lc640_write_int
;;;5083   		superviser_cnt++;
00277e  487e              LDR      r0,|L1.10616|
002780  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
002782  f1010101          ADD      r1,r1,#1
002786  7001              STRB     r1,[r0,#0]
                  |L1.10120|
;;;5084   		}
;;;5085   	
;;;5086   	}
;;;5087   
;;;5088   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
002788  4875              LDR      r0,|L1.10592|
00278a  f9b81002          LDRSH    r1,[r8,#2]  ; bat
00278e  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
002792  4281              CMP      r1,r0
002794  dc06              BGT      |L1.10148|
002796  4874              LDR      r0,|L1.10600|
002798  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
00279c  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
0027a0  4281              CMP      r1,r0
0027a2  da0e              BGE      |L1.10178|
                  |L1.10148|
0027a4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0027a8  f9b41042          LDRSH    r1,[r4,#0x42]  ; main_kb_cnt
0027ac  ebc01000          RSB      r0,r0,r0,LSL #4
0027b0  eb0a0280          ADD      r2,r10,r0,LSL #2
0027b4  428a              CMP      r2,r1
0027b6  dd04              BLE      |L1.10178|
0027b8  eb0b0080          ADD      r0,r11,r0,LSL #2
0027bc  4288              CMP      r0,r1
0027be  da00              BGE      |L1.10178|
0027c0  7075              STRB     r5,[r6,#1]
                  |L1.10178|
;;;5089   
;;;5090   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
0027c2  496a              LDR      r1,|L1.10604|
0027c4  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
0027c8  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
0027cc  ebb00f41          CMP      r0,r1,LSL #1
0027d0  dc03              BGT      |L1.10202|
0027d2  4249              RSBS     r1,r1,#0
0027d4  ebb00f41          CMP      r0,r1,LSL #1
0027d8  da0e              BGE      |L1.10232|
                  |L1.10202|
0027da  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0027de  f9b41042          LDRSH    r1,[r4,#0x42]  ; main_kb_cnt
0027e2  ebc01000          RSB      r0,r0,r0,LSL #4
0027e6  eb0a0280          ADD      r2,r10,r0,LSL #2
0027ea  428a              CMP      r2,r1
0027ec  dd04              BLE      |L1.10232|
0027ee  eb0b0080          ADD      r0,r11,r0,LSL #2
0027f2  4288              CMP      r0,r1
0027f4  da00              BGE      |L1.10232|
0027f6  707d              STRB     r5,[r7,#1]
                  |L1.10232|
;;;5091   																 
;;;5092   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0027f8  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0027fc  ebc01100          RSB      r1,r0,r0,LSL #4
002800  f06f0009          MVN      r0,#9
002804  eb000081          ADD      r0,r0,r1,LSL #2
002808  f9b41042          LDRSH    r1,[r4,#0x42]  ; main_kb_cnt
00280c  4288              CMP      r0,r1
00280e  d121              BNE      |L1.10324|
002810  7da0              LDRB     r0,[r4,#0x16]  ; spc_stat
002812  b9f8              CBNZ     r0,|L1.10324|
;;;5093   	{
;;;5094   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
002814  7870              LDRB     r0,[r6,#1]  ; sign_U
002816  2801              CMP      r0,#1
002818  d11c              BNE      |L1.10324|
00281a  7878              LDRB     r0,[r7,#1]  ; sign_I
00281c  2801              CMP      r0,#1
00281e  d119              BNE      |L1.10324|
002820  f44f75e5          MOV      r5,#0x1ca
002824  4628              MOV      r0,r5
002826  f7fffffe          BL       lc640_read_int
00282a  4951              LDR      r1,|L1.10608|
00282c  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
002830  4288              CMP      r0,r1
002832  d00f              BEQ      |L1.10324|
002834  484f              LDR      r0,|L1.10612|
002836  8800              LDRH     r0,[r0,#0]  ; NUMBAT
002838  2802              CMP      r0,#2
00283a  d10b              BNE      |L1.10324|
00283c  f8980089          LDRB     r0,[r8,#0x89]  ; bat
002840  07c0              LSLS     r0,r0,#31
002842  d107              BNE      |L1.10324|
;;;5095   		{
;;;5096   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
002844  4628              MOV      r0,r5
002846  f7fffffe          BL       lc640_write_int
;;;5097   		superviser_cnt++;
00284a  484b              LDR      r0,|L1.10616|
00284c  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
00284e  f1010101          ADD      r1,r1,#1
002852  7001              STRB     r1,[r0,#0]
                  |L1.10324|
;;;5098   		}
;;;5099   	
;;;5100   	}
;;;5101   
;;;5102   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
002854  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
002858  f06f0101          MVN      r1,#1
00285c  ebc01000          RSB      r0,r0,r0,LSL #4
002860  eb010080          ADD      r0,r1,r0,LSL #2
002864  f9b41042          LDRSH    r1,[r4,#0x42]  ; main_kb_cnt
002868  4288              CMP      r0,r1
00286a  d102              BNE      |L1.10354|
00286c  e8bd5ff0          POP      {r4-r12,lr}
002870  e7fe              B        zar_superviser_start
                  |L1.10354|
;;;5103   }
002872  e71a              B        |L1.9898|
;;;5104   
                          ENDP

                  npn_hndl PROC
;;;5115   //-----------------------------------------------
;;;5116   void npn_hndl(void)
002874  e92d03f0          PUSH     {r4-r9}
;;;5117   {
;;;5118   if(NPN_OUT!=npnoOFF)
002878  4840              LDR      r0,|L1.10620|
;;;5119   	{
;;;5120   /*	if(NPN_SIGN==npnsAVNET)
;;;5121   		{
;;;5122   		if(net_av==1)
;;;5123   			{
;;;5124   			if(npn_tz_cnt<TZNPN)
;;;5125   				{
;;;5126   				npn_tz_cnt++;
;;;5127   				if(npn_tz_cnt==TZNPN)
;;;5128   					{
;;;5129   					npn_stat=npnsOFF;
;;;5130   					}
;;;5131   				}
;;;5132   			}
;;;5133   		else
;;;5134   			{
;;;5135   			if(npn_tz_cnt)
;;;5136   				{
;;;5137   				npn_tz_cnt--;
;;;5138   				if(npn_tz_cnt==0)
;;;5139   					{
;;;5140   					npn_stat=npnsON;
;;;5141   					}
;;;5142   				}
;;;5143   			}
;;;5144   		}*/
;;;5145   /*	if(NPN_SIGN==npnsULOAD)
;;;5146   		{
;;;5147   		if(load_U<UONPN)
;;;5148   			{
;;;5149   			if(npn_tz_cnt<TZNPN)
;;;5150   				{
;;;5151   				npn_tz_cnt++;
;;;5152   				if(npn_tz_cnt==TZNPN)
;;;5153   					{
;;;5154   					npn_stat=npnsOFF;
;;;5155   					}
;;;5156   				}
;;;5157   			}
;;;5158   		else if(load_U>UVNPN)
;;;5159   			{
;;;5160   			if(npn_tz_cnt)
;;;5161   				{
;;;5162   				npn_tz_cnt--;
;;;5163   				if(npn_tz_cnt==0)
;;;5164   					{
;;;5165   					npn_stat=npnsON;
;;;5166   					}
;;;5167   				}
;;;5168   			}
;;;5169   		}*/
;;;5170   
;;;5171   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;5172   		{
;;;5173   		if(npn_tz_cnt<TZNPN)
00287a  4f41              LDR      r7,|L1.10624|
;;;5174   			{
;;;5175   			npn_tz_cnt++;
;;;5176   			if(npn_tz_cnt==TZNPN)
;;;5177   				{
;;;5178   				npn_stat=npnsOFF;
00287c  4e41              LDR      r6,|L1.10628|
00287e  7800              LDRB     r0,[r0,#0]            ;5118  ; NPN_OUT
002880  f04f0c00          MOV      r12,#0                ;5118
;;;5179   				}
;;;5180   			}
;;;5181   		}
;;;5182   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;5183   		{
;;;5184   		if(npn_tz_cnt)
;;;5185   			{
;;;5186   			npn_tz_cnt--;
;;;5187   			if(npn_tz_cnt==0)
;;;5188   				{
;;;5189   				npn_stat=npnsON;
002884  f04f0801          MOV      r8,#1
002888  b168              CBZ      r0,|L1.10406|
00288a  483f              LDR      r0,|L1.10632|
00288c  f9b05000          LDRSH    r5,[r0,#0]            ;5171  ; load_U
002890  483e              LDR      r0,|L1.10636|
002892  f9b09000          LDRSH    r9,[r0,#0]            ;5171  ; UONPN
002896  483e              LDR      r0,|L1.10640|
002898  f9b02000          LDRSH    r2,[r0,#0]            ;5171
00289c  483d              LDR      r0,|L1.10644|
00289e  f9b03000          LDRSH    r3,[r0,#0]            ;5171
0028a2  483d              LDR      r0,|L1.10648|
0028a4  e07a              B        |L1.10652|
                  |L1.10406|
0028a6  e0ac              B        |L1.10754|
                  |L1.10408|
                          DCD      NUMIST
                  |L1.10412|
                          DCD      ||area_number.26||+0x1e
                  |L1.10416|
                          DCD      sk_cnt
                  |L1.10420|
                          DCD      sk_stat
                  |L1.10424|
                          DCD      NUMSK
                  |L1.10428|
                          DCD      ||area_number.20||
                  |L1.10432|
                          DCD      ||.bss||+0x400
                  |L1.10436|
                          DCD      sk_av_cnt
                  |L1.10440|
                          DCD      sk_av_stat
                  |L1.10444|
                          DCD      sk_av_stat_old
                  |L1.10448|
                          DCD      SK_SIGN
                  |L1.10452|
0028d4  534b2023          DCB      "SK #1 Alarm",0
0028d8  3120416c
0028dc  61726d00
                  |L1.10464|
0028e0  534b2023          DCB      "SK #2 Alarm",0
0028e4  3220416c
0028e8  61726d00
                  |L1.10476|
0028ec  534b2023          DCB      "SK #3 Alarm",0
0028f0  3320416c
0028f4  61726d00
                  |L1.10488|
0028f8  534b2023          DCB      "SK #4 Alarm",0
0028fc  3420416c
002900  61726d00
                  |L1.10500|
002904  534b2023          DCB      "SK #1 Alarm is off",0
002908  3120416c
00290c  61726d20
002910  6973206f
002914  666600  
002917  00                DCB      0
                  |L1.10520|
002918  534b2023          DCB      "SK #2 Alarm is off",0
00291c  3220416c
002920  61726d20
002924  6973206f
002928  666600  
00292b  00                DCB      0
                  |L1.10540|
00292c  534b2023          DCB      "SK #3 Alarm is off",0
002930  3320416c
002934  61726d20
002938  6973206f
00293c  666600  
00293f  00                DCB      0
                  |L1.10560|
002940  534b2023          DCB      "SK #4 Alarm is off",0
002944  3420416c
002948  61726d20
00294c  6973206f
002950  666600  
002953  00                DCB      0
                  |L1.10580|
                          DCD      sign_U
                  |L1.10584|
                          DCD      sign_I
                  |L1.10588|
                          DCD      bat
                  |L1.10592|
                          DCD      u_necc_up
                  |L1.10596|
                          DCD      TBAT
                  |L1.10600|
                          DCD      u_necc_dn
                  |L1.10604|
                          DCD      IKB
                  |L1.10608|
                          DCD      BAT_C_REAL
                  |L1.10612|
                          DCD      NUMBAT
                  |L1.10616|
                          DCD      superviser_cnt
                  |L1.10620|
                          DCD      NPN_OUT
                  |L1.10624|
                          DCD      npn_tz_cnt
                  |L1.10628|
                          DCD      npn_stat
                  |L1.10632|
                          DCD      load_U
                  |L1.10636|
                          DCD      UONPN
                  |L1.10640|
                          DCD      net_Ua
                  |L1.10644|
                          DCD      net_Ub
                  |L1.10648|
                          DCD      net_Uc
                  |L1.10652|
00299c  f9b04000          LDRSH    r4,[r0,#0]            ;5171
0029a0  48ff              LDR      r0,|L1.11680|
0029a2  4639              MOV      r1,r7                 ;5173
0029a4  454d              CMP      r5,r9                 ;5171
0029a6  f9b00000          LDRSH    r0,[r0,#0]            ;5171
0029aa  f9b11000          LDRSH    r1,[r1,#0]            ;5173
0029ae  da13              BGE      |L1.10712|
0029b0  4282              CMP      r2,r0                 ;5171
0029b2  db03              BLT      |L1.10684|
0029b4  4283              CMP      r3,r0                 ;5171
0029b6  db01              BLT      |L1.10684|
0029b8  4284              CMP      r4,r0                 ;5171
0029ba  da0d              BGE      |L1.10712|
                  |L1.10684|
0029bc  48f9              LDR      r0,|L1.11684|
0029be  f9b02000          LDRSH    r2,[r0,#0]            ;5173  ; TZNPN
0029c2  4291              CMP      r1,r2                 ;5173
0029c4  da21              BGE      |L1.10762|
0029c6  f1010101          ADD      r1,r1,#1              ;5175
0029ca  b208              SXTH     r0,r1                 ;5175
0029cc  8038              STRH     r0,[r7,#0]            ;5175
0029ce  4290              CMP      r0,r2                 ;5176
0029d0  d11b              BNE      |L1.10762|
0029d2  f886c000          STRB     r12,[r6,#0]           ;5178
0029d6  e018              B        |L1.10762|
                  |L1.10712|
0029d8  f8dfc3cc          LDR      r12,|L1.11688|
0029dc  f9bcc000          LDRSH    r12,[r12,#0]          ;5182  ; UVNPN
0029e0  4565              CMP      r5,r12                ;5182
0029e2  dd12              BLE      |L1.10762|
0029e4  4282              CMP      r2,r0                 ;5182
0029e6  dd10              BLE      |L1.10762|
0029e8  4283              CMP      r3,r0                 ;5182
0029ea  dd0e              BLE      |L1.10762|
0029ec  4284              CMP      r4,r0                 ;5182
0029ee  dd0c              BLE      |L1.10762|
0029f0  b159              CBZ      r1,|L1.10762|
0029f2  f1a10101          SUB      r1,r1,#1              ;5186
0029f6  b208              SXTH     r0,r1                 ;5186
0029f8  8038              STRH     r0,[r7,#0]            ;5186
0029fa  b930              CBNZ     r0,|L1.10762|
0029fc  f8868000          STRB     r8,[r6,#0]
002a00  e003              B        |L1.10762|
                  |L1.10754|
;;;5190   				}
;;;5191   			}
;;;5192   		}
;;;5193   	}
;;;5194   else
;;;5195   	{
;;;5196   	npn_tz_cnt=0;
002a02  f8a7c000          STRH     r12,[r7,#0]
;;;5197   	npn_stat=npnsON;
002a06  f8868000          STRB     r8,[r6,#0]
                  |L1.10762|
;;;5198   	}
;;;5199   
;;;5200   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
002a0a  7830              LDRB     r0,[r6,#0]  ; npn_stat
002a0c  2800              CMP      r0,#0
002a0e  d107              BNE      |L1.10784|
002a10  e8bd03f0          POP      {r4-r9}
002a14  230f              MOVS     r3,#0xf
002a16  2201              MOVS     r2,#1
002a18  216e              MOVS     r1,#0x6e
002a1a  20d2              MOVS     r0,#0xd2
002a1c  f7ffbffe          B.W      mess_send
                  |L1.10784|
;;;5201   
;;;5202   
;;;5203   }
002a20  e8bd03f0          POP      {r4-r9}
002a24  4770              BX       lr
;;;5204   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;5298   //-----------------------------------------------
;;;5299   void	numOfForvardBps_hndl(void)			//ѕрограмма смены первого источника дл€ равномерного износа Ѕѕ—ов
002a26  e92d41f0          PUSH     {r4-r8,lr}
;;;5300   {
;;;5301   
;;;5302   numOfForvardBps_old=numOfForvardBps;
002a2a  4ce0              LDR      r4,|L1.11692|
002a2c  7ea0              LDRB     r0,[r4,#0x1a]  ; numOfForvardBps
002a2e  76e0              STRB     r0,[r4,#0x1b]
;;;5303   
;;;5304   numOfForvardBps=0;
002a30  f04f0500          MOV      r5,#0
002a34  76a5              STRB     r5,[r4,#0x1a]
;;;5305   
;;;5306   //FORVARDBPSCHHOUR=10;
;;;5307   
;;;5308   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
002a36  4ede              LDR      r6,|L1.11696|
002a38  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
002a3c  2800              CMP      r0,#0
002a3e  dd02              BLE      |L1.10822|
002a40  f5b07ffa          CMP      r0,#0x1f4
002a44  dd02              BLE      |L1.10828|
                  |L1.10822|
;;;5309   	{
;;;5310   	FORVARDBPSCHHOUR=0;
002a46  8035              STRH     r5,[r6,#0]
                  |L1.10824|
;;;5311   	return;
;;;5312   	}
;;;5313   
;;;5314   numOfForvardBps_minCnt++;
;;;5315   
;;;5316   
;;;5317   if(numOfForvardBps_minCnt>=60)
;;;5318   	{
;;;5319   	numOfForvardBps_minCnt=0;
;;;5320   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;5321   	numOfForvardBps_hourCnt++;
;;;5322   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;5323   		{
;;;5324   		numOfForvardBps_hourCnt=0;
;;;5325   		}
;;;5326   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;5327   	}
;;;5328   
;;;5329   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;5330   
;;;5331   //if(numOfForvardBps)
;;;5332   //numOfForvardBps_old=numOfForvardBps; 
;;;5333   }
002a48  e8bd81f0          POP      {r4-r8,pc}
                  |L1.10828|
002a4c  7f20              LDRB     r0,[r4,#0x1c]         ;5314  ; numOfForvardBps_minCnt
002a4e  f1000001          ADD      r0,r0,#1              ;5314
002a52  b2c0              UXTB     r0,r0                 ;5314
002a54  7720              STRB     r0,[r4,#0x1c]         ;5314
002a56  283c              CMP      r0,#0x3c              ;5317
002a58  d31a              BCC      |L1.10896|
002a5a  7725              STRB     r5,[r4,#0x1c]         ;5319
002a5c  f44f7794          MOV      r7,#0x128             ;5320
002a60  4638              MOV      r0,r7                 ;5320
002a62  f7fffffe          BL       lc640_read_int
002a66  f1000001          ADD      r0,r0,#1              ;5321
002a6a  b200              SXTH     r0,r0                 ;5321
002a6c  f8a40052          STRH     r0,[r4,#0x52]         ;5321
002a70  4ad0              LDR      r2,|L1.11700|
002a72  f9b61000          LDRSH    r1,[r6,#0]            ;5322  ; FORVARDBPSCHHOUR
002a76  f9b22000          LDRSH    r2,[r2,#0]            ;5322  ; NUMIST
002a7a  fb01f102          MUL      r1,r1,r2              ;5322
002a7e  4281              CMP      r1,r0                 ;5322
002a80  dc01              BGT      |L1.10886|
002a82  f8a45052          STRH     r5,[r4,#0x52]         ;5324
                  |L1.10886|
002a86  f9b41052          LDRSH    r1,[r4,#0x52]         ;5326  ; numOfForvardBps_hourCnt
002a8a  4638              MOV      r0,r7                 ;5326
002a8c  f7fffffe          BL       lc640_write_int
                  |L1.10896|
002a90  f9b40052          LDRSH    r0,[r4,#0x52]         ;5329  ; numOfForvardBps_hourCnt
002a94  f9b61000          LDRSH    r1,[r6,#0]            ;5329  ; FORVARDBPSCHHOUR
002a98  fb90f0f1          SDIV     r0,r0,r1              ;5329
002a9c  76a0              STRB     r0,[r4,#0x1a]         ;5329
002a9e  e7d3              B        |L1.10824|
;;;5334   
                          ENDP

                  numOfForvardBps_init PROC
;;;5335   //-----------------------------------------------
;;;5336   void	numOfForvardBps_init(void)			//ѕрограмма сброса системы смены первого источника дл€ равномерного износа Ѕѕ—ов
002aa0  b510              PUSH     {r4,lr}
;;;5337   {									//ƒолжна вызыватьс€ при изменении кол-ва источников в структуре
;;;5338   lc640_write_int(EE_FORVBPSHOURCNT,0);
002aa2  2100              MOVS     r1,#0
002aa4  f44f7094          MOV      r0,#0x128
002aa8  f7fffffe          BL       lc640_write_int
;;;5339   numOfForvardBps_minCnt=58;
002aac  49bf              LDR      r1,|L1.11692|
002aae  f04f003a          MOV      r0,#0x3a
002ab2  7708              STRB     r0,[r1,#0x1c]
;;;5340   }
002ab4  bd10              POP      {r4,pc}
;;;5341   
                          ENDP

                  vent_resurs_hndl PROC
;;;5387   //-----------------------------------------------
;;;5388   void vent_resurs_hndl(void)
002ab6  e92d41f0          PUSH     {r4-r8,lr}
;;;5389   {
;;;5390   char i;
;;;5391   char crc_in,crc_eval;
;;;5392   
;;;5393   for(i=0;i<NUMIST;i++)
002aba  f04f0200          MOV      r2,#0
002abe  48bd              LDR      r0,|L1.11700|
;;;5394   	{
;;;5395   	if((bps[i]._buff[7]&0xc0)==0x00)
002ac0  4fbd              LDR      r7,|L1.11704|
002ac2  f9b06000          LDRSH    r6,[r0,#0]            ;5393
002ac6  e06e              B        |L1.11174|
                  |L1.10952|
002ac8  eb020082          ADD      r0,r2,r2,LSL #2
002acc  eb0000c2          ADD      r0,r0,r2,LSL #3
002ad0  eb0700c0          ADD      r0,r7,r0,LSL #3
002ad4  7b41              LDRB     r1,[r0,#0xd]
002ad6  098b              LSRS     r3,r1,#6
002ad8  d006              BEQ      |L1.10984|
;;;5396   		{
;;;5397   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;5398   		}
;;;5399   	else if((bps[i]._buff[7]&0xc0)==0x40)
002ada  2301              MOVS     r3,#1
002adc  ebb31f91          CMP      r3,r1,LSR #6
002ae0  d105              BNE      |L1.10990|
;;;5400   		{
;;;5401   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
002ae2  f8801059          STRB     r1,[r0,#0x59]
002ae6  e00f              B        |L1.11016|
                  |L1.10984|
002ae8  f8801058          STRB     r1,[r0,#0x58]         ;5397
002aec  e00c              B        |L1.11016|
                  |L1.10990|
;;;5402   		}
;;;5403   	else if((bps[i]._buff[7]&0xc0)==0x80)
002aee  2302              MOVS     r3,#2
002af0  ebb31f91          CMP      r3,r1,LSR #6
002af4  d102              BNE      |L1.11004|
;;;5404   		{
;;;5405   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
002af6  f880105a          STRB     r1,[r0,#0x5a]
002afa  e005              B        |L1.11016|
                  |L1.11004|
;;;5406   		}
;;;5407   	else if((bps[i]._buff[7]&0xc0)==0xc0)
002afc  2303              MOVS     r3,#3
002afe  ebb31f91          CMP      r3,r1,LSR #6
002b02  d101              BNE      |L1.11016|
;;;5408   		{
;;;5409   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
002b04  f880105b          STRB     r1,[r0,#0x5b]
                  |L1.11016|
;;;5410   		}
;;;5411   	crc_in=0;
;;;5412   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
002b08  f8101f58          LDRB     r1,[r0,#0x58]!
002b0c  f3c11401          UBFX     r4,r1,#4,#2
;;;5413   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
002b10  7843              LDRB     r3,[r0,#1]
002b12  f0030530          AND      r5,r3,#0x30
002b16  ea440595          ORR      r5,r4,r5,LSR #2
;;;5414   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
002b1a  7884              LDRB     r4,[r0,#2]
002b1c  f0040c30          AND      r12,r4,#0x30
002b20  ea4c0c05          ORR      r12,r12,r5
;;;5415   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
002b24  78c5              LDRB     r5,[r0,#3]
002b26  f1a00058          SUB      r0,r0,#0x58
002b2a  f0050830          AND      r8,r5,#0x30
002b2e  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;5416   
;;;5417   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
002b32  f001010f          AND      r1,r1,#0xf
;;;5418   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
002b36  f003030f          AND      r3,r3,#0xf
002b3a  ea830801          EOR      r8,r3,r1
;;;5419   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
002b3e  f004040f          AND      r4,r4,#0xf
002b42  ea840808          EOR      r8,r4,r8
;;;5420   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
002b46  f005050f          AND      r5,r5,#0xf
002b4a  ea850808          EOR      r8,r5,r8
;;;5421   
;;;5422   	if(crc_eval==crc_in)
002b4e  45e0              CMP      r8,r12
002b50  d113              BNE      |L1.11130|
;;;5423   		{
;;;5424   		unsigned short temp_US;
;;;5425   		temp_US=0;
;;;5426   
;;;5427   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;5428   		temp_US<<=4;
002b52  ea4f1505          LSL      r5,r5,#4
;;;5429   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
002b56  ea440405          ORR      r4,r4,r5
;;;5430   		temp_US<<=4;
002b5a  ea4f1404          LSL      r4,r4,#4
;;;5431   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
002b5e  ea430304          ORR      r3,r3,r4
;;;5432   		temp_US<<=4;
002b62  ea4f5303          LSL      r3,r3,#20
002b66  ea4f4313          LSR      r3,r3,#16
;;;5433   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
002b6a  ea410103          ORR      r1,r1,r3
;;;5434   
;;;5435   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
002b6e  f8b0305c          LDRH     r3,[r0,#0x5c]
002b72  428b              CMP      r3,r1
002b74  d001              BEQ      |L1.11130|
002b76  f8a0105c          STRH     r1,[r0,#0x5c]
                  |L1.11130|
;;;5436   		}
;;;5437   
;;;5438   	if(bps[i]._vent_resurs>TVENTMAX*10)
002b7a  4990              LDR      r1,|L1.11708|
002b7c  f8b0305c          LDRH     r3,[r0,#0x5c]
002b80  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
002b84  eb010181          ADD      r1,r1,r1,LSL #2
002b88  ebb30f41          CMP      r3,r1,LSL #1
002b8c  dd04              BLE      |L1.11160|
;;;5439   		{
;;;5440   		bps[i]._av|=(1<<4);
002b8e  7841              LDRB     r1,[r0,#1]
002b90  f0410110          ORR      r1,r1,#0x10
002b94  7041              STRB     r1,[r0,#1]
002b96  e003              B        |L1.11168|
                  |L1.11160|
;;;5441   		}
;;;5442   	else bps[i]._av&=~(1<<4);
002b98  7841              LDRB     r1,[r0,#1]
002b9a  f0210110          BIC      r1,r1,#0x10
002b9e  7041              STRB     r1,[r0,#1]
                  |L1.11168|
002ba0  f1020201          ADD      r2,r2,#1              ;5393
002ba4  b2d2              UXTB     r2,r2                 ;5393
                  |L1.11174|
002ba6  42b2              CMP      r2,r6                 ;5393
002ba8  db8e              BLT      |L1.10952|
;;;5443   	}
;;;5444   }
002baa  e74d              B        |L1.10824|
;;;5445   
                          ENDP

                  vent_hndl PROC
;;;5446   //-----------------------------------------------
;;;5447   void vent_hndl(void)
002bac  e92d4ff0          PUSH     {r4-r11,lr}
;;;5448   {
002bb0  b087              SUB      sp,sp,#0x1c
;;;5449   if(RELEVENTSIGN==rvsAKB)
002bb2  4883              LDR      r0,|L1.11712|
;;;5450   	{
;;;5451   	if(vent_stat==0)
002bb4  4c7d              LDR      r4,|L1.11692|
;;;5452   		{
;;;5453   		if	(
;;;5454   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
002bb6  4983              LDR      r1,|L1.11716|
;;;5455   			||
;;;5456   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;5457   			)
;;;5458   			{
;;;5459   			vent_stat=1;
;;;5460   			}
;;;5461   		}
;;;5462   	else if(vent_stat==1)
;;;5463   		{
;;;5464   		if	(
;;;5465   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
002bb8  4a83              LDR      r2,|L1.11720|
002bba  7800              LDRB     r0,[r0,#0]            ;5449  ; RELEVENTSIGN
002bbc  f9943000          LDRSB    r3,[r4,#0]            ;5451
002bc0  f9b11000          LDRSH    r1,[r1,#0]            ;5454
002bc4  f9b22000          LDRSH    r2,[r2,#0]
002bc8  b148              CBZ      r0,|L1.11230|
;;;5466   			&&
;;;5467   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;5468   			)
;;;5469   			{
;;;5470   			vent_stat=0;
;;;5471   			}
;;;5472   		}
;;;5473   	}
;;;5474   else if(RELEVENTSIGN==rvsBPS)
002bca  2802              CMP      r0,#2
002bcc  d03c              BEQ      |L1.11336|
;;;5475   	{
;;;5476   /*	if	(
;;;5477   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;5478   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;5479   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;5480   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;5481   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;5482   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;5483   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;5484   		)
;;;5485   		{
;;;5486   		vent_stat=1;
;;;5487   		}
;;;5488   	else vent_stat=0;
;;;5489   	*/
;;;5490   
;;;5491   	if	(
;;;5492   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;5493   		||
;;;5494   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;5495   		||
;;;5496   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;5497   		||
;;;5498   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;5499   		||
;;;5500   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;5501   		||
;;;5502   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;5503   		||
;;;5504   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;5505   		||
;;;5506   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;5507   		)
;;;5508   		{
;;;5509   		vent_stat=1;
;;;5510   		}
;;;5511   	else if(vent_stat==1)
;;;5512   		{
;;;5513   		if	(
;;;5514   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;5515   			&&
;;;5516   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;5517   			&&
;;;5518   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;5519   			&&
;;;5520   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;5521   			&&
;;;5522   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;5523   			&&
;;;5524   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;5525   			&&
;;;5526   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;5527   			&&
;;;5528   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;5529   			)
;;;5530   			{
;;;5531   			vent_stat=0;
;;;5532   			}
;;;5533   		}
;;;5534   	}
;;;5535   else if(RELEVENTSIGN==rvsEXT)
002bce  2801              CMP      r0,#1
002bd0  d07e              BEQ      |L1.11472|
;;;5536   	{
;;;5537   	if	(
;;;5538   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;5539   		||
;;;5540   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;5541   		||
;;;5542   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;5543   		)
;;;5544   		{
;;;5545   		vent_stat=1;
;;;5546   		}
;;;5547   	else if(vent_stat==1)
;;;5548   		{
;;;5549   		if	(
;;;5550   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;5551   			&&
;;;5552   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;5553   			&&
;;;5554   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;5555   			)
;;;5556   			{
;;;5557   			vent_stat=0;
;;;5558   			}
;;;5559   		}
;;;5560   	}
;;;5561   else vent_stat=1;
002bd2  f04f0001          MOV      r0,#1
002bd6  7020              STRB     r0,[r4,#0]
                  |L1.11224|
;;;5562   }
002bd8  b007              ADD      sp,sp,#0x1c
002bda  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.11230|
002bde  4f7b              LDR      r7,|L1.11724|
002be0  f8df81ec          LDR      r8,|L1.11728|
002be4  f9b7000a          LDRSH    r0,[r7,#0xa]          ;5454
002be8  7b3d              LDRB     r5,[r7,#0xc]          ;5454
002bea  f9b76056          LDRSH    r6,[r7,#0x56]         ;5456
002bee  f898c000          LDRB     r12,[r8,#0]           ;5453
002bf2  f8977058          LDRB     r7,[r7,#0x58]         ;5456
002bf6  f8988001          LDRB     r8,[r8,#1]            ;5456
002bfa  b12b              CBZ      r3,|L1.11272|
002bfc  2b01              CMP      r3,#1                 ;5462
002bfe  d1eb              BNE      |L1.11224|
002c00  f1bc0f55          CMP      r12,#0x55             ;5464
002c04  d115              BNE      |L1.11314|
002c06  e010              B        |L1.11306|
                  |L1.11272|
002c08  f1bc0f55          CMP      r12,#0x55             ;5453
002c0c  d102              BNE      |L1.11284|
002c0e  4288              CMP      r0,r1                 ;5454
002c10  dc07              BGT      |L1.11298|
002c12  b935              CBNZ     r5,|L1.11298|
                  |L1.11284|
002c14  f1b80f55          CMP      r8,#0x55              ;5456
002c18  d1de              BNE      |L1.11224|
002c1a  428e              CMP      r6,r1                 ;5456
002c1c  dc01              BGT      |L1.11298|
002c1e  2f00              CMP      r7,#0                 ;5456
002c20  d0da              BEQ      |L1.11224|
                  |L1.11298|
002c22  f04f0001          MOV      r0,#1                 ;5459
002c26  7020              STRB     r0,[r4,#0]            ;5459
002c28  e7d6              B        |L1.11224|
                  |L1.11306|
002c2a  4290              CMP      r0,r2                 ;5465
002c2c  dad4              BGE      |L1.11224|
002c2e  2d00              CMP      r5,#0                 ;5465
002c30  d1d2              BNE      |L1.11224|
                  |L1.11314|
002c32  f1b80f55          CMP      r8,#0x55              ;5467
002c36  d103              BNE      |L1.11328|
002c38  4296              CMP      r6,r2                 ;5467
002c3a  dacd              BGE      |L1.11224|
002c3c  2f00              CMP      r7,#0                 ;5467
002c3e  d1cb              BNE      |L1.11224|
                  |L1.11328|
002c40  f04f0000          MOV      r0,#0                 ;5470
002c44  7020              STRB     r0,[r4,#0]            ;5470
002c46  e7c7              B        |L1.11224|
                  |L1.11336|
002c48  4e5b              LDR      r6,|L1.11704|
002c4a  485a              LDR      r0,|L1.11700|
002c4c  6ab5              LDR      r5,[r6,#0x28]         ;5492
002c4e  f9b00000          LDRSH    r0,[r0,#0]            ;5491  ; NUMIST
002c52  78f6              LDRB     r6,[r6,#3]            ;5492
002c54  b118              CBZ      r0,|L1.11358|
002c56  428d              CMP      r5,r1                 ;5492
002c58  dc7a              BGT      |L1.11600|
002c5a  2e1e              CMP      r6,#0x1e              ;5492
002c5c  d278              BCS      |L1.11600|
                  |L1.11358|
002c5e  f8dfc158          LDR      r12,|L1.11704|
002c62  2801              CMP      r0,#1                 ;5494
002c64  f8dc7090          LDR      r7,[r12,#0x90]        ;5494
002c68  f89cc06b          LDRB     r12,[r12,#0x6b]       ;5494
002c6c  f8cdc018          STR      r12,[sp,#0x18]        ;5494
002c70  dd06              BLE      |L1.11392|
002c72  428f              CMP      r7,r1                 ;5494
002c74  dc6c              BGT      |L1.11600|
002c76  f8ddc018          LDR      r12,[sp,#0x18]        ;5494
002c7a  f1bc0f1e          CMP      r12,#0x1e             ;5494
002c7e  d267              BCS      |L1.11600|
                  |L1.11392|
002c80  f8dfc134          LDR      r12,|L1.11704|
002c84  2802              CMP      r0,#2                 ;5496
002c86  f8dc80f8          LDR      r8,[r12,#0xf8]        ;5496
002c8a  f8cd8014          STR      r8,[sp,#0x14]         ;5496
002c8e  f89cc0d3          LDRB     r12,[r12,#0xd3]       ;5496
002c92  f8cdc010          STR      r12,[sp,#0x10]        ;5496
002c96  dd08              BLE      |L1.11434|
002c98  f8ddc014          LDR      r12,[sp,#0x14]        ;5496
002c9c  458c              CMP      r12,r1                ;5496
002c9e  dc57              BGT      |L1.11600|
002ca0  f8ddc010          LDR      r12,[sp,#0x10]        ;5496
002ca4  f1bc0f1e          CMP      r12,#0x1e             ;5496
002ca8  d252              BCS      |L1.11600|
                  |L1.11434|
002caa  f8dfc10c          LDR      r12,|L1.11704|
002cae  2803              CMP      r0,#3                 ;5498
002cb0  f8dc8160          LDR      r8,[r12,#0x160]       ;5498
002cb4  f8cd800c          STR      r8,[sp,#0xc]          ;5498
002cb8  f89cc13b          LDRB     r12,[r12,#0x13b]      ;5498
002cbc  f8cdc008          STR      r12,[sp,#8]           ;5498
002cc0  dd0a              BLE      |L1.11480|
002cc2  f8ddc00c          LDR      r12,[sp,#0xc]         ;5498
002cc6  458c              CMP      r12,r1                ;5498
002cc8  dc42              BGT      |L1.11600|
002cca  f8ddc008          LDR      r12,[sp,#8]           ;5498
002cce  e000              B        |L1.11474|
                  |L1.11472|
002cd0  e09b              B        |L1.11786|
                  |L1.11474|
002cd2  f1bc0f1e          CMP      r12,#0x1e             ;5498
002cd6  d23b              BCS      |L1.11600|
                  |L1.11480|
002cd8  f8df80dc          LDR      r8,|L1.11704|
002cdc  2804              CMP      r0,#4                 ;5500
002cde  f8d8c1c8          LDR      r12,[r8,#0x1c8]       ;5500
002ce2  f89881a3          LDRB     r8,[r8,#0x1a3]        ;5500
002ce6  f8cd8004          STR      r8,[sp,#4]            ;5500
002cea  dd06              BLE      |L1.11514|
002cec  458c              CMP      r12,r1                ;5500
002cee  dc2f              BGT      |L1.11600|
002cf0  f8dd8004          LDR      r8,[sp,#4]            ;5500
002cf4  f1b80f1e          CMP      r8,#0x1e              ;5500
002cf8  d22a              BCS      |L1.11600|
                  |L1.11514|
002cfa  f8df90bc          LDR      r9,|L1.11704|
002cfe  2805              CMP      r0,#5                 ;5502
002d00  f8d98230          LDR      r8,[r9,#0x230]        ;5502
002d04  f899920b          LDRB     r9,[r9,#0x20b]        ;5502
002d08  f8cd9000          STR      r9,[sp,#0]            ;5502
002d0c  dd06              BLE      |L1.11548|
002d0e  4588              CMP      r8,r1                 ;5502
002d10  dc1e              BGT      |L1.11600|
002d12  f8dd9000          LDR      r9,[sp,#0]            ;5502
002d16  f1b90f1e          CMP      r9,#0x1e              ;5502
002d1a  d219              BCS      |L1.11600|
                  |L1.11548|
002d1c  f8dfa098          LDR      r10,|L1.11704|
002d20  2806              CMP      r0,#6                 ;5504
002d22  f89ae273          LDRB     lr,[r10,#0x273]       ;5504
002d26  f8da9298          LDR      r9,[r10,#0x298]       ;5504
002d2a  dd04              BLE      |L1.11574|
002d2c  4589              CMP      r9,r1                 ;5504
002d2e  dc0f              BGT      |L1.11600|
002d30  f1be0f1e          CMP      lr,#0x1e              ;5504
002d34  d20c              BCS      |L1.11600|
                  |L1.11574|
002d36  f8dfb080          LDR      r11,|L1.11704|
002d3a  2807              CMP      r0,#7                 ;5506
002d3c  f8dba300          LDR      r10,[r11,#0x300]      ;5506
002d40  f89bb2db          LDRB     r11,[r11,#0x2db]      ;5506
002d44  dd08              BLE      |L1.11608|
002d46  458a              CMP      r10,r1                ;5506
002d48  dc02              BGT      |L1.11600|
002d4a  f1bb0f1e          CMP      r11,#0x1e             ;5506
002d4e  d303              BCC      |L1.11608|
                  |L1.11600|
002d50  f04f0001          MOV      r0,#1                 ;5509
002d54  7020              STRB     r0,[r4,#0]            ;5509
                  |L1.11606|
002d56  e73f              B        |L1.11224|
                  |L1.11608|
002d58  2b01              CMP      r3,#1                 ;5511
002d5a  d1fc              BNE      |L1.11606|
002d5c  b118              CBZ      r0,|L1.11622|
002d5e  4295              CMP      r5,r2                 ;5514
002d60  daf9              BGE      |L1.11606|
002d62  2e0a              CMP      r6,#0xa               ;5514
002d64  d2f7              BCS      |L1.11606|
                  |L1.11622|
002d66  2802              CMP      r0,#2                 ;5516
002d68  db04              BLT      |L1.11636|
002d6a  4297              CMP      r7,r2                 ;5516
002d6c  daf3              BGE      |L1.11606|
002d6e  9906              LDR      r1,[sp,#0x18]         ;5516
002d70  290a              CMP      r1,#0xa               ;5516
002d72  d2f0              BCS      |L1.11606|
                  |L1.11636|
002d74  2803              CMP      r0,#3                 ;5518
002d76  db05              BLT      |L1.11652|
002d78  9905              LDR      r1,[sp,#0x14]         ;5518
002d7a  4291              CMP      r1,r2                 ;5518
002d7c  daeb              BGE      |L1.11606|
002d7e  9904              LDR      r1,[sp,#0x10]         ;5518
002d80  290a              CMP      r1,#0xa               ;5518
002d82  d2e8              BCS      |L1.11606|
                  |L1.11652|
002d84  2804              CMP      r0,#4                 ;5520
002d86  db05              BLT      |L1.11668|
002d88  9903              LDR      r1,[sp,#0xc]          ;5520
002d8a  4291              CMP      r1,r2                 ;5520
002d8c  dae3              BGE      |L1.11606|
002d8e  9902              LDR      r1,[sp,#8]            ;5520
002d90  290a              CMP      r1,#0xa               ;5520
002d92  d2e0              BCS      |L1.11606|
                  |L1.11668|
002d94  2805              CMP      r0,#5                 ;5522
002d96  db1f              BLT      |L1.11736|
002d98  4594              CMP      r12,r2                ;5522
002d9a  dadc              BGE      |L1.11606|
002d9c  9901              LDR      r1,[sp,#4]            ;5522
002d9e  e019              B        |L1.11732|
                  |L1.11680|
                          DCD      UMN
                  |L1.11684|
                          DCD      TZNPN
                  |L1.11688|
                          DCD      UVNPN
                  |L1.11692|
                          DCD      ||area_number.26||
                  |L1.11696|
                          DCD      FORVARDBPSCHHOUR
                  |L1.11700|
                          DCD      NUMIST
                  |L1.11704|
                          DCD      bps
                  |L1.11708|
                          DCD      TVENTMAX
                  |L1.11712|
                          DCD      RELEVENTSIGN
                  |L1.11716|
                          DCD      TVENTON
                  |L1.11720|
                          DCD      TVENTOFF
                  |L1.11724|
                          DCD      bat
                  |L1.11728|
                          DCD      BAT_IS_ON
                  |L1.11732|
002dd4  290a              CMP      r1,#0xa               ;5522
002dd6  d2be              BCS      |L1.11606|
                  |L1.11736|
002dd8  2806              CMP      r0,#6                 ;5524
002dda  db04              BLT      |L1.11750|
002ddc  4590              CMP      r8,r2                 ;5524
002dde  daba              BGE      |L1.11606|
002de0  9900              LDR      r1,[sp,#0]            ;5524
002de2  290a              CMP      r1,#0xa               ;5524
002de4  d2b7              BCS      |L1.11606|
                  |L1.11750|
002de6  2807              CMP      r0,#7                 ;5526
002de8  db04              BLT      |L1.11764|
002dea  4591              CMP      r9,r2                 ;5526
002dec  dab3              BGE      |L1.11606|
002dee  f1be0f0a          CMP      lr,#0xa               ;5526
002df2  d2b0              BCS      |L1.11606|
                  |L1.11764|
002df4  2808              CMP      r0,#8                 ;5528
002df6  db04              BLT      |L1.11778|
002df8  4592              CMP      r10,r2                ;5528
002dfa  daac              BGE      |L1.11606|
002dfc  f1bb0f0a          CMP      r11,#0xa              ;5528
002e00  d2a9              BCS      |L1.11606|
                  |L1.11778|
002e02  f04f0000          MOV      r0,#0                 ;5531
002e06  7020              STRB     r0,[r4,#0]            ;5531
                  |L1.11784|
002e08  e6e6              B        |L1.11224|
                  |L1.11786|
002e0a  4823              LDR      r0,|L1.11928|
002e0c  4d23              LDR      r5,|L1.11932|
002e0e  4e24              LDR      r6,|L1.11936|
002e10  f9b00000          LDRSH    r0,[r0,#0]            ;5537  ; NUMDT
002e14  f9b55000          LDRSH    r5,[r5,#0]            ;5538
002e18  7836              LDRB     r6,[r6,#0]            ;5538
002e1a  b110              CBZ      r0,|L1.11810|
002e1c  428d              CMP      r5,r1                 ;5538
002e1e  dc1d              BGT      |L1.11868|
002e20  b9e6              CBNZ     r6,|L1.11868|
                  |L1.11810|
002e22  4f1e              LDR      r7,|L1.11932|
002e24  f8dfc078          LDR      r12,|L1.11936|
002e28  2801              CMP      r0,#1                 ;5540
002e2a  f9b77002          LDRSH    r7,[r7,#2]            ;5540
002e2e  f89cc001          LDRB     r12,[r12,#1]          ;5540
002e32  dd04              BLE      |L1.11838|
002e34  428f              CMP      r7,r1                 ;5540
002e36  dc11              BGT      |L1.11868|
002e38  f1bc0f00          CMP      r12,#0                ;5540
002e3c  d10e              BNE      |L1.11868|
                  |L1.11838|
002e3e  f8df805c          LDR      r8,|L1.11932|
002e42  f8df905c          LDR      r9,|L1.11936|
002e46  2802              CMP      r0,#2                 ;5542
002e48  f9b88004          LDRSH    r8,[r8,#4]            ;5542
002e4c  f8999002          LDRB     r9,[r9,#2]            ;5542
002e50  dd08              BLE      |L1.11876|
002e52  4588              CMP      r8,r1                 ;5542
002e54  dc02              BGT      |L1.11868|
002e56  f1b90f00          CMP      r9,#0                 ;5542
002e5a  d003              BEQ      |L1.11876|
                  |L1.11868|
002e5c  f04f0001          MOV      r0,#1                 ;5545
002e60  7020              STRB     r0,[r4,#0]            ;5545
002e62  e6b9              B        |L1.11224|
                  |L1.11876|
002e64  2b01              CMP      r3,#1                 ;5547
002e66  d1cf              BNE      |L1.11784|
002e68  b118              CBZ      r0,|L1.11890|
002e6a  4295              CMP      r5,r2                 ;5550
002e6c  dacc              BGE      |L1.11784|
002e6e  2e00              CMP      r6,#0                 ;5550
002e70  d1ca              BNE      |L1.11784|
                  |L1.11890|
002e72  2802              CMP      r0,#2                 ;5552
002e74  db04              BLT      |L1.11904|
002e76  4297              CMP      r7,r2                 ;5552
002e78  dac6              BGE      |L1.11784|
002e7a  f1bc0f00          CMP      r12,#0                ;5552
002e7e  d1c3              BNE      |L1.11784|
                  |L1.11904|
002e80  2803              CMP      r0,#3                 ;5554
002e82  db04              BLT      |L1.11918|
002e84  4590              CMP      r8,r2                 ;5554
002e86  dabf              BGE      |L1.11784|
002e88  f1b90f00          CMP      r9,#0                 ;5554
002e8c  d1bc              BNE      |L1.11784|
                  |L1.11918|
002e8e  f04f0000          MOV      r0,#0                 ;5557
002e92  7020              STRB     r0,[r4,#0]            ;5557
002e94  e6a0              B        |L1.11224|
;;;5563   
                          ENDP

002e96  0000              DCW      0x0000
                  |L1.11928|
                          DCD      NUMDT
                  |L1.11932|
                          DCD      t_ext
                  |L1.11936|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;245    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f8a10040          STRH     r0,[r1,#0x40]
00000a  4770              BX       lr
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
;;;319    
                          ENDP

                  |L2.12|
                          DCD      ||area_number.26||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;245    {          
000004  4c80              LDR      r4,|L3.520|
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000036  f1a40672          SUB      r6,r4,#0x72
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;253  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;253
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;253  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;253
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;254  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;254
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;254  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;255  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;255
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;255  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;255
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;255  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;255  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;256  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;256
000074  6004              STR      r4,[r0,#0]            ;256  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;256  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;256
00007c  6044              STR      r4,[r0,#4]            ;246  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;257  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;257
000084  6084              STR      r4,[r0,#8]            ;257  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;258  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;258
00008c  60c1              STR      r1,[r0,#0xc]          ;257  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;257  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;258  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;262
00009c  85f1              STRH     r1,[r6,#0x2e]         ;262
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;262
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]         ;264  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;266
0000aa  428c              CMP      r4,r1                 ;266
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;266
0000b0  6002              STR      r2,[r0,#0]            ;268  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;269  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;270  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;270  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;270
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;270  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;270
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;273  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;273
0000c8  b209              SXTH     r1,r1                 ;273
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;273
0000cc  f5b17f00          CMP      r1,#0x200             ;275
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;277
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;277  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;277
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;284
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;284
0000e8  ea4f2424          ASR      r4,r4,#8              ;284
0000ec  8534              STRH     r4,[r6,#0x28]         ;284
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;286
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;286  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;287
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;287
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;287
000100  2827              CMP      r0,#0x27              ;287
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;288  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;288
00010c  71b0              STRB     r0,[r6,#6]            ;290
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;291  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;291  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;291
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;292  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;292
000122  0798              LSLS     r0,r3,#30             ;294
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;295
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;295
00012c  4461              ADD      r1,r1,r12             ;295
00012e  f1000001          ADD      r0,r0,#1              ;296
000132  b2c0              UXTB     r0,r0                 ;296
000134  2810              CMP      r0,#0x10              ;298
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;298
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;299
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;299
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;301
000148  b2e8              UXTB     r0,r5                 ;302
00014a  7130              STRB     r0,[r6,#4]            ;302
00014c  2810              CMP      r0,#0x10              ;302
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;302
000152  f1030301          ADD      r3,r3,#1              ;303
000156  b2d8              UXTB     r0,r3                 ;303
000158  7170              STRB     r0,[r6,#5]            ;305
00015a  2810              CMP      r0,#0x10              ;305
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;306
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;306
000162  f1070701          ADD      r7,r7,#1              ;306
000166  f0070001          AND      r0,r7,#1              ;307
00016a  70f0              STRB     r0,[r6,#3]            ;307
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;310
000172  f02000ff          BIC      r0,r0,#0xff           ;310
000176  f1000004          ADD      r0,r0,#4              ;310
00017a  6010              STR      r0,[r2,#0]            ;311
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;311  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;313
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;313
000186  f02000ff          BIC      r0,r0,#0xff           ;314
00018a  f1000001          ADD      r0,r0,#1              ;314
00018e  6010              STR      r0,[r2,#0]            ;314
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff           ;258
000198  f1000002          ADD      r0,r0,#2              ;258
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;319    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.26||+0x72
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;245    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L4.54|
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000034  7091              STRB     r1,[r2,#2]
                  |L4.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;253  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;253
000044  70d0              STRB     r0,[r2,#3]            ;253
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;253
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;254
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;254
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;255
00005a  210e              MOVS     r1,#0xe               ;255
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;255
000066  2202              MOVS     r2,#2                 ;255
000068  210e              MOVS     r1,#0xe               ;255
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;256
000074  2203              MOVS     r2,#3                 ;256
000076  210e              MOVS     r1,#0xe               ;256
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;257
000082  2204              MOVS     r2,#4                 ;257
000084  210e              MOVS     r1,#0xe               ;257
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;257
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;258  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;262
00009c  70d0              STRB     r0,[r2,#3]            ;262
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;262
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;265
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;266
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;266
0000b0  2201              MOVS     r2,#1                 ;268
0000b2  210e              MOVS     r1,#0xe               ;269
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;270
0000be  461a              MOV      r2,r3                 ;272
0000c0  210e              MOVS     r1,#0xe               ;273
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;273
0000cc  2203              MOVS     r2,#3                 ;275
0000ce  210e              MOVS     r1,#0xe               ;276
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;277
0000da  2204              MOVS     r2,#4                 ;284
0000dc  210e              MOVS     r1,#0xe               ;284
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;284
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;284
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;286  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;286
0000f4  70d0              STRB     r0,[r2,#3]            ;287
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;287
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;287
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;287
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;288
000108  2201              MOVS     r2,#1                 ;288
00010a  210e              MOVS     r1,#0xe               ;288
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;291
000116  2202              MOVS     r2,#2                 ;291
000118  210e              MOVS     r1,#0xe               ;291
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;294
000124  461a              MOV      r2,r3                 ;295
000126  210e              MOVS     r1,#0xe               ;295
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;296
000132  2204              MOVS     r2,#4                 ;296
000134  210e              MOVS     r1,#0xe               ;298
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;299
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;299
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;301  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;302
00014c  70d0              STRB     r0,[r2,#3]            ;302
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;302
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;303
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;305
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;306
000160  2201              MOVS     r2,#1                 ;306
000162  210e              MOVS     r1,#0xe               ;306
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;309
00016e  2202              MOVS     r2,#2                 ;309
000170  210e              MOVS     r1,#0xe               ;310
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;311
00017c  2203              MOVS     r2,#3                 ;311
00017e  210e              MOVS     r1,#0xe               ;311
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;314
00018a  461a              MOV      r2,r3                 ;314
00018c  210e              MOVS     r1,#0xe               ;314
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;258
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;319    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.26||+0x68
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  ipsBlckHndl PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  b510              PUSH     {r4,lr}
;;;245    {          
000002  4b15              LDR      r3,|L5.88|
000004  f04f0000          MOV      r0,#0
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000008  8018              STRH     r0,[r3,#0]
00000a  4814              LDR      r0,|L5.92|
00000c  f04f0401          MOV      r4,#1
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
000010  f44f62fa          MOV      r2,#0x7d0
000014  f9b01000          LDRSH    r1,[r0,#0]  ; ipsBlckSrc
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  4811              LDR      r0,|L5.96|
00001a  2901              CMP      r1,#1
00001c  f9b00000          LDRSH    r0,[r0,#0]
000020  d006              BEQ      |L5.48|
000022  2902              CMP      r1,#2
000024  d10f              BNE      |L5.70|
000026  490f              LDR      r1,|L5.100|
000028  f9b1101a          LDRSH    r1,[r1,#0x1a]
00002c  b160              CBZ      r0,|L5.72|
00002e  e00d              B        |L5.76|
                  |L5.48|
000030  490c              LDR      r1,|L5.100|
000032  f9b11016          LDRSH    r1,[r1,#0x16]
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000036  b908              CBNZ     r0,|L5.60|
000038  4291              CMP      r1,r2                 ;248
00003a  dc03              BGT      |L5.68|
                  |L5.60|
00003c  2801              CMP      r0,#1                 ;253
00003e  d102              BNE      |L5.70|
000040  4291              CMP      r1,r2                 ;253
000042  da00              BGE      |L5.70|
                  |L5.68|
000044  801c              STRH     r4,[r3,#0]            ;253
                  |L5.70|
000046  bd10              POP      {r4,pc}               ;253
                  |L5.72|
000048  4291              CMP      r1,r2                 ;253
00004a  dc03              BGT      |L5.84|
                  |L5.76|
00004c  2801              CMP      r0,#1                 ;254
00004e  d1fa              BNE      |L5.70|
000050  4291              CMP      r1,r2                 ;254
000052  daf8              BGE      |L5.70|
                  |L5.84|
000054  801c              STRH     r4,[r3,#0]            ;254
000056  bd10              POP      {r4,pc}
;;;319    
                          ENDP

                  |L5.88|
                          DCD      ipsBlckStat
                  |L5.92|
                          DCD      ipsBlckSrc
                  |L5.96|
                          DCD      ipsBlckLog
                  |L5.100|
                          DCD      ||.bss||+0x400

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  bat_hndl PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;245    {          
000002  20c8              MOVS     r0,#0xc8
000004  f7fffffe          BL       mess_find_unvol
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000008  493a              LDR      r1,|L6.244|
00000a  2200              MOVS     r2,#0
00000c  b3a8              CBZ      r0,|L6.122|
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  4b3a              LDR      r3,|L6.248|
000010  2401              MOVS     r4,#1
000012  6818              LDR      r0,[r3,#0]  ; mess_data
000014  28c9              CMP      r0,#0xc9
000016  d01c              BEQ      |L6.82|
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  28ca              CMP      r0,#0xca
00001a  d02f              BEQ      |L6.124|
00001c  4610              MOV      r0,r2
                  |L6.30|
00001e  eb000340          ADD      r3,r0,r0,LSL #1
000022  eb031300          ADD      r3,r3,r0,LSL #4
000026  f8012023          STRB     r2,[r1,r3,LSL #2]
00002a  f1000001          ADD      r0,r0,#1
00002e  b2c0              UXTB     r0,r0
000030  2802              CMP      r0,#2
000032  d3f4              BCC      |L6.30|
                  |L6.52|
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000034  f04f0000          MOV      r0,#0
                  |L6.56|
000038  eb000340          ADD      r3,r0,r0,LSL #1       ;248
00003c  eb031300          ADD      r3,r3,r0,LSL #4       ;253
000040  f8115023          LDRB     r5,[r1,r3,LSL #2]     ;253
000044  2d14              CMP      r5,#0x14              ;253
000046  d939              BLS      |L6.188|
000048  eb010383          ADD      r3,r1,r3,LSL #2       ;253
00004c  f883403c          STRB     r4,[r3,#0x3c]         ;254
000050  e038              B        |L6.196|
                  |L6.82|
000052  f04f0000          MOV      r0,#0                 ;254
                  |L6.86|
000056  eb000340          ADD      r3,r0,r0,LSL #1
00005a  eb031500          ADD      r5,r3,r0,LSL #4       ;255
00005e  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;255
000062  2b32              CMP      r3,#0x32              ;255
000064  d203              BCS      |L6.110|
000066  f1030301          ADD      r3,r3,#1              ;255
00006a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;255
                  |L6.110|
00006e  f1000001          ADD      r0,r0,#1              ;256
000072  b2c0              UXTB     r0,r0                 ;256
000074  2802              CMP      r0,#2                 ;256
000076  d3ee              BCC      |L6.86|
000078  e7dc              B        |L6.52|
                  |L6.122|
00007a  e029              B        |L6.208|
                  |L6.124|
00007c  f04f0000          MOV      r0,#0                 ;246
000080  685e              LDR      r6,[r3,#4]            ;257
                  |L6.130|
000082  fa04f300          LSL      r3,r4,r0              ;257
000086  421e              TST      r6,r3                 ;258
000088  d00c              BEQ      |L6.164|
00008a  eb000340          ADD      r3,r0,r0,LSL #1       ;258
00008e  eb031500          ADD      r5,r3,r0,LSL #4       ;257
000092  f8113025          LDRB     r3,[r1,r5,LSL #2]
000096  2b32              CMP      r3,#0x32              ;258
000098  d20a              BCS      |L6.176|
00009a  f1030301          ADD      r3,r3,#1              ;262
00009e  f8013025          STRB     r3,[r1,r5,LSL #2]     ;262
0000a2  e005              B        |L6.176|
                  |L6.164|
0000a4  eb000340          ADD      r3,r0,r0,LSL #1       ;265
0000a8  eb031300          ADD      r3,r3,r0,LSL #4       ;266
0000ac  f8012023          STRB     r2,[r1,r3,LSL #2]     ;266
                  |L6.176|
0000b0  f1000001          ADD      r0,r0,#1              ;268
0000b4  b2c0              UXTB     r0,r0                 ;270
0000b6  2802              CMP      r0,#2                 ;270
0000b8  d3e3              BCC      |L6.130|
0000ba  e7bb              B        |L6.52|
                  |L6.188|
0000bc  eb010383          ADD      r3,r1,r3,LSL #2       ;270
0000c0  f883203c          STRB     r2,[r3,#0x3c]         ;273
                  |L6.196|
0000c4  f1000001          ADD      r0,r0,#1              ;273
0000c8  b2c0              UXTB     r0,r0                 ;273
0000ca  2802              CMP      r0,#2                 ;273
0000cc  d3b4              BCC      |L6.56|
0000ce  bd70              POP      {r4-r6,pc}            ;276
                  |L6.208|
0000d0  f04f0000          MOV      r0,#0                 ;277
                  |L6.212|
0000d4  eb000340          ADD      r3,r0,r0,LSL #1       ;277
0000d8  eb031300          ADD      r3,r3,r0,LSL #4       ;277
0000dc  f8012023          STRB     r2,[r1,r3,LSL #2]     ;284
0000e0  eb010383          ADD      r3,r1,r3,LSL #2       ;284
0000e4  f883203c          STRB     r2,[r3,#0x3c]         ;284
0000e8  f1000001          ADD      r0,r0,#1              ;284
0000ec  b2c0              UXTB     r0,r0                 ;284
0000ee  2802              CMP      r0,#2                 ;286
0000f0  d3f0              BCC      |L6.212|
0000f2  bd70              POP      {r4-r6,pc}            ;286
;;;319    
                          ENDP

                  |L6.244|
                          DCD      bat
                  |L6.248|
                          DCD      mess_data

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  klimat_hndl PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;245    {          
000004  4d66              LDR      r5,|L7.416|
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L7.420|
000008  4c67              LDR      r4,|L7.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L7.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L7.42|
                  |L7.34|
000022  da02              BGE      |L7.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L7.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L7.424|
000030  f7fffffe          BL       gran
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L7.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;253
00003e  dd00              BLE      |L7.66|
000040  700e              STRB     r6,[r1,#0]            ;253
                  |L7.66|
000042  2400              MOVS     r4,#0                 ;253
000044  2801              CMP      r0,#1                 ;253
000046  da00              BGE      |L7.74|
000048  700c              STRB     r4,[r1,#0]            ;253
                  |L7.74|
00004a  4959              LDR      r1,|L7.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;254  ; t_box
000050  4a58              LDR      r2,|L7.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;254  ; TBOXREG
000056  4f58              LDR      r7,|L7.440|
000058  1e8b              SUBS     r3,r1,#2              ;255
00005a  4298              CMP      r0,r3                 ;255
00005c  da0f              BGE      |L7.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;255  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;255
000064  da1e              BGE      |L7.164|
000066  f1010101          ADD      r1,r1,#1              ;255
00006a  b249              SXTB     r1,r1                 ;255
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;256
000070  db18              BLT      |L7.164|
000072  8839              LDRH     r1,[r7,#0]            ;256  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;256
000078  8039              STRH     r1,[r7,#0]            ;256
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L7.164|
                  |L7.126|
00007e  4288              CMP      r0,r1                 ;257
000080  dd0f              BLE      |L7.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;257  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;258
000088  da0c              BGE      |L7.164|
00008a  f1010101          ADD      r1,r1,#1              ;258
00008e  b249              SXTB     r1,r1                 ;257
000090  7011              STRB     r1,[r2,#0]            ;257
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L7.164|
000096  8839              LDRH     r1,[r7,#0]            ;258  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;262
00009c  8039              STRH     r1,[r7,#0]            ;262
00009e  7014              STRB     r4,[r2,#0]            ;262
0000a0  e000              B        |L7.164|
                  |L7.162|
0000a2  7014              STRB     r4,[r2,#0]            ;264
                  |L7.164|
0000a4  4945              LDR      r1,|L7.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;266  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;266
0000ac  dd05              BLE      |L7.186|
0000ae  2214              MOVS     r2,#0x14              ;266
0000b0  2100              MOVS     r1,#0                 ;268
0000b2  4841              LDR      r0,|L7.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L7.202|
                  |L7.186|
0000ba  4841              LDR      r0,|L7.448|
0000bc  2100              MOVS     r1,#0                 ;270
0000be  8800              LDRH     r0,[r0,#0]            ;272  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;273
0000c2  b202              SXTH     r2,r0                 ;273
0000c4  483c              LDR      r0,|L7.440|
0000c6  f7fffffe          BL       gran
                  |L7.202|
0000ca  20f0              MOVS     r0,#0xf0              ;273
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L7.222|
0000d2  483c              LDR      r0,|L7.452|
0000d4  6801              LDR      r1,[r0,#0]            ;277  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;277
0000d8  d101              BNE      |L7.222|
0000da  6840              LDR      r0,[r0,#4]            ;284  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;284
                  |L7.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;284  ; main_vent_pos
0000e2  4839              LDR      r0,|L7.456|
0000e4  2901              CMP      r1,#1                 ;284
0000e6  dc01              BGT      |L7.236|
0000e8  7006              STRB     r6,[r0,#0]            ;284
0000ea  e000              B        |L7.238|
                  |L7.236|
0000ec  7004              STRB     r4,[r0,#0]            ;284
                  |L7.238|
0000ee  4837              LDR      r0,|L7.460|
0000f0  f8df80dc          LDR      r8,|L7.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;287  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;287
0000fc  2928              CMP      r1,#0x28              ;287
0000fe  d821              BHI      |L7.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;287  ; t_box
000104  4f33              LDR      r7,|L7.468|
000106  4281              CMP      r1,r0                 ;288
000108  dd03              BLE      |L7.274|
00010a  8838              LDRH     r0,[r7,#0]            ;288  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;290
000110  8038              STRH     r0,[r7,#0]            ;291
                  |L7.274|
000112  4831              LDR      r0,|L7.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;291  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;291
00011a  da03              BGE      |L7.292|
00011c  8838              LDRH     r0,[r7,#0]            ;292  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;292
000122  8038              STRH     r0,[r7,#0]            ;294
                  |L7.292|
000124  2206              MOVS     r2,#6                 ;295
000126  2100              MOVS     r1,#0                 ;295
000128  482a              LDR      r0,|L7.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;296  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;296
000134  dd01              BLE      |L7.314|
000136  f8886000          STRB     r6,[r8,#0]            ;298
                  |L7.314|
00013a  2801              CMP      r0,#1                 ;299
00013c  da04              BGE      |L7.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;299
000142  e001              B        |L7.328|
                  |L7.324|
000144  f8884000          STRB     r4,[r8,#0]            ;301
                  |L7.328|
000148  4824              LDR      r0,|L7.476|
00014a  4f25              LDR      r7,|L7.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;302  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;302
000154  291e              CMP      r1,#0x1e              ;303
000156  d820              BHI      |L7.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;305  ; t_box
00015c  4d21              LDR      r5,|L7.484|
00015e  4281              CMP      r1,r0                 ;306
000160  dd03              BLE      |L7.362|
000162  8828              LDRH     r0,[r5,#0]            ;306  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;306
000168  8028              STRH     r0,[r5,#0]            ;307
                  |L7.362|
00016a  481f              LDR      r0,|L7.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;309  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;310
000172  da03              BGE      |L7.380|
000174  8828              LDRH     r0,[r5,#0]            ;310  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;310
00017a  8028              STRH     r0,[r5,#0]            ;311
                  |L7.380|
00017c  2206              MOVS     r2,#6                 ;311
00017e  2100              MOVS     r1,#0                 ;311
000180  4818              LDR      r0,|L7.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;314  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;314
00018c  dd00              BLE      |L7.400|
00018e  703e              STRB     r6,[r7,#0]            ;314
                  |L7.400|
000190  2801              CMP      r0,#1
000192  da00              BGE      |L7.406|
000194  703c              STRB     r4,[r7,#0]            ;258
                  |L7.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;258
                  |L7.410|
00019a  703c              STRB     r4,[r7,#0]
00019c  e7fb              B        |L7.406|
;;;319    
                          ENDP

00019e  0000              DCW      0x0000
                  |L7.416|
                          DCD      t_box
                  |L7.420|
                          DCD      TBOXMAX
                  |L7.424|
                          DCD      av_tbox_cnt
                  |L7.428|
                          DCD      av_tbox_stat
                  |L7.432|
                          DCD      TBOXREG
                  |L7.436|
                          DCD      t_box_cnt
                  |L7.440|
                          DCD      main_vent_pos
                  |L7.444|
                          DCD      TBOXVENTMAX
                  |L7.448|
                          DCD      pos_vent
                  |L7.452|
                          DCD      mess_data
                  |L7.456|
                          DCD      mixer_vent_stat
                  |L7.460|
                          DCD      TBATDISABLE
                  |L7.464|
                          DCD      tbatdisable_stat
                  |L7.468|
                          DCD      tbatdisable_cnt
                  |L7.472|
                          DCD      TBATENABLE
                  |L7.476|
                          DCD      TLOADDISABLE
                  |L7.480|
                          DCD      tloaddisable_stat
                  |L7.484|
                          DCD      tloaddisable_cnt
                  |L7.488|
                          DCD      TLOADENABLE

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  speedChargeHndl PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  b5f8              PUSH     {r3-r7,lr}
;;;245    {          
000002  4f43              LDR      r7,|L8.272|
000004  4d43              LDR      r5,|L8.276|
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  2400              MOVS     r4,#0
000008  8838              LDRH     r0,[r7,#0]  ; speedChIsOn
00000a  b198              CBZ      r0,|L8.52|
00000c  4a42              LDR      r2,|L8.280|
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  6811              LDR      r1,[r2,#0]  ; speedChTimeCnt
000010  f1010101          ADD      r1,r1,#1
000014  6011              STR      r1,[r2,#0]  ; speedChTimeCnt
000016  4841              LDR      r0,|L8.284|
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgTimeInHour
00001c  ebc01340          RSB      r3,r0,r0,LSL #5
000020  ebc32000          RSB      r0,r3,r0,LSL #8
000024  ebb11f00          CMP      r1,r0,LSL #4
000028  db00              BLT      |L8.44|
00002a  803c              STRH     r4,[r7,#0]
                  |L8.44|
00002c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
00002e  b108              CBZ      r0,|L8.52|
000030  803c              STRH     r4,[r7,#0]
000032  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L8.52|
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
000034  483a              LDR      r0,|L8.288|
000036  2601              MOVS     r6,#1
000038  8800              LDRH     r0,[r0,#0]            ;248  ; speedChrgAvtEn
00003a  b300              CBZ      r0,|L8.126|
00003c  8838              LDRH     r0,[r7,#0]            ;253  ; speedChIsOn
00003e  b9f0              CBNZ     r0,|L8.126|
000040  4838              LDR      r0,|L8.292|
000042  4939              LDR      r1,|L8.296|
000044  f9b00000          LDRSH    r0,[r0,#0]            ;253  ; load_U
000048  f9b11000          LDRSH    r1,[r1,#0]            ;253  ; u_necc
00004c  4288              CMP      r0,r1                 ;254
00004e  da16              BGE      |L8.126|
000050  1a08              SUBS     r0,r1,r0              ;254
000052  4936              LDR      r1,|L8.300|
000054  f9b11000          LDRSH    r1,[r1,#0]            ;254  ; speedChrgDU
000058  4288              CMP      r0,r1                 ;255
00005a  dd10              BLE      |L8.126|
00005c  4834              LDR      r0,|L8.304|
00005e  210a              MOVS     r1,#0xa               ;255
000060  f9b00000          LDRSH    r0,[r0,#0]            ;255  ; Ib_ips_termokompensat
000064  fb90f0f1          SDIV     r0,r0,r1              ;255
000068  4932              LDR      r1,|L8.308|
00006a  8809              LDRH     r1,[r1,#0]            ;255  ; IZMAX
00006c  1a40              SUBS     r0,r0,r1
00006e  b200              SXTH     r0,r0                 ;256
000070  f7fffffe          BL       abs
000074  2805              CMP      r0,#5                 ;256
000076  da02              BGE      |L8.126|
000078  8828              LDRH     r0,[r5,#0]            ;256  ; speedChrgBlckStat
00007a  b900              CBNZ     r0,|L8.126|
00007c  803e              STRH     r6,[r7,#0]            ;246
                  |L8.126|
00007e  482e              LDR      r0,|L8.312|
000080  f9b00000          LDRSH    r0,[r0,#0]            ;257  ; speedChrgBlckSrc
000084  2801              CMP      r0,#1                 ;257
000086  d003              BEQ      |L8.144|
000088  2802              CMP      r0,#2                 ;258
00008a  d001              BEQ      |L8.144|
00008c  802c              STRH     r4,[r5,#0]            ;257
00008e  e026              B        |L8.222|
                  |L8.144|
000090  802c              STRH     r4,[r5,#0]            ;257
000092  4b2a              LDR      r3,|L8.316|
000094  492a              LDR      r1,|L8.320|
000096  f44f62fa          MOV      r2,#0x7d0             ;258
00009a  2801              CMP      r0,#1                 ;262
00009c  d002              BEQ      |L8.164|
00009e  2802              CMP      r0,#2                 ;262
0000a0  d00f              BEQ      |L8.194|
0000a2  e01c              B        |L8.222|
                  |L8.164|
0000a4  f9b30000          LDRSH    r0,[r3,#0]            ;265  ; speedChrgBlckLog
0000a8  b918              CBNZ     r0,|L8.178|
0000aa  f9b13016          LDRSH    r3,[r1,#0x16]         ;266  ; adc_buff_
0000ae  4293              CMP      r3,r2                 ;266
0000b0  dc05              BGT      |L8.190|
                  |L8.178|
0000b2  2801              CMP      r0,#1                 ;269
0000b4  d113              BNE      |L8.222|
0000b6  f9b10016          LDRSH    r0,[r1,#0x16]         ;270  ; adc_buff_
0000ba  4290              CMP      r0,r2                 ;270
0000bc  da0f              BGE      |L8.222|
                  |L8.190|
0000be  802e              STRH     r6,[r5,#0]            ;272
0000c0  e00d              B        |L8.222|
                  |L8.194|
0000c2  f9b30000          LDRSH    r0,[r3,#0]            ;273  ; speedChrgBlckLog
0000c6  b918              CBNZ     r0,|L8.208|
0000c8  f9b1301a          LDRSH    r3,[r1,#0x1a]         ;273  ; adc_buff_
0000cc  4293              CMP      r3,r2                 ;275
0000ce  dc05              BGT      |L8.220|
                  |L8.208|
0000d0  2801              CMP      r0,#1                 ;277
0000d2  d104              BNE      |L8.222|
0000d4  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;277  ; adc_buff_
0000d8  4290              CMP      r0,r2                 ;277
0000da  da00              BGE      |L8.222|
                  |L8.220|
0000dc  802e              STRH     r6,[r5,#0]            ;284
                  |L8.222|
0000de  8828              LDRH     r0,[r5,#0]            ;284  ; speedChrgBlckStat
0000e0  4918              LDR      r1,|L8.324|
0000e2  2801              CMP      r0,#1                 ;284
0000e4  d001              BEQ      |L8.234|
0000e6  700c              STRB     r4,[r1,#0]            ;284
                  |L8.232|
0000e8  bdf8              POP      {r3-r7,pc}            ;284
                  |L8.234|
0000ea  7808              LDRB     r0,[r1,#0]            ;284  ; speedChrgShowCnt
0000ec  f1000001          ADD      r0,r0,#1              ;284
0000f0  b2c0              UXTB     r0,r0                 ;286
0000f2  7008              STRB     r0,[r1,#0]            ;286
0000f4  281e              CMP      r0,#0x1e              ;287
0000f6  d3f7              BCC      |L8.232|
0000f8  700c              STRB     r4,[r1,#0]            ;287
0000fa  f2413088          MOV      r0,#0x1388            ;287
0000fe  9000              STR      r0,[sp,#0]            ;287
000100  a311              ADR      r3,|L8.328|
000102  a217              ADR      r2,|L8.352|
000104  a11c              ADR      r1,|L8.376|
000106  a022              ADR      r0,|L8.400|
000108  f7fffffe          BL       show_mess
00010c  bdf8              POP      {r3-r7,pc}            ;290
;;;319    
                          ENDP

00010e  0000              DCW      0x0000
                  |L8.272|
                          DCD      speedChIsOn
                  |L8.276|
                          DCD      speedChrgBlckStat
                  |L8.280|
                          DCD      speedChTimeCnt
                  |L8.284|
                          DCD      speedChrgTimeInHour
                  |L8.288|
                          DCD      speedChrgAvtEn
                  |L8.292|
                          DCD      load_U
                  |L8.296|
                          DCD      u_necc
                  |L8.300|
                          DCD      speedChrgDU
                  |L8.304|
                          DCD      Ib_ips_termokompensat
                  |L8.308|
                          DCD      IZMAX
                  |L8.312|
                          DCD      speedChrgBlckSrc
                  |L8.316|
                          DCD      speedChrgBlckLog
                  |L8.320|
                          DCD      ||.bss||+0x400
                  |L8.324|
                          DCD      speedChrgShowCnt
                  |L8.328|
000148  20202020          DCB      "                    ",0
00014c  20202020
000150  20202020
000154  20202020
000158  20202020
00015c  00      
00015d  00                DCB      0
00015e  00                DCB      0
00015f  00                DCB      0
                  |L8.352|
000160  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
000164  20c7c0cf
000168  d0c5d9c5
00016c  cd212121
000170  20202020
000174  00      
000175  00                DCB      0
000176  00                DCB      0
000177  00                DCB      0
                  |L8.376|
000178  20202020          DCB      "       ",199,192,208,223,196,"        ",0
00017c  202020c7
000180  c0d0dfc4
000184  20202020
000188  20202020
00018c  00      
00018d  00                DCB      0
00018e  00                DCB      0
00018f  00                DCB      0
                  |L8.400|
000190  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
000194  20d3d1ca
000198  ced0c5cd
00019c  cddbc920
0001a0  20202020
0001a4  00      
0001a5  00                DCB      0
0001a6  00                DCB      0
0001a7  00                DCB      0

                          AREA ||area_number.9||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.9||, ||.text||
                  speedChargeStartStop PROC
;;;243    //-----------------------------------------------
;;;244    void ke_start(char in)
000000  b508              PUSH     {r3,lr}
;;;245    {          
000002  480c              LDR      r0,|L9.52|
000004  2100              MOVS     r1,#0
;;;246    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
000008  b10a              CBZ      r2,|L9.14|
00000a  8001              STRH     r1,[r0,#0]
00000c  bd08              POP      {r3,pc}
                  |L9.14|
;;;247    
;;;248    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  4a0a              LDR      r2,|L9.56|
000010  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
000012  b14a              CBZ      r2,|L9.40|
000014  f44f60fa          MOV      r0,#0x7d0
;;;249    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;250    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;251    #endif
;;;252    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  9000              STR      r0,[sp,#0]
00001a  a308              ADR      r3,|L9.60|
00001c  a20d              ADR      r2,|L9.84|
00001e  a113              ADR      r1,|L9.108|
000020  a018              ADR      r0,|L9.132|
000022  f7fffffe          BL       show_mess
000026  bd08              POP      {r3,pc}
                  |L9.40|
000028  f04f0201          MOV      r2,#1
00002c  8002              STRH     r2,[r0,#0]
00002e  481b              LDR      r0,|L9.156|
000030  6001              STR      r1,[r0,#0]  ; speedChTimeCnt
000032  bd08              POP      {r3,pc}
;;;253    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;254    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;255    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;256    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;257    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;258    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;259    else 
;;;260    	{
;;;261    
;;;262    	ke_start_stat=kssYES;
;;;263    
;;;264    	spc_stat=spcKE;
;;;265    	__ee_spc_stat=spcKE;
;;;266    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;267    	
;;;268    	spc_bat=in;
;;;269    	__ee_spc_bat=in;
;;;270    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;271    
;;;272    	bat[in]._zar_cnt_ke=0;
;;;273    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;274    	
;;;275    	spc_phase=0;
;;;276    	__ee_spc_phase=0;
;;;277    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;278    
;;;279    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;280    
;;;281    		{					
;;;282    		signed short temp_temp;
;;;283    		signed char temp;
;;;284    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;285    		    
;;;286    		temp=LPC_RTC->YEAR;
;;;287    		gran_char(&temp,1,99);
;;;288    		*((char*)(&(ke_date[0])))=temp;
;;;289    			
;;;290    		temp=LPC_RTC->MONTH;
;;;291    		gran_char(&temp,1,12);
;;;292    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;293    		
;;;294    		temp=LPC_RTC->DOM;
;;;295    		gran_char(&temp,1,31);
;;;296    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;297    				
;;;298    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;299    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;300    
;;;301    		temp=LPC_RTC->HOUR;
;;;302    		gran_char(&temp,0,23);
;;;303    		*((char*)(&(ke_date[1])))=temp;
;;;304                   
;;;305    		temp=LPC_RTC->MIN;
;;;306    		gran_char(&temp,0,59);
;;;307    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;308    	          
;;;309    		temp=LPC_RTC->SEC;
;;;310    		gran_char(&temp,0,59);
;;;311    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;312    			
;;;313    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;314    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;315    		}
;;;316    
;;;317    	}
;;;318    }
;;;319    
                          ENDP

                  |L9.52|
                          DCD      speedChIsOn
                  |L9.56|
                          DCD      speedChrgBlckStat
                  |L9.60|
00003c  20202020          DCB      "                    ",0
000040  20202020
000044  20202020
000048  20202020
00004c  20202020
000050  00      
000051  00                DCB      0
000052  00                DCB      0
000053  00                DCB      0
                  |L9.84|
000054  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
000058  e7e0e1eb
00005c  eeeae8f0
000060  eee2e0ed
000064  21      
000065  20202000          DCB      "   ",0
000069  00                DCB      0
00006a  00                DCB      0
00006b  00                DCB      0
                  |L9.108|
00006c  20202020          DCB      "       ",231,224,240,255,228,"        ",0
000070  202020e7
000074  e0f0ffe4
000078  20202020
00007c  20202020
000080  00      
000081  00                DCB      0
000082  00                DCB      0
000083  00                DCB      0
                  |L9.132|
000084  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
000088  20d3f1ea
00008c  eef0e5ed
000090  edfbe920
000094  20202020
000098  00      
000099  00                DCB      0
00009a  00                DCB      0
00009b  00                DCB      0
                  |L9.156|
                          DCD      speedChTimeCnt

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32
                  cntrl_stat_buff
                          %        64

                          AREA ||area_number.12||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.13||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.13||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.19||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.20||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.21||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.26||, DATA, ALIGN=2

                          EXPORTAS ||area_number.26||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  cntrl_stat_buff_ptr
00000b  00                DCB      0x00
                  bAVG
00000c  00                DCB      0x00
                  avg_cnt_
00000d  00                DCB      0x00
                  avg_num
00000e  00                DCB      0x00
                  bAVG_BLOCK
00000f  00                DCB      0x00
                  bAVG_DIR
000010  00                DCB      0x00
                  num_of_wrks_bps
000011  00                DCB      0x00
                  num_necc_up
000012  00                DCB      0x00
                  num_necc_down
000013  00                DCB      0x00
                  sh_cnt0
000014  00                DCB      0x00
                  b1Hz_sh
000015  00                DCB      0x00
                  spc_stat
000016  00                DCB      0x00
                  spc_bat
000017  00                DCB      0x00
                  spc_phase
000018  00                DCB      0x00
                  ke_start_stat
000019  00                DCB      0x00
                  numOfForvardBps
00001a  00                DCB      0x00
                  numOfForvardBps_old
00001b  00                DCB      0x00
                  numOfForvardBps_minCnt
00001c  00                DCB      0x00
                  cntrl_hndl_plazma
00001d  00                DCB      0x00
                  cntrl_stat
00001e  0258              DCW      0x0258
                  cntrl_stat_old
000020  0258              DCW      0x0258
                  avg_main_cnt
000022  0014              DCW      0x0014
                  u_out_reg_main_cnt
000024  000a              DCW      0x000a
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  cntrl_stat_buff_
00003e  0000              DCB      0x00,0x00
                  samokalibr_cnt
000040  0000              DCB      0x00,0x00
                  main_kb_cnt
000042  0000              DCB      0x00,0x00
                  bps_on_mask
000044  0000              DCB      0x00,0x00
                  bps_off_mask
000046  0000              DCB      0x00,0x00
                  __ee_spc_stat
000048  0000              DCB      0x00,0x00
                  __ee_spc_bat
00004a  0000              DCB      0x00,0x00
                  __ee_spc_phase
00004c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00004e  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000050  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000052  0000              DCB      0x00,0x00
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000070  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000072  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
00007c  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=2

                          EXPORTAS ||area_number.37||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=1

                          EXPORTAS ||area_number.48||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.49||, DATA, ALIGN=1

                          EXPORTAS ||area_number.49||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  kb_start_ips
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=1

                          EXPORTAS ||area_number.56||, ||.data||
                  ibat_ips
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.57||, DATA, ALIGN=1

                          EXPORTAS ||area_number.57||, ||.data||
                  ibat_ips_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=0

                          EXPORTAS ||area_number.60||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.61||, DATA, ALIGN=0

                          EXPORTAS ||area_number.61||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=1

                          EXPORTAS ||area_number.65||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.66||, DATA, ALIGN=0

                          EXPORTAS ||area_number.66||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
